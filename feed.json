{"title":"Aotu.io","description":"å‡¹å‡¸å®éªŒå®¤(Aotu.io) å§‹å»ºäº2015å¹´ï¼Œæ˜¯ä¸€ä¸ªå¹´è½»åŸºæƒ…çš„æŠ€æœ¯ç¤¾åŒºç»„ç»‡ã€‚<br/>O2é¢å‘å¤šç»ˆç«¯æŠ€æœ¯ä½“ç³»ï¼Œè‡´åŠ›äºæ„å»ºæ²‰æ·€ä¸åˆ†äº«åŒ…æ‹¬ä½†ä¸é™äºäº¤äº’ã€é¡µé¢åˆ¶ä½œæŠ€å·§ã€å‰ç«¯å¼€å‘ã€åŸç”ŸAPPå¼€å‘ç­‰æ–¹é¢çš„ä¸“ä¸šçŸ¥è¯†åŠæ¡ˆä¾‹ã€‚","language":"zh-cn","link":"https://aotu.io","pubDate":"Tue, 03 Dec 2019 11:25:00 GMT","lastBuildDate":"Tue, 03 Dec 2019 12:43:07 GMT","generator":"hexo-generator-json-feed","webMaster":"å‡¹å‡¸å®éªŒå®¤","items":[{"title":"å¾®ä¿¡è´­ç‰©å…¥å£ã€Œäº¬å–œã€é¦–é¡µè·¨ç«¯å¼€å‘ä¸ä¼˜åŒ–å®è·µ","link":"https://aotu.io/notes/2019/12/03/jingxi-index/","description":"èƒŒæ™¯ä»‹ç»éšç€ä»Šå¹´çš„åŒåä¸€è½ä¸‹å¸·å¹•ï¼Œäº¬å–œï¼ˆåŸäº¬ä¸œæ‹¼è´­ï¼‰ä¹Ÿè¿æ¥äº†é¦–æ·ã€‚åŒåä¸€å‰å¤•å¾®ä¿¡è´­ç‰©ä¸€çº§å…¥å£åˆ‡æ¢ä¸ºäº¬å–œå°ç¨‹åºï¼Œé¡¹ç›®é¡ºåˆ©é€šè¿‡è¿‘äº¿çº§çš„æµé‡è€ƒéªŒï¼Œåœ¨æ­¤ä¸å¤§å®¶åˆ†äº«ä¸€ç‚¹è‡ªå·±å‚ä¸çš„å·¥ä½œã€‚","pubDate":"Tue, 03 Dec 2019 11:25:00 GMT","guid":"https://aotu.io/notes/2019/12/03/jingxi-index/","category":"Webå¼€å‘"},{"title":"Sketch æ’ä»¶å¼€å‘å®è·µ","link":"https://aotu.io/notes/2019/10/31/sketch-plugin/","description":"Sketch æ˜¯éå¸¸æµè¡Œçš„ UI è®¾è®¡å·¥å…·ï¼Œ2014å¹´éšç€ Sketch V43 ç‰ˆæœ¬å¢åŠ  Symbols åŠŸèƒ½ã€å¼€æ”¾å¼€å‘è€…æƒé™ï¼Œå¸å¼•äº†å¤§æ‰¹å¼€å‘è€…çš„å…³æ³¨ã€‚ ç›®å‰ Sketch å¼€å‘æœ‰ä¸¤å¤§çƒ­é—¨è¯¾é¢˜ï¼šâ‘  React ç»„ä»¶æ¸²æŸ“æˆ sketch ç”± airbnb å›¢é˜Ÿå‘èµ·ï¼Œâ‘¡ ä½¿ç”¨ skpm æ„å»ºå¼€å‘ Sketch æ’ä»¶ã€‚ Sketch æ’ä»¶å¼€å‘ç›¸å…³èµ„æ–™è¾ƒå°‘ä¸”ä¸å¤ªå®Œå–„ï¼Œæˆ‘ä»¬å¼€å‘æ’ä»¶è¿‡ç¨‹ä¸­å¯ä»¥é‡ç‚¹å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œåªæ˜¯æœ‰äº›é™ˆæ—§ã€‚å®˜æ–¹æœ‰æä¾› JavaScript API å€ŸåŠ© CocoaScript bridge è®¿é—®å†…éƒ¨ Sketch API å’Œ macOS æ¡†æ¶è¿›è¡Œå¼€å‘æ’ä»¶ï¼ˆSketch 53~56 ç‰ˆ JS API åœ¨ native MacOS å’Œ Sketch API æš´éœ²çš„ç‰¹æ®Šç¯å¢ƒä¸­è¿è¡Œï¼‰ï¼Œæä¾›çš„åº•å±‚ API åŠŸèƒ½æœ‰äº›è–„å¼±ï¼Œæ›´æ·±å…¥çš„å°±éœ€è¦äº†è§£æŒæ¡ Objective-C ã€ CocoaScript ã€AppKitã€Sketch-Headersã€‚ Sketch æ’ä»¶ç»“æ„Sketch Plugin æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª scripts çš„é›†åˆï¼Œæ¯ä¸ª script å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ª commandsã€‚Sketch Plugin æ˜¯ä»¥ .sketchplugin æ‰©å±•åçš„æ–‡ä»¶å¤¹ï¼ŒåŒ…å«æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒPlugin å®é™…ä¸Šæ˜¯ OS X packageï¼Œç”¨ä½œä¸º OS X bundleã€‚ Bundle å…·æœ‰æ ‡å‡†åŒ–åˆ†å±‚ç»“æ„çš„ç›®å½•ï¼Œå…¶ä¿å­˜å¯æ‰§è¡Œä»£ç å’Œè¯¥ä»£ç ä½¿ç”¨çš„èµ„æºã€‚ Plugin Bundle æ–‡ä»¶å¤¹ç»“æ„Bundles åŒ…å«ä¸€ä¸ª manifest.json æ–‡ä»¶ï¼Œä¸€ä¸ªæˆ–å¤šä¸ª scripts æ–‡ä»¶ï¼ˆåŒ…å«ç”¨ CocoaScript æˆ– JavaScript ç¼–å†™çš„è„šæœ¬ï¼‰ï¼Œå®ƒå®ç°äº† Plugins èœå•ä¸­æ˜¾ç¤ºçš„å‘½ä»¤ï¼Œä»¥åŠä»»æ„æ•°é‡çš„å…±äº«åº“è„šæœ¬å’Œèµ„æºæ–‡ä»¶ã€‚ 12345678910mrwalker.sketchplugin Contents/ Sketch/ manifest.json shared.js Select Circles.cocoascript Select Rectangles.cocoascript Resources/ Screenshot.png Icon.png æœ€å…³é”®çš„æ–‡ä»¶æ˜¯ manifest.json æ–‡ä»¶ï¼Œæä¾›æœ‰å…³æ’ä»¶çš„ä¿¡æ¯ã€‚ å°è´´å£«ï¼š Sketch æ’ä»¶åŒ…å¯ä»¥ä½¿ç”¨ skpm åœ¨æ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæˆï¼Œskpm æä¾› Sketch å®˜æ–¹æ’ä»¶æ¨¡ç‰ˆ: skpm/skpm - The simplest possible plugin setup. (default) skpm/with-prettier - A plugin setup featuring linting with ESLint and code formatting with Prettier. skpm/with-datasupplier - A template to create DataSupplier plugins (check our blog for more info) skpm/with-webview - A template to create plugins displaying some rich UI in a WebView (check sketch-module-web-view for more info) ğŸ’ Tip: Any Github repo with a â€˜templateâ€™ folder can be used as a custom template: skpm create &lt;project-name&gt; --template=&lt;username&gt;/&lt;repository&gt; Manifest manifest.json æ–‡ä»¶æä¾›æœ‰å…³æ’ä»¶çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ä½œè€…ï¼Œæè¿°ï¼Œå›¾æ ‡ã€ä»ä½•å¤„è·å–æœ€æ–°æ›´æ–°ã€å®šä¹‰çš„å‘½ä»¤ (commandsï¼‰ ã€è°ƒç”¨èœå•é¡¹ (menu) ä»¥åŠèµ„æºçš„å…ƒæ•°æ®ã€‚ 123456789101112131415161718192021222324252627282930313233&#123; \"name\": \"Select Shapes\", \"description\": \"Plugins to select and deselect shapes\", \"author\": \"Joe Bloggs\", \"homepage\": \"https://github.com/example/sketchplugins\", \"version\": \"1.0\", \"identifier\": \"com.example.sketch.shape-plugins\", \"appcast\": \"https://excellent.sketchplugin.com/excellent-plugin-appcast.xml\", \"compatibleVersion\": \"3\", \"bundleVersion\": 1, \"commands\": [ &#123; \"name\": \"All\", \"identifier\": \"all\", \"shortcut\": \"ctrl shift a\", \"script\": \"shared.js\", \"handler\": \"selectAll\" &#125;, &#123; \"name\": \"Circles\", \"identifier\": \"circles\", \"script\": \"Select Circles.cocoascript\" &#125;, &#123; \"name\": \"Rectangles\", \"identifier\": \"rectangles\", \"script\": \"Select Rectangles.cocoascript\" &#125; ], \"menu\": &#123; \"items\": [\"all\", \"circles\", \"rectangles\"] &#125;&#125; Commandså£°æ˜ä¸€ç»„ command çš„ä¿¡æ¯ï¼Œæ¯ä¸ª command ä»¥ Dictionary æ•°æ®ç»“æ„å½¢å¼å­˜åœ¨ã€‚ script : å®ç°å‘½ä»¤åŠŸèƒ½çš„å‡½æ•°æ‰€åœ¨çš„è„šæœ¬ handler : å‡½æ•°åï¼Œè¯¥å‡½æ•°å®ç°å‘½ä»¤çš„åŠŸèƒ½ã€‚Sketch åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šä¼ å…¥ context ä¸Šä¸‹æ–‡å‚æ•°ã€‚è‹¥æœªæŒ‡å®š handlerï¼ŒSketch ä¼šé»˜è®¤è°ƒç”¨å¯¹åº” script ä¸­ onRun å‡½æ•° shortcutï¼šå‘½ä»¤çš„å¿«æ·é”® nameï¼šæ˜¾ç¤ºåœ¨ Sketch Plugin èœå•ä¸­ identifier : å”¯ä¸€æ ‡è¯†ï¼Œå»ºè®®ç”¨ com.xxxx.xxx æ ¼å¼ï¼Œä¸è¦è¿‡é•¿ MenuSketch åŠ è½½æ’ä»¶ä¼šæ ¹æ®æŒ‡å®šçš„ä¿¡æ¯ï¼Œåœ¨èœå•æ ä¸­æœ‰åºæ˜¾ç¤ºå‘½ä»¤åã€‚ åœ¨äº†è§£äº† Sketch æ’ä»¶ç»“æ„ä¹‹åï¼Œæˆ‘ä»¬å†æ¥äº†è§£ä¸€ä¸‹ï¼Œsketchæä¾›çš„å®˜æ–¹ APIï¼š Actions APIï¼Œ Javascript APIã€‚ Sketch Actions APISketch Actions API ç”¨äºç›‘å¬ç”¨æˆ·æ“ä½œè¡Œä¸ºè€Œè§¦å‘äº‹ä»¶ï¼Œä¾‹å¦‚ OpenDocumenï¼ˆæ‰“å¼€æ–‡æ¡£ï¼‰ã€CloseDocumentï¼ˆå…³é—­æ–‡æ¡£ï¼‰ã€Shutdownï¼ˆå…³é—­æ’ä»¶ï¼‰ã€TextChangedï¼ˆæ–‡æœ¬å˜åŒ–ï¼‰ç­‰ï¼Œå…·ä½“è¯¦è§å®˜ç½‘ï¼šhttps://developer.sketch.com/reference/action/ register Actions manifest.json æ–‡ä»¶ï¼Œé…ç½®ç›¸åº” handlersã€‚ ç¤ºä¾‹ï¼šå½“ OpenDocument äº‹ä»¶è¢«è§¦å‘æ—¶è°ƒç”¨ onOpenDocument handler ã€‚ 1234567891011121314\"commands\" : [ ... &#123; \"script\" : \"my-action-listener.js\", \"name\" : \"My Action Listener\", \"handlers\" : &#123; \"actions\": &#123; \"OpenDocument\": \"onOpenDocument\" &#125; &#125;, \"identifier\" : \"my-action-listener-identifier\" &#125; ...], my-action-listener.js 123export function onOpenDocument(context) &#123; context.actionContext.document.showMessage('Document Opened')&#125; Action Context Action äº‹ä»¶è§¦å‘æ—¶ä¼šå°† context.actionContext ä¼ é€’ç»™ç›¸åº” handlerã€‚æ³¨æ„æœ‰äº› Action åŒ…å«ä¸¤ä¸ªçŠ¶æ€begin å’Œ finishï¼Œä¾‹å¦‚ SelectionChangedï¼Œéœ€åˆ†åˆ«è®¢é˜… SelectionChanged.begin å’Œ SelectionChanged.finishï¼Œå¦åˆ™ä¼šè§¦å‘ä¸¤æ¬¡äº‹ä»¶ã€‚ Sketch JS APISketch æ’ä»¶å¼€å‘å¤§æ¦‚æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼šâ‘  çº¯ä½¿ç”¨ CocoaScript è„šæœ¬è¿›è¡Œå¼€å‘ï¼Œâ‘¡ é€šè¿‡ Javascript + CocoaScript çš„æ··åˆå¼€å‘æ¨¡å¼ï¼Œ â‘¢ é€šè¿‡ AppKit + Objective-C è¿›è¡Œå¼€å‘ã€‚Sketch å®˜æ–¹å»ºè®®ä½¿ç”¨ JavaScript API ç¼–å†™ Sketch æ’ä»¶ï¼Œä¸”å®˜æ–¹é’ˆå¯¹ Sketch Native API å°è£…äº†ä¸€å¥— JS APIï¼Œç›®å‰è¿˜æœªæ¶µç›–æ‰€æœ‰åœºæ™¯ï¼Œ è‹¥éœ€è¦æ›´ä¸°å¯Œçš„åº•å±‚ API éœ€ç»“åˆ CocoaScript è¿›è¡Œå®ç°ã€‚é€šè¿‡ JS API å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯¹ Sketch ä¸­ Documentã€Artboardã€Groupã€Layer è¿›è¡Œç›¸å…³æ“ä½œä»¥åŠå¯¼å…¥å¯¼å‡ºç­‰ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¼å®¹æ€§ï¼Œ JS API åŸç†å›¾å¦‚ä¸‹ï¼š CocoaScript CocoaScript å®ç° JavaScript è¿è¡Œç¯å¢ƒåˆ° Objective-C è¿è¡Œæ—¶çš„æ¡¥æ¥åŠŸèƒ½ï¼Œå¯é€šè¿‡æ¡¥æ¥å™¨ç¼–å†™ JavaScript å¤–éƒ¨è„šæœ¬è®¿é—®å†…éƒ¨ Sketch API å’Œ macOS æ¡†æ¶åº•å±‚ä¸°å¯Œçš„ API åŠŸèƒ½ã€‚ å°è´´å£«ï¼š Mocha å®ç°æä¾› JavaScript è¿è¡Œç¯å¢ƒåˆ° Objective-C è¿è¡Œæ—¶çš„æ¡¥æ¥åŠŸèƒ½å·²åŒ…å«åœ¨CocoaScriptä¸­ã€‚ CocoaScript å»ºç«‹åœ¨ Apple çš„ JavaScriptCore ä¹‹ä¸Šï¼Œè€Œ JavaScriptCore æ˜¯ä¸º Safari æä¾›æ”¯æŒçš„ JavaScript å¼•æ“ï¼Œä½¿ç”¨ CocoaScript ç¼–å†™ä»£ç å®é™…ä¸Šå°±æ˜¯åœ¨ç¼–å†™ JavaScriptã€‚CocoaScript åŒ…æ‹¬æ¡¥æ¥å™¨ï¼Œå¯ä»¥ä» JavaScript è®¿é—® Apple çš„ Cocoa æ¡†æ¶ã€‚ å€ŸåŠ© CocoaScript ä½¿ç”¨ JavaScript è°ƒ Objective-C è¯­æ³•: æ–¹æ³•è°ƒç”¨ç”¨ â€˜.â€™ è¯­æ³• Objective-C å±æ€§è®¾ç½® Getter: object.name() Setter: object.setName(&#39;Sketch&#39;)ï¼Œobject.name=&#39;sketch&#39; å‚æ•°éƒ½æ”¾åœ¨ â€˜ ( ) â€™ é‡Œ Objective-C ä¸­ â€˜ : â€˜ï¼ˆå‚æ•°ä¸å‡½æ•°ååˆ†å‰²ç¬¦ï¼‰ è½¬æ¢ä¸º â€˜ _ â€˜ï¼Œæœ€åä¸€ä¸ªä¸‹åˆ’çº¿æ˜¯å¯é€‰çš„ è¿”å›å€¼ï¼ŒJavaScript ç»Ÿä¸€ç”¨ var/const/let è®¾ç½®ç±»å‹ æ³¨æ„ï¼šè¯¦ç»† Objective-C to JavaScript è¯·å‚è€ƒ Mocha æ–‡æ¡£ ç¤ºä¾‹: 1234567891011121314151617181920212223// oc: MSPlugin çš„æ¥å£ valueForKey:onLayer:NSString * value = [command valueForKey:kAutoresizingMask onLayer:currentLayer];// cocoascript:const value = command.valueForKey_onLayer(kAutoresizingMask, currentLayer);// oc:const app = [NSApplication sharedApplication];[app displayDialog:msg withTitle:title];// cocoascript:const app = NSApplication.sharedApplication();app.displayDialog_withTitle(msg, title)// oc:const openPanel = [NSOpenPanel openPanel][openPanel setTitle: \"Choose a locationâ€¦\"][openPanel setPrompt: \"Export\"];// cocoascript:const openPanel = NSOpenPanel.openPanelopenPanel.setTitle(\"Choose a locationâ€¦\")openPanel.setPrompt(\"Export\") Objective-C ClassesSketch æ’ä»¶ç³»ç»Ÿå¯ä»¥å®Œå…¨è®¿é—®åº”ç”¨ç¨‹åºçš„å†…éƒ¨ç»“æ„å’Œ macOS ä¸­çš„æ ¸å¿ƒæ¡†æ¶ã€‚Sketch æ˜¯ç”¨ Objective-C æ„å»ºçš„ï¼Œå…¶ Objective-C ç±»é€šè¿‡ Bridge (CocoaScript/mocha) æä¾› Javascript API è°ƒç”¨ï¼Œç®€å•çš„äº†è§£ Sketch æš´éœ²çš„ç›¸å…³ç±»ä»¥åŠç±»æ–¹æ³•ï¼Œå¯¹æˆ‘ä»¬å¼€å‘æ’ä»¶éå¸¸æœ‰å¸®åŠ©ã€‚ ä½¿ç”¨ Bridge å®šä¹‰çš„ä¸€äº›å†…çœæ–¹æ³•æ¥è®¿é—®ä»¥ä¸‹ä¿¡æ¯ï¼š 123456789101112131415String(context.document.class()) // MSDocumentconst mocha = context.document.class().mocha()mocha.properties() // array of MSDocument specific properties defined on a MSDocument instancemocha.propertiesWithAncestors() // array of all the properties defined on a MSDocument instancemocha.instanceMethods() // array of methods defined on a MSDocument instancemocha.instanceMethodsWithAncestors()mocha.classMethods() // array of methods defined on the MSDocument classmocha.classMethodsWithAncestors()mocha.protocols() // array of protocols the MSDocument class inherits frommocha.protocolsWithAncestors() Contextå½“è¾“å…¥æ’ä»¶å®šåˆ¶çš„å‘½ä»¤æ—¶ï¼ŒSketch ä¼šå»å¯»æ‰¾æ”¹å‘½ä»¤å¯¹åº”çš„å®ç°å‡½æ•°ï¼Œ å¹¶ä¼ å…¥ context å˜é‡ã€‚contextåŒ…å«ä»¥ä¸‹å˜é‡ï¼š command: MSPluginCommand å¯¹è±¡ï¼Œå½“å‰æ‰§è¡Œå‘½ä»¤ document: MSDocument å¯¹è±¡ ï¼Œå½“å‰æ–‡æ¡£ plugin: MSPluginBundle å¯¹è±¡ï¼Œå½“å‰çš„æ’ä»¶ bundleï¼ŒåŒ…å«å½“å‰è¿è¡Œçš„è„šæœ¬ scriptPath: NSString å½“å‰æ‰§è¡Œè„šæœ¬çš„ç»å¯¹è·¯å¾„ scriptURL: å½“å‰æ‰§è¡Œè„šæœ¬çš„ç»å¯¹è·¯å¾„ï¼Œè·Ÿ scriptPath ä¸åŒçš„æ˜¯å®ƒæ˜¯ä¸ª NSURL å¯¹è±¡ selection: ä¸€ä¸ª NSArray å¯¹è±¡ï¼ŒåŒ…å«äº†å½“å‰é€‰æ‹©çš„æ‰€æœ‰å›¾å±‚ã€‚æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ MSLayer å¯¹è±¡ å°è´´å£«ï¼šMS æ‰“å¤´ç±»åä¸º Sketch å°è£…ç±»å¦‚å›¾å±‚åŸºç±» MSLayer)ã€æ–‡æœ¬å±‚åŸºç±» MSTextLayer) ã€ä½å›¾å±‚åŸºç±» MSBitmapLayerï¼ŒNS æ‰“å¤´ä¸º AppKit ä¸­å«æœ‰çš„ç±» 12345678910111213141516const app = NSApplication.sharedApplication()function initContext(context) &#123; context.document.showMessage('åˆå§‹æ‰§è¡Œè„šæœ¬') const doc = context.document const page = doc.currentPage() const artboards = page.artboards() const selectedArtboard = page.currentArtboard() // å½“å‰è¢«é€‰æ‹©çš„ç”»æ¿ const plugin = context.plugin const command = context.command const scriptPath = context.scriptPath const scriptURL = context.scriptURL const selection = context.selection // è¢«é€‰æ‹©çš„å›¾å±‚&#125; Sketch æ’ä»¶å¼€å‘ä¸Šæ‰‹å‰é¢æˆ‘ä»¬äº†è§£äº†è®¸å¤š Sketch æ’ä»¶å¼€å‘çŸ¥è¯†ï¼Œé‚£æ¥ä¸‹æ¥å®é™…ä¸Šæ‰‹ä¸¤ä¸ªå°ä¾‹å­ï¼š â‘  åˆ›å»ºè¾…åŠ©å†…å®¹é¢æ¿çª—å£ï¼Œ â‘¡ ä¾§è¾¹æ å¯¼èˆªã€‚ä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œæˆ‘ä»¬åœ¨å¼€å‘å‰éœ€å…ˆè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š å´©æºƒä¿æŠ¤ å½“ Sketch è¿è¡Œå‘ç”Ÿå´©æºƒï¼Œå®ƒä¼šåœç”¨æ‰€æœ‰æ’ä»¶ä»¥é¿å…å¾ªç¯å´©æºƒã€‚å¯¹äºä½¿ç”¨è€…ï¼Œæ¯æ¬¡å´©æºƒé‡å¯åæ‰‹åŠ¨åœ¨èœå•æ å¯ç”¨æ‰€éœ€æ’ä»¶éå¸¸ç¹çã€‚å› æ­¤å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ç¦ç”¨è¯¥ç‰¹æ€§ã€‚ 1defaults write com.bohemiancoding.sketch3 disableAutomaticSafeMode true æ’ä»¶ç¼“å­˜ é€šè¿‡é…ç½®å¯ç”¨æˆ–ç¦ç”¨ç¼“å­˜æœºåˆ¶ï¼š 1defaults write com.bohemiancoding.sketch3 AlwaysReloadScript -bool YES è¯¥æ–¹æ³•å¯¹äºæŸäº›åœºæ™¯å¹¶ä¸é€‚ç”¨ï¼Œå¦‚è®¾ç½® COScript.currentCOScript().setShouldKeepAround(true) åŒºå—ä¼šä¿æŒå¸¸é©»åœ¨å†…å­˜ï¼Œé‚£ä¹ˆåˆ™éœ€è¦é€šè¿‡ coscript.setShouldKeepAround(false) è¿›è¡Œé‡Šæ”¾ã€‚ WebView è°ƒè¯• å¦‚æœæ’ä»¶å®ç°æ–¹æ¡ˆä½¿ç”¨ WebView åšç•Œé¢ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®å¼€å¯è°ƒè¯•åŠŸèƒ½ã€‚ 1defaults write com.bohemiancoding.sketch3 WebKitDeveloperExtras -bool YES åˆ›å»ºè¾…åŠ©å†…å®¹é¢æ¿çª—å£é¦–å…ˆæˆ‘ä»¬å…ˆç†Ÿæ‚‰ä¸€ä¸‹ macOS ä¸‹çš„è¾…åŠ©å†…å®¹é¢æ¿ï¼Œ å¦‚ä¸‹å›¾æœ€å·¦ä¾§ NSPanel æ ·ä¾‹ï¼Œ å®ƒæ˜¯æœ‰å±•ç¤ºåŒºåŸŸï¼Œå¯è®¾ç½®æ ·å¼æ•ˆæœï¼Œå·¦ä¸Šè§’æœ‰å¯æ“ä½œæŒ‰é’®çš„è¾…åŠ©çª—å£ã€‚ Sketch ä¸­è¦åˆ›å»ºå¦‚ä¸‹å†…å®¹é¢æ¿ï¼Œéœ€è¦ä½¿ç”¨ macOS ä¸‹ AppKit æ¡†æ¶ä¸­ NSPanel ç±»ï¼Œå®ƒæ˜¯ NSWindow çš„å­ç±»ï¼Œç”¨äºåˆ›å»ºè¾…åŠ©çª—å£ã€‚å†…å®¹é¢æ¿å¤–è§‚æ ·å¼è®¾ç½®ï¼Œå¯é€šè¿‡ NSPanel ç±»ç›¸å…³å±æ€§è¿›è¡Œè®¾ç½®ï¼Œ ä¹Ÿå¯é€šè¿‡ AppKit çš„NSVisualEffectView ç±»æ·»åŠ æ¨¡ç³Šçš„èƒŒæ™¯æ•ˆæœã€‚å†…å®¹åŒºåŸŸåˆ™å¯é€šè¿‡ AppKit çš„ WKWebView ç±»ï¼Œå•å¼€ webview æ¸²æŸ“ç½‘é¡µå†…å®¹å±•ç¤ºã€‚ åˆ›å»º Panel 123456789101112131415161718192021222324const panelWidth = 80;const panelHeight = 240;// Create the panel and set its appearanceconst panel = NSPanel.alloc().init();panel.setFrame_display(NSMakeRect(0, 0, panelWidth, panelHeight), true);panel.setStyleMask(NSTexturedBackgroundWindowMask | NSTitledWindowMask | NSClosableWindowMask | NSFullSizeContentViewWindowMask);panel.setBackgroundColor(NSColor.whiteColor());// Set the panel's title and title bar appearancepanel.title = \"\";panel.titlebarAppearsTransparent = true;// Center and focus the panelpanel.center();panel.makeKeyAndOrderFront(null);panel.setLevel(NSFloatingWindowLevel);// Make the plugin's code stick around (since it's a floating panel)COScript.currentCOScript().setShouldKeepAround(true);// Hide the Minimize and Zoom buttonpanel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);panel.standardWindowButton(NSWindowZoomButton).setHidden(true); Panel æ·»åŠ æ¨¡ç³Šçš„èƒŒæ™¯ 1234567// Create the blurred backgroundconst vibrancy = NSVisualEffectView.alloc().initWithFrame(NSMakeRect(0, 0, panelWidth, panelHeight));vibrancy.setAppearance(NSAppearance.appearanceNamed(NSAppearanceNameVibrantLight));vibrancy.setBlendingMode(NSVisualEffectBlendingModeBehindWindow);// Add it to the panelpanel.contentView().addSubview(vibrancy); Panel æ’å…¥ webview æ¸²æŸ“ 1234567891011121314const wkwebviewConfig = WKWebViewConfiguration.alloc().init()const webView = WKWebView.alloc().initWithFrame_configuration( CGRectMake(0, 0, panelWidth, panelWidth), wkwebviewConfig)// Add it to the panelpanel.contentView().addSubview(webView);// load file URLwebview.loadFileURL_allowingReadAccessToURL( NSURL.URLWithString(url), NSURL.URLWithString('file:///')) ä¾§è¾¹æ å¯¼èˆªå¼€å‘æˆ‘ä»¬å¼€å‘å¤æ‚çš„ Sketch æ’ä»¶ï¼Œä¸€èˆ¬éƒ½è¦å¼€å‘ä¾§è¾¹æ å¯¼èˆªå±•ç¤ºæ’ä»¶åŠŸèƒ½æŒ‰é’®ï¼Œç‚¹å‡»è§¦å‘ç›¸å…³æ“ä½œã€‚é‚£å¼€å‘ä¾§è¾¹æ å¯¼èˆªï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨ AppKit ä¸­çš„é‚£äº›ç±»å‘¢ï¼Œæœ‰ NSStackView ã€ NSBox ã€NSImageã€ NSImageViewã€NSButton ç­‰ï¼Œå¤§è‡´æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637 // create toolbar const toolbar = NSStackView.alloc().initWithFrame(NSMakeRect(0, 0, 40, 400)) threadDictionary[SidePanelIdentifier] = toolbar toolbar.identifier = SidePanelIdentifier toolbar.setSpacing(8) toolbar.setFlipped(true) toolbar.setBackgroundColor(NSColor.windowBackgroundColor()) toolbar.orientation = 1 // add element toolbar.addView_inGravity(createImageView(NSMakeRect(0, 0, 40, 22), 'transparent', NSMakeSize(40, 22)), 1) const Logo = createImageView(NSMakeRect(0, 0, 40, 30), 'logo', NSMakeSize(40, 28)) toolbar.addSubview(Logo) const contentView = context.document.documentWindow().contentView() const stageView = contentView.subviews().objectAtIndex(0) const views = stageView.subviews() const existId = views.find(d =&gt; ''.concat(d.identifier()) === identifier) const finalViews = [] for (let i = 0; i &lt; views.count(); i++) &#123; const view = views[i] if (existId) &#123; if (''.concat(view.identifier()) !== identifier) finalViews.push(view) &#125; else &#123; finalViews.push(view) if (''.concat(view.identifier()) === 'view_canvas') &#123; finalViews.push(toolbar) &#125; &#125; &#125;// add to main Window stageView.subviews = finalViews stageView.adjustSubviews() è¯¦ç»†è§å¼€æºä»£ç ï¼š https://github.com/o2team/sketch-plugin-boilerplate ï¼ˆæ¬¢è¿ star äº¤æµï¼‰ è°ƒè¯•å½“æ’ä»¶è¿è¡Œæ—¶ï¼ŒSketch å°†ä¼šåˆ›å»ºä¸€ä¸ªä¸å…¶å…³è”çš„ JavaScript ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ä½¿ç”¨ Safari æ¥è°ƒè¯•è¯¥ä¸Šä¸‹æ–‡ã€‚ åœ¨ Safari ä¸­, æ‰“å¼€ Developer &gt; ä½ çš„æœºå™¨åç§° &gt; Automatically Show Web Inspector for JSContextsï¼ŒåŒæ—¶å¯ç”¨é€‰é¡¹ Automatically Pause Connecting to JSContextï¼Œå¦åˆ™æ£€æŸ¥å™¨å°†åœ¨å¯ä»¥äº¤äº’ä¹‹å‰å…³é—­ï¼ˆå½“è„šæœ¬è¿è¡Œå®Œæ—¶ä¸Šä¸‹æ–‡ä¼šè¢«é”€æ¯ï¼‰ã€‚ ç°åœ¨å°±å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨æ–­ç‚¹äº†ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶æ£€æŸ¥å˜é‡çš„å€¼ç­‰ç­‰ã€‚ æ—¥å¿—JavaScriptCore è¿è¡Œ Sketch æ’ä»¶çš„ç¯å¢ƒ ä¹Ÿæœ‰æä¾›ç±»ä¼¼è°ƒè¯• JavaScript ä»£ç æ‰“ log çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…³é”®æ­¥éª¤å¤„æ”¾å…¥ä¸€å † console.log/console.error ç­‰è¿›è¡Œè½ç‚¹æ—¥å¿—æŸ¥çœ‹ã€‚ æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©å¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼š æ‰“å¼€ Console.app å¹¶æŸ¥æ‰¾ Sketch æ—¥å¿— æŸ¥çœ‹ ~/Library/Logs/com.bohemiancoding.sketch3/Plugin Output.log æ–‡ä»¶ è¿è¡Œ skpm log å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯ä»¥è¾“å‡ºä¸Šé¢çš„æ–‡ä»¶ï¼ˆæ‰§è¡Œ skpm log -f å¯ä»¥æµå¼åœ°è¾“å‡ºæ—¥å¿—ï¼‰ ä½¿ç”¨ skpm å¼€å‘çš„æ’ä»¶ï¼Œå®‰è£… sketch-dev-toolsï¼Œä½¿ç”¨ console.log æ‰“æ—¥å¿—æŸ¥çœ‹ã€‚ SketchToolSketchTool åŒ…å«åœ¨ Sketch ä¸­çš„ CLI å·¥å…·ï¼Œé€šè¿‡ SketchTool å¯å¯¹ Sketch æ–‡æ¡£æ‰§è¡Œç›¸å…³æ“ä½œï¼š å¯¼å‡º artboardsã€layersã€slicesã€pagesã€äº¤äº’ç¨¿ æ£€æŸ¥ Sketch æ–‡æ¡£ å¯¼å‡º Sketch æ–‡æ¡£ JSON data Run plugins sketchtool äºŒè¿›åˆ¶æ–‡ä»¶ä½äº Sketch åº”ç”¨ç¨‹åºåŒ…ä¸­ï¼š 1Sketch.app/Contents/Resources/sketchtool/bin/sketchtool è®¾ç½® alias ï¼š 1alias sketchtool=\"/Applications/Sketch.app/Contents/Resources/sketchtool/bin/sketchtool\" ä½¿ç”¨ï¼š 12345sketchtool -h # æŸ¥çœ‹å¸®åŠ©sketchtool export artboards path/to/document.sketch # å¯¼å‡ºç”»æ¿sketchtool dump path/to/document.sketch # å¯¼å‡º Sketch æ–‡æ¡£ JSON datasketchtool metadata path/to/document.sketch # æŸ¥çœ‹ Sketch æ–‡æ¡£å…ƒæ•°æ®sketchtool run [Plugin path] # è¿è¡Œæ’ä»¶ æ³¨æ„ï¼šSketchTool éœ€è¦ OSX 10.11æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ Other Resourcessketch Plugin å¼€å‘å®˜æ–¹æ–‡æ¡£ sketchæ’ä»¶å¼€å‘ä¸­æ–‡æ–‡æ¡£ sketch ä½¿ç”¨æ–‡æ¡£ sketch-utils sketch reference api Github SketchAPI react-sketchapp Sketch-Plugins-Cookbook iOSå¼€å‘60åˆ†é’Ÿå…¥é—¨ AppKit, æ„å»º Sketch çš„ä¸€ä¸ªä¸»è¦ Apple æ¡†æ¶ Foundation(åŸºç¡€), æ›´é‡è¦çš„ Apple è¯¾ç¨‹å’ŒæœåŠ¡ Chromeless-window","pubDate":"Thu, 31 Oct 2019 07:30:00 GMT","guid":"https://aotu.io/notes/2019/10/31/sketch-plugin/","category":"Webå¼€å‘"},{"title":"2019å¹´ï¼Œä½ æ˜¯å¦å¯ä»¥æŠ›å¼ƒ CSS é¢„å¤„ç†å™¨ï¼Ÿ","link":"https://aotu.io/notes/2019/10/29/css-preprocessor/","description":"éšç€å‰ç«¯å·¥ç¨‹åŒ–çš„ä¸æ–­å®Œå–„ï¼ŒCSS é¢„å¤„ç†å™¨å·²ç»æˆä¸ºé¡¹ç›®ä¸­ä¸å¯ç¼ºå°‘çš„éƒ¨åˆ†ï¼Œå¾ˆå¤šäººåœ¨é¡¹ç›®æŠ€æœ¯é€‰å‹é˜¶æ®µå°±ä¼šå…ˆé€‰æ‹©ä¸€ä¸ª CSS é¢„å¤„ç†å™¨ï¼Œç»å¤§éƒ¨åˆ†å‰ç«¯å·¥ç¨‹çš„è„šæ‰‹æ¶ä¹Ÿå†…ç½®äº†ä¸€ç³»åˆ—çš„ CSS é¢„å¤„ç†çš„æ¨¡ç‰ˆï¼Œå¤§å®¶å·²ç»ä¹ æƒ¯äº†äº«å— CSS é¢„å¤„ç†å™¨å¸¦æ¥çš„ä¹¦å†™ä»£ç çš„çµæ´»æµç•…ï¼Œåè€Œå°†åŸç”Ÿçš„ CSS å†·è½åœ¨ä¸€æ—ã€‚ å¯èƒ½è®¸å¤šå‰ç«¯å¼€å‘äººå‘˜ä¾ç„¶è§‰å¾— CSS é¢„å¤„ç†å™¨å±äºæ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œå…¶å®ä¸ç„¶ï¼Œæœ€æ—©çš„ CSS é¢„å¤„ç†å™¨ Sass ä» 07 å¹´è¯ç”Ÿè·ä»Šå·²æœ‰ 12 å¹´ï¼Œç›¸å¯¹è¾ƒæ–°çš„çš„ Stylus ä¹Ÿå·²å‘å¸ƒ 9 å¹´äº†ã€‚ å‰ç«¯çš„æŠ€æœ¯æ ˆå‘å±•çªé£çŒ›è¿›ï¼ŒW3C çš„ CSS å·¥ä½œç»„ä¹Ÿä¸€ç›´åœ¨æŒç»­ä»ç¤¾åŒºæ±²å–è¥å…»ï¼ŒåŠ å¿« CSS çš„è¿­ä»£ã€‚é‚£ä¹ˆåˆ°ç°åœ¨ä¸ºæ­¢ï¼ŒCSS æ˜¯å¦å¯ä»¥å–ä»£ CSS é¢„å¤„ç†å™¨çš„åœ°ä½ï¼ŸCSS é¢„å¤„ç†å™¨ä¼šä¸ä¼šæˆä¸º CSS è¿‡æ¸¡æ—¶æœŸçš„äº§ç‰©å‘¢ï¼Ÿ W3C ä»‹ç»CSS æ˜¯å¼€æ”¾ç½‘ç»œçš„æ ¸å¿ƒè¯­è¨€ä¹‹ä¸€ï¼Œç”± W3C è§„èŒƒ å®ç°è·¨æµè§ˆå™¨çš„æ ‡å‡†åŒ–ã€‚å› æ­¤ï¼Œåœ¨æ·±å…¥äº†è§£ CSS è§„èŒƒæ›´æ–°è¿›åº¦ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ W3C åŠå…¶è§„èŒƒåˆ¶å®šæµç¨‹ã€‚ W3C ä¹Ÿå°±æ˜¯ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆWorld Wide Web Consortiumï¼‰ï¼Œåˆç§° W3C ç†äº‹ä¼šï¼Œæ˜¯ä¸‡ç»´ç½‘çš„ä¸»è¦å›½é™…æ ‡å‡†ç»„ç»‡ã€‚ä¸ºåŠè‡ªæ²»éæ”¿åºœç»„ç»‡ï¼ˆquasi-autonomous non-governmental organisationï¼‰ã€‚ç”± è’‚å§†Â·ä¼¯çº³æ–¯-æï¼ˆTim Berners-Leeï¼‰äº 1994å¹´10æœˆ äºéº»çœç†å·¥å­¦é™¢ MIT è®¡ç®—æœºç§‘å­¦ä¸äººå·¥æ™ºèƒ½å®éªŒå®¤ï¼ˆMITï¼LCSï¼‰åˆ›ç«‹ã€‚ W3C åˆ¶å®šäº†ä¸€ç³»åˆ—æ ‡å‡†å¹¶ç£ä¿ƒç½‘ç»œåº”ç”¨å¼€å‘è€…å’Œå†…å®¹æä¾›è€…éµå¾ªè¿™äº›æ ‡å‡†ã€‚æ ‡å‡†çš„å†…å®¹åŒ…æ‹¬ä½¿ç”¨è¯­è¨€çš„è§„èŒƒï¼Œå¼€å‘ä¸­ä½¿ç”¨çš„å¯¼åˆ™å’Œè§£é‡Šå¼•æ“çš„è¡Œä¸ºç­‰ç­‰ã€‚W3Cåˆ¶å®šäº†åŒ…æ‹¬ HTMLã€DOMã€SVGã€XMLå’Œ CSS ç­‰çš„ä¼—å¤šå½±å“æ·±è¿œçš„æ ‡å‡†è§„èŒƒã€‚ W3C è§„èŒƒåˆ¶å®šæµç¨‹å› ä¸ºæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è°ˆåˆ°ä¸€äº›ä¸åŒé˜¶æ®µçš„ CSS è§„èŒƒï¼Œå› æ­¤è¿™é‡Œæœ‰å¿…è¦ç®€å•ä»‹ç»ä¸€ä¸‹ W3C çš„è§„èŒƒåˆ¶å®šæµç¨‹ã€‚ æŒ‰ç…§ W3C çš„ Process Documentï¼Œä¸€ä¸ªæ¨èæ ‡å‡†çš„å‘å±•éœ€è¦é€šè¿‡ä¸åŒçš„é˜¶æ®µã€‚ å…¶ä¸­å‡ ä¸ªä¸»è¦çš„é˜¶æ®µåˆ†åˆ«ä¸ºï¼š WD å·¥ä½œè‰æ¡ˆï¼ˆWorking draftï¼‰ CR å€™é€‰æ¨èæ ‡å‡†ï¼ˆCandidate recommendationï¼‰ PR ææ¡ˆæ¨èæ ‡å‡†ï¼ˆrecommendationï¼‰ REC W3Cæ¨èæ ‡å‡†ï¼ˆW3C recommendationï¼‰ ç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€è®²è§£ W3C çš„æ ‡å‡†æµç¨‹äº†ï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šå…³äº W3C æ ‡å‡†æµç¨‹ä¸ç»„ç»‡æ¶æ„ çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹W3Cæ ‡å‡†æµç¨‹ä¸ç»„ç»‡æ¶æ„ã€‚ CSS çš„å†å²HTML å’Œ CSS æ˜¯é‚£ä¹ˆå¯†ä¸å¯åˆ†ï¼Œä»¥è‡³äºä½ å¯èƒ½ä¼šè§‰å¾—å®ƒä»¬æ˜¯ä¸€èµ·å‡ºç°çš„ã€‚å®é™…ä¸Šï¼Œè‡ª 1989 å¹´ Tim Berners Lie å‘æ˜äº’è”ç½‘åçš„å¤šå¹´ä¸­ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šéƒ½ä¸å­˜åœ¨ä¸€ä¸ªåä¸º CSS çš„äº‹ç‰©ï¼ˆæ›´åˆ«è¯´ CSS é¢„å¤„ç†å™¨äº†ï¼‰ï¼ŒWeb çš„åŸå§‹ç‰ˆæœ¬æ ¹æœ¬å°±æ²¡æœ‰æä¾›ä¸€ç§è£…é¥°ç½‘é¡µçš„æ–¹æ³•ã€‚ HTML è§„èŒƒè™½ç„¶è§„å®šäº†ç½‘é¡µä¸­çš„æ ‡é¢˜ã€æ®µè½åº”è¯¥ä½¿ç”¨çš„æ ‡ç­¾ï¼Œä½†æ˜¯æ²¡æœ‰æ¶‰åŠè¿™äº›å†…å®¹åº”è¯¥ä»¥ä½•ç§æ ·å¼(æ¯”å¦‚å¤§å°ã€ä½ç½®ã€é—´è·ã€ç¼©è¿›ç­‰å±æ€§)å‘ˆç°åœ¨æµè§ˆå™¨ä¸­ã€‚ ä¸è¿‡ï¼Œåœ¨éšåä»…çŸ­çŸ­10å¹´åï¼ŒCSSå°±è¢«ä¸€ä¸ªç°ä»£çš„ Web ç¤¾åŒºå…¨é¢é‡‡ç”¨ï¼Œè¿™æœŸé—´çš„å‘ç”Ÿäº†ä¸€ç³»åˆ—æœ‰è¶£çš„æ•…äº‹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹ A Look Back at the History of CSSã€‚ CSS1äº1994å¹´ï¼ŒHÃ¥kon Wium Lie (å“ˆè‚¯Â·ç»´å§†Â·è±) å’Œ Bert Bos (ä¼¯ç‰¹Â·æ³¢æ–¯) åˆä½œè®¾è®¡CSSã€‚ä»–ä»¬åœ¨1994å¹´é¦–æ¬¡åœ¨èŠåŠ å“¥çš„ä¸€æ¬¡ä¼šè®®ä¸Šç¬¬ä¸€æ¬¡å±•ç¤ºäº†CSSçš„å»ºè®®ã€‚ 1996å¹´12æœˆ å‘è¡¨çš„ CSS1 çš„è¦æ±‚æœ‰ç¬¬ä¸€ç‰ˆä¸»è¦è§„å®šäº†é€‰æ‹©å™¨ã€æ ·å¼å±æ€§ã€ä¼ªç±» ã€å¯¹è±¡å‡ ä¸ªå¤§çš„éƒ¨åˆ†ã€‚ CSS2CSS2 åœ¨ 1998 å¹´ 5æœˆ ç”± W3C å‘å¸ƒï¼ŒCSS2 è§„èŒƒæ˜¯åŸºäº CSS1 è®¾è®¡çš„ï¼Œæ‰©å……å’Œæ”¹è¿›äº†å¾ˆå¤šæ›´åŠ å¼ºå¤§çš„å±æ€§ã€‚åŒ…æ‹¬é€‰æ‹©å™¨ã€ä½ç½®æ¨¡å‹ã€å¸ƒå±€ã€è¡¨æ ¼æ ·å¼ã€åª’ä½“ç±»å‹ã€ä¼ªç±»ã€å…‰æ ‡æ ·å¼ã€‚ Cascading Style Sheets Level 2 Revision 1ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œ CSS 2.1â€ ï¼Œä¿®å¤äº† CSS 2ä¸­çš„é”™è¯¯ï¼Œåˆ é™¤äº†æ”¯æŒä¸è‰¯æˆ–ä¸èƒ½å®Œå…¨äº’æ“ä½œçš„ç‰¹æ€§ï¼Œå¹¶ä¸ºè§„èŒƒå¢åŠ äº†å·²ç»å®ç°çš„æµè§ˆå™¨æ‰©å±•ã€‚ ä¸ºäº†éµå®ˆ W3C æ ‡å‡†åŒ–æŠ€æœ¯è§„èŒƒçš„è¿‡ç¨‹ï¼ŒCSS 2.1 åœ¨ Working Draft (WD) çŠ¶æ€å’Œ Candidate Recommendation (CP) çŠ¶æ€ä¹‹é—´æ¥å›äº†å¾ˆå¤šå¹´ã€‚ CSS 2.1äº 2004 å¹´ 2 æœˆ 25 æ—¥é¦–æ¬¡æˆä¸º Candidate Recommendation (CR)æ ‡å‡†ï¼Œä½†åœ¨ 2005 å¹´ 6 æœˆ 13 æ—¥åˆå›åˆ° Working Draft (WD) ä¸­è¿›è¡Œè¿›ä¸€æ­¥å®¡æŸ¥ã€‚ å®ƒäº 2007 å¹´ 7 æœˆ 19 æ—¥å›åˆ° Candidate Recommendation (CP) æ ‡å‡†ï¼Œç„¶ååœ¨ 2009 å¹´æ›´æ–°äº†ä¸¤æ¬¡ã€‚ ç„¶è€Œï¼Œç”±äºä½œå‡ºäº†ä¿®æ”¹å’Œæ¾„æ¸…ï¼Œå®ƒå†æ¬¡å›åˆ°äº†2010å¹´12æœˆ7æ—¥çš„ Last Call Working Draft ã€‚ CSS3CSS3 æ˜¯å±‚å æ ·å¼è¡¨ï¼ˆCascading Style Sheetsï¼‰è¯­è¨€çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæ—¨åœ¨æ‰©å±•CSS2.1ã€‚ CSS Level 2 ç»å†äº† 9 å¹´çš„æ—¶é—´ï¼ˆä» 2002 å¹´ 8 æœˆåˆ° 2011 å¹´ 6 æœˆï¼‰æ‰è¾¾åˆ° Recommendationï¼ˆæ¨èï¼‰ çŠ¶æ€ï¼Œä¸»è¦åŸå› æ˜¯è¢«ä¸€äº›æ¬¡è¦ç‰¹æ€§æ‹–äº†åè…¿ã€‚ä¸ºäº†åŠ å¿«é‚£äº›å·²ç»ç¡®è®¤æ²¡æœ‰é—®é¢˜çš„ç‰¹æ€§çš„æ ‡å‡†åŒ–é€Ÿåº¦ï¼ŒW3C çš„ CSS Working Group ä½œå‡ºäº†ä¸€é¡¹è¢«ç§°ä¸º Beijing doctrine çš„å†³å®šï¼Œå°† CSS åˆ’åˆ†ä¸ºè®¸å¤šå°ç»„ä»¶ï¼Œç§°ä¹‹ä¸ºæ¨¡å—ã€‚è¿™äº›æ¨¡å—å½¼æ­¤ç‹¬ç«‹ï¼ŒæŒ‰ç…§å„è‡ªçš„è¿›åº¦æ¥è¿›è¡Œæ ‡å‡†åŒ–ã€‚å…¶ä¸­ä¸€äº›å·²ç»æ˜¯ W3C Recommendation çŠ¶æ€ï¼Œä¹Ÿæœ‰ä¸€äº›ä»æ˜¯ Early Working Draftsï¼ˆæ—©æœŸå·¥ä½œè‰æ¡ˆï¼‰ã€‚å½“æ–°çš„éœ€æ±‚è¢«è‚¯å®šåï¼Œ æ–°çš„æ¨¡å—ä¹Ÿä¼šåŒæ ·åœ°æ·»åŠ è¿›æ¥ã€‚ ä»å½¢å¼ä¸Šæ¥è¯´ï¼ŒCSS3 æ ‡å‡†è‡ªèº«å·²ç»ä¸å­˜åœ¨äº†ã€‚æ¯ä¸ªæ¨¡å—éƒ½è¢«ç‹¬ç«‹çš„æ ‡å‡†åŒ–ï¼Œç°åœ¨æ ‡å‡† CSS åŒ…æ‹¬äº†ä¿®è®¢åçš„ CSS2.1 ä»¥åŠå®Œæ•´æ¨¡å—å¯¹å®ƒçš„æ‰©å……ï¼Œæ¨¡å—çš„ levelï¼ˆçº§åˆ«ï¼‰æ•°å¹¶ä¸ä¸€è‡´ã€‚å¯ä»¥åœ¨æ¯ä¸ªæ—¶é—´ç‚¹ä¸Šä¸º CSS æ ‡å‡†å®šä¹‰ä¸€ä¸ª snapshotsï¼ˆå¿«ç…§ï¼‰ï¼Œåˆ—å‡º CSS 2.1 å’Œæˆç†Ÿçš„æ¨¡å—ã€‚ W3C ä¼šå®šæœŸçš„å‘å¸ƒè¿™äº› snapshotsï¼Œå¦‚ 2007, 2010, 2015 æˆ– 2017ã€‚ ç›®å‰ä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰ level è¶…è¿‡ 3 çš„æ¨¡å—è¢«æ ‡å‡†åŒ–ï¼Œæœªæ¥åº”è¯¥ä¼šæœ‰æ‰€æ”¹å˜ã€‚ ä¸è¿‡æœ‰äº›æ¨¡å—ï¼Œæ¯”å¦‚ Selectorsï¼ˆé€‰æ‹©å™¨ï¼‰4 æˆ– CSS Borders and Backgroundsï¼ˆè¾¹æ¡†å’ŒèƒŒæ™¯ï¼‰Level 4 æ—©å·²æ‹¥æœ‰äº† Editorâ€™s Draftï¼ˆç¼–è¾‘è‰æ¡ˆï¼‰ï¼Œå³ä½¿å®ƒä»¬è¿˜æ²¡è¾¾åˆ° First Published Working Draftï¼ˆåˆæ¬¡å‘å¸ƒå·¥ä½œè‰æ¡ˆï¼‰çŠ¶æ€ã€‚ æœ‰ä¸€å¼ å›¾å¯ä»¥æ›´åŠ ç›´è§‚çš„è¡¨ç¤ºå½“å‰ CSS3 Modules çš„åˆ†ç±»å’ŒçŠ¶æ€ï¼š é—®é¢˜ï¼šä¸ºä»€ä¹ˆæ²¡æœ‰ CSS4ï¼ŸThere is no single, integrated CSS4 specification, because it is split into separate â€œlevel 4â€ modules.Level 4 ä¸ç­‰äº CSS 4 ï¼Œå¦‚ CSS Custom Properties for Cascading Variables Module Level 1 æ€»ä¸èƒ½è¯´å®ƒæ˜¯ CSS1 å§ã€‚ CSS é¢„å¤„ç†å™¨CSS è‡ªè¯ç”Ÿä»¥æ¥ï¼ŒåŸºæœ¬è¯­æ³•å’Œæ ¸å¿ƒæœºåˆ¶ä¸€ç›´æ²¡æœ‰æœ¬è´¨ä¸Šçš„å˜åŒ–ï¼Œåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œå®ƒçš„å‘å±•å‡ ä¹å…¨æ˜¯è¡¨ç°åŠ›å±‚é¢ä¸Šçš„æå‡ã€‚ æœ€å¼€å§‹ CSS åœ¨ç½‘é¡µä¸­çš„ä½œç”¨åªæ˜¯è¾…åŠ©æ€§çš„è£…é¥°ï¼Œè½»ä¾¿æ˜“å­¦æ˜¯æœ€å¤§çš„éœ€æ±‚ï¼›ç„¶è€Œå¦‚ä»Šç½‘ç«™çš„å¤æ‚åº¦å·²ç»ä¸å¯åŒæ—¥è€Œè¯­ï¼ŒåŸç”Ÿ CSS å·²ç»è®©å¼€å‘è€…åŠ›ä¸ä»å¿ƒã€‚ å½“ä¸€é—¨è¯­è¨€çš„èƒ½åŠ›ä¸è¶³è€Œç”¨æˆ·çš„è¿è¡Œç¯å¢ƒåˆä¸æ”¯æŒå…¶å®ƒé€‰æ‹©çš„æ—¶å€™ï¼Œè¿™é—¨è¯­è¨€å°±ä¼šæ²¦ä¸º â€œç¼–è¯‘ç›®æ ‡â€ è¯­è¨€ã€‚å¼€å‘è€…å°†é€‰æ‹©å¦ä¸€é—¨æ›´é«˜çº§çš„è¯­è¨€æ¥è¿›è¡Œå¼€å‘ï¼Œç„¶åç¼–è¯‘åˆ°åº•å±‚è¯­è¨€ä»¥ä¾¿å®é™…è¿è¡Œã€‚äºæ˜¯ï¼Œåœ¨å‰ç«¯é¢†åŸŸï¼Œå¤©é™å¤§ä»»äºæ–¯äººä¹Ÿï¼ŒCSS é¢„å¤„ç†å™¨åº”è¿è€Œç”Ÿã€‚ ç™¾èŠ±é½æ”¾CSS é¢„å¤„ç†å™¨æ˜¯ä¸€ä¸ªèƒ½è®©ä½ é€šè¿‡é¢„å¤„ç†å™¨è‡ªå·±ç‹¬æœ‰çš„è¯­æ³•æ¥ç”Ÿæˆ CSS çš„ç¨‹åºã€‚ å¸‚é¢ä¸Šæœ‰å¾ˆå¤š CSS é¢„å¤„ç†å™¨å¯ä¾›é€‰æ‹©ï¼Œä¸”ç»å¤§å¤šæ•° CSS é¢„å¤„ç†å™¨ä¼šå¢åŠ ä¸€äº›åŸç”Ÿ CSS ä¸å…·å¤‡æˆ–ä¸å®Œå–„çš„é«˜çº§ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§è®© CSS çš„ç»“æ„æ›´åŠ å…·æœ‰å¯è¯»æ€§ä¸”æ˜“äºç»´æŠ¤ã€‚å½“å‰ç¤¾åŒºä»£è¡¨çš„ CSS é¢„å¤„ç†å™¨ ä¸»è¦æœ‰ä¸€ä¸‹å‡ ç§ï¼š Sassï¼š2007 å¹´è¯ç”Ÿï¼Œæœ€æ—©ä¹Ÿæ˜¯æœ€æˆç†Ÿçš„ CSS é¢„å¤„ç†å™¨ï¼Œæ‹¥æœ‰ Ruby ç¤¾åŒºçš„æ”¯æŒå’Œ Compass è¿™ä¸€æœ€å¼ºå¤§çš„ CSS æ¡†æ¶ï¼Œç›®å‰å— LESS å½±å“ï¼Œå·²ç»è¿›åŒ–åˆ°äº†å…¨é¢å…¼å®¹ CSS çš„ SCSSã€‚ Lessï¼š2009å¹´å‡ºç°ï¼Œå— SASS çš„å½±å“è¾ƒå¤§ï¼Œä½†åˆä½¿ç”¨ CSS çš„è¯­æ³•ï¼Œè®©å¤§éƒ¨åˆ†å¼€å‘è€…å’Œè®¾è®¡å¸ˆæ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œåœ¨ Ruby ç¤¾åŒºä¹‹å¤–æ”¯æŒè€…è¿œè¶…è¿‡ SASSï¼Œå…¶ç¼ºç‚¹æ˜¯æ¯”èµ· SASS æ¥ï¼Œå¯ç¼–ç¨‹åŠŸèƒ½ä¸å¤Ÿï¼Œä¸è¿‡ä¼˜ç‚¹æ˜¯ç®€å•å’Œå…¼å®¹ CSSï¼Œåè¿‡æ¥ä¹Ÿå½±å“äº† SASS æ¼”å˜åˆ°äº† SCSS çš„æ—¶ä»£ï¼Œè‘—åçš„ Twitter Bootstrap å°±æ˜¯é‡‡ç”¨ LESS åšåº•å±‚è¯­è¨€çš„ã€‚ Stylusï¼šStylus æ˜¯ä¸€ä¸ªCSSçš„é¢„å¤„ç†æ¡†æ¶ï¼Œ2010 å¹´äº§ç”Ÿï¼Œæ¥è‡ª Node.js ç¤¾åŒºï¼Œä¸»è¦ç”¨æ¥ç»™ Node é¡¹ç›®è¿›è¡Œ CSS é¢„å¤„ç†æ”¯æŒï¼Œæ‰€ä»¥ Stylus æ˜¯ä¸€ç§æ–°å‹è¯­è¨€ï¼Œå¯ä»¥åˆ›å»ºå¥å£®çš„ã€åŠ¨æ€çš„ã€å¯Œæœ‰è¡¨ç°åŠ›çš„ CSSã€‚æ¯”è¾ƒå¹´è½»ï¼Œå…¶æœ¬è´¨ä¸Šåšçš„äº‹æƒ…ä¸ SASS/LESS ç­‰ç±»ä¼¼ï¼Œ ä¼˜ç‚¹è™½ç„¶å„ç§é¢„å¤„ç†å™¨åŠŸèƒ½å¼ºå¤§ï¼Œä½†ä½¿ç”¨æœ€å¤šçš„ï¼Œè¿˜æ˜¯ä»¥ä¸‹ç‰¹æ€§ï¼šå˜é‡ï¼ˆvariablesï¼‰ï¼Œä»£ç æ··åˆï¼ˆ mixinsï¼‰ï¼ŒåµŒå¥—ï¼ˆnested rulesï¼‰ä»¥åŠ ä»£ç æ¨¡å—åŒ–(Modules)ã€‚ æ¥ä¸‹æ¥ä»¥ Sass ä¸ºä¾‹ï¼Œå±•ç¤ºä¸€ä¸‹è¿™å‡ ä¸ªä¸»è¦ç‰¹æ€§åœ¨é¢„å¤„ç†å™¨ä¸­çš„å®ç°ï¼š Variables and Operators (+, -, *, /, %)12345678910$font-size: 10px;$font-family: Helvetica, sans-serif;body &#123; font: $font-size $font-family;&#125;.mark&#123; font-size: 1.5 * $font-size;&#125; Mixins1234567891011@mixin clearfix &#123; &amp;:after &#123; display: block; content: &apos;&apos;; clear: both; &#125;&#125;.sidebar&#123; @include clearfix;&#125; Nesting12345678// menu.nav &#123; &gt; li &#123; &gt; a:hover &#123; background-color: red; &#125; &#125;&#125; Modules1234@import './common';@import './github-markdown';@import './mixin';@import './variables'; ç¼ºç‚¹æˆ–ä¸è¶³é¢å¤–çš„ç¼–è¯‘é…ç½®åœ¨å†™æ ·å¼å‰éœ€è¦åšä¸€äº›é¢å¤–çš„ç¼–è¯‘é…ç½®å·¥ä½œï¼Œsass-node å®‰è£…ä»¥åŠç¼–è¯‘çš„é…ç½®å°±èƒ½å¡ä½ä¸€æ‰¹å‰ç«¯æ–°æ‰‹ã€‚ ç¼–è¯‘æˆæœ¬æ¯æ¬¡ä¿®æ”¹ä»£ç éƒ½éœ€è¦é‡æ–°ç¼–è¯‘,å ç”¨æ—¶é—´å’Œ CPUã€‚ å­¦ä¹ æˆæœ¬ä¸åŒçš„ CSS é¢„å¤„ç†å™¨è¯­æ³•ä¸åŒï¼Œå¢åŠ å­¦ä¹ æˆæœ¬ã€‚åœ¨åŒä¸€ä¸ªå›¢é˜Ÿç”šè‡³é¡¹ç›®é‡Œï¼Œå¯èƒ½åŒæ—¶ä½¿ç”¨äº†å¥½å‡ ç§æ ·å¼é¢„å¤„ç†å™¨ã€‚ 123456789101112131415// Sass$color: #f00;$images: &quot;../img&quot;;@mixin clearfix &#123; &amp;:after &#123; content: &quot; &quot;; display: block; clear: both; &#125;&#125;body &#123; color: $color; background: url(&quot;#&#123;images&#125;/1.png&quot;); @include clearfix;&#125; 123456789101112131415// Less@color: #f00;@images: \"../img\";.clearfix() &#123; &amp;:after &#123; content: \" \"; display: block; clear: both; &#125;&#125;body &#123; color: @color; background: url(\"@&#123;images&#125;/1.png\"); .clearfix;&#125; è°ƒè¯•åœ¨ä½¿ç”¨ CSS é¢„å¤„ç†å™¨æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé…ç½® SourceMap æ¥è¾…åŠ©è°ƒè¯•ï¼Œä½†å³ä½¿è¿™æ ·ï¼Œè¿˜æ˜¯ä¼šç¢°åˆ°ä¸€äº›è°ƒè¯•å›°éš¾çš„æƒ…å†µï¼š å›å½’ CSSå„ç§ CSS é¢„å¤„ç†å™¨åœ¨æ›´æ–°è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒåŠŸèƒ½è¶Šæ¥è¶Šç¹æ‚èŠ±å“¨ï¼Œä½†æ˜¯ç»å¤§éƒ¨åˆ†äººç”¨åˆ°çš„æ ¸å¿ƒåŠŸèƒ½è¿˜æ˜¯é‚£å‡ æ ·ï¼šVariablesã€Mixingã€Nestedã€Moduleï¼Œé¡¶å¤šå†åŠ ä¸Šä¸€äº›å·¥å…·ç±»å‡½æ•°ã€‚ æˆ‘ä»¬æ—¢æƒ³è¦æƒ³è¦é¢„å¤„ç†å™¨çš„ä¼˜ç‚¹ï¼Œåˆä¸æƒ³è¦å®ƒå¸¦æ¥çš„æˆæœ¬å’Œç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰ä¸¤å…¨å…¶ç¾çš„åŠæ³•ï¼ŸCSS è¿™ä¹ˆå¤šå¹´ä¸€ç›´ä¹Ÿåœ¨ä»ç¤¾åŒºæ±²å–å…»åˆ†åŠ é€Ÿè¿›åŒ–å’Œè¿­ä»£ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ä» CSS æ ‡å‡†é‡Œé¢æ‰¾åˆ°ç­”æ¡ˆå‘¢ï¼Ÿ Variables in CSSCSS è‡ªå®šä¹‰å±æ€§ï¼ˆCSS Custom Properties)ï¼Œåˆå« CSS å˜é‡ï¼ˆCSS Variableï¼‰,å…è®¸ä½ è‡ªå·±åœ¨æ ·å¼ä¸­å£°æ˜å˜é‡ï¼Œå¹¶é€šè¿‡ var() å‡½æ•°ä½¿ç”¨ã€‚ CSS Custom Properties for Cascading Variables è§„èŒƒåœ¨ 2012 å¹´ 10 æœˆé¦–æ¬¡ä½œä¸º å·¥ä½œè‰æ¡ˆï¼ˆWDï¼‰ æå‡ºï¼Œå¹¶åœ¨ 2015 å¹´ 10 æœˆåˆ°è¾¾ å€™é€‰äººæ¨èæ ‡å‡†ï¼ˆCRï¼‰é˜¶æ®µã€‚ç°åœ¨æµè§ˆå™¨æ”¯æŒç¨‹åº¦å·²ç»æ¥è¿‘ 93%ã€‚ CSS å˜é‡å®šä¹‰åŠä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºï¼Œå¯å®šä¹‰çš„ç±»å‹æå…¶ä¸°å¯Œã€‚ 12345678910111213141516171819202122232425/* declaration */--VAR_NAME: &lt;declaration-value&gt;;/* usage */var(--VAR_NAME)/* root element selector (global scope), e.g. &lt;html&gt; */:root &#123; /* CSS variables declarations */ --main-color: #ff00ff; --main-bg: rgb(200, 255, 255); --logo-border-color: rebeccapurple; --header-height: 68px; --content-padding: 10px 20px; --base-line-height: 1.428571429; --transition-duration: .35s; --external-link: \"external link\"; --margin-top: calc(2vh + 20px);&#125;body &#123; /* use the variable */ color: var(--main-color);&#125; ä¸åŒäº SASS é¢„å¤„ç†å™¨å˜é‡çš„ç¼–è¯‘æ—¶å¤„ç†ï¼ŒCSS å˜é‡æ˜¯æµè§ˆå™¨åœ¨è¿è¡Œæ—¶è¿›è¡Œå¤„ç†çš„ï¼Œå› æ­¤ CSS å˜é‡ä¼šæ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚ Operatorså¯ä»¥ä½¿ç”¨ calc() è¿›è¡Œè®¡ç®— 12345678:root &#123; --block-font-size: 1rem;&#125;.block__highlight &#123; /* WORKS */ font-size: calc(var(--block-font-size)*1.5);&#125; Generate Colorså¯ä»¥ç”¨äºé€šè¿‡ RGB ç­‰å‡½æ•°ç”Ÿæˆå’Œè®¡ç®—é¢œè‰²ï¼šGenerate Colors CSS to JSCSS å˜é‡å‡ºç°å‰ï¼Œä» CSS ä¼ å€¼ç»™ JS éå¸¸å›°éš¾ï¼Œç”šè‡³éœ€è¦å€ŸåŠ©ä¸€äº› Hack çš„æ‰‹æ³•ã€‚ç°åœ¨ä½¿ç”¨ CSS å˜é‡ï¼Œä½ å¯ä»¥ç›´æ¥é€šè¿‡ JS è·å–å˜é‡å€¼å¹¶è¿›è¡Œä¿®æ”¹ï¼š 1234.breakpoints-data &#123; --phone: 480px; --tablet: 800px;&#125; 123456789const breakpointsData = document.querySelector('.breakpoints-data');// GETconst phone = getComputedStyle(breakpointsData) .getPropertyValue('--phone');// SETbreakpointsData.style .setProperty('--phone', 'custom'); Custom Themeä½¿ç”¨ CSS å˜é‡ï¼Œå®šåˆ¶å’ŒåŠ¨æ€åˆ‡æ¢ç½‘ç«™ä¸»é¢˜éå¸¸ç®€å•æ–¹ä¾¿ï¼š é¦–å…ˆå®šä¹‰å¥½ä¸åŒä¸»é¢˜ä¸‹çš„å˜é‡ï¼Œç„¶åæ­£å¸¸ä¹¦å†™æ ·å¼å³å¯ã€‚ 123456789html &#123; --hue: 210; /* Blue */ --text-color-normal: hsl(var(--hue), 77%, 17%); ...&#125;html[data-theme='dark'] &#123; --text-color-normal: hsl(var(--hue), 10%, 62%); ...&#125; é€šè¿‡ JS æ”¹å˜å…ƒç´ å±æ€§ï¼ŒåŠ¨æ€åˆ‡æ¢ä¸»é¢˜ï¼š 12document.documentElement.setAttribute('data-theme', 'dark')document.documentElement.setAttribute('data-theme', 'light') æ›´å¤šé«˜çº§ç”¨æ³•å¯ä»¥å‚è€ƒï¼šCSS custom properties (native variables) In-Depth ä¸ºä»€ä¹ˆå˜é‡çš„å®šä¹‰ä»¥ --å¼€å¤´ï¼ŸåŸå› åœ¨è¿™é‡Œï¼šLetâ€™s Talk about CSS Variables Mixins in CSSCSS çš„æœ‰ä¸€ä¸ªææ¡ˆï¼šCSS @apply Ruleï¼ŒæŒ‰ç…§è¯¥è‰æ¡ˆæè¿°ï¼Œç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨ CSS å˜é‡å­˜æ”¾å£°æ˜å—ï¼Œç„¶åé€šè¿‡ @apply rule ä½¿ç”¨ã€‚ 12345678910:root &#123; --pink-schema: &#123; color: #6A8759; background-color: #F64778; &#125;&#125;body&#123; @apply --pink-schema;&#125; å¯æƒœè¿™ä¸ªææ¡ˆå·²è¢«åºŸå¼ƒï¼Œå…·ä½“åºŸå¼ƒåŸå› æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šWhy I Abandoned @applyã€‚ å°½ç®¡ Mixins ç°åœ¨ CSS è¿˜æ²¡æœ‰å¥½çš„å®ç°æ ‡å‡†ï¼Œä½†æˆ‘ä»¬åšä¿¡è¿Ÿæ—©ä¼šæœ‰æ›´ä¼˜ç§€çš„è§„èŒƒæ¶Œç°å‡ºæ¥å¼¥è¡¥ CSS çš„è¿™ä¸€å—ç©ºç™½ã€‚ Nesting in CSSCSS é‡Œå·²ç»æœ‰ Nesting çš„è§„èŒƒå‡ºç°ï¼Œå°½ç®¡ç°åœ¨åªå¤„äº Editorâ€™s Draft é˜¶æ®µï¼šCSS Nesting Module Level 3 å¯ä»¥çœ‹åˆ°æŒ‰ç…§ CSS Nesting Module ï¼ŒNesting è§„èŒƒåŸºæœ¬å’Œé¢„å¤„ç†å™¨ä¸€æ¨¡ä¸€æ ·ã€‚ 123456789101112131415/* Dropdown menu on hover */ul &#123; /* direct nesting (&amp; MUST be the first part of selector)*/ &amp; &gt; li &#123; color: #000; &amp; &gt; ul &#123; display: none; &#125; &amp;:hover &#123; color: #f00; &amp; &gt; ul &#123; display: block; &#125; &#125; &#125;&#125; Module in CSSå…¶å® CSS å¾ˆæ—©å°±æœ‰äº†æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯ @importï¼Œä½¿ç”¨ CSS çš„ @import è§„åˆ™ï¼Œå¯ä»¥å¼•ç”¨å…¶ä»–çš„æ–‡ä»¶æ ·å¼ã€‚è¿™ä¸ªç‰¹æ€§ä» IE 5.5 å¼€å§‹å°±è¢«æ‰€æœ‰çš„æµè§ˆå™¨æ”¯æŒï¼Œé‚£ä¸ºä»€ä¹ˆä¸€ç›´ä»¥æ¥ä½¿ç”¨è€…å¯¥å¯¥æ— å‡ å‘¢ï¼ŒåŸå› å¾ˆå¤šï¼š åœ¨ä¸€äº›è€çš„æµè§ˆå™¨æœ‰åŠ è½½é¡ºåºçš„ bug æ— æ³•å¹¶è¡ŒåŠ è½½ å¯¼è‡´è¿‡å¤šçš„è¯·æ±‚æ•°é‡ â€¦â€¦ ä¸è¿‡ç°åœ¨å¤§å®¶çš„å‰ç«¯é¡¹ç›®åŸºæœ¬éƒ½ä¼šä½¿ç”¨æ„å»ºå·¥å…·ï¼ˆGulpã€Webpack ç­‰ï¼‰æ‰“åŒ…åå†ä¸Šçº¿ï¼Œå› æ­¤ä»¥ä¸Šå“ªäº›ç¼ºç‚¹ä¹Ÿå°±ä¸å­˜åœ¨äº†ï¼Œè€Œåœ¨ Webpack çš„ css-loader ä¸­ï¼Œæ˜¯å¯ä»¥é…ç½®æ˜¯å¦å¼€å¯ @import çš„ã€‚ Selector Helpersé™¤äº†ä¸Šé¢ä»‹ç»çš„ä¸€äº›ä¸»è¦ç‰¹æ€§ï¼ŒCSS è¿˜æä¾›äº†ä¸€äº›å…¨æ–°çš„ç‰¹æ€§æ¥å¸®åŠ©ä½ æ›´ä¼˜é›…çš„ä¹¦å†™æ ·å¼ã€‚ :matches pseudo-class å·²æ›´åä¸º :is() :matches() CSS ä¼ªç±» å‡½æ•°å°†é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œå¹¶é€‰æ‹©è¯¥åˆ—è¡¨ä¸­ä»»æ„ä¸€ä¸ªé€‰æ‹©å™¨å¯ä»¥é€‰æ‹©çš„å…ƒç´ ï¼Œè¿™å¯¹äºä»¥æ›´ç´§å‡‘çš„å½¢å¼ç¼–å†™å¤§å‹é€‰æ‹©å™¨éå¸¸æœ‰ç”¨ï¼Œè€Œä¸”æµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¹Ÿå·²ç»æ¥è¿‘ 93%ã€‚ 12/* è¯­æ³• */:matches( selector[, selector]* ) 1234567891011.nav:matches(.side,.top) .links:matches(:hover, :focus) &#123; color: #BADA55;&#125;/* ç›¸å½“äºä»¥ä¸‹ä»£ç  */.nav.side .links:hover,.nav.top .links:hover,.nav.side .links:focus,.nav.top .links:focus &#123; color: #BADA55;&#125; æƒ³è¦äº†è§£æ›´å¤šè¯¦æƒ…å¯ä»¥æŸ¥çœ‹è§„èŒƒï¼šSelectors Level 4 @custom-selectoråŒæ—¶ï¼Œä½ è¿˜å¯ä»¥æ‚¨å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é€‰æ‹©å™¨æ¥å®šä¹‰å¯ä»¥åŒ¹é…å¤æ‚é€‰æ‹©å™¨çš„åˆ«åã€‚ 12/* è¯­æ³• */@custom-selector: &lt;custom-selector&gt; &lt;selector-list&gt;; å®šä¹‰çš„æ–¹å¼å’Œ CSS å˜é‡ç±»ä¼¼ï¼Œä½¿ç”¨èµ·æ¥ç¨å¾®æœ‰ç‚¹åŒºåˆ«ã€‚ 123456789101112131415@custom-selector :--text-inputs input[type=\"text\"],input[type=\"password\"];:--text-inputs.disabled,:--text-inputs[disabled] &#123; opacity: 0.5&#125;/* ç›¸å½“äºä»¥ä¸‹ä»£ç  */input[type=\"text\"].disabled,input[type=\"password\"].disabled,input[type=\"text\"][disabled],input[type=\"password\"][disabled] &#123; opacity: 0.5&#125; ç”¨èµ·æ¥å°½ç®¡ä¸Šè¿°çš„ CSS ç‰¹æ€§è¿˜å¤„äºä¸åŒé˜¶æ®µï¼Œæµè§ˆå™¨çš„æ”¯æŒç¨‹åº¦ä¹Ÿä¸å°½ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨ postcss-preset-envï¼Œä½ å°±å¯ä»¥æŠ¢å…ˆå°è¯• CSS çš„æœ€æ–°ç‰¹æ€§ã€‚ å½“ç„¶ï¼Œpostcss-preset-env çš„é…ç½®ä¹Ÿååˆ†ç®€å•ï¼Œä»¥ Webpack ä¸ºä¾‹ï¼š 12345678910111213rules: [ &#123; test: /\\.css$/, use: [ 'style-loader', &#123; loader: 'css-loader', options: &#123; importLoaders: 1 &#125; &#125;, &#123; loader: 'postcss-loader', options: &#123; ident: 'postcss', plugins: () =&gt; [ postcssPresetEnv(/* pluginOptions */) ] &#125; &#125; ] æ€»ç»“ç»è¿‡ä¸€ç•ªæ¢³ç†ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå°½ç®¡ CSS åœ¨ç¤¾åŒºçš„åˆºæ¿€ä¸‹åŠ å¿«äº†æ›´æ–°è¿­ä»£çš„é€Ÿåº¦ï¼Œä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¾ç„¶è¾¾ä¸åˆ° CSS é¢„å¤„ç†å™¨ VS CSS çš„åœ°æ­¥ï¼Œåªèƒ½è¯´åœ¨ä½¿ç”¨ CSS é¢„å¤„ç†å™¨çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ä¸­å°è¯•ä¸€äº›ä¼˜ç§€çš„ CSS æ–°ç‰¹æ€§ï¼Œå³ï¼šCSS é¢„å¤„ç†å™¨ + CSSã€‚ ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶åšä¿¡ï¼Œåœ¨ W3C çš„æ¨åŠ¨ä¸‹ï¼Œéšç€ CSS è‡ªèº«ä¸æ–­å®Œå–„ï¼ŒCSS é¢„å¤„ç†å™¨ç»ˆç©¶ä¼šåƒå½“å¹´çš„ CoffeScript ã€Jade ä¸€æ ·ï¼Œå˜æˆæ—¶ä»£çš„è¿‡æ¸¡äº§ç‰©ã€‚åˆ°é‚£æ—¶å€™ï¼Œå¤§å®¶ä¹Ÿå°±ä¸ç”¨çº ç»“å„ç§ CSS é¢„å¤„ç†å™¨çš„ç¯å¢ƒé…ç½®å’ŒæŠ€æœ¯é€‰å‹ç­‰ï¼Œç›´æ¥æ‰“å¼€ç¼–è¾‘å™¨ï¼Œå°±èƒ½æ„‰å¿«çš„ä¹¦å†™æ ·å¼ã€‚ å‚è€ƒ You might not need a CSS preprocessor CSS3 Modules and the standardization process How to Read W3C Specs Wikipedia - Cascading Style Sheets CSS Custom Properties for Cascading Variables Module Level 1","pubDate":"Tue, 29 Oct 2019 10:00:00 GMT","guid":"https://aotu.io/notes/2019/10/29/css-preprocessor/","category":"Webå¼€å‘"},{"title":"Mongoose-modified-at æ—¶é—´è‡ªåŠ¨è®°å½•æ’ä»¶ä»‹ç»","link":"https://aotu.io/notes/2019/10/28/modified-at/","description":"Mongoose-modified-at æ˜¯ä¸€æ¬¾è‡ªåŠ¨æ›´æ–°å­—æ®µå˜åŒ–æ—¶é—´å¹¶è®°å½•åˆ°æ•°æ®åº“ä¸­çš„ Mongoose æ’ä»¶ï¼Œç±»ä¼¼ Mongoose è‡ªå¸¦çš„ timestamps åŠŸèƒ½ã€‚ ä½¿ç”¨åœºæ™¯è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬æœ‰ä¸ªæ–‡ç« å‘å¸ƒä¸å±•ç¤ºçš„éœ€æ±‚ï¼Œæ•°æ®æ¨¡å‹å¦‚ä¸‹ã€‚ 123456789const schema = new mongoose.Schema(&#123; // æ–‡ç« æ ‡é¢˜ title: String, // æ˜¯å¦ä¸ºè‰ç¨¿ is_draft: Boolean, // æ˜¯å¦æ¨è is_recommended: Boolean, // æ›´å¤šå­—æ®µ...&#125;) å½“æˆ‘ä»¬åœ¨å±•ç¤ºæœ€æ–°æ–‡ç« åˆ—è¡¨æ—¶ï¼Œåº”è¯¥æ˜¯ä»¥æ–‡ç« ç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶é—´å€’åºå±•ç¤ºï¼Œå› ä¸ºæ–‡ç« å¯ä»¥å­˜ä¸ºè‰ç¨¿ï¼Œå¤šæ¬¡ç¼–è¾‘ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ Mongoose æä¾›çš„ createdAt æˆ– updatedAt ä½œä¸ºç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶é—´ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯åœ¨æ¯æ¬¡æ–‡ç« åˆ›å»ºæˆ–æ›´æ–°æ—¶ï¼Œç¡®å®šç”¨æˆ·æ˜¯å‘å¸ƒæ–‡ç« è€Œä¸æ˜¯å­˜ä¸ºè‰ç¨¿ï¼Œç„¶åè®°å½•æ­¤æ¬¡æ—¶é—´ï¼Œç”¨è¯¥æ—¶é—´ä½œä¸ºç¬¬ä¸€æ¬¡å‘å¸ƒçš„æ—¶é—´ã€‚ è¦å®ç°è¯¥åŠŸèƒ½æˆ‘ä»¬éœ€è¦åœ¨ä»£ç é€»è¾‘å±‚è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¯è¡Œä¸è¿‡æœ‰ç‚¹è€¦åˆï¼Œæˆ–è€…è‡ªå·±å°è£…ä¸€ä¸ª Mongoose ä¸­é—´ä»¶æ¥åšè¿™ä»¶äº‹ï¼Œä¸è¿‡ç°åœ¨ä½ å¯ä»¥æŠŠè¿™ä»¶äº‹äº¤ç»™ä¸€ä¸ªç»å—æµ‹è¯•ã€API ä¼˜é›…çš„æ’ä»¶ ModifiedAt æ¥å¤„ç†ã€‚ é¦–å…ˆå®‰è£…æ’ä»¶ã€‚ 1npm install mongoose-modified-at --save ç„¶ååœ¨ Schema åˆå§‹åŒ–æ—¶åšç®€å•çš„é…ç½®å³å¯ï¼Œå¦‚ä¸‹ã€‚ 12345678910111213141516import modifiedAt from 'mongoose-modified-at'// åœ¨ mongoose.model è°ƒç”¨ä¹‹å‰schema.plugin(modifiedAt, &#123; // å‡½æ•°åå°†ä½œä¸ºå­—æ®µåå†™å…¥æ•°æ®åº“ publishedAt(doc) &#123; // å½“å‡½æ•°è¿”å›å€¼ä¸º true æ—¶ï¼Œåˆ™è®°å½•è¯¥æ—¶é—´ return !doc.is_draft &#125;, // æ¨èæ–‡ç« ä¹Ÿæ˜¯å¦‚æ­¤ recommendedAt(doc) &#123; return doc.is_recommended &#125;,&#125;)const Article = mongoose.model('Article', schema) å½“æ–‡æ¡£ä¿å­˜æˆ–æ›´æ–°æºå¸¦ç€ is_draft å­—æ®µå¹¶ä¸”å€¼ä¸º false æ—¶ï¼Œæ’ä»¶å°±ä¼šè®°å½•æ­¤æ¬¡æ—¶é—´åˆ°ä½ å£°æ˜çš„ publishedAt å­—æ®µä¸Šä¸€èµ·å†™å…¥æ•°æ®åº“ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456await Article.create(&#123; title: 'Document Title', is_draft: false, is_recommended: true, // æ›´å¤šå­—æ®µ...&#125;) ç»“æœå¦‚ä¸‹ï¼ˆæ•°æ®åº“ï¼‰ï¼š 12345678&#123; \"title\": \"Document Title\", \"is_draft\": false, \"is_recommended\": true, \"publishedAt\": ISODate(\"2019-09-27T03:11:07.880Z\"), \"recommendedAt\": ISODate(\"2019-09-27T03:11:07.880Z\"), // æ›´å¤šå­—æ®µ...&#125; é™„åŠ æ¡ˆä¾‹ä½œä¸ºæ¸è¿›å¼é¡¹ç›®ï¼Œæˆ‘ä»¬çš„å¼€å‘ä¸€èˆ¬ä¹Ÿæ˜¯æ¸è¿›å¼çš„ï¼Œè™½ç„¶æˆ‘ä»¬ä¼šä¸è‡ªè§‰åœ°è¶…å‰è€ƒè™‘ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½å®Œå…¨è€ƒè™‘åˆ°æœªæ¥éœ€æ±‚çš„å˜åŒ–ï¼Œå‡å¦‚æˆ‘ä»¬å¯¹æŸä¸ªé¡¹ç›®çš„åŠŸèƒ½å·²ç»å®Œæˆå¹¶ç¨³å®šä¸Šçº¿äº†ï¼Œåæ¥æ¯”å¦‚æˆ‘ä»¬éœ€è¦åšæ•°æ®ç»Ÿè®¡åˆ†æçš„å·¥ä½œï¼Œè¿™é¡¹å·¥ä½œçš„åˆ†æç»´åº¦å¯¹æ—¶é—´çš„ç²¾åº¦è¦æ±‚æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥è¦æ˜¯æˆ‘ä»¬åœ¨å¼€å‘æ—¶å¹¶æ²¡æœ‰è€ƒè™‘åˆ°è¦æ·»åŠ è¿™äº›æ—¶é—´å­—æ®µï¼ˆå› ä¸ºå¯èƒ½å¯¹ä¸šåŠ¡ä¸æ˜¯å¿…é¡»çš„ï¼‰ï¼Œè€Œç°åœ¨éœ€è¦åŠ ä¸Šè¿™äº›å­—æ®µï¼Œè¦æ˜¯å»åŸæ¥çš„ä»£ç åŸºç¡€ä¸Šæ”¹åŠ¨æ·»åŠ ï¼Œå¦‚æœæ”¹åŠ¨çš„åœ°æ–¹å°‘è¿˜å¥½ï¼Œå¦‚æœæœ‰å®Œå–„çš„æµ‹è¯•ç”¨ä¾‹è¿˜å¥½ï¼Œå¦åˆ™è¿™ä¹Ÿè®¸ä¼šæ”¹çš„å¿ƒæƒŠèƒ†æˆ˜ï¼Œå› ä¸ºä½ éœ€è¦ç¡®ä¿æ¯ä¸€å¤„æ”¹åŠ¨ä¸ä¼šäº§ç”Ÿé”™è¯¯å½±å“ã€‚æ‰€ä»¥æ­¤æ—¶ï¼Œä½¿ç”¨æ— ä¾µå…¥å¼çš„ä¸­é—´ä»¶æ’ä»¶ ModifiedAt é‚£å°±çœå¿ƒå¾ˆå¤šäº†ï¼Œåªéœ€åœ¨æ¨¡å‹å‡ºå£ç®€å•é…ç½®ï¼Œæ— éœ€æ”¹åŠ¨é€»è¾‘å±‚ä»£ç ï¼Œå³å¯å®ç°åˆšåˆšæƒ³è¦çš„åŠŸèƒ½ã€‚ APIä»‹ç»ä¸Šé¢æ˜¯ ModifiedAt çš„å¯Œ API å½¢å¼ï¼Œå³å¯¹è±¡æ ¼å¼ï¼Œå…¨éƒ¨å‚æ•°é€‰é¡¹å¦‚ä¸‹ã€‚ 123456789101112schema.plugin(modifiedAt, &#123; // è®¾ç½®ç›‘å¬å­—æ®µ fields: ['name', 'status', 'another'], // è®¾ç½®åç¼€ suffix: '_your_suffix', // è®¾ç½®è·¯å¾„é»˜è®¤è¡Œä¸º select: true, // è‡ªå®šä¹‰å­—æ®µ customField(doc) &#123; // åšä¸€äº›ä½ æƒ³åšçš„äº‹ï¼Œç„¶åè¿”å› Boolean å€¼ï¼Œå‘Šè¯‰æ’ä»¶æ˜¯å¦è®°å½•æ—¶é—´ &#125;,&#125;) ğŸ å‚æ•°è§£é‡Šï¼š fields: è®¾ç½®ç›‘å¬å­—æ®µï¼Œåœ¨æ–‡æ¡£åˆ›å»ºæˆ–æ›´æ–°æ—¶ï¼Œå¦‚æœå­˜åœ¨è¢«ç›‘å¬çš„å­—æ®µï¼Œåˆ™è‡ªåŠ¨ä»¥ å­—æ®µå + åç¼€ çš„å½¢å¼ä½œä¸ºå­—æ®µï¼Œå¹¶è®°å½•æ­¤æ¬¡æ›´æ–°æ—¶é—´åˆ°è¯¥å­—æ®µä¸Šã€‚å¯é€‰ï¼ŒArray ç±»å‹ã€‚ suffix: è®¾ç½®åç¼€ï¼Œé»˜è®¤å€¼ä¸º _modifiedAtã€‚å¯é€‰ï¼ŒString ç±»å‹ã€‚ select: è®¾ç½®è·¯å¾„é»˜è®¤è¡Œä¸ºï¼Œé»˜è®¤ä¸º true ï¼Œå‚è€ƒ Mongoose æ–‡æ¡£ã€‚å¯é€‰ï¼ŒBoolean ç±»å‹ã€‚ customField: è‡ªå®šä¹‰å­—æ®µï¼Œæ­¤å­—æ®µä¸ä¼šåŠ åç¼€ï¼Œä»¥å‡½æ•°å½¢å¼æ·»åŠ åˆ°å‚æ•°ä¸­ï¼Œç”¨äºè‡ªå®šä¹‰åŠŸèƒ½ï¼Œå‡½æ•°æ¥æ”¶å”¯ä¸€æ–‡æ¡£å‚æ•°ï¼Œå½“å‡½æ•°è¿”å›å€¼ä¸ºçœŸå€¼æ—¶ï¼Œåˆ™è®°å½•æ­¤æ¬¡æ—¶é—´åˆ°è¯¥å­—æ®µä¸Šã€‚ ç®€åŒ–APIğŸš€ ä¸ºäº†å¢åŠ  API çš„ç®€æ´æ˜“ç”¨åŒæ—¶é¿å…è¿‡åº¦é‡è½½ï¼ŒModifiedAt åªå¢åŠ äº†ä¸€ç§ç®€åŒ–ä¼ å‚æ ¼å¼ï¼Œå¦‚ä¸‹ã€‚ 1schema.plugin(modifiedAt, ['name', 'status']) æ„æ€æ˜¯å°† fields é€‰é¡¹æå–å‡ºæ¥ä½œä¸ºå‚æ•°ï¼Œå†™å…¥æ•°æ®åº“çš„ç»“æœå¦‚ä¸‹ã€‚ 123456&#123; \"name\": \"Tom\", \"status\": 1, \"name_modifiedAt\": ISODate(\"2019-09-27T03:13:17.888Z\"), \"status_modifiedAt\": ISODate(\"2019-09-27T03:13:17.888Z\"),&#125; æ”¯æŒå¼‚æ­¥ä½ éœ€è¦ Node.js ç‰ˆæœ¬æ”¯æŒ async/await å³å¯ã€‚ 12345678910111213141516171819202122import P from 'bluebird'const petSchema = new mongoose.Schema(&#123; name: String, age: Number, sex: String, // 1ï¼šè¡¨ç¤ºé‡‡è´­ä¸­ï¼Œ2ï¼šå·²è´­ä¹°ï¼Œ3ï¼šå·²å”®å‡º status: Number,&#125;)petSchema.plugin(modifiedAt, &#123; // è®°å½•è´­ä¹°äºå“ªæ—¶ async boughtAt(doc) &#123; // å»¶æ—¶ 1s await P.delay(1000) return doc.status === 2 &#125;, // è®°å½•å”®å‡ºäºå“ªæ—¶ soldAt(doc) &#123; return doc.status === 3 &#125;,&#125;) æ”¯æŒ Mongoose 4.xå¦‚æœä½ ç°åœ¨ä½¿ç”¨çš„æ˜¯ Mongoose 4.xï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨æ’ä»¶ 1.x ç‰ˆæœ¬ï¼Œæ–‡æ¡£å¯åœ¨è¿™é‡ŒæŸ¥çœ‹ã€‚ 1npm install mongoose-modified-at@1 --save â€œ100%â€æµ‹è¯•è¦†ç›–ç‡29 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ777 è¡Œæµ‹è¯•ä»£ç ï¼Œâ€œ100%â€ æµ‹è¯•è¦†ç›–ç‡ã€‚ ç»†èŠ‚æ›´å¤šç»†èŠ‚å¤„ç†è¯·ç§»æ­¥è‡³ GitHub æ–‡æ¡£ï¼Œè¿™é‡Œã€‚ æœ€åæœ¬æ’ä»¶åœ¨äº¬ä¸œæ™ºèƒ½è®¾è®¡é¡¹ç›® - ç¾šç‘ä¸­å®é™…åº”ç”¨ï¼Œling.jd.com æ¬¢è¿ä½“éªŒ ğŸ˜˜ã€‚","pubDate":"Mon, 28 Oct 2019 02:00:00 GMT","guid":"https://aotu.io/notes/2019/10/28/modified-at/","category":"NodeJS"},{"title":"Taro é‚€ä½ åŠ å…¥ç¤¾åŒºå…±å»º â€” ç¤¾åŒºå…±å»ºå€¡è®®ä¹¦","link":"https://aotu.io/notes/2019/10/24/taro-open/","description":"Taro ä½œä¸ºä¸€ä¸ªå¤šç«¯ç»Ÿä¸€å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œè‡ªè¯ç”Ÿä»¥æ¥ä¸€ç›´ä¿æŒç€é«˜é€Ÿçš„å‘å±•æ€åŠ¿ï¼Œ ä»ä¸€ä¸ªå•ä¸€çš„å¼€å‘æ¡†æ¶å‘å±•åˆ°å¦‚ä»ŠæœåŠ¡æ•°ä¸‡åå¼€å‘è€…çš„å¤šç«¯è§£å†³æ–¹æ¡ˆï¼ŒTaro çš„æˆé•¿æœ‰ Taro å›¢é˜Ÿä¸å¿˜åˆå¿ƒçš„åŠªåŠ›ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œç¦»ä¸å¼€ç¤¾åŒºå¹¿å¤§å¼€å‘è€…çš„æ”¯æŒå’Œå¸®åŠ©ã€‚ å¼€æºé¢ä¸´ç€ä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€ç»„æ•°æ®ã€‚ Taro ä»å¼€æºåˆ°å½“å‰è¡Œæ–‡ä¸ºæ­¢ï¼Œç»Ÿå…±æœ‰ 5227 æ¬¡ commitsï¼Œå‘å¸ƒäº† 235 ä¸ªç‰ˆæœ¬ï¼ŒåŒæ—¶æœ‰ 3908 ä¸ª issues è¢«å¼€å¯ï¼Œåœ¨ Taro å›¢é˜Ÿå’Œç¤¾åŒºçš„åŠªåŠ›ä¸‹ï¼Œå·²ç»å…³é—­äº† 3296 ä¸ªï¼Œè¿˜æœ‰è¿‘ 600 ä¸ª issues æœ‰å¾…è§£å†³ï¼Œè€Œæ¯å‘¨ Taro çš„æ–°å¼€å¯çš„ issues ä¹Ÿåœ¨ 50 ä¸ªå·¦å³ï¼›åŒæ—¶ä¹Ÿæ”¶è·äº† 709 ä¸ª PRï¼Œåˆå…¥äº† 656 ä¸ªã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒTaro äº¤æµç¤¾åŒº å‘å¸–æ•°ä¹Ÿè¾¾åˆ° 3000 ä¸ªï¼Œæ¯å‘¨ä»¥ 200 ä¸ªå·¦å³çš„å¢é€Ÿåœ¨å¢åŠ ï¼Œè€Œ Taro å®˜æ–¹æ–‡æ¡£ ä½œä¸º Taro å…¥é—¨åŠå¼€å‘å¿…å¤‡çš„èµ„æºï¼Œæ¯å‘¨çš„è®¿é—®é‡è¾¾åˆ°äº† 20wã€‚ åŒæ—¶ Taro è¿˜æœ‰ 20 ä½™ ä¸ª 500 äººå·¦å³çš„å¼€å‘è€…äº¤æµå¾®ä¿¡ç¾¤ï¼Œä»¥åŠ 10 ä½™ä¸ªè·Ÿå„å°ç¨‹åºå®˜æ–¹å›¢é˜Ÿã€å„å¤§å…¬å¸ç ”å‘å›¢é˜Ÿçš„ç ”è®¨ç¾¤ï¼Œæ¯å¤© Taro å›¢é˜Ÿçš„å¼€å‘äººå‘˜éƒ½è¦é­å—å¤§è§„æ¨¡çš„ä¿¡æ¯è½°ç‚¸ã€‚ ç”±æ­¤å¯è§ï¼ŒTaro ç›®å‰æ‹¥æœ‰åºå¤§ä¸”æ´»è·ƒçš„å¼€å‘è€…ç¤¾åŒºï¼Œæ¯å¤©éƒ½ä¼šäº§ç”Ÿå¤§é‡çš„ä¿¡æ¯ï¼Œæˆ–æ˜¯é—®é¢˜ï¼Œæˆ–æ˜¯å»ºè®®ï¼Œæˆ–æ˜¯ä»£ç æäº¤ï¼Œæˆ–æ˜¯æœ‰ç”¨çš„è½®å­ã€‚å½“ç¤¾åŒºå˜å¾—è¶Šæ¥è¶Šå¤§åï¼Œå¦‚ä½•è¿›è¡Œæœ‰æ•ˆçš„ç®¡ç†ï¼Œæå‡ç¤¾åŒºæ•´ä½“çš„ä½¿ç”¨ä½“éªŒï¼Œä¾¿æˆäº†å›°æ‰° Taro å›¢é˜Ÿçš„é—®é¢˜ï¼Œè¿«åˆ‡éœ€è¦åœ¨æ–¹æ¡ˆè¿­ä»£ä¸ç¤¾åŒºç»´æŠ¤ä¹‹é—´å¯»æ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œä»¥ä½¿ Taro å¯ä»¥èµ°å¾—æ›´è¿œï¼Œå‘å±•å¾—æ›´å¥½ã€‚ æ¥è‡ªç¤¾åŒºçš„åŠ›é‡æ­£æ‰€è°“ã€Œå•ä¸ä¸æˆçº¿ï¼Œç‹¬æœ¨ä¸æˆæ—ã€ã€‚ Taro å‘å±•è‡³ä»Šæ—©å·²ä¸åœ¨å±äºå•ä¸€å›¢é˜Ÿçš„é¡¹ç›®äº†ï¼Œè€Œæ˜¯æ•´ä¸ª Taro å¼€å‘ç¤¾åŒºå…±åŒçš„é¡¹ç›®ã€‚åœ¨ Taro æ‰€å±çš„ NervJS ç»„ç»‡çš„æˆå‘˜ ä¸­ä¹Ÿå·²ç»åŠ å…¥äº†åƒåä¸ºã€è…¾è®¯ç­‰å…¶ä»–å…¬å¸çš„ç ”å‘äººå‘˜ï¼Œå…±åŒå»ºè®¾é¡¹ç›®ï¼Œè€Œæ•´ä¸ªç¤¾åŒºçš„è´¡çŒ®è€…ä¹Ÿè¾¾åˆ°äº† 230 ä½ã€‚ è€Œåœ¨æ‰€æœ‰çš„ç¤¾åŒºè´¡çŒ®ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ„Ÿè°¢ï¼š Tom Huang ï¼Œç‹¬ç«‹ä¸º Taro å¼€å‘æ‰€æœ‰ç«¯çš„ MobX æ”¯æŒ jsNewbeeï¼Œä¸º Taro è´¡çŒ®äº†ä¸€ä¸ªå®Œæ•´æ”¯æŒ å°ç¨‹åº + H5 + React Native çš„å¤šç«¯æ ·ä¾‹ Chunlinï¼Œæ¥è‡ªåä¸ºï¼Œä¸º Taro å®Œå–„äº†å¿«åº”ç”¨çš„è½¬æ¢æ”¯æŒ åŒæ—¶ä¹Ÿæ„Ÿè°¢å—é‚€æˆä¸º TaroUI æ ¸å¿ƒç»´æŠ¤äººå‘˜çš„ Garfield550 (å°å§å§)ã€æ¢éŸ³ã€ShaoQian Liuï¼Œä»–ä»¬å°†æ”¯æ’‘èµ· TaroUI çš„åç»­è¿­ä»£ä¸ç»´æŠ¤ã€‚ å½“ç„¶è¿˜æœ‰åœ¨ç¤¾åŒºä¸­ä¹äºåŠ©äººã€ç§¯æè´¡çŒ®çš„ zacksleo ã€Jay Fongã€loveonelongã€lolipop99ã€æ³¢ä»”ç³•ã€åŸç½ªã€lentoo ã€ç™½é¢†å¤å…¬å­ ã€YuanQuanã€ tourzeã€ lingxiaoZhu ç­‰ç­‰ã€‚ æ­¤å¤–ï¼Œè¿˜è¦æ„Ÿè°¢ä¸€ç›´é»˜é»˜ä¸º Taro å‘å±•æä¾›å®è´µå»ºè®®çš„ç ”å‘å›¢é˜Ÿï¼šè…¾è®¯äº‘ã€æ•°å­—å¹¿ä¸œã€è…¾è®¯CDCã€ç½‘æ˜“ä¸¥é€‰ã€åä¸ºå¼€æºå›¢é˜Ÿã€æ‹›è”æ¶ˆè´¹é‡‘èç­‰ç­‰ ç¤¾åŒºçš„åŠ›é‡ä¸€ç›´åœ¨æ”¯æ’‘ Taro å‰è¿›ã€‚ æ‰€ä»¥ï¼Œå¦‚ä»Š Taro é¢ä¸´çš„ç¤¾åŒºç»´æŠ¤é—®é¢˜æˆ‘ä»¬å¸Œæœ›å¯ä»¥äº¤ç»™ç¤¾åŒºæ¥è¿›è¡Œè‡ªæˆ‘ç®¡ç†ã€‚ æœŸå¾…ä½ çš„åŠ å…¥ä¸ºäº†èƒ½å¤Ÿè®©ç¤¾åŒºæ›´åŠ é«˜æ•ˆã€å¥åº·çš„è¿è½¬ä¸‹å»ï¼ŒTaro å®˜æ–¹å›¢é˜Ÿå¸Œæœ›èƒ½å¤Ÿä»ç¤¾åŒºä¸­å¸å¼•å¼€å‘è€…æ¥å…±åŒç»´æŠ¤ï¼Œè¿›è¡Œç¤¾åŒºå…±å»ºã€‚ ç¤¾åŒºå…±å»ºæœ¬æ¬¡æ‹Ÿå¼€æ”¾ä¸‰å¤§ç±»è§’è‰²ï¼ŒTaro å›¢é˜Ÿä¼šä¸ºæ¯ä¸€ç±»è§’è‰²è®¾å®šä¸€å®šé—¨æ§›ä»¥åŠæ¿€åŠ±æœºåˆ¶ï¼Œä»è€Œä¿è¯æ•´ä½“è´¨é‡ã€‚ èƒ½åŠ›å®Œå–„ å¤´è¡” å‡†å…¥æœºåˆ¶ æƒç›Š è®¤è¯å¼€å‘è€… 1. ä¸º Taro å®ç°è¿‡ç‹¬ç«‹åŠŸèƒ½ç‰¹æ€§ 2. ä»£ç  commit æ•°åŠä»£ç è´¡çŒ®é‡è¾¾åˆ°ä¸€å®šæ ‡å‡† 1. è·å– Taro é¡¹ç›® developer æƒé™ 2. æ¥è‡ª Taro å›¢é˜Ÿå®šæœŸç¤¼å“ä¸å¼€æºè®¤è¯è¯ä¹¦ 3. Readme åŠå®˜ç½‘ã€æ–‡æ¡£å±•ç¤º ä»£ç è´¡çŒ®è€… ä¸º Taro æäº¤è¿‡ PR Readme åŠå®˜ç½‘ã€æ–‡æ¡£å±•ç¤º ç¤¾åŒºç®¡ç† å¤´è¡” å‡†å…¥æœºåˆ¶ æƒç›Š èŒè´£ ç¤¾åŒºç‰ˆä¸» 1. é€šè¿‡ç¤¾åŒºæŠ¥åï¼Œé´é€‰åäº§ç”Ÿ 2. é€šè¿‡è€ƒå¯Ÿåœ¨ Taro ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦ï¼Œç”± Taro å›¢é˜Ÿè¿›è¡Œå®šå‘é‚€è¯· 1. Readme åŠå®˜ç½‘ã€æ–‡æ¡£å±•ç¤º 2. æ‰€æå‡ºç‰¹æ€§ä¼šä¼˜å…ˆè€ƒè™‘åœ¨ Taro ç‰ˆæœ¬ä¸­åŠ å…¥ 3. æ¥è‡ª Taro å›¢é˜Ÿå®šæœŸç¤¼å“ä¸å¼€æºè®¤è¯è¯ä¹¦ 1. è´Ÿè´£ç¤¾åŒºå„ç‰ˆå—çš„ç®¡ç†2. å®šæœŸå‘å¸ƒç‰ˆå—ç›¸å…³ä¸»é¢˜å¸– 3. å®šæœŸæ”¶é›†ç‰ˆå—é—®é¢˜å¸–å­ï¼Œè¿›è¡Œæ±‡æ€»ï¼Œåé¦ˆç»™ Taro å›¢é˜Ÿ 4. å¯¹ç‰ˆå—å†…å¸–å­è¿›è¡Œå®¡æ ¸ï¼Œå‰”é™¤æ— ç”¨ã€è¿åæ³•å¾‹ç­‰å¸–å­ GitHub Issues ç®¡ç†å‘˜ 1. é€šè¿‡ç¤¾åŒºæŠ¥åï¼Œé´é€‰åäº§ç”Ÿ 2. é€šè¿‡è€ƒå¯Ÿåœ¨ Taro ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦ï¼Œç”± Taro å›¢é˜Ÿè¿›è¡Œå®šå‘é‚€è¯· 1. Readme åŠå®˜ç½‘ã€æ–‡æ¡£å±•ç¤º 2. æ‰€æå‡ºç‰¹æ€§ä¼šä¼˜å…ˆè€ƒè™‘åœ¨ Taro ç‰ˆæœ¬ä¸­åŠ å…¥ 3. æ¥è‡ª Taro å›¢é˜Ÿå®šæœŸç¤¼å“ä¸å¼€æºè®¤è¯è¯ä¹¦ 4. å‚ä¸ GitHub robot å®Œå–„ 1. è´Ÿè´£å¯¹ GitHub issues ç­”ç–‘è§£æƒ‘ä»¥åŠæ‰“æ ‡åˆ†ç±» 2. è´Ÿè´£æ¯å‘¨æ±‡æ€» issuesï¼Œå¹¶å°† issues æäº¤åˆ° Taro å›¢é˜Ÿ 3. è´Ÿè´£æ¯å‘¨ç²¾é€‰ issuesï¼Œå¹¶å°†æ•°æ®åŒæ­¥åˆ° Taro ç¤¾åŒº äº¤æµç¾¤ç®¡ç†å‘˜ 1. é€šè¿‡ç¤¾åŒºæŠ¥åï¼Œé´é€‰åäº§ç”Ÿ 2. é€šè¿‡è€ƒå¯Ÿåœ¨ Taro ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦ï¼Œç”± Taro å›¢é˜Ÿè¿›è¡Œå®šå‘é‚€è¯· 1. Readme åŠå®˜ç½‘ã€æ–‡æ¡£å±•ç¤º 2. æ‰€æå‡ºç‰¹æ€§ä¼šä¼˜å…ˆè€ƒè™‘åœ¨ Taro ç‰ˆæœ¬ä¸­åŠ å…¥ 3. æ¥è‡ª Taro å›¢é˜Ÿå®šæœŸç¤¼å“ä¸å¼€æºè®¤è¯è¯ä¹¦ 4. å‚ä¸ ç¾¤å°åŠ©æ‰‹ å®Œå–„ 1. è´Ÿè´£ç¾¤å†…å†…å®¹çš„ç®¡ç†ï¼Œåˆ›é€ è‰¯å¥½çš„æ²Ÿé€šäº¤æµç¯å¢ƒ 2. è´Ÿè´£ç¾¤å†…é—®é¢˜çš„ç­”ç–‘è§£æƒ‘ï¼Œå¼•å¯¼å¼€å‘è€…å»ç¤¾åŒºã€GitHub issues è·å–ç­”æ¡ˆ 3. è´Ÿè´£æ“ä½œç¤¾åŒºç¾¤ç®¡ç†å·¥å…·ï¼Œæ•´ç†ç¾¤å†…é—®é¢˜ï¼ŒåŒæ­¥åˆ° Taro ç¤¾åŒº çŸ¥è¯†æ„å»º å½¢å¼ æäº¤æ–¹å¼ æƒç›Š Taro è¯¾ç¨‹è§†é¢‘å½•åˆ¶ é€šè¿‡é‚®ç®±å‘é€ä¸ªäººä¿¡æ¯åŠè¯•è®²è§†é¢‘é‚®ç®±ï¼štaro@jd.comå†…å®¹ï¼š1. ä¸ªäººä¿¡æ¯ï¼šä¸»æ”»æŠ€æœ¯æ–¹å‘ã€ä»ä¸šç»å†ã€å…¬å¼€åˆ†äº«ç»éªŒç­‰ 2. è¯•è®²è§†é¢‘é“¾æ¥é€šè¿‡é´é€‰åï¼ŒTaro å›¢é˜Ÿä¼šä¸ä½ è”ç³»æ²Ÿé€šåç»­çš„è§†é¢‘å½•åˆ¶äº‹å®œ æˆä¸º Taro å®˜æ–¹åˆä½œä¼™ä¼´ï¼Œè§†é¢‘è¯¾ç¨‹ç»ç”± Taro å›¢é˜Ÿå®¡æ ¸åï¼ŒTaro å›¢é˜Ÿä¼šå…¨åŠ›ååŠ©è¿›è¡Œè¿è¥æ¨å¹¿ Taro å¼€å‘å®è·µæ–‡ç« æ’°å†™ é€šè¿‡é‚®ç®±æŠ•ç¨¿é‚®ç®±ï¼štaro@jd.comå†…å®¹ï¼š1. md æ–‡ä»¶ï¼ˆè‹¥ä¸ºç³»åˆ—æ–‡ç« è¯·æ·»åŠ å¤§çº²ï¼‰ 2. æ˜¯å¦åœ¨ Taro æ¸ é“é¦–å‘é€šè¿‡é´é€‰åï¼ŒTaro å›¢é˜Ÿä¼šä¸ä½ è”ç³»æ²Ÿé€šåç»­å‘å¸ƒäº‹å®œ æˆä¸º Taro å®˜æ–¹åˆä½œä¼™ä¼´ï¼Œæ–‡ç« ç»ç”± Taro å›¢é˜Ÿå®¡æ ¸åï¼Œä¼šé€šè¿‡ Taro ç›¸å…³ä¼˜è´¨æ¸ é“è¿›è¡Œå‘å¸ƒ å†™åœ¨æœ€åTaro ä½œä¸ºä¸€ä¸ªå¤šç«¯å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œè¿˜å¤„åœ¨åˆçº§çš„å‘å±•é˜¶æ®µï¼Œæ˜¯ä¸€ä¸ªå‘å±•ä¸­çš„æ–¹æ¡ˆï¼Œåœ¨ä¸ä¹…çš„æœªæ¥æˆ‘ä»¬ä¼šæœ‰æ›´å¤šæ–°çš„åŠŸèƒ½ã€ç‰¹æ€§æ¨å‘å¼€å‘è€…ï¼Œç”šè‡³å¯èƒ½ä¹Ÿæœ‰é¢ è¦†æ€§çš„ä¸œè¥¿å‡ºç°ï¼Œè®© Taro æˆä¸ºä¸€ä¸ªæ›´æ£’çš„æ–¹æ¡ˆã€‚ç›®å‰ Taro å·²ç»ç¿»è¿‡äº†ä¸€åº§åº§å‘å±•çš„å±±å³°ï¼Œä½†ä»–æ­£åœ¨å‘æ›´é«˜å±±å³°è¿ˆè¿›ã€‚ é•¿é£ç ´æµªä¼šæœ‰æ—¶ï¼Œç›´æŒ‚äº‘å¸†æµæ²§æµ·ã€‚ Taro è¯šé‚€ä½ çš„åŠ å…¥è”ç³»é‚®ç®±ï¼štaro@jd.comé‚®ä»¶æ ‡é¢˜ï¼šã€å…±å»ºã€‘+ ä½ æƒ³è¯´çš„è¯ åŠ å…¥ Taro å¾®ä¿¡ç¾¤ï¼ŸåŠ ã€Œ Taroå°åŠ©æ‰‹ã€ï¼ˆå¾®ä¿¡å·: jdtesterï¼‰å›å¤ taro å³å¯ã€‚","pubDate":"Thu, 24 Oct 2019 03:30:00 GMT","guid":"https://aotu.io/notes/2019/10/24/taro-open/","category":"ç§»åŠ¨å¼€å‘"},{"title":"ç©è½¬ Taro è·¨ç«¯ä¹‹ flex å¸ƒå±€ç¯‡","link":"https://aotu.io/notes/2019/09/25/taro-flex/","description":"ç©è½¬ Taro è·¨ç«¯ä¹‹ flex å¸ƒå±€ç¯‡ï¼Œå¸¦ä½ äº†è§£ flex å¸ƒå±€åœ¨å„å°ç¨‹åºç«¯çš„è¡¨ç°è¯¦æƒ…å¹¶ç»™å‡ºæœ€ä½³å®è·µ demo ç©è½¬Taroè·¨ç«¯ä¹‹flexå¸ƒå±€ç¯‡Taro æ˜¯ä¸€å¥—éµå¾ª React è¯­æ³•è§„èŒƒçš„è·¨å¹³å°å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ç›®å‰å½“æˆ‘ä»¬ä½¿ç”¨ Taro çš„æ—¶å€™ï¼Œåœ¨ä¸åŒå¹³å°ä¸Šçš„å¼€å‘ä½“éªŒè¿˜æœ‰ä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéƒ½æœŸå¾…æœ‰ä¸€å¥—è·¨å¹³å°ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿä»¥æœ€å°å·®å¼‚çš„æ–¹å¼å‘å¼€å‘è€…æä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚ åœ¨è·¨å¹³å°å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä¸åŒå¹³å°ä¹‹é—´çš„å·®å¼‚å°¤å…¶ä½“ç°åœ¨æ ·å¼çš„ç»Ÿä¸€ä¸Šï¼Œç”±äºä¸åŒå¹³å°å¯¹æ ·å¼çš„æ”¯æŒç¨‹åº¦å¹¶ä¸ä¸€è‡´ï¼ŒTaro å¾ˆéš¾èƒ½å¤Ÿé€šè¿‡ç¼–è¯‘çš„æ‰‹æ®µæ¥å¯¹è·¨å¹³å°æ ·å¼è¿›è¡Œç»Ÿä¸€ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ”¯æŒè·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆæ¥å¯¹æ ·å¼è¿›è¡Œç»Ÿä¸€ã€‚ è·¨å¹³å°æ ·å¼è€ƒè™‘é¡µé¢å¸ƒå±€å’Œæ ·å¼ H5 æ˜¯æœ€ä¸ºçµæ´»çš„ï¼Œå°ç¨‹åºæ¬¡ä¹‹ï¼ŒReact Native å’Œå¿«åº”ç”¨æœ€å¼±ï¼Œç»Ÿä¸€è·¨å¹³å°æ ·å¼åº”å½“ä¼˜å…ˆå¯¹é½çŸ­æ¿ï¼Œä¹Ÿå°±æ˜¯è¦ä»¥ React Native å’Œå¿«åº”ç”¨çš„çº¦æŸæ¥ç®¡ç†æ ·å¼ï¼ŒåŒæ—¶å…¼é¡¾å°ç¨‹åºçš„é™åˆ¶ï¼Œè€Œ Flexbox å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚ åœ¨æ„å»ºé¡µé¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Flexbox é«˜æ•ˆåœ°å®Œæˆé¡µé¢ä»£ç ï¼Œè™½ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰å±æ€§éƒ½å¯ä»¥å…¨å¹³å°é€‚åº”çš„ï¼Œä½†æ˜¯å®ƒåœ¨å…¨å¹³å°éƒ½èƒ½å¤Ÿå¾—åˆ°è¶³å¤Ÿçš„æ”¯æŒï¼Œè€Œä¸”æ‰€æœ‰å¹³å°å¯ä»¥å¾ˆå®¹æ˜“é€šè¿‡å®ƒæ¥ç»˜åˆ¶é€šç”¨æ€§å¾ˆé«˜çš„é¡µé¢ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Flexbox æ–¹æ¡ˆæ¥å®Œæˆè¿™ä¸ªè·¨å¹³å°æ¼”ç¤ºé¡¹ç›®ã€‚ é¢„è§ˆåœ°å€ Flexbox å¸ƒå±€ (Flexible Box Layout)Flexbox æ˜¯å¼¹æ€§å¸ƒå±€æ¨¡å—(CSS Flexible Box Layout Module)å¸¸ç”¨çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§ç”¨äºåœ¨å•ä¸ªç»´åº¦ä¸­æ˜¾ç¤ºé¡¹ç›®è¡Œæˆ–åˆ—çš„å¸ƒå±€æ¨¡å‹ã€‚åœ¨è§„èŒƒä¸­ï¼Œ Flexbox è¢«æè¿°ä¸ºç”¨æˆ·ç•Œé¢è®¾è®¡çš„å¸ƒå±€æ¨¡å‹ã€‚ Flexbox çš„å…³é”®ç‰¹æ€§æ˜¯ flex å¸ƒå±€ä¸­çš„é¡¹ç›®å¯ä»¥å¢é•¿å’Œç¼©å°ã€‚å¯ä»¥å°†ç©ºé—´åˆ†é…ç»™é¡¹ç›®æœ¬èº«ï¼Œæˆ–è€…åœ¨é¡¹ç›®ä¹‹é—´æˆ–å‘¨å›´åˆ†é…ç©ºé—´ã€‚ åœ¨ Flexbox ä¸­ï¼Œé‡‡ç”¨ flex å¸ƒå±€ çš„å…ƒç´ ï¼Œç§°ä¸º flex å®¹å™¨(flex container)ï¼Œ flex å®¹å™¨æ‰€æœ‰çš„å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º flex å…ƒç´ (flex item)ã€‚Flex å®¹å™¨ é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´(main-axis)å’Œå‚ç›´çš„äº¤å‰è½´(cross-axis)ã€‚flex å…ƒç´  é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®(ä¸è¾¹æ¡†çš„äº¤å‰ç‚¹)å«åš main-start ï¼Œç»“æŸä½ç½®å«åš main end ;äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš cross-start ï¼Œç»“æŸä½ç½®å«åš cross-end ;å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš main-size ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš cross-size ã€‚ Flexbox å¯ä»¥å¯¹é½ä¸»è½´æˆ–æ¨ªè½´ä¸Šçš„é¡¹ç›®ï¼Œä»è€Œæä¾›å¯¹ä¸€ç»„é¡¹ç›®çš„å¤§å°å’Œå¯¹é½çš„é«˜çº§æ§åˆ¶ï¼Œå¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ flex-directionã€align-items å’Œ justify-content ä¸‰ä¸ªæ ·å¼å±æ€§å°±å·²ç»èƒ½æ»¡è¶³å¤§å¤šæ•°å¸ƒå±€éœ€æ±‚ï¼Œæ¢è€Œè¨€ä¹‹å¦‚æœç†Ÿæ‚‰ Flexbox å°±å¯ä»¥åº”å¯¹å¤§å¤šæ•°åœºæ™¯ä¸‹çš„å¸ƒå±€éœ€æ±‚ã€‚ æ³¨æ„ï¼Œè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„ float ã€ clear å’Œ vertical-align å±æ€§å°†å¤±æ•ˆã€‚ Flex Container å±æ€§åœ¨è§„èŒƒä¸­ï¼Œ Flex Container ä¸Šï¼Œä¸€å…±æœ‰ä¸ƒä¸ªå±æ€§å¯ä»¥è®¾ç½®ï¼Œä½†æ˜¯ flex-flow åœ¨ React Native ä¸Šæ˜¯ä¸æ”¯æŒçš„ã€‚ flex-directionflex-direction å±æ€§æŒ‡å®šäº†flex å…ƒç´ æ˜¯å¦‚ä½•åœ¨ flex å®¹å™¨ä¸­å¸ƒå±€çš„ï¼Œå®šä¹‰äº†ä¸»è½´çš„æ–¹å‘(æ­£æ–¹å‘æˆ–åæ–¹å‘)ã€‚ æ”¯æŒçš„å€¼å¦‚ä¸‹ï¼š|å€¼|æ„ä¹‰||â€“|â€“||row|flex å®¹å™¨çš„ä¸»è½´è¢«å®šä¹‰ä¸ºä¸æ–‡æœ¬æ–¹å‘ç›¸åŒã€‚ ä¸»è½´èµ·ç‚¹å’Œä¸»è½´ç»ˆç‚¹ä¸å†…å®¹æ–¹å‘ç›¸åŒã€‚||row-reverse|è¡¨ç°å’Œ row ç›¸åŒï¼Œä½†æ˜¯ç½®æ¢äº†ä¸»è½´èµ·ç‚¹å’Œä¸»è½´ç»ˆç‚¹ã€‚||column|flex å®¹å™¨çš„ä¸»è½´å’Œå—è½´ç›¸åŒã€‚ä¸»è½´èµ·ç‚¹ä¸ä¸»è½´ç»ˆç‚¹å’Œä¹¦å†™æ¨¡å¼çš„å‰åç‚¹ç›¸åŒã€‚||column-reverse|è¡¨ç°å’Œ column ç›¸åŒï¼Œä½†æ˜¯ç½®æ¢äº†ä¸»è½´èµ·ç‚¹å’Œä¸»è½´ç»ˆç‚¹ã€‚| éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè§„èŒƒä¸‹ flex-direction çš„é»˜è®¤å€¼æ˜¯ row ï¼Œè€Œåœ¨ React Native ä¸­åˆ™ä¸º columnï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šæ·»åŠ äº†è¿™ä¸ªçš„æ ·å¼ 12345&gt; .flex &#123;&gt; display: flex;&gt; flex-direction: row;&gt; &#125;&gt; flex-wrapflex-wrap æŒ‡å®š flex å…ƒç´ å•è¡Œæ˜¾ç¤ºè¿˜æ˜¯å¤šè¡Œæ˜¾ç¤ºã€‚å¦‚æœå…è®¸æ¢è¡Œï¼Œè¿™ä¸ªå±æ€§å…è®¸æ§åˆ¶è¡Œçš„å †å æ–¹å‘ã€‚é»˜è®¤å€¼ä¸º nowrapã€‚ æ”¯æŒçš„å€¼å¦‚ä¸‹ï¼š|å€¼|æ„ä¹‰||â€“|â€“||nowrap|ä¸æ¢è¡Œã€‚flex å…ƒç´ è¢«æ‘†æ”¾åˆ°åˆ°ä¸€è¡Œï¼Œè¿™å¯èƒ½å¯¼è‡´æº¢å‡º flex å®¹å™¨ã€‚äº¤å‰è½´çš„èµ·ç‚¹ä¼šæ ¹æ® flex-direction çš„å€¼ç›¸å½“äº start æˆ– beforeã€‚||wrap|flex å…ƒç´ è¢«æ‰“æ–­åˆ°å¤šä¸ªè¡Œä¸­ã€‚äº¤å‰è½´çš„èµ·ç‚¹ä¼šæ ¹æ® flex-direction çš„å€¼é€‰æ‹©ç­‰äºstart æˆ–beforeã€‚äº¤å‰è½´çš„ç»ˆç‚¹ä¸ºç¡®å®šçš„äº¤å‰è½´çš„èµ·ç‚¹çš„å¦ä¸€ç«¯ã€‚||wrap-reverse|å’Œ wrap çš„è¡Œä¸ºä¸€æ ·ï¼Œä½†æ˜¯äº¤å‰è½´çš„èµ·ç‚¹å’Œäº¤å‰è½´çš„ç»ˆç‚¹äº’æ¢ã€‚| ä½¿ç”¨ flex-wrap å±æ€§çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ wrap-reverse å€¼åœ¨ React Native ä¸Šæ˜¯ä¸æ”¯æŒçš„ã€‚ flex-flowflex-flow å±æ€§æ˜¯ flex-direction å’Œ flex-wrap çš„ç®€å†™ã€‚é»˜è®¤å€¼ä¸º row nowrapã€‚ è¯­æ³•æ ¼å¼1&lt;&apos;flex-direction&apos;&gt; || &lt;&apos;flex-wrap&apos;&gt; flex-flow å±æ€§ä¸è¢« React Native å’Œå¿«åº”ç”¨æ”¯æŒ align-itemsalign-items å±æ€§å°†æ‰€æœ‰ç›´æ¥å­èŠ‚ç‚¹ä¸Šçš„ align-self å€¼è®¾ç½®ä¸ºä¸€ä¸ªç»„ã€‚ align-self å±æ€§è®¾ç½®é¡¹ç›®åœ¨å…¶åŒ…å«å—ä¸­åœ¨äº¤å‰è½´æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ã€‚é»˜è®¤å€¼ä¸º stretchã€‚ å€¼ æ„ä¹‰ stretch flex å…ƒç´ åœ¨äº¤å‰è½´æ–¹å‘æ‹‰ä¼¸åˆ°ä¸å®¹å™¨ç›¸åŒçš„é«˜åº¦æˆ–å®½åº¦ï¼ˆflex å…ƒç´ ä¸èƒ½å›ºå®šå°ºå¯¸ï¼‰ flex-start äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ flex-end äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ center äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ baseline å…ƒç´ ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ è¯­æ³•æ ¼å¼12345normal | stretch | &lt;baseline-position&gt; | [ &lt;overflow-position&gt;? &lt;self-position&gt; ]where &lt;baseline-position&gt; = [ first | last ]? baseline&lt;overflow-position&gt; = unsafe | safe&lt;self-position&gt; = center | start | end | self-start | self-end | flex-start | flex-end baseline å€¼ä¸è¢« React Native å’Œå¿«åº”ç”¨æ”¯æŒ space-evenlyã€startã€endã€self-startã€self-endã€leftã€rightã€first baselineã€last baselineã€safeã€unsafe åœ¨ flex å¸ƒå±€ä¸­é€šç”¨æ€§ä½ align-contentalign-content å±æ€§è®¾ç½®äº†å¦‚ä½•æ²¿ç€ flex å®¹å™¨çš„äº¤å‰è½´å’Œåœ¨ flex å…ƒç´ ä¹‹é—´å’Œå‘¨å›´åˆ†é…ç©ºé—´ã€‚é»˜è®¤å€¼ä¸º stretchã€‚ è¯¥å±æ€§å¯¹å•è¡Œå¼¹æ€§ç›’å­æ¨¡å‹æ— æ•ˆã€‚ï¼ˆå³ï¼šå¸¦æœ‰ flex-wrap: nowrap çš„ flex å®¹å™¨ï¼‰ã€‚ å€¼ æ„ä¹‰ stretch æ‹‰ä¼¸æ‰€æœ‰ flex å…ƒç´ æ¥å¡«æ»¡å‰©ä½™ç©ºé—´ã€‚å‰©ä½™ç©ºé—´å¹³å‡çš„åˆ†é…ç»™æ¯ä¸€ä¸ª flex å…ƒç´  flex-start æ‰€æœ‰ flex å…ƒç´ ä»å‚ç›´è½´èµ·ç‚¹å¼€å§‹å¡«å……ã€‚ç¬¬ä¸€ä¸ª flex å…ƒç´ çš„å‚ç›´è½´èµ·ç‚¹è¾¹å’Œ flex å®¹å™¨çš„å‚ç›´è½´èµ·ç‚¹è¾¹å¯¹é½ã€‚æ¥ä¸‹æ¥çš„æ¯ä¸€ä¸ª flex å…ƒç´ ç´§è·Ÿå‰ä¸€ä¸ª flex å…ƒç´ ã€‚ flex-end æ‰€æœ‰ flex å…ƒç´ ä»å‚ç›´è½´æœ«å°¾å¼€å§‹å¡«å……ã€‚æœ€åä¸€ä¸ª flex å…ƒç´ çš„å‚ç›´è½´ç»ˆç‚¹å’Œå®¹å™¨çš„å‚ç›´è½´ç»ˆç‚¹å¯¹é½ã€‚åŒæ—¶æ‰€æœ‰åç»­ flex å…ƒç´ ä¸å‰ä¸€ä¸ªå¯¹é½ã€‚ center æ‰€æœ‰ flex å…ƒç´ æœå‘å®¹å™¨çš„ä¸­å¿ƒå¡«å……ã€‚æ¯ flex å…ƒç´ äº’ç›¸ç´§æŒ¨ï¼Œç›¸å¯¹äºå®¹å™¨å±…ä¸­å¯¹é½ã€‚å®¹å™¨çš„å‚ç›´è½´èµ·ç‚¹è¾¹å’Œç¬¬ä¸€ä¸ª flex å…ƒç´ çš„è·ç¦»ç›¸ç­‰äºå®¹å™¨çš„å‚ç›´è½´ç»ˆç‚¹è¾¹å’Œæœ€åä¸€ä¸ª flex å…ƒç´ çš„è·ç¦»ã€‚ space-between æ‰€æœ‰ flex å…ƒç´ åœ¨å®¹å™¨ä¸­å¹³å‡åˆ†å¸ƒã€‚ç›¸é‚»ä¸¤ flex å…ƒç´ é—´è·ç›¸ç­‰ã€‚å®¹å™¨çš„å‚ç›´è½´èµ·ç‚¹è¾¹å’Œç»ˆç‚¹è¾¹åˆ†åˆ«ä¸ç¬¬ä¸€ä¸ª flex å…ƒç´ å’Œæœ€åä¸€ä¸ª flex å…ƒç´ çš„è¾¹å¯¹é½ã€‚ space-around æ‰€æœ‰ flex å…ƒç´ åœ¨ flex å®¹å™¨ä¸­å¹³å‡åˆ†å¸ƒï¼Œç›¸é‚»ä¸¤ flex å…ƒç´ é—´è·ç›¸ç­‰ã€‚å®¹å™¨çš„å‚ç›´è½´èµ·ç‚¹è¾¹å’Œç»ˆç‚¹è¾¹åˆ†åˆ«ä¸ç¬¬ä¸€ä¸ª flex å…ƒç´ å’Œæœ€åä¸€ä¸ª flex å…ƒç´ çš„è·ç¦»æ˜¯ç›¸é‚»ä¸¤ flex å…ƒç´ é—´è·çš„ä¸€åŠã€‚ space-evenly flex å…ƒç´ éƒ½æ²¿ç€ä¸»è½´å‡åŒ€åˆ†å¸ƒåœ¨æŒ‡å®šçš„ flex å…ƒç´ ä¸­ã€‚ç›¸é‚» flex å…ƒç´ ä¹‹é—´çš„é—´è·ï¼Œä¸»è½´èµ·å§‹ä½ç½®åˆ°ç¬¬ä¸€ä¸ª flex å…ƒç´ çš„é—´è·,ï¼Œä¸»è½´ç»“æŸä½ç½®åˆ°æœ€åä¸€ä¸ª flex å…ƒç´ çš„é—´è·ï¼Œéƒ½å®Œå…¨ä¸€æ ·ã€‚ è¯­æ³•æ ¼å¼123456normal | &lt;baseline-position&gt; | &lt;content-distribution&gt; | &lt;overflow-position&gt;? &lt;content-position&gt;where &lt;baseline-position&gt; = [ first | last ]? baseline&lt;content-distribution&gt; = space-between | space-around | space-evenly | stretch&lt;overflow-position&gt; = unsafe | safe&lt;content-position&gt; = center | start | end | flex-start | flex-end React Native ä¸­éœ€è¦ç‰ˆæœ¬å·åœ¨ 0.58 ä»¥ä¸Š ä¸” flex-wrap å±æ€§å€¼éœ€è¦ä¸º wrap åŒæ—¶åªå¯¹æ¨ªè½´ç”Ÿæ•ˆ(å³ flex-direction å±æ€§ä¸º column æˆ– column-reverse) baseline å€¼ä¸è¢« React Native æ”¯æŒ space-evenlyã€startã€endã€leftã€rightã€first baselineã€last baselineã€safeã€unsafe åœ¨ flex å¸ƒå±€ä¸­é€šç”¨æ€§ä½ justify-contentjustify-content å±æ€§å®šä¹‰äº†æµè§ˆå™¨å¦‚ä½•åˆ†é…é¡ºç€ flex å®¹å™¨ä¸»è½´çš„ flex å…ƒç´ ä¹‹é—´åŠå…¶å‘¨å›´çš„ç©ºé—´ã€‚ å€¼ æ„ä¹‰ flex-start ä»è¡Œé¦–å¼€å§‹æ’åˆ—ã€‚æ¯è¡Œç¬¬ä¸€ä¸ª flex å…ƒç´ ä¸è¡Œé¦–å¯¹é½ï¼ŒåŒæ—¶æ‰€æœ‰åç»­çš„ flex å…ƒç´ ä¸å‰ä¸€ä¸ªå¯¹é½ã€‚ flex-end ä»è¡Œå°¾å¼€å§‹æ’åˆ—ã€‚æ¯è¡Œæœ€åä¸€ä¸ª flex å…ƒç´ ä¸è¡Œå°¾å¯¹é½ï¼Œå…¶ä»–å…ƒç´ å°†ä¸åä¸€ä¸ªå¯¹é½ã€‚ center ä¼¸ç¼©å…ƒç´ å‘æ¯è¡Œä¸­ç‚¹æ’åˆ—ã€‚æ¯è¡Œç¬¬ä¸€ä¸ªå…ƒç´ åˆ°è¡Œé¦–çš„è·ç¦»å°†ä¸æ¯è¡Œæœ€åä¸€ä¸ªå…ƒç´ åˆ°è¡Œå°¾çš„è·ç¦»ç›¸åŒã€‚ space-between åœ¨æ¯è¡Œä¸Šå‡åŒ€åˆ†é… flex å…ƒç´ ã€‚ç›¸é‚»å…ƒç´ é—´è·ç¦»ç›¸åŒã€‚æ¯è¡Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸è¡Œé¦–å¯¹é½ï¼Œæ¯è¡Œæœ€åä¸€ä¸ªå…ƒç´ ä¸è¡Œå°¾å¯¹é½ã€‚ space-around åœ¨æ¯è¡Œä¸Šå‡åŒ€åˆ†é… flex å…ƒç´ ã€‚ç›¸é‚»å…ƒç´ é—´è·ç¦»ç›¸åŒã€‚æ¯è¡Œç¬¬ä¸€ä¸ªå…ƒç´ åˆ°è¡Œé¦–çš„è·ç¦»å’Œæ¯è¡Œæœ€åä¸€ä¸ªå…ƒç´ åˆ°è¡Œå°¾çš„è·ç¦»å°†ä¼šæ˜¯ç›¸é‚»å…ƒç´ ä¹‹é—´è·ç¦»çš„ä¸€åŠã€‚ space-evenly flex å…ƒç´ éƒ½æ²¿ç€ä¸»è½´å‡åŒ€åˆ†å¸ƒåœ¨æŒ‡å®šçš„ flex å…ƒç´ ä¸­ã€‚ç›¸é‚» flex å…ƒç´ ä¹‹é—´çš„é—´è·ï¼Œä¸»è½´èµ·å§‹ä½ç½®åˆ°ç¬¬ä¸€ä¸ª flex å…ƒç´ çš„é—´è·,ï¼Œä¸»è½´ç»“æŸä½ç½®åˆ°æœ€åä¸€ä¸ª flex å…ƒç´ çš„é—´è·ï¼Œéƒ½å®Œå…¨ä¸€æ ·ã€‚ è¯­æ³•æ ¼å¼12345normal | &lt;content-distribution&gt; | &lt;overflow-position&gt;? [ &lt;content-position&gt; | left | right ]where &lt;content-distribution&gt; = space-between | space-around | space-evenly | stretch&lt;overflow-position&gt; = unsafe | safe&lt;content-position&gt; = center | start | end | flex-start | flex-end baseline å€¼ä¸è¢« React Native æ”¯æŒ stretchã€space-evenlyã€startã€endã€leftã€rightã€first baselineã€last baselineã€safeã€unsafe åœ¨ flex å¸ƒå±€ä¸­é€šç”¨æ€§ä½ place-contentplace-content å±æ€§æ˜¯ align-content å’Œ justify-content çš„ç®€å†™ã€‚ è¯­æ³•æ ¼å¼1&lt;&apos;align-content&apos;&gt; &lt;&apos;justify-content&apos;&gt;? å¦‚æœç¬¬äºŒä¸ªå€¼ä¸å­˜åœ¨ï¼Œä¸”ç¬¬ä¸€ä¸ªå€¼é€‚ç”¨äºç”¨äºä¸¤è€…ï¼Œåˆ™ç¬¬äºŒä¸ªå€¼å¤ç”¨ç¬¬ä¸€ä¸ª å¦‚æœç¬¬äºŒä¸ªå€¼ä¸å­˜åœ¨ï¼Œä¸”ç¬¬ä¸€ä¸ªå€¼ä¸é€‚ç”¨äºç”¨äºä¸¤è€…ï¼Œåˆ™æ•´ä¸ªå€¼æ— æ•ˆ place-content å±æ€§ä¸è¢« React Native æ”¯æŒ Flex Item å±æ€§åœ¨ Flex Item ä¸Šï¼ŒåŒæ ·ä¹Ÿæœ‰å…­ä¸ªå±æ€§ï¼Œè€Œ order å±æ€§åœ¨ React Native ä¸Šä¸æ”¯æŒã€‚ orderorder å±æ€§è§„å®šäº† flex å®¹å™¨ä¸­çš„ flex å…ƒç´ åœ¨å¸ƒå±€æ—¶çš„é¡ºåºã€‚flex å…ƒç´ æŒ‰ç…§ order å±æ€§çš„å€¼çš„å¢åºè¿›è¡Œå¸ƒå±€ã€‚æ‹¥æœ‰ç›¸åŒ order å±æ€§å€¼çš„ flex å…ƒç´ æŒ‰ç…§å®ƒä»¬åœ¨æºä»£ç ä¸­å‡ºç°çš„é¡ºåºè¿›è¡Œå¸ƒå±€ã€‚é»˜è®¤å€¼ä¸º 0ã€‚ è¯­æ³•æ ¼å¼1&lt;integer&gt; order å±æ€§ä¸è¢« React Native æ”¯æŒ flex-growflex-grow å±æ€§å®šä¹‰ flex å…ƒç´ çš„æ‹‰ä¼¸å› å­ã€‚ è¯­æ³•æ ¼å¼1&lt;number&gt; | inherit è´Ÿå€¼æ— æ•ˆ React Native ä¸Šé»˜è®¤å€¼ä¸º 0 flex-shrinkflex-shrink å±æ€§æŒ‡å®šäº† flex å…ƒç´ çš„æ”¶ç¼©è§„åˆ™ã€‚flex å…ƒç´ ä»…åœ¨é»˜è®¤å®½åº¦ä¹‹å’Œå¤§äºå®¹å™¨çš„æ—¶å€™æ‰ä¼šå‘ç”Ÿæ”¶ç¼©ï¼Œå…¶æ”¶ç¼©çš„å¤§å°æ˜¯ä¾æ® flex-shrink çš„å€¼ã€‚é»˜è®¤å€¼ä¸º 1ã€‚ è¯­æ³•æ ¼å¼1&lt;number&gt; | inherit è´Ÿå€¼æ˜¯ä¸è¢«å…è®¸çš„ã€‚ React Native ä¸Šé»˜è®¤å€¼ä¸º 1 flex-basisflex-basis æŒ‡å®šäº† flex å…ƒç´ åœ¨ä¸»è½´æ–¹å‘ä¸Šçš„åˆå§‹å¤§å°ã€‚å¦‚æœä¸ä½¿ç”¨ box-sizing æ”¹å˜ç›’æ¨¡å‹çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§å°±å†³å®šäº† flex å…ƒç´ çš„å†…å®¹ç›’ï¼ˆcontent-boxï¼‰çš„å°ºå¯¸ã€‚ æ³¨æ„ï¼šå¦‚æœä¸€ä¸ª flex å…ƒç´ åŒæ—¶è®¾ç½®äº† flex-basis (auto é™¤å¤–)å’Œ width (æˆ–è€… flex-direction: column æ—¶è®¾ç½®äº† height )ï¼Œflex-basis æƒçº§æ›´é«˜ã€‚ è¯­æ³•è§„èŒƒ1content | &lt;&apos;width&apos;&gt; &lt;â€™widthâ€™&gt; width å€¼å¯ä»¥æ˜¯&lt;length&gt;; è¯¥å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç›¸å¯¹äºå…¶çˆ¶å¼¹æ€§ç›’å®¹å™¨ä¸»è½´å°ºå¯¸çš„ç™¾åˆ†æ•° ã€‚ è´Ÿå€¼æ˜¯ä¸è¢«å…è®¸çš„ã€‚ é»˜è®¤ä¸º 0ã€‚ content åŸºäº flex å…ƒç´ çš„å†…å®¹è‡ªåŠ¨è°ƒæ•´å¤§å°ã€‚ React Native ä¸Šä½¿ç”¨ ScrollView ç»„ä»¶ä¼šå¯¼è‡´å±æ€§å¤±æ•ˆ å¦‚æœæ²¡æœ‰è¶³å¤Ÿç©ºé—´ï¼Œç»„ä»¶ä¸ä¼šå‘ç”Ÿæ”¶ç¼© (åº”è¯¥æ˜¯è®¾ç½®äº† flex-shrink å±æ€§å€¼é»˜è®¤ä¸º 0) flexflex è§„å®šäº† flex å…ƒç´ å¦‚ä½•ä¼¸é•¿æˆ–ç¼©çŸ­ä»¥é€‚åº” flex å®¹å™¨ä¸­çš„å¯ç”¨ç©ºé—´ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å†™å±æ€§ï¼Œç”¨æ¥è®¾ç½® flex-grow, flex-shrink ä¸ flex-basisã€‚ è¯­æ³•æ ¼å¼1none | [ &lt;&apos;flex-grow&apos;&gt; &lt;&apos;flex-shrink&apos;&gt;? || &lt;&apos;flex-basis&apos;&gt; ] initial å…ƒç´ ä¼šæ ¹æ®è‡ªèº«å®½é«˜è®¾ç½®å°ºå¯¸ã€‚ å®ƒä¼šç¼©çŸ­è‡ªèº«ä»¥é€‚åº” flex å®¹å™¨ï¼Œä½†ä¸ä¼šä¼¸é•¿å¹¶å¸æ”¶ flex å®¹å™¨ä¸­çš„é¢å¤–è‡ªç”±ç©ºé—´æ¥é€‚åº” flex å®¹å™¨ ã€‚ ç›¸å½“äºå°†å±æ€§è®¾ç½®ä¸ºâ€flex: 0 1 autoâ€ã€‚ auto å…ƒç´ ä¼šæ ¹æ®è‡ªèº«çš„å®½åº¦ä¸é«˜åº¦æ¥ç¡®å®šå°ºå¯¸ï¼Œä½†æ˜¯ä¼šä¼¸é•¿å¹¶å¸æ”¶ flex å®¹å™¨ä¸­é¢å¤–çš„è‡ªç”±ç©ºé—´ï¼Œä¹Ÿä¼šç¼©çŸ­è‡ªèº«æ¥é€‚åº” flex å®¹å™¨ã€‚ è¿™ç›¸å½“äºå°†å±æ€§è®¾ç½®ä¸º â€œflex: 1 1 autoâ€ã€‚ none å…ƒç´ ä¼šæ ¹æ®è‡ªèº«å®½é«˜æ¥è®¾ç½®å°ºå¯¸ã€‚ å®ƒæ˜¯å®Œå…¨éå¼¹æ€§çš„ï¼šæ—¢ä¸ä¼šç¼©çŸ­ï¼Œä¹Ÿä¸ä¼šä¼¸é•¿æ¥é€‚åº” flex å®¹å™¨ã€‚ ç›¸å½“äºå°†å±æ€§è®¾ç½®ä¸ºâ€flex: 0 0 autoâ€ã€‚ åœ¨ React Native ä¸­åªèƒ½ä¸º number ç±»å‹ å½“ flex &gt; 0 æ—¶ï¼Œç»„ä»¶å¤§å°å°†ä¸å…¶å¼¹æ€§å€¼æˆæ¯”ä¾‹ã€‚å› æ­¤ï¼Œflex è®¾ç½®ä¸º 2 çš„ç»„ä»¶å°†å ç”¨ç©ºé—´çš„ä¸¤å€ä½œä¸º flex è®¾ç½®ä¸º 1 çš„ç»„ä»¶ å½“ flex = 0 æ—¶ï¼Œç»„ä»¶æ ¹æ® width å’Œ height ç¡®å®šå¤§å°ï¼Œä¸”ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ å½“ flex = -1 æ—¶ï¼Œç»„ä»¶é€šå¸¸æ ¹æ® width å’Œ height ç¡®å®šå¤§å°ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œç»„ä»¶å°†æ”¶ç¼©åˆ° minWidth å’Œ minHeightã€‚ åœ¨å¿«åº”ç”¨ä¸­ï¼Œflex çš„å¿«æ·å€¼è®¾ç½®å‡æ˜¯æ— æ•ˆå€¼ align-selfalign-self ä¼šå¯¹é½å½“å‰ flex è¡Œä¸­çš„ flex å…ƒç´ ï¼Œå¹¶è¦†ç›– align-items çš„å€¼. å¦‚æœä»»ä½• flex å…ƒç´ çš„ä¾§è½´æ–¹å‘ margin å€¼è®¾ç½®ä¸º autoï¼Œåˆ™ä¼šå¿½ç•¥ align-selfã€‚ è¯­æ³•æ ¼å¼12345auto | normal | stretch | &lt;baseline-position&gt; | &lt;overflow-position&gt;? &lt;self-position&gt;where &lt;baseline-position&gt; = [ first | last ]? baseline&lt;overflow-position&gt; = unsafe | safe&lt;self-position&gt; = center | start | end | self-start | self-end | flex-start | flex-end baseline å€¼ä¸è¢« React Native å’Œå¿«åº”ç”¨æ”¯æŒ startã€endã€self-startã€self-endã€first baselineã€last baselineã€safeã€unsafe åœ¨ flex å¸ƒå±€ä¸­é€šç”¨æ€§ä½ ç»„ä»¶åŒ–å¼€å‘ä¸åŒçš„å¹³å°å¦‚ Webã€React-Nativeã€å¾®ä¿¡å°ç¨‹åºç­‰å„æœ‰ç‰¹è‰²ï¼Œå¹³å°ä¹‹é—´çš„å·®å¼‚å¾ˆå¤§ï¼Œä¼šå¯¼è‡´å¾ˆå¤šé¢å¤–çš„å¼€å‘æˆæœ¬ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³è¦å®Œæˆä¸€ä¸ªè·¨å¹³å°é¡¹ç›®è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ æˆ‘ä»¬å¼€å§‹ä»æ¯”è¾ƒå®¹æ˜“å…¥æ‰‹çš„æ–¹å‘è€ƒè™‘ï¼Œå¦‚æœé‡‡ç”¨æ¨¡å—åŒ–ç»„ä»¶æˆ–æ˜¯ css-in-js çš„æ–¹æ¡ˆå»å®Œæˆæ ·å¼çš„æ„å»ºä¼šæ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆä¹ˆï¼Ÿ åœ¨ç›®å‰çš„å‰ç«¯ç”Ÿæ€ä¸­ï¼Œæ¨¡å—åŒ–ç»„ä»¶å¼€å‘ä¼šæ˜¯ä¸ªå¾ˆæ£’çš„æ–¹æ¡ˆï¼Œè¦†ç›–æ¨¡å¼ä¸‹æ„å»ºå¼€ç®±å³ç”¨çš„ç»„ä»¶åŒæ—¶å¯ä»¥æä¾›æ–¹æ³•æ¥è¦†ç›–æ ·å¼å†å¥½ä¸è¿‡äº†ï¼Œä½†æ˜¯å¦‚æœæ”¾åˆ°å°ç¨‹åºå¼€å‘çš„æ¨¡å¼ä¸­ï¼Œè¿™å°±ä¼šæœ‰ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å±‚çº§æ ·å¼è¡¨ä¸­å†™åˆ°çš„æ ·å¼ï¼Œæ˜¯ä¸èƒ½ç›´æ¥ä¼ ç»™ç»„ä»¶æ¥è¦†ç›–æ ·å¼çš„ï¼Œç»„ä»¶å’Œç»„ä»¶çš„éš”ç¦»åœ¨ä¸åŒå°ç¨‹åºä¸­å¾ˆéš¾è¢«æ‰“ç ´ã€‚ 1234567891011121314151617/* CustomComp.js */export default class CustomComp extends Component &#123; static defaultProps = &#123; className: '' &#125; render () &#123; return &lt;View className=&#123;this.props.className&#125;&gt;è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ä¸ä¼šç”±ç»„ä»¶å¤–çš„ class å†³å®š&lt;/View&gt; &#125;&#125;/* MyPage.js */export default class MyPage extends Component &#123; render () &#123; return &lt;CustomComp className=\"red-text\" /&gt; &#125;&#125; 1234/* MyPage.scss */.red-text &#123; color: red;&#125; å¦‚æœå¤§å®¶å°è¯•ä¸Šè¿°çš„å†™æ³•ï¼Œä¼šå‘ç° red-text ç±»ä¸­çš„æ ·å¼å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¦‚æœè€ƒè™‘æ˜¯ä½¿ç”¨ css-in-js ä¼šå¥½ä¹ˆï¼Ÿå¾ˆé—æ†¾ï¼Œå¦‚æœä½ ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å°†ä¸ä¼šä¸ºè¿™äº›éœ€è¦è¿è¡Œæ—¶å¤„ç†çš„æ ·å¼è¡¥å…¨å‰ç¼€ã€‚ è¿™ä¸¤ä¸ªæ–¹æ¡ˆéƒ½ä¸æ˜¯åˆé€‚çš„æ–¹æ¡ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¯•ç€å»æ‰“ç ´å°ç¨‹åºçš„ç»„ä»¶é™åˆ¶ä¹ˆï¼Ÿæˆ‘ä»¬åœ¨å¾®ä¿¡å°ç¨‹åºå®˜æ–¹çš„æ–‡æ¡£ä¸­æ‰¾åˆ° externalClasses è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å…ˆæ¥å°è¯•ã€‚ 123456789101112131415/* CustomComp.js */export default class CustomComp extends Component &#123; static externalClasses = ['my-class'] render () &#123; return &lt;View className=\"my-class\"&gt;è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”±ç»„ä»¶å¤–çš„ class å†³å®š&lt;/View&gt; &#125;&#125;/* MyPage.js */export default class MyPage extends Component &#123; render () &#123; return &lt;CustomComp className=\"red-text\" /&gt; &#125;&#125; 1234/* MyPage.scss */.red-text &#123; color: red;&#125; ä½†æ˜¯è¿™ä¹Ÿå¹¶éæ‰€æœ‰çš„å¼€å‘å¹³å°éƒ½èƒ½å¤Ÿæä¾›ç»™å¼€å‘è€…ç›¸å…³çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½è½¬æ¢ç›®å…‰åˆ°å¦ä¸€ä¸ª addGlobalClass æ–¹æ³•ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä»…åœ¨æ‰€æœ‰å°ç¨‹åºéƒ½èƒ½å¤Ÿæ”¯æŒï¼ŒTaro åœ¨ React Native ç«¯ä¸Šä¹Ÿæä¾›äº†åŒæ ·çš„æ–¹æ³•ç»™å¤§å®¶ï¼Œè¿™æ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥é¿å¼€ css modules è¿™ä¸ªä½“éªŒç¨å·®çš„æ–¹æ³•ã€‚ 12345678910/* CustomComp.js */export default class CustomComp extends Component &#123; static options = &#123; addGlobalClass: true &#125; render () &#123; return &lt;View className=\"red-text\"&gt;è¿™æ®µæ–‡æœ¬çš„é¢œè‰²ç”±ç»„ä»¶å¤–çš„ class å†³å®š&lt;/View&gt; &#125;&#125; 1234/* ç»„ä»¶å¤–çš„æ ·å¼å®šä¹‰ */.red-text &#123; color: red;&#125; å†™åœ¨æœ€ååœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°†æ‰€æœ‰é€šç”¨æ”¯æŒçš„æ–¹æ³•å†™åˆ° scss æ–‡ä»¶ä¸­ï¼Œå¦‚æœå¤§å®¶éœ€è¦å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å·²ç»æä¾›çš„ flexbox æ ·å¼ï¼ŒæŒ‰å¦‚ä¸‹æ–¹æ³•åœ¨è‡ªå·±å…¨å±€çš„å±‚çº§æ ·å¼è¡¨ä¸­å¼•å…¥æˆ‘ä»¬å·²ç»æä¾›çš„æ ·å¼ã€‚ 1@import 'https://raw.githubusercontent.com/NervJS/taro-flexbox/master/flexbox-demo/src/asset/flex.scss'; é‚£ä¹ˆå…³äº Flex å¸ƒå±€çš„çŸ¥è¯†ï¼Œå¦‚æœæ–‡ä¸­æœ‰é—æ¼çš„ï¼Œå¤§å®¶å¯ä»¥è·Ÿç€æˆ‘ä»¬çš„é¡¹ç›®æ¥æ¢³ç†çŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥åˆ° MDN ä¸ŠæŸ¥çœ‹ç›¸å…³çš„æ–‡æ¡£ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯åœ¨ Flexbox å¸ƒå±€ä¸­ gapã€row-gapã€column-gap å±æ€§åœ¨ Grid å¸ƒå±€ä¸­æ™®éæ”¯æŒï¼Œä½†æ˜¯åœ¨ Flex å¸ƒå±€ä¸­å´åªæœ‰ Firefox å®Œæˆäº†é€‚é…ï¼Œæ‰€ä»¥æš‚ä¸”ä¸è¡¨, åŒæ · justify-content å±æ€§çš„ space-evenly å€¼åœ¨ web ç«¯é€šç”¨æ€§å¾ˆä½ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ gapã€row-gapã€column-gap in flex space-evently on desktop space-evently on mobile å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥ä¸ºä½ æä¾›ä¸€äº›å¸®åŠ©ã€‚ å±æ€§å¯¹ç…§è¡¨ å±æ€§ Chrome Firefox Android webview Safari on iOS å¾®ä¿¡å°ç¨‹åº æ”¯ä»˜å®å°ç¨‹åº ç™¾åº¦å°ç¨‹åº å¤´æ¡å°ç¨‹åº QQå°ç¨‹åº React Native flex-direction âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” éƒ¨åˆ†å·®å¼‚ flex-wrap âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” wrap-reverse ä¸æ”¯æŒ flex-flow âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” ä¸æ”¯æŒ align-items âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” baseline ä¸æ”¯æŒ align-content âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” 0.58+ (éƒ¨åˆ†å·®å¼‚) justify-content âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” baseline ä¸æ”¯æŒ place-content âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” ä¸æ”¯æŒ order âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” ä¸æ”¯æŒ flex-grow âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” flex-shrink âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” flex-basis âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” éƒ¨åˆ†å·®å¼‚ flex âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” è¯­æ³•ä¸åŒ align-self âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” âœ” baseline ä¸æ”¯æŒ ç›¸å…³é“¾æ¥ é¢„è§ˆåœ°å€ï¼šhttps://nervjs.github.io/taro-flexbox/ é¡¹ç›®åœ°å€ï¼šhttps://github.com/NervJS/taro-flexbox å‚è€ƒåœ°å€ https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout#Reference https://facebook.github.io/react-native/docs/flexbox https://github.com/startheart/cml-flexbox","pubDate":"Wed, 25 Sep 2019 07:00:00 GMT","guid":"https://aotu.io/notes/2019/09/25/taro-flex/","category":"ç§»åŠ¨å¼€å‘"},{"title":"ä»ç¨‹åºåª›è§’åº¦å»çœ‹é¡¹ç›®ç®¡ç†","link":"https://aotu.io/notes/2019/09/11/project-management-of-programmer/","description":"é¡¹ç›®ç®¡ç†ä¸€èˆ¬æ˜¯ä»æŠ€æœ¯è´Ÿè´£äººã€é¡¹ç›®äº§å“è´Ÿè´£äººçš„è§’åº¦å»çœ‹çš„ï¼Œç¨‹åºå‘˜è™½ç„¶ç ä»£ç å¾ˆé‡è¦ï¼Œä½†å¯¹é¡¹ç›®çš„é¢†æ‚Ÿèƒ½åŠ›ä¹ŸåŒæ ·é‡è¦ã€‚æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å„ç§å›°æƒ‘ï¼šæ‰‹ä¸Šçš„é¡¹ç›®éœ€æ±‚è¶Šæ¥è¶Šå¤šï¼ŒBUGåˆ—è¡¨åªå¢ä¸å‡ï¼Œè¯¥é‡‡å–æ€æ ·çš„æªæ–½ï¼Œä¿è¯è‡ªå·±çš„ç”Ÿäº§åŠ›ï¼Ÿå¸Œæœ›ä»¥ä¸‹çš„è®²è¿°å¸¦ç»™ä½ è«åçš„è®¤åŒæ„Ÿï¼Œæˆ–å¤šæˆ–å°‘è®©ä½ ç£¨åˆ€éœéœä¸€è¯•ã€‚ éœ€æ±‚ç®¡ç†ä¸‹å›¾æè¿°çš„æ˜¯ç¨‹åºå‘˜ä»æ¥åˆ°éœ€æ±‚åˆ°å¼€å‘ç¯èŠ‚çš„è¿‡ç¨‹ï¼š ä¸€èˆ¬æˆ‘ä»¬é¦–å…ˆä¼šæ”¶åˆ°äº§å“çš„PRDæˆ–äº¤äº’ç¨¿ï¼Œè¢«è¯¢é—®ä»Šå¤©ä»€ä¹ˆæ—¶é—´ç‚¹æ˜¯å¦æœ‰ç©ºï¼Œè¿›è¡Œéœ€æ±‚è¯„å®¡ã€‚æ—¶å…‰åŒ†åŒ†ï¼Œå›æƒ³èµ·åˆšæ¯•ä¸šé‚£æ—¶ï¼Œæˆ‘æœ›ç€å†—é•¿çš„PRDï¼Œç›´æ¥è·³è¿‡èƒŒæ™¯ã€ç›®çš„ç­‰çœ‹ä¼¼ä¸å¼€å‘æ— å…³çš„å†…å®¹æè¿°ã€‚æ—¶å…‰å†‰å†‰ï¼Œæˆ‘æ˜ç™½äº†ä¸€ä¸ªé“ç†ï¼šçŸ¥é“äº†ä¸ºä»€ä¹ˆè€Œåšï¼Œæ‰èƒ½ç éœ€æ±‚å•Šï¼ï¼ æˆ‘ä»¬è¦åšä¸€ä¸ªæœ‰æ€è€ƒçš„ç¨‹åºå‘˜ï¼Œä¸æ˜¯åˆ«äººè¯´ä»€ä¹ˆæˆ‘ä»¬å°±åšä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å¼•å¯¼äº§å“ç»ç†ï¼Œç»™å‡ºæé†’å¹¶æä¾›å»ºè®¾æ€§çš„æ„è§ï¼Œè®©ä»–ä»¬å‘ç€æˆ‘ä»¬å¸Œæœ›çš„é‚£ä¸ªç‚¹å»æ€è€ƒå»æ”¹è¿›ã€‚å—¯ï¼Œç‰›é€¼~ å½“ç„¶ï¼Œç¥ˆæ±‚PRDå®Œç¾ï¼Œæ˜¯ä¸å¯èƒ½çš„ï¼Œä½†æ˜¯å®ƒåˆæ˜¯æˆ‘ä»¬æ’æœŸã€å¼€å‘çš„ä¾æ®ï¼Œè¿™ä¸¤è€…å­˜åœ¨è¿™ä¸å¯é¿å…çš„çŸ›ç›¾ã€‚å› æ­¤ï¼ŒåŠ›æ±‚åœ¨åˆ†æè¯„å®¡é˜¶æ®µï¼ŒæŠŠä¸æ¸…æ™°ä¸å®Œæ•´çš„éƒ¨åˆ†æš´éœ²å‡ºæ¥ï¼Œæ˜¯æˆ‘ä»¬çš„ç›®æ ‡ä¹‹ä¸€ã€‚ ç‰¹åˆ«è­¦æƒ•ä¸€å¥è¯éœ€æ±‚ï¼Œæ¯”å¦‚åœ¨é¡µé¢æ·»åŠ ä¸€ä¸ªé“¾æ¥ï¼ŒåŒ…å«çš„åŠŸèƒ½å¯èƒ½æœ‰ï¼š ç¡®è®¤æ·»åŠ aå…ƒç´ è·³è½¬ä¸ºtarget=â€_blankâ€ï¼Œè¿˜æ˜¯åœ¨å½“å‰é¡µé¢è·³è½¬ï¼› é“¾æ¥çš„æ–‡å­—å’Œåœ°å€æ˜¯å¦å¯é…ç½®ï¼Œæ˜¯å¦é€šè¿‡æ¥å£æ‹‰å–ï¼› é“¾æ¥åœ°å€æ˜¯å¦å¯ä¸ºç©ºï¼Œæ­¤æ—¶è¦è­¦æƒ•target=â€_blankâ€çš„æƒ…å†µï¼› é“¾æ¥æ–‡å­—æ˜¯å¦å¯å¤šè¡Œï¼Œæ˜¯å¦é™åˆ¶å­—æ•°ï¼› æ˜¯å¦éœ€è¦åŸ‹ç‚¹ï¼Œä»¥åŠç¡®è®¤åŸ‹ç‚¹æ–¹æ¡ˆã€‚ ç¬¬äºŒä¸ªç›®æ ‡ï¼Œå°±æ˜¯ç éœ€æ±‚äº†ã€‚â€œæ²¡æ—¶é—´äº†ï¼Œè¿™ä¸ªéœ€æ±‚æ”¾åœ¨äºŒæœŸå§â€ è¿™ä¸ªé‡‘å¥ï¼Œä¸çŸ¥é“å¤§å®¶æ„Ÿæ‚Ÿæ·±ä¸æ·±ï¼Œå“ˆå“ˆã€‚é¦–å…ˆè¦æ¸…æ¥šè‡ªå·±åœ¨æŸä¸ªæ—¶é—´æ®µçš„å·¥ä½œé‡ç‚¹ï¼Œç„¶åæ ¹æ®éœ€æ±‚ä¸å·¥ä½œé‡ç‚¹çš„ç›¸å…³ç³»æ•°å»è¯„ä¼°ï¼Œæœ‰æ„è¯†åœ°æ‹’ç»ä¸€äº›æ— æ„ä¹‰çš„å·¥ä½œã€‚å½“ç„¶ï¼Œå·¥ä½œé‡ç‚¹åº”è¯¥æ˜¯ä¸ä¸šåŠ¡æ¯æ¯ç›¸å…³çš„ï¼Œæœ€å¥½æ˜¯å’Œä¸Šçº§å•†é‡åçš„ç»“æœã€‚ äºæ˜¯ï¼Œç»™è‡ªå·±å®šä¸ªtodo listï¼Œåœ¨éœ€æ±‚è¯„å®¡å‰è‡ªå·±è¿‡ä¸€éç›¸å…³æ–‡ä»¶å†…å®¹ï¼Œåˆ—å‡ºæœ‰ç–‘é—®çš„åœ°æ–¹ï¼Œåšå¥½ç éœ€æ±‚çš„å‡†å¤‡â€¦ éœ€æ±‚æ’æœŸç¡®è®¤éœ€æ±‚åï¼Œé¦–å…ˆç¡®è®¤éœ€æ±‚çš„ä¼˜å…ˆçº§ï¼Œç„¶åè¿›è¡Œæ’æœŸã€‚å¦‚æœæˆ‘ä»¬æ‰‹ä¸Šæœ‰è®¸å¤šéœ€æ±‚ï¼Œç¡®è®¤éœ€æ±‚çš„ä¼˜å…ˆçº§æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚ æ¥è‡ªåŒä¸€ä¸ªäº§å“çš„éœ€æ±‚ï¼Œå¯è®©å¯¹æ–¹ç»™å‡ºä¼˜å…ˆçº§å³å¯ã€‚ ä¸åŒäº§å“çš„éœ€æ±‚ï¼Œå¯å¾æ±‚éœ€æ±‚æ–¹çš„æ„è§ï¼Œé¿å…å‡ºç°ä¸¥é‡å½±å“åˆ°å¯¹æ–¹çš„ä¸»æµç¨‹çš„æƒ…å†µã€‚ è™½è¯´éœ€æ±‚çš„ä¼˜å…ˆçº§ä¸»è¦æŒæ¡åœ¨äº§å“ç»ç†çš„æ‰‹ä¸Šï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±ä¹Ÿè¦æœ‰ä¸ªè®¤è¯†ã€‚ äº†è§£ ä¸»çº¿éœ€æ±‚ &gt; ä¸»çº¿çš„åˆ†æ”¯éœ€æ±‚ &gt; é”¦ä¸Šæ·»èŠ±çš„éœ€æ±‚ çš„åŸåˆ™ï¼Œæ ¹æ® ç”¨æˆ·è¦†ç›–é¢ã€ç”¨æˆ·ä½¿ç”¨é¢‘æ¬¡ã€å¯¹ç”¨æˆ·çš„é‡è¦ç¨‹åº¦ï¼Œä»¥å››è±¡é™æ³•åˆ™â€œé‡è¦ä¸”ç´§æ€¥ &gt; é‡è¦ä¸ç´§æ€¥ &gt; ç´§æ€¥ä¸é‡è¦ &gt; ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥â€ä½œä¸ºè¾…åŠ©ç­‰ç­‰ï¼Œåº”ä»˜ä»€ä¹ˆéœ€æ±‚éƒ½é‡è¦ã€ä»€ä¹ˆéœ€æ±‚éƒ½ç´§æ€¥çš„æƒ…å†µã€‚ é’ˆå¯¹è€æ¿æçš„éœ€æ±‚ï¼Œä¸‹å‘¨è¦æ¼”ç¤ºç»™è€æ¿çœ‹çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å°±ä¹–ä¹–åœ°æ’æœŸåœ¨å‰é¢å§ï¼Œæ’é™¤ä¸‡éš¾ï¼Œæ²¡å•¥å¥½è¯´çš„~ æ’æœŸä¸€ç›´æ˜¯å†å²éš¾é¢˜ï¼Œæœ‰ä»¥ä¸‹â€œåè¨€åå¥â€ä¾›å‚è€ƒï¼š äº†è§£éœ€æ±‚è¿›å…¥å¼€å‘é˜¶æ®µçš„ä¾èµ–æ¡ä»¶ï¼Œæ¯”å¦‚æ˜¯å¦ä¾èµ–è®¾è®¡ç¨¿è¿˜æ˜¯æ¥å£ï¼Œç„¶åå†è¿›è¡Œæ’æœŸã€‚ ä¸è¦æŠŠä¸€å¤©å½“8ä¸ªæˆ–è€…æ›´å¤šçš„å·¥ä½œå°æ—¶ç”¨ï¼Œä¸´æ—¶çš„ä¼šè®®æˆ–è€…è¢«æ‰“æ–­çš„ç°è±¡å¤ªå¸¸è§äº†ã€‚ æ’æœŸç•™æœ‰ä½™åœ°ï¼Œå°¤å…¶æ˜¯è‡ªå·±ä¸ç†Ÿæ‚‰çš„é¢†åŸŸï¼Œé£é™©è¾ƒé«˜ã€‚æ’æœŸçš„è®¡ç®—æ–¹å¼æœ‰æŒºå¤šï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸°å¯Œç»éªŒæ¥ï¼Œæˆ–è€…è®¡ç®—å…¬å¼æ¯”å¦‚ï¼ˆä¸€èˆ¬èƒ½å®Œæˆçš„å¤©æ•° + è‚¯å®šèƒ½å®Œæˆçš„å¤©æ•°ï¼‰/2ï¼Œæˆ–è€…ï¼ˆä¸€èˆ¬èƒ½å®Œæˆçš„å¤©æ•°ï¼‰* ç³»æ•°ï¼Œç³»æ•°æ ¹æ®éš¾åº¦æ¥åŒºåˆ†ã€‚ æŠŠæ¡å¥½éœ€æ±‚çš„èŠ‚å¥ï¼Œå¦‚é‡å¼€å‘å‘¨æœŸè¾ƒé•¿çš„éœ€æ±‚ï¼Œå°†éœ€æ±‚æ‹†åˆ†æˆNä¸ªå­éœ€æ±‚ã€‚ è¦æ˜ç™½ï¼Œå³ä½¿æ’æœŸå¾ˆè½»æ¾ï¼Œä½ å¯èƒ½ä¾ç„¶æ˜¯æœ€åä¸€åˆ»æ‰å®Œæˆï¼Œå¤ªæ‰å¿ƒã€‚ éœ€æ±‚è·Ÿè¸ªéœ€æ±‚è¿›å…¥å¼€å‘åï¼Œç‰¹åˆ«æ˜¯å¤§é¡¹ç›®ï¼Œå¾—åˆ©ç”¨éœ€æ±‚ç®¡ç†å¹³å°ï¼Œè¿™æœ‰åˆ©äºéœ€æ±‚çš„è¿›åº¦è¿½è¸ªï¼Œä¸”æ–¹ä¾¿æˆ‘ä»¬æ±‡æŠ¥å·¥ä½œã€‚ä¸è¦æŠŠæ±‡æŠ¥å·¥ä½œå½“åšè´Ÿæ‹…ï¼Œåº”åŒ–è¢«åŠ¨ä¸ºä¸»åŠ¨ã€‚å¦åˆ™ï¼Œå‘¨äº”ä¸‹åˆæŸä¸ªæ—¶åˆ»ï¼Œä½ ä¼šæ”¶åˆ°äº§å“ç»ç†çš„ç›˜é—®ï¼šâ€œåšå¾—æ€ä¹ˆæ ·äº†ï¼Ÿè¿›åº¦å¦‚ä½•ï¼Ÿâ€ï¼›æ±‡æŠ¥å·¥ä½œï¼Œä¹Ÿæœ‰åˆ©äºè®©å¤§å®¶çœ‹åˆ°è‡ªå·±çš„åŠªåŠ›æˆæœï¼Œæˆå°±æ„Ÿå¢å€ï¼Œå½¢æˆè‰¯å¥½çš„å·¥ä½œå¾ªç¯ï¼›æˆ–è€…æ˜¯äº†è§£èº«è¾¹çš„å°ä¼™ä¼´åœ¨åšä»€ä¹ˆï¼Œæœ‰åˆ©äºäº¤æµã€‚ æˆ‘ä»¬ç°åœ¨æ¯å‘¨äº”ä¼šå¼€é¡¹ç›®ä¾‹ä¼šï¼Œæ±‡æŠ¥å†…å®¹å¦‚ä¸‹ï¼š ç»“æœï¼šè¿›åº¦å¦‚ä½•ï¼Œå®Œæˆäº†å“ªäº›å†…å®¹ï¼Ÿ è®¡åˆ’ï¼šä¸‹å‘¨è®¡åˆ’å®Œæˆå“ªäº›å†…å®¹ï¼Ÿ é—®é¢˜ï¼šè®¨è®ºé—®é¢˜ï¼Œæ‰¾å‡ºé—®é¢˜çš„å¤±è¯¯ç‚¹ã€å…³é”®ç‚¹ã€åæ€ç‚¹ï¼Œå¦‚ä½•è§£å†³ã€‚ éœ€æ±‚å˜æ›´éœ€æ±‚å˜æ›´æœ‰æ—¶ä¸å¯é¿å…ï¼Œæˆ‘ä»¬è¿˜å¾—æ‹¿å‡ºå¿«é€Ÿå“åº”éœ€æ±‚å˜æ›´çš„æœ¬äº‹ï¼Œè®°å½•åé¦ˆæ‰€æœ‰çš„å˜æ›´ï¼Œæ‹’ç»ä¸åˆç†çš„éœ€æ±‚ã€‚æœ€å¥½å’Œäº§å“ç»ç†è¾¾æˆä¸€ä¸ªå…±è¯†ï¼Œè‹¥å› PRDçš„éœ€æ±‚å˜åŠ¨ï¼Œåˆ™ä¼šæ ¹æ®å®é™…æƒ…å†µé‡æ–°æ’æœŸã€‚æœ‰ä»£ä»·ï¼Œæœ‰åæ€ï¼Œæœ‰åˆ©äºç£ä¿ƒåŒæ–¹åœ¨ç¼–å†™PRDã€è¯„å®¡çš„é˜¶æ®µå°±å¼€å§‹è®¤çœŸå¯¹å¾…ï¼Œä¸”å®šä¹‰å¥½å®Œæˆéœ€æ±‚çš„æ ‡å‡†ã€‚ ç ”å‘ç®¡ç†æ‰“å¼€æ˜¨å¤©æ²¡å…³æœºçš„ç”µè„‘å±å¹•ï¼Œæ‰¾åˆ°è‡ªå·±å–œæ¬¢çš„å§¿åŠ¿ï¼Œæˆ–ç©¿ç€æ ¼å­è¡¬è¡«ã€æ£‰æ‹–é‹ï¼Œæˆ–å¥—ç€æŠ¤é¢ˆæ•ï¼Œæˆ–å¸¦ç€è€³æœºå¬éŸ³ä¹ï¼Œç„¶åå°±å¼€å§‹æ¬ç –äº†~~ ä»“åº“ç®¡ç†ä¸ºäº†è§„èŒƒä»£ç ä»“åº“ï¼Œä½¿å¾—ç‰ˆæœ¬çš„æ¼”è¿›ä¿æŒç®€æ´ï¼Œä¸»å¹²æ¸…æ™°ï¼Œå› æ­¤å¾—éµå¾ªä¸€äº›è§„åˆ™ï¼Œé¿å…ç”±äºç»´æŠ¤å›°éš¾é€ æˆçš„é”™è¯¯ç‰ˆæœ¬å‘å¸ƒç­‰é—®é¢˜ã€‚ åˆ†æ”¯è¦æ±‚ï¼š æ¯ä¸ªéœ€æ±‚å¿…é¡»æ–°å¼€ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ï¼Œå¹¶å¤‡æ³¨å¥½éœ€æ±‚æè¿°ã€‚ æ¯ä¸ªåˆ†æ”¯åªåšä¸€ä¸ªéœ€æ±‚ï¼Œåˆ‡å‹¿éœ€æ±‚äº¤å‰ä¿®æ”¹ã€‚ åˆå¹¶åæˆ–æ— ç”¨çš„åˆ†æ”¯éœ€ç«‹å³åˆ é™¤ï¼Œå¦‚æœæœ‰ä¿®æ”¹ï¼Œå†é‡æ–°æ‹‰ä¸€ä¸ªæ–°åˆ†æ”¯ã€‚ çº¦æŸå‘½åè§„åˆ™ï¼Œå¦‚é‡‡å–masterã€devã€featã€releaseã€hotfixå‘½åæ–¹å¼ã€‚ æäº¤commitè¦æ±‚ï¼š ä¿è¯commitå†å²è®°å½•çš„æ•´æ´ï¼Œè¦æ±‚æäº¤çš„ä»£ç ç²’åº¦è¦å°ï¼Œ å°½é‡ä¿è¯è¿™ä¸ª commitåªåšä¸€ä»¶äº‹æƒ…ï¼Œå¦åˆ™å¾ˆéš¾æè¿°æ¸…æ¥šã€‚ çº¦å®šcommitæäº¤è§„èŒƒï¼Œå¦‚ Angular å›¢é˜Ÿçš„è§„èŒƒ&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;ï¼Œä¸”åˆ©ç”¨commitlintå·¥å…·çº¦æŸä¸€äº›æ ¼å¼ï¼ŒåŒæ—¶é¿å…ä½¿ç”¨-nå¼ºåˆ¶æäº¤ã€‚ æœ‰åˆ†æ”¯å°±æœ‰åˆå¹¶ï¼Œåˆç†é€‰æ‹©é€‚å½“çš„æ—¶æœºã€é€‚å½“çš„æ–¹å¼è¿›è¡Œåˆå¹¶ï¼Œæ¯”å¦‚merge --no-ffã€merge --squashã€rebaseè¿˜æ˜¯cherry-pickã€‚å¤§å®¶éƒ½çŸ¥é“ï¼Œå˜åŸºæœ‰é£é™©ï¼Œä¸”è¦éµå¾ªå˜åŸºåŸåˆ™ï¼šåªå¯¹å°šæœªæ¨é€æˆ–åˆ†äº«ç»™åˆ«äººçš„æœ¬åœ°ä¿®æ”¹æ‰§è¡Œå˜åŸºæ“ä½œæ¸…ç†å†å²ï¼Œä»ä¸å¯¹å·²æ¨é€è‡³åˆ«å¤„çš„æäº¤æ‰§è¡Œå˜åŸºæ“ä½œã€‚ æœ‰åˆå¹¶å°±å¯èƒ½æœ‰å†²çªã€‚å¦‚æœä¸€ç›´å­˜åœ¨å¤§é‡çš„å†²çªï¼Œè¯´æ˜æ˜¯åˆ†å·¥ã€ç»„ç»‡æ¶æ„ä¸å¯¹ï¼Œéœ€è¦å‡å°‘å¤šäººåŒæ—¶æ”¹åŠ¨åŒä¸€ä»½ä»£ç çš„å‡ ç‡ã€‚å¦‚é‡åˆ°å†²çªï¼Œå¯é‡‡å–ä»¥ä¸‹æªæ–½ï¼š é™ä½åˆå¹¶åˆ†æ”¯å†²çªçš„æ•°é‡ï¼Œæ¯”å¦‚å…ˆåˆå¹¶å°‘å†²çªçš„åˆ†æ”¯ï¼Œå†åˆå¹¶å†²çªå¤šçš„åˆ†æ”¯ã€‚ ç†Ÿæ‚‰Gitæ“ä½œï¼Œé€‚å½“å€ŸåŠ©å¯è§†åŒ–åˆå¹¶å·¥ä½œã€‚ åˆå¹¶åçš„ä»£ç æ£€æŸ¥ï¼Œè®©ä»£ç å®é™…è¿è¡Œä¸€éã€‚ å¦‚æœå†²çªçš„ä¸æ˜¯è‡ªå·±è´Ÿè´£çš„ä»£ç ï¼Œè®©å…·ä½“è´Ÿè´£äººæ¥å‚ä¸ä»£ç åˆå¹¶ã€‚ ä»£ç ç®¡ç† é€»è¾‘ä¸€å®šè¦æ¸…æ™°ï¼Œè€ƒè™‘å‘¨å…¨ã€‚ä¸è¦åªè€ƒè™‘æ™®é€šæƒ…å†µï¼Œè¿˜è¦è€ƒè™‘ä»€ä¹ˆæƒ…å†µä¼šå‡ºé”™ï¼Œå¤±è´¥äº†å¦‚ä½•å¤„ç†ï¼Œæ€»ä¹‹ï¼Œå¤šç»´åº¦å»æ€è€ƒã€‚ å½“ç¬¬äºŒæ¬¡ç¼–å†™ç›¸åŒçš„ä»£ç æ—¶ï¼Œæ˜¯æå–æˆç»„ä»¶çš„æ­£ç¡®æ—¶æœºã€‚å¯¹äºå¤§é¡¹ç›®ï¼Œç¬¬ä¸‰æ¬¡æ‰æå–ï¼Œå°†ä¼šå¢å¼ºæ‰§è¡Œçš„é˜»åŠ›ã€‚ ä¸€å®šè¦å¤šå†™æ³¨é‡Šï¼Œè§£é‡Šä»£ç çš„æ„å›¾å’ŒåŠå…¶åŸå› ï¼Œå†æ¬¡å›å¤´çœ‹çš„æ—¶å€™ï¼Œä½ ä¹Ÿä¼šååˆ†æ„Ÿæ¿€è‡ªå·±ï¼Œæ•ˆç‡å¾€ä¸Šè¹­ã€‚ å¦‚æœå‡½æ•°æˆ–æ–¹æ³•è¶…è¿‡ 30 è¡Œä»£ç ï¼Œè€ƒè™‘ä¼˜åŒ–å®ƒï¼Œå¯ç”¨å·¥å…·æ¯”å¦‚vscodeçš„æ’ä»¶CodeMetricsè¾…åŠ©æç¤ºè§£å†³ï¼Œå¿ƒä¸­è¦æœ‰ä¸€æŠŠå°ºå­æ—¶åˆ»é­ç­–è‡ªå·±ï¼Œå‡¡äº‹å¾—è¿‡è‡ªå·±é‚£ä¸€å…³ã€‚ çœ‹åˆ°é—®é¢˜ï¼Œå³ä½¿æš‚æ—¶ä¸èƒ½è§£å†³ï¼Œä¸€å®šè¦ä»¥æŸç§æ–¹å¼æŠŠé—®é¢˜æŠ›å‡ºæ¥ï¼Œä¸ç„¶å®¹æ˜“é—å¿˜åœ¨æŸä¸ªè§’è½ã€‚å½“ç„¶ï¼Œèƒ½è§£å†³å°±å½“åœºè§£å†³ï¼Œå†æ¬¡æ‹¾èµ·çš„æ—¶é—´ã€äººåŠ›ä»£ä»·ä¹Ÿæ˜¯å¾ˆé«˜çš„ã€‚ é£é™©ç®¡ç†å³ä½¿å°å¿ƒå†å°å¿ƒï¼Œæ„å¤–æ€»æ˜¯ä¼šåœ¨æŸä¸€åˆ»å‘ç”Ÿã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ—¶åˆ»æ§åˆ¶ï¼Œé™ä½éœ€æ±‚å˜æ›´ã€é¡¹ç›®å»¶æœŸçš„é£é™©ï¼Œåº”ç”¨ç§¯ç´¯çš„ç»éªŒå’Œä¸“ä¸šçŸ¥è¯†æ¥é¢„æµ‹ä½•æ—¶ä¼šå‡ºç°é£é™©ï¼Œä»¥åŠå¦‚ä½•é‡‡å–æœ‰æ•ˆçš„åº”å¯¹æªæ–½ã€‚ é£é™©ç®¡ç†å°±æ˜¯å¦‚ä½•é¢„é˜²é£é™©ï¼š ä¸‹é¢æŒ‘å‡ ä¸ªé‡ç‚¹è®²è®²ï¼š éœ€æ±‚ç†è§£è¯¯å·®ã€éš¾åº¦è¯¯åˆ¤ã€æ’æœŸç´§å¼ ï¼Œåœ¨åˆ†æè¯„å®¡é˜¶æ®µï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦åœ°é¿å…è¿™äº›é—®é¢˜ï¼Œå½“ç„¶ä¹Ÿå’Œæˆ‘ä»¬è‡ªèº«çš„èƒ½åŠ›æœ‰å…³ã€‚è‡ªå·±è¶Šæ²¡æœ‰æŠŠæ¡çš„äº‹ï¼Œäº‰å–ç•™äº›æ—¶é—´ä»¥å¤‡ä¸æµ‹ï¼Œé¿å…å»¶æœŸçš„æƒ…å†µå‡ºç°ã€‚ ç¡®è®¤æœ‰æ•ˆçš„æ²Ÿé€šæ–¹å¼ï¼ŒåŠæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚å¯åœ¨ç ”å‘é‚®ä»¶ä¸­æš´éœ²è¿›åº¦æ˜¯å¦å¼‚å¸¸ã€åŒæ­¥éœ€æ±‚å˜æ›´ï¼Œæ˜¯å¦å­˜åœ¨å¾…ç¡®è®¤çš„é—®é¢˜ï¼Œæˆ–è€…æ ‡çº¢å…¶ä»–é‡è¦ä¿¡æ¯ã€‚ è®¤çœŸéªŒæ”¶æ‰€æœ‰éœ€æ±‚ï¼Œæ˜¯å¦é—æ¼åŠŸèƒ½ã€‚é™¤äº†è¦†ç›–åŠŸèƒ½åŸºæœ¬æµç¨‹é€»è¾‘çš„å½¢å¼ï¼Œä¹Ÿå¯ä»¥ä»ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯è§’åº¦å»è¿›è¡Œåœºæ™¯æµ‹è¯•ã€‚è¯´èµ·æ¥å®¹æ˜“ï¼Œæœ‰æ—¶å€™åšèµ·æ¥éš¾ï¼Œç‰¹åˆ«æ˜¯å¯¹é¡¹ç›®ä¸æ˜¯ç‰¹åˆ«ç†Ÿæ‚‰ï¼Œé¡¹ç›®åˆç‰¹åˆ«å¤æ‚çš„æƒ…å†µï¼Œæ­¤æ—¶è¦åšçš„å°±æ˜¯ï¼Œæ ¹æ®ä»£ç å½±å“çš„èŒƒå›´æ¥ç¡®å®šè‡ªæµ‹çš„èŒƒå›´ã€‚é¡¹ç›®æˆå‘˜å¯å…±åŒç»´æŠ¤ä¸€ä»½åŠŸèƒ½åˆ—è¡¨ï¼Œä»¥æ­¤ä¸ºä¾æ®è¿›è¡Œæµ‹è¯•ã€‚ ä¿è¯æµ‹è¯•åˆ†æ”¯ä¸å°†ä¸Šçº¿çš„å†…å®¹ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¿è¯æµ‹è¯•åˆ†æ”¯çš„å¹²å‡€ç¨‹åº¦ã€‚å¦‚æœæµ‹è¯•å®Œæ¯•åæ‰åˆå¹¶åˆ†æ”¯ï¼Œå¯èƒ½å¸¦æ¥åˆå¹¶å†²çªçš„ç±»ä¼¼é—®é¢˜ã€‚ é’ˆå¯¹å¤§ç‰ˆæœ¬ï¼Œåˆ†æä¸Šçº¿å‰çš„ä¾èµ–ï¼Œé€šçŸ¥åˆ°æ‰€æœ‰ç›¸å…³äººå‘˜ï¼Œæœ€å¥½å¼€ä¸€ä¸ªä¸Šçº¿æ€»åŠ¨å‘˜çš„ä¼šè®®ï¼Œå…±åŒæ¢è®¨ä¸Šçº¿æ³¨æ„äº‹é¡¹ã€é—ç•™çš„é—®é¢˜ã€‚ é’ˆå¯¹å°ç‰ˆæœ¬ï¼Œçº¦å®šä¸Šçº¿çš„é¢‘æ¬¡ã€‚å¯æ¯å‘¨å›ºå®šå‘¨äºŒæˆ–å‘¨å››å‘ç‰ˆï¼Œä¸”å‘é€ä¸Šçº¿ç”³è¯·é‚®ä»¶ï¼Œä¸å¯éšæ„å‘ç‰ˆã€‚ ä¸Šçº¿å‰åï¼ŒæŒ‡å®šæ¯äººè´Ÿè´£æŸäº›æ¨¡å—çš„æµ‹è¯•ä»¥åŠé£é™©ç®¡ç†ï¼Œæœ‰åˆ©äºå†…å¿ƒäº§ç”Ÿæ›´å¤§çš„è´£ä»»å»åšå¥½ï¼Œç”šè‡³å¯ä»¥å½±å“ç£ä¿ƒåˆ«äººã€‚ æŠ¥é”™å¼‚å¸¸ã€æ€§èƒ½ã€æœåŠ¡å¼‚å¸¸è¦ç›‘æ§ï¼Œä¿è¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°å¼‚å¸¸å¹¶å¤„ç†ã€‚ ä¸Šçº¿åï¼ŒåŠæ—¶å›é¡¾æ€»ç»“é¡¹ç›®çš„æˆåŠŸå’Œå¤±è´¥ä¹‹å¤„ï¼Œå‰–æå„ä¸ªç¯èŠ‚å­˜åœ¨çš„é—®é¢˜ï¼Œä¸ºä»¥åçš„é¡¹ç›®æä¾›å‚è€ƒã€‚ ä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜å’Œä¸€ä¸ªæ™®é€šç¨‹åºå‘˜çš„å·®åˆ«ï¼Œå¯èƒ½åœ¨äºç†è§£é—®é¢˜çš„æ·±åº¦ã€‚â€œè¯•è¯•é‡å¯ä¸€ä¸‹ç”µè„‘â€ï¼Œå½“ç”µè„‘å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæƒ³åˆ°è¿™å¥è¯ã€‚ä½†æ˜¯æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¯èƒ½å¤±å»äº†ä¸€ä¸ªæŒ–æ˜é—®é¢˜æœ¬è´¨çš„æœºä¼šï¼Œå¯¼è‡´ä»¥åé—®é¢˜è¯¥å‡ºç°çš„æ—¶å€™è¿˜æ˜¯ä¼šå‡ºç°ã€‚å†è€…ï¼Œæˆ‘ä»¬ç ç¨‹åºï¼Œä¿®BUGï¼Œæœ‰æ—¶å€™å¿½ç•¥äº†è´¨é‡ï¼Œè€Œå»èµ¶è¿›åº¦ï¼Œè¿™æ˜¯å¾—ä¸å¿å¤±çš„ï¼Œæœ€åå‘çš„è¿˜æ˜¯è‡ªå·±å•Šã€‚ æ€»ç»“ä»¥ä¸Šä»éœ€æ±‚ç®¡ç†ã€ç ”å‘ç®¡ç†ã€é£é™©ç®¡ç†ä¸‰ä¸ªå¤§æ–¹å‘ï¼Œåˆç»†åˆ†äº†å°æ–¹å‘å»è®²è¿°å¦‚ä½•ç®¡ç†å¥½æ‰‹ä¸Šçš„é¡¹ç›®ã€‚äººæœ¬èº«å°±æ˜¯ä¸€ä¸ªäº§å“ï¼Œå¤šä¸ªé¡¹ç›®çš„é›†åˆã€‚é¡¹ç›®å°±è¦å¥½å¿ƒç»è¥ï¼Œç²¾å¿ƒç®¡ç†ï¼Œå› ä¸ºæ­£æ˜¯è¿™ä¸€ä»¶ä¸€ä»¶çš„æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæ„æˆäº†æˆ‘ä»¬ä¸°å¯Œå¤šå½©çš„ç¨‹åºå‘˜ç”Ÿæ´»ã€‚ ç»éªŒæœ‰é™ï¼Œæˆ–è®¸ä»¥ä¸Šå†…å®¹æœ‰ç‘•ç–µï¼Œæ¬¢è¿äº¤æµä¸æ›´æ­£ã€‚è°¢è°¢å¤§å®¶~","pubDate":"Wed, 11 Sep 2019 07:00:00 GMT","guid":"https://aotu.io/notes/2019/09/11/project-management-of-programmer/","category":"é¡¹ç›®æ€»ç»“"},{"title":"äº¬ä¸œ PC é¦–é¡µ 2019 æ”¹ç‰ˆå‰ç«¯æ€»ç»“","link":"https://aotu.io/notes/2019/08/26/jdindex_2019/","description":"è·ç¦»ä¸Šæ¬¡é¦–é¡µæ”¹ç‰ˆï¼Œå·²æœ‰2å¹´3ä¸ªæœˆé›¶äº”å¤©ã€‚ç›¸æ¯”ä¸Šæ¬¡æ”¹ç‰ˆå¯¹é¦–é¡µæ•´ä½“æ¡†æ¶ã€å¼€å‘æµç¨‹çš„å¤§åˆ€é˜”æ–§ï¼ˆå‰ä¸¤æ¬¡æ”¹ç‰ˆæ€»ç»“ä¼ é€é—¨ï¼š2016ç‰ˆï¼Œ2017ç‰ˆï¼‰ï¼Œè¿™æ¬¡çš„æ”¹ç‰ˆçœ‹èµ·æ¥æ˜¾å¾—æœ‰ç‚¹åƒè·³æ°´â€”â€”æ²¡ä»€ä¹ˆæ°´èŠ±ã€‚åœ¨ç«™åœ¨å·¨äººè‚©è†€ä¸Šçš„å°å·¨äººçš„å®å’›ä¸æœŸç›¼ä¸‹ï¼Œè¿™æ¬¡æ”¹ç‰ˆåœ¨å»¶ç»­17ç‰ˆçš„æ¡†æ¶ä¸æµç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œä¸ºé¦–é¡µçš„ç¨³å®šæ€§ã€å®‰å…¨æ€§ã€è§†è§‰ä½“éªŒã€æ— éšœç¢ä½“éªŒæ–¹é¢è§ç¼æ’é’ˆåœ°æ·»äº†ç –åŠ äº†ç“¦ã€‚ æœ¬æ–‡å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œé˜è¿° å¼•å…¥å¼ºç±»å‹æ ¡éªŒ å‡çº§èµ„æºæ„å»ºæ–¹æ¡ˆ æ¥å…¥è‡ªåŠ¨åŒ–æµ‹è¯• å®Œå–„ç›‘æ§ä½“ç³» ä¼˜åŒ–é¡µé¢åŠ è½½ä½“éªŒï¼šéª¨æ¶å± ä¼˜åŒ–ä¿¡æ¯æ— éšœç¢ä½“éªŒ å¼•å…¥å¼ºç±»å‹æ ¡éªŒåœ¨æ€§èƒ½å‡ è¿‘æ— æ‡ˆå¯å‡»çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å†³å®šä»ç¨³å®šæ€§å…¥æ‰‹ï¼Œä¸ºé¡¹ç›®å¼•å…¥å¼ºç±»å‹æ ¡éªŒï¼Œå¼¥è¡¥ JavaScript è¿™ç§å¼±ç±»å‹è¯­è¨€åœ¨ä¸å¯é¢„æµ‹æ€§ä¸Šçš„ç¼ºé™·ã€‚ å¼ºç±»å‹è¯­è¨€ TypeScript å·²å‘å¸ƒ6å¹´æœ‰ä½™ï¼Œå›½å†…åº”ç”¨çš„å¼€å‘è€…ä¹Ÿåœ¨æ…¢æ…¢å¢é•¿ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸šåŠ¡å¼€å‘å‘¨æœŸçŸ­ï¼Œè¿­ä»£é¢‘ç¹ï¼ŒTypeScript çš„å¼•å…¥å¯¹äºå¾ˆå¤§ä¸€éƒ¨åˆ†å¼€å‘è€…æ¥è¯´æ˜¯ä¸€ä»¶è´¹æ—¶è´¹åŠ›çš„äº‹ï¼Œç”¨çš„è¯ä¸šåŠ¡å¯ä»¥ä¸Šçº¿ï¼Œä¸ç”¨çš„è¯ä¸šåŠ¡ç…§æ ·å¯ä»¥ä¸Šçº¿ï¼Œå› æ­¤å›¢é˜Ÿæå°‘åœ¨ä¸šåŠ¡ç”Ÿäº§ä¸­åº”ç”¨ã€‚ä½†ç§‰æ‰¿ç€ä¸æŠ˜è…¾ä¸å‡¹å‡¸çš„ç†å¿µï¼Œæ–°ç‰ˆé¦–é¡µä¸è´Ÿä½¿å‘½çš„ï¼Œè¿›è¡Œäº†åŸºäº TS çš„é‡æ„ã€‚ åš TS é‡æ„å¹¶ä¸éš¾ï¼ŒæŠŠ js åç¼€æ”¹æˆ ts å°±å¥½äº†ã€‚å®Œã€‚ å½“ç„¶æ˜¯å¼€ç©ç¬‘çš„å•¦ï¼æ˜¾ç„¶ï¼Œè¿™æ ·çš„ TS æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚åªæœ‰ä¸¥æ ¼éµå¾ª TS æ ‡å‡†çš„ä»£ç æ‰èƒ½æœ€å¤§åŒ– TS çš„æ•ˆç”¨ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯¹ TS çš„æ£€æŸ¥å¼€å¯ strict æ¨¡å¼ï¼Œæ¯æ¬¡æäº¤æ—¶ï¼Œéƒ½ä¼šå¯¹ä»£ç åšä¸€æ¬¡å®Œæ•´çš„æ£€æŸ¥ï¼Œåªè¦æœ‰ TS æŠ¥é”™å°±ç¦æ­¢æäº¤ï¼Œæ—¨åœ¨å‘æˆå‘˜ä¼ è¾¾ä¸€ä¸ªä¿¡æ¯â€”â€”å†™å¼ºç±»å‹è¯­è¨€å°±è¯¥æœ‰è§‰æ‚Ÿï¼Œå¦åˆ™å°±æ˜¯è€æµæ°“ã€‚ æ²¡æœ‰æ·±å…¥ä½¿ç”¨è¿‡ TS çš„åŒå­¦åœ¨å‰æœŸå¯èƒ½ä¼šæ„Ÿåˆ°äººç”Ÿçš„è‰°éš¾ï¼Œä½†è¿™äº›éƒ½æ˜¯ä¸ºä½ å¥½ä¸ºäº†ä¿è¯ä»£ç çš„å¥å£®æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥å¾€éš¾ä»¥å®šä½ã€æŸ¥æ‰¾çš„ window å…¨å±€å˜é‡çš„ç®¡ç†ä¸Šï¼Œååˆ†ä»¤å¼€å‘è€…å¤´ç–¼ï¼Œè€Œå¼•å…¥äº† TS ä¹‹åï¼Œåªè¦å¯¹å…¨å±€å˜é‡è¿›è¡Œäº†æ¥å£è®¾ç½®ï¼Œå„ä¸ªç»„ä»¶ä¸­å†ä¹Ÿä¸ä¼šå‡ºç°å¤šä½™æˆ–æ˜¯æœªçŸ¥å…¨å±€å˜é‡çš„æƒ…å†µã€‚å†ä¾‹å¦‚ï¼Œåœ¨å†™ä¸€ä¸ªæ‹¥æœ‰ getã€set æ–¹æ³•çš„å­˜è´®ç±»çš„æ—¶å€™ï¼ŒTS èƒ½å¸®åŠ©æ£€æµ‹è·å–å†…å®¹çš„ç±»å‹ï¼š 123456789101112131415161718192021222324interface MemoryState &#123; testa: boolean testb: string&#125;class Controller &#123; state: StateType constructor() &#123; this.state = &#123; state: &#123;&#125;, &#125; &#125; get&lt;K extends MemoryStateKeys&gt;(key: K) &#123; return this.state.memory[key] &#125; set&lt;K extends MemoryStateKeys&gt;(key: K, value: MemoryState[K]): MemoryState[K] &#123; this.state.memory[key] = value return value &#125;&#125; å½“æˆ‘ä»¬ä½¿ç”¨ new Controller().get(&quot;testb&quot;) çš„æ—¶å€™ï¼ŒTS èƒ½å¤Ÿåœ¨å¼€å‘é˜¶æ®µæ£€æµ‹ testb æ˜¯å¦æ˜¯ string ç±»å‹ã€‚é€šè¿‡ TS çš„æ£€æµ‹æ’ä»¶ï¼Œæˆ‘ä»¬èƒ½æ”¾å¿ƒçš„ä½¿ç”¨ string ç±»å‹å¯¹è±¡çš„æ–¹æ³•ï¼Œç®€åŒ–ç¹å¤çš„åˆ¤æ–­é€»è¾‘ï¼ŒåŒæ—¶ä¿è¯ä»£ç åœ¨è·å–åˆ°éæœŸæœ›å€¼æ—¶èƒ½åŠæ—¶é€šè¿‡æŠ¥é”™å‘ç°ï¼Œä¸€åˆ‡çš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ç¨³å®šå¯é¢„æµ‹çš„ï¼Œå››èˆäº”å…¥å°±æ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™è‡ªåŠ¨èµ°äº†ä¸€éƒ¨åˆ†æµ‹è¯•ï¼Œä¸ºé¡¹ç›®çš„å¼€å‘ä¸è¿­ä»£ä¿é©¾æŠ¤èˆªã€‚ å‡çº§èµ„æºæ„å»ºæ–¹æ¡ˆæ—§ç‰ˆé¦–é¡µé¡¹ç›®ä½¿ç”¨çš„æ„å»ºå·¥å…· Athenaï¼Œæ¨è¿›äº†å¼€å‘æµç¨‹è‡ªåŠ¨åŒ–ï¼Œä½†æ˜¯æ¶‰åŠåˆ°å®šåˆ¶åŒ–çš„æ„å»ºæµç¨‹æ—¶ï¼Œç”±äº Athena çš„é€šç”¨æ€§ï¼Œä¸æ–¹ä¾¿ç›´æ¥åšæ”¹åŠ¨ã€‚é¦–é¡µåŒ…å«ç›´å‡ºã€åŒæ­¥ã€å¼‚æ­¥ä¸‰ç§ç±»å‹çš„èµ„æºå¼•ç”¨ï¼Œéœ€å¯¹èµ„æºçš„æ‰“åŒ…è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™æ¬¡å›å½’ Webpackï¼ŒåŸºäº Webpack 4.0 åšäº†ä»¥ä¸‹çš„æ–¹æ¡ˆä¼˜åŒ–ï¼š å‘å¸ƒæµç¨‹ä¼˜åŒ– æ—§ç‰ˆçš„å‘å¸ƒæµç¨‹ä¸­ï¼Œæ¯æ¬¡å‘å¸ƒéœ€è¦å¯¹æ”¹åŠ¨çš„æ–‡ä»¶è¿›è¡Œ diff æ£€æŸ¥ï¼Œé¿å…äº§ç”Ÿä¸ç¬¦åˆé¢„æœŸçš„è¯¯æ”¹åŠ¨ã€‚Webpack é»˜è®¤æ‰“åŒ…æœºåˆ¶çš„ç‰¹ç‚¹ï¼Œæ˜¯æ ¹æ®æ¨¡å—çš„æ‰“åŒ…é¡ºåºä¸ºæ¯ä¸€ä¸ªæ¨¡å—æä¾›ä¸€ä¸ªæŒ‰é¡ºåºç¼–å·çš„ IDï¼Œå¯¹æ–‡ä»¶çš„åŒ…è¿›è¡Œä¾èµ–ç®¡ç†ã€‚æ—§ç‰ˆé¦–é¡µçš„å…¥å£æ–‡ä»¶åŒ…å«ä¾èµ–åŒ…ç®¡ç†çš„æ‰§è¡Œç¯å¢ƒï¼Œå› æ­¤ä»»ä½•ä¸€ä¸ªåŒ…å¼•å…¥é¡ºåºå‘ç”Ÿå˜åŠ¨æ—¶ï¼Œå…¥å£æ–‡ä»¶éƒ½ä¼šå‘ç”Ÿå˜åŠ¨ã€‚ä»¥ä¸Šçš„æ‰“åŒ…æœºåˆ¶ä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶å‘ç”Ÿå¼•å…¥é¡ºåºå˜åŠ¨æ—¶ï¼Œå¯èƒ½ä¼šå½±å“åˆ°ç¼–è¯‘åçš„å‡ ä¸ªç”šè‡³åå‡ ä¸ªæ–‡ä»¶å‘ç”Ÿå˜åŠ¨çš„æƒ…å†µï¼Œè€Œè¿™äº›æ–‡ä»¶ä¸­çš„é€»è¾‘ä»£ç éƒ¨åˆ†å…¶å®å¹¶ä¸éœ€è¦æ›´æ–°ï¼Œè¿™å°±é™ä½äº† diff ä»£ç çš„å‡†ç¡®æ€§ï¼Œä½¿å¾—è¿™ä¸€ä¸­é—´æ£€æŸ¥æªæ–½å¤±å»äº†åŸæœ¬çš„æ„ä¹‰ã€‚é¦–é¡µç¼“å­˜æœºåˆ¶ä¸èµ„æºæ‡’åŠ è½½æœºåˆ¶ä½¿å¾—é™æ€èµ„æºåœ¨å‘å¸ƒæ—¶ï¼Œéœ€è¦å¯¹å‘ç”Ÿå˜åŠ¨çš„æ–‡ä»¶è¿›è¡Œ CDN ç¼“å­˜æ¸…é™¤çš„æ“ä½œï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œæ”¹åŠ¨æ–‡ä»¶è¶Šå¤šï¼Œéœ€è¦æ¸…é™¤çš„ç¼“å­˜èµ„æºé“¾æ¥å°±è¶Šå¤šï¼Œè€Œé“¾æ¥è¶Šå¤šï¼Œç”±äºç¼“å­˜æ¸…é™¤ä¸åŒæ­¥å¼•èµ·çš„èµ„æºå¼‚æ­¥åŠ è½½å‡ºé”™çš„æ¦‚ç‡å°±è¶Šé«˜ï¼Œæ¯æ¬¡ä¸Šçº¿å‘å¸ƒéƒ½å­˜åœ¨ä¸€å®šçš„é£é™©ã€‚ ä¸ºäº†å‡å°‘å‘å¸ƒé£é™©ï¼Œæ–°ç‰ˆé¦–é¡µçš„æ‰“åŒ…æœºåˆ¶æ”¹å˜äº† Webpack çš„æ‰“åŒ…é€»è¾‘ï¼Œé€šè¿‡è®¾ç½®ï¼Œæ¯ä¸ªæ¨¡å—ä¸å†é€šè¿‡é¡ºåºç¼–å·çš„ ID ç®¡ç†ä¾èµ–åŒ…ï¼Œè€Œæ˜¯é€šè¿‡æ–‡ä»¶ç›®å½•ç”Ÿæˆå“ˆå¸Œç¼–ç çš„ä¸“æœ‰ IDï¼Œå¹¶æŠŠä¾èµ–åŒ…çš„æ‰§è¡Œç¯å¢ƒä»å…¥å£æ–‡ä»¶ä¸­æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„èµ„æºè¯·æ±‚ï¼Œè¿™æ ·æ¯æ¬¡æ”¹åŠ¨æ–‡ä»¶æ—¶ï¼Œå¯ä»¥åªé’ˆå¯¹æ”¹åŠ¨çš„æ–‡ä»¶ diffï¼Œå‰”é™¤äº†å…¶ä»–éé¢„æœŸçš„ diff æƒ…å†µã€‚é€šè¿‡æ–°çš„æ„å»ºæ–¹æ¡ˆï¼Œä½¿ä»£ç æ”¹åŠ¨æ§åˆ¶åœ¨é¢„æœŸçš„èŒƒå›´å†…ï¼Œä¿è¯éƒ¨ç½²æµç¨‹çš„ç¨³å®šã€‚ é¡¹ç›®æ¶æ„ä¼˜åŒ–æ—§ç‰ˆé¡µé¢çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆä¸­ï¼ŒåŒ…å«äº†éƒ¨åˆ† js ç‰‡æ®µç›´å‡ºï¼Œè¿™äº›ä»£ç æ˜¯é¡¹ç›®æ‰€ä¾èµ–çš„åŸºå‡½æ•°ï¼Œéœ€è¦åœ¨æ ¸å¿ƒ js ä»£ç æ‰§è¡Œä¹‹å‰å¯åŠ¨ã€‚ä½†è¿™æ ·çš„æ–¹æ¡ˆä¹Ÿæœ‰ä¸€äº›ä¸å°½äººæ„çš„åœ°æ–¹ï¼š ç”±äºä»£ç éœ€è¦ç›´å‡ºäºé¡µé¢æ¨¡ç‰ˆä¸­ï¼Œè€ƒè™‘åˆ°å…¼å®¹æ€§ï¼Œè¿™äº›ä»£ç ä¸èƒ½ä½¿ç”¨ä¸€äº›é«˜çº§è¯­æ³•ï¼Œæ¯æ¬¡æ”¹åŠ¨éƒ½éœ€è¦ç¡®ä¿è‡ªå·±çš„ä»£ç æ²¡æœ‰å…¼å®¹é—®é¢˜ï¼Œå¯¼è‡´ç»´æŠ¤æˆæœ¬å·¨é«˜ã€‚åŒæ—¶ï¼Œé¦–é¡µé¡µé¢æ¨¡ç‰ˆç”±åå°è´Ÿè´£ç®¡ç†ï¼Œç›´å‡ºä»£ç çš„æ”¹åŠ¨éœ€ç»è¿‡åå°å‘å¸ƒï¼Œè¿­ä»£æˆæœ¬ç•¥é«˜ï¼Œé£é™©ä¹Ÿä¸å°ï¼› ç”±äºæ‰“åŒ…çš„é™åˆ¶ï¼Œæ ¸å¿ƒä»£ç ä¸æ¨¡æ¿ä»£ç å­˜åœ¨åŒä¸€å¥—å…¬ç”¨ä»£ç ï¼Œä»£ç å†—ä½™ä¸è¯´ï¼Œä¸€æ—¦è¿™éƒ¨åˆ†ä»£ç å‘ç”Ÿå˜åŠ¨è¿˜éœ€è¦åŒæ—¶ä¿®æ”¹ä¸å‘å¸ƒä¸¤éƒ¨åˆ†çš„ä»£ç ï¼Œä½¿å¾—ä»£ç çš„ç»´æŠ¤æˆæœ¬å¢é«˜ã€‚ é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œæ–°ç‰ˆä¸­æˆ‘ä»¬å°†è¿™äº›ä»£ç é‡æ–°æ”¾å…¥æ ¸å¿ƒä»£ç ï¼Œæ¨¡æ¿ä»£ç ä¸­ä¸å†æ‰¿è½½ä»»ä½•é€»è¾‘ä»£ç ï¼Œè¿­ä»£å‘ç‰ˆä¸å†æ¶‰åŠæ¨¡ç‰ˆå‘å¸ƒï¼Œåªéœ€è¿›è¡Œé™æ€èµ„æºçš„å‘å¸ƒå³å¯ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ç»Ÿä¸€ä½¿ç”¨ JS é«˜çº§è¯­æ³•ï¼Œå»é™¤äººå·¥ç»´æŠ¤å…¼å®¹è¯­æ³•ä»£ç çš„è¿‡ç¨‹ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡å¢å¼ºèµ„æºæ‰“åŒ…çš„å¯é¢„æµ‹æ€§ã€ä»¥åŠä¼˜åŒ–é¡¹ç›®èµ„æºæ¶æ„ä¸¤ä¸ªæ–¹é¢å¯¹èµ„æºçš„å‘å¸ƒæ–¹æ¡ˆè¿›è¡Œäº†ä¼˜åŒ–ã€‚ æ¥å…¥è‡ªåŠ¨åŒ–æµ‹è¯•ä¸€ä¸ªé¡µé¢å¼€å‘å®Œæˆåï¼Œåœ¨å¯¹å…¶è¿›è¡Œææµ‹ä¹‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œè‡ªæµ‹æ˜¯ä¸€ä¸ªå¿…ä¸å¯å°‘çš„ç¯èŠ‚ã€‚ä¸€æ–¹é¢ï¼Œä¿è¯é¡µé¢æ‰€å¼€å‘çš„åŠŸèƒ½èƒ½æ­£å¸¸è¿ä½œï¼›å¦ä¸€æ–¹é¢ï¼Œä¿è¯åœ¨å¯¹ä¸€ä¸ªåŠŸèƒ½è¿›è¡Œå¼€å‘æ—¶ï¼Œæ²¡æœ‰å½±å“åˆ°é¡µé¢å…¶ä»–åŒºåŸŸåŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè‡ªæµ‹éœ€è¦äººä¸ºæ‰‹åŠ¨åœ°è¿›è¡Œæµ‹è¯•ï¼Œä½†è¿™æ ·ä¼šæœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œç¬¬ä¸€ï¼Œéœ€è¦æµ‹è¯•çš„åŒºåŸŸæ•°é‡è¿‡äºå·¨å¤§ï¼Œç›¸ä¼¼çš„æµ‹è¯•æ“ä½œè¿‡äºé¢‘ç¹ï¼Œæµªè´¹äº†äººåŠ›ï¼Œä¹Ÿå½±å“äº†æµ‹è¯•çš„æ•ˆç‡ï¼›ç¬¬äºŒï¼Œäººä¸ºçš„è‡ªæµ‹ç”±äºæ²¡æœ‰ç»Ÿä¸€çš„è‡ªæµ‹è§„èŒƒï¼Œå› æ­¤åœ¨æµ‹è¯•æ—¶å¾ˆå®¹æ˜“æœ‰æ‰€ç–æ¼ï¼Œä»è€Œå¿½è§†äº†ä¸€äº›çœ‹ä¼¼å¾®å°ï¼Œå®åˆ™å½±å“å·¨å¤§çš„ bugï¼ŒèŠ±è´¹äº†å¤§é‡çš„æ—¶é—´ï¼Œå´å¾—ä¸åˆ°è‡ªæµ‹æ‰€éœ€è¦çš„æ•ˆæœã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬äº§ç”Ÿäº†å®æ–½è‡ªåŠ¨åŒ–æµ‹è¯•çš„æƒ³æ³•ã€‚ä»¥æ–°ç‰ˆé¦–é¡µä¸ºä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨ Nightwatch.jsï¼Œä¸ºæ–°ç‰ˆé¦–é¡µåˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼Œå¯¹æ–°ç‰ˆçš„é¦–é¡µçš„73é¡¹ç”¨ä¾‹è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚ ç»“æœæ˜¾ç¤ºï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œåœ¨ä¸åˆ°ä¸‰åˆ†é’Ÿçš„æ—¶é—´å†…ï¼Œå®Œæˆäº†å¯¹æ–°ç‰ˆé¦–é¡µ73é¡¹ç”¨ä¾‹çš„æµ‹è¯•ï¼Œè¿™ä¹Ÿæ„å‘³ç€ï¼Œè‹¥è¦é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ¥å¯¹ä»»ä¸€é¡µé¢è¿›è¡Œè‡ªæµ‹ï¼Œè‡ªæµ‹çš„æ—¶é—´éƒ½å¯æ§åˆ¶åœ¨äº”åˆ†é’Ÿä»¥å†…ï¼Œå¹¶ä¸”å‡†ç¡®æ€§æ›´é«˜ã€‚å°†è‡ªåŠ¨åŒ–æµ‹è¯•åº”ç”¨åœ¨å‘å¸ƒå‰ä»¥åŠä¸Šçº¿å5åˆ†é’Ÿä¹‹å†…ï¼ŒåŠæ—¶æ£€æŸ¥æµ‹è¯•ç”¨ä¾‹ï¼Œä¿è¯æ¯æ¬¡å‘ç‰ˆçš„å®‰å…¨ã€‚ å®Œå–„ç›‘æ§ä½“ç³»æ—§ç‰ˆé¡µé¢çš„å‰ç«¯ç›‘æ§ä½“ç³»è¦†ç›–äº†æµè§ˆå™¨ä¿¡æ¯ã€é¡µé¢åŠ è½½æµ‹é€Ÿã€æ¥¼å±‚éšè—æ–¹é¢ï¼Œä½†ä¿¡æ¯é€šçŸ¥è¾ƒä¸ºæ»åï¼Œä¸”ä»…è¦†ç›–äº†é¡µé¢ onLoad æ—¶é—´ï¼Œæ”¶åˆ°å‘Šè­¦ä¿¡æ¯æ—¶ï¼Œæ— æ³•åšåˆ°å¿«é€Ÿå®šä½é—®é¢˜ã€‚ å‚è€ƒäº¬ä¸œè´­ç‰©å°ç¨‹åºç›®å‰çš„ç›‘æ§æœºåˆ¶ï¼Œæ–°ç‰ˆé¦–é¡µé’ˆå¯¹ä»£ç æŠ¥é”™ã€æ¥å£å¯ç”¨æ€§å¢åŠ äº†ä¸ŠæŠ¥ç›‘æ§ã€‚ ä»£ç æŠ¥é”™ç›‘æ§ï¼šBadJSé€šè¿‡ BadJS æ¡†æ¶æ•è·é¡µé¢æŠ¥é”™ï¼Œå¹¶åˆ†æå¤„ç†æŠ¥é”™ä¿¡æ¯ä¸ŠæŠ¥è‡³äº¬ä¸œ BadJS æœåŠ¡ã€‚é€šè¿‡ä¸ŠæŠ¥æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æŠ¥é”™çš„è¯¦ç»†ä¿¡æ¯ä»¥åŠå‘ç”Ÿæ¬¡æ•°ã€‚é€šè¿‡åˆ†æä¸ŠæŠ¥æ•°æ®ï¼Œå¯ä»¥å‘ç°ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼ŒåŠæ—¶ä¿®å¤ï¼Œä¿è¯é¦–é¡µä»£ç çš„å¥å£®æ€§ã€‚åŒæ—¶æ ¹æ®ä¸ŠæŠ¥æ•°ï¼Œè¿˜å¯ä»¥é¢„ä¼°å‡ºä¸€ä¸ªé—®é¢˜æ‰€é€ æˆçš„å½±å“èŒƒå›´ï¼Œä¾¿äºé¢„ä¼°æŸå¤±ã€‚ ä¸šåŠ¡å¯ç”¨æ€§ç›‘æ§æœ¬æ¬¡æ”¹ç‰ˆï¼Œåœ¨å¯ç”¨ç‡ä¸ŠæŠ¥ç³»ç»Ÿä¸­ä¸ºé¦–é¡µè¡¥å……äº†ç‰¹å®šåˆ¤å®šè§„åˆ™ï¼ŒåŒ…å«è°ƒç”¨æ¬¡æ•°ã€å¯ç”¨ç‡ã€å’Œ TPï¼ˆæ€§èƒ½æŒ‡æ ‡ï¼‰ä¸‰ä¸ªç»´åº¦ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿˜å¯ä»¥å¯¹è¿™ä¸‰ä¸ªç»´åº¦è¿›è¡Œç¯æ¯”ï¼Œä»¥å‡å°‘è¯¯æŠ¥çš„å¯èƒ½æ€§ï¼Œè¿‘æœŸç³»ç»Ÿè¿˜ä¸Šçº¿äº†çº¢ç¯å‘Šè­¦-è¯­éŸ³é€šçŸ¥åŠŸèƒ½ã€‚ å¯ç”¨ç‡ä¸ŠæŠ¥ç³»ç»Ÿä¸€èˆ¬è¢«ç”¨æ¥ç›‘å¬æ¥å£å¯ç”¨æ€§ï¼Œä½†å¯¹äºé¦–é¡µæ¥è¯´ï¼Œé™¤äº†æ¥å£ï¼Œè¿˜éœ€å…³æ³¨æ¥¼å±‚éšè—çš„æƒ…å†µã€‚ç›®å‰çš„å…œåº•æ–¹æ¡ˆä¸­ï¼Œæ¯ä¸ªæ¥¼å±‚ä¸­çš„æ¨¡å—æ¥å£å…œåº•å…¨éƒ¨å¤±æ•ˆçš„æƒ…å†µä¸‹ï¼Œä¼šéšè—å½“å‰æ¥¼å±‚ã€‚æ¥¼å±‚ä¸€æ—¦å‘ç”Ÿéšè—ï¼Œåˆ™æ„å‘³ç€å‡ºç°äº†æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œéœ€å¿«é€Ÿå…³æ³¨å¹¶è§£å†³ã€‚å¯ç”¨ç‡ä¸ŠæŠ¥ç³»ç»Ÿå¯åšåˆ°è§¦å‘å‘Šè­¦è§„åˆ™æ—¶ï¼Œ1åˆ†é’Ÿä¹‹å†…å³æ¨é€é€šçŸ¥ï¼Œç²¾ç¡®åˆ°æ¥å£ï¼Œä¾¿äºåŠæ—¶å‘ç°é—®é¢˜ï¼ŒåŠæ—¶æ­¢æŸã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚ä½•è®¾ç½®ä¸€å¥—èƒ½å¤Ÿè¾ƒä¸ºç²¾ç¡®åæ˜ é—®é¢˜å‘ç”Ÿã€å‡å°‘å‡æŠ¥è­¦çš„é˜ˆå€¼å°¤ä¸ºé‡è¦ï¼Œæ¯•ç«Ÿç‹¼æ¥äº†å–Šå¤šäº†ï¼Œä¹Ÿå°±ç­‰äºæ²¡æœ‰ç›‘æ§ã€‚ æµ‹é€Ÿä¸ŠæŠ¥è¿™ä¸€éƒ¨åˆ†å»¶ç”¨äº†æ—§ç‰ˆçš„ Athena æµ‹é€Ÿä¸ŠæŠ¥æ–¹æ¡ˆï¼Œå¹¶å¯¹ä¸€äº›ä¸ä¸šåŠ¡æ•°æ®ä¸ŠæŠ¥é‡å¤çš„éƒ¨åˆ†åšäº†å‡æ³•ï¼ŒåŒæ—¶å¢åŠ äº†æ¥å£çš„æµ‹é€Ÿä¸ŠæŠ¥ï¼Œå®Œå–„æ•…éšœè¿½æº¯æ•°æ®ä½“ç³»ã€‚ ä¼˜åŒ–é¡µé¢åŠ è½½ä½“éªŒï¼šéª¨æ¶å±æ—§ç‰ˆé¡µé¢æ‡’åŠ è½½çš„å ä½æ–¹æ¡ˆé‡‡ç”¨äº†ç»Ÿä¸€åŒºåŸŸ loading åŠ¨ç”»çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼çš„ä¼˜åŠ¿åœ¨äºå¤ç”¨æˆæœ¬ä½ï¼Œé€‚é…æ€§å¼ºã€‚ä½†å¦‚æœé‡åˆ°è¾ƒå¤§é¢ç§¯çš„æ¨¡å—æˆ–æ˜¯æ¨¡å—è¾ƒä¸ºå¯†é›†çš„æƒ…å†µæ—¶ï¼ŒåŒºåŸŸ loading åŠ¨ç”»çš„ä½“éªŒæœ‰æ‰€ä¸‹é™â€”â€”â€”â€”è¦ä¹ˆæ˜¯ç©ºç™½åŒºåŸŸè¿‡å¤§ï¼Œè¦ä¹ˆæ˜¯ loading åŠ¨ç”»è¿‡äºå¯†é›†ï¼Œæ¨¡å—åŠ è½½è¿‡ç¨‹é€ æˆçš„è§†è§‰å·®å¼‚æ„ŸçŸ¥è¾ƒä¸ºæ˜æ˜¾ã€‚è€Œå¯¹äº PC é¦–é¡µæ¥è¯´ï¼Œç©ºç™½åŒºåŸŸè¿‡å¤§æ˜¯ä¸»è¦å­˜åœ¨çš„é—®é¢˜ã€‚ ä½ç½‘é€Ÿä¸‹æ—§ç‰ˆé¦–é¡µçš„ loading ä½“éªŒ è¿™æ¬¡æ”¹ç‰ˆï¼Œæˆ‘ä»¬å¼•å…¥äº†éª¨æ¶å±æ–¹æ¡ˆï¼Œæœ€ç»ˆç›®çš„æ˜¯ä»¥ç°è‰²è±†è…å—çš„å½¢å¼å°½é‡ç¼©å°çœŸå®æ¨¡å—ç»“æ„ä¸åŠ è½½å ä½ä¹‹é—´çš„è§†è§‰å·®å¼‚ã€‚æ‰§è¡Œèµ·æ¥å¯ä»¥æŒ‰ç…§è§†è§‰å·®å¼‚åˆ†ä¸ºä¸¤ç§å¯¹åº”å…³ç³»ï¼š å¼±å¯¹åº”å…³ç³»ï¼šåªå¯¹æ¨¡å—è¿›è¡Œæ ‡é¢˜ã€å­é¡¹ç­‰ä¸»è¦å†…å®¹è¿›è¡Œå—åŒ–å¤„ç†ï¼Œå¤ç”¨æ€§è¾ƒé«˜ï¼Œé€‚é…æ€§ä¸­ç­‰ï¼› å¼ºå¯¹åº”å…³ç³»ï¼šä»¥è§†è§‰æ•ˆæœä¸ºåŸºç¡€ï¼Œå¯¹å­é¡¹è¿›ä¸€æ­¥ä½œå‡ºå›¾ç‰‡ã€æ–‡æ¡ˆçš„å—åŒ–å¤„ç†ï¼Œé’ˆå¯¹å ä½é¢ç§¯è¾ƒå¤§ã€å†…å®¹æ›´ä¸ºå¤æ‚çš„å­é¡¹è¿›è¡Œæ›´ç»†åŒ–çš„å—åŒ–æ‹†åˆ†ï¼Œå¤ç”¨æ€§ä½ï¼Œé€‚é…æ€§é«˜ã€‚ è€ƒè™‘åˆ°é¦–é¡µçš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†å¼ºå¯¹åº”å…³ç³»çš„éª¨æ¶å±æ–¹æ¡ˆï¼Œå¹¶ä¸ºäº†å¯æ‰©å±•æ€§ï¼Œä½¿ç”¨çš„æ˜¯ä½¿ç”¨æ ·å¼æ¸²æŸ“çš„éª¨æ¶å±ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å›¾ç‰‡å ä½ã€‚é™¤äº†å¼€å‘æˆæœ¬çš„ä¸Šå‡ï¼Œé¡µé¢é¦–å±åŠ è½½ä»£ç é‡ä¹Ÿæœ‰æ‰€å¢åŠ ã€‚ é¡¹ç›®ç»“æ„ä½¿ç”¨éª¨æ¶å±æ‰€è¦è¾¾åˆ°çš„æ•ˆæœåŒ…å«ä»¥ä¸‹å‡ ç‚¹ï¼š æå‰å ä½ï¼Œåœ¨é¡µé¢çš„åŠ è½½ä¸­æ»šåŠ¨æ¡ä¸å‘ç”Ÿè¾ƒä¸ºæ˜æ˜¾çš„è·³åŠ¨ï¼› é¡µé¢å¿«é€Ÿæ»šåŠ¨æ—¶ä¹Ÿèƒ½çœ‹åˆ°éª¨æ¶å±æ ·å¼çš„å ä½ã€‚ ä¹Ÿå°±æ„å‘³ç€éª¨æ¶å±çš„å†…å®¹éœ€è¦ä¸é¡µé¢åšåŒæ­¥åŠ è½½å¤„ç†ï¼Œç»“åˆæ‡’åŠ è½½ç»„ä»¶ï¼Œéª¨æ¶å±ç»„ä»¶éœ€æå‰ä½œä¸º loading ç»“æ„ä¼ å…¥ï¼Œå¹¶ä¿è¯æ ·å¼åœ¨é¡µé¢æ¸²æŸ“çš„ç¬¬ä¸€æ—¶é—´è¿›è¡ŒåŠ è½½ï¼Œå¦åˆ™å°±å¤±å»äº†éª¨æ¶å±çš„æ„ä¹‰ã€‚ æ¯ä¸ªéœ€è¦éª¨æ¶å±æ ·å¼çš„ç»„ä»¶ï¼Œå•ç‹¬æ‹†åˆ†å‡ºä¸€ä¸ª placeholder ç»„ä»¶ã€‚ç»„ä»¶å†…çš„å ä½ç»“æ„åŒ…å«ä¸¤ç±»æ ·å¼â€”â€”é¢œè‰²ä¸å°ºå¯¸å®šä½ï¼ŒåŠ ä¸Šå®¹å™¨å¤–å±‚çš„åŠ¨ç”»æ•ˆæœæ ·å¼ã€‚é¢œè‰²æ ·å¼å…¨é¡µå…¬ç”¨ï¼Œå°ºå¯¸å®šä½æ ·å¼ä¸æ­£å¼ç»„ä»¶å…¬ç”¨ï¼š å°ºå¯¸å®šä½æ ·å¼ä¸æ­£å¼ç»„ä»¶å…¬ç”¨çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨å°†æ¥ç»„ä»¶æ ·å¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¿è¯éª¨æ¶å±ä¸æ­£å¼æ ·å¼çš„ç»Ÿä¸€ä¿®æ”¹ï¼Œé¿å…å‡ºç°æ ·å¼ä¿®æ”¹ä¸Šçš„é—æ¼ï¼Œä½†åŒæ—¶å¢åŠ äº†æ ·å¼çš„ç»´æŠ¤æˆæœ¬ã€‚åŒæ—¶æ ·å¼ç¼–å†™ä¸æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ä¹Ÿéœ€è¦å¼€å‘è€…æ³¨æ„å…¼å®¹éª¨æ¶å±çš„æ ·å¼ï¼Œä¾‹å¦‚éœ€è¦å ä½è±†è…å—çš„å®¹å™¨é—´è· paddingã€margin çš„é€‰æ‹©éƒ½å¾ˆé‡è¦ã€‚å› æ­¤è¿™æ¬¡é¦–é¡µçš„éª¨æ¶å±å°è¯•å¹¶ä¸é€‚åˆå¿«é€Ÿå¤ç”¨è‡³å…¶ä»–é¡¹ç›®ã€‚ æ–°ç‰ˆé¦–é¡µéª¨æ¶å± loading ä½“éªŒ ä¼˜åŒ–ä¿¡æ¯æ— éšœç¢ä½“éªŒäº’è”ç½‘ä¿¡æ¯æ— éšœç¢ï¼Œå³é’ˆå¯¹è§†åŠ›éšœç¢äººå£«æ‰€æä¾›çš„è¾…åŠ©ã€‚ç³»ç»Ÿçº§åˆ«çš„è¾…åŠ©ä¸»è¦ä¾èµ–è¯»å±å·¥å…·ï¼Œè¯»å±å·¥å…·å¯ä»¥è§£å†³ç½‘é¡µç«¯ä¿¡æ¯æ— éšœç¢ 60%çš„é˜»ç¢ï¼Œå‰©ä½™çš„ 40%éœ€è¦åœ¨ç½‘é¡µå¼€å‘çš„è¿‡ç¨‹ä¸­ç”±å¼€å‘è€…è¿›è¡Œä½“éªŒä¼˜åŒ–ã€‚ æ²¡æœ‰åšä»»ä½•ä¿¡æ¯æ— éšœç¢å¤„ç†çš„ç½‘é¡µï¼Œä½¿ç”¨è¯»å±å·¥å…·è®¿é—®æ—¶ä¸€èˆ¬å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š å¤šä½™æ— ç”¨ä¿¡æ¯çš„æ’­æŠ¥ï¼Œä¾‹å¦‚ï¼šè·³è½¬é“¾æ¥ã€å›¾ç‰‡åç§°ï¼› å¼¹å‡ºæµ®å±‚æ— æ³•è®¿é—®ï¼› æ‡’åŠ è½½å†…å®¹ç›´æ¥è·³è¿‡ï¼› ä¸ºäº†é€ ç¦å›½å†…ä¸€ç™¾ä¸€åäººä¸­çš„ä¸€ä¸ªè§†éšœäººå£«ï¼ˆæ•°æ®æ¥è‡ªè¿™é‡Œï¼‰ï¼Œæœ¬æ¬¡æ”¹ç‰ˆï¼Œæˆ‘ä»¬å†³å®šåœ¨ PC é¦–é¡µå¼€å¯äº¬ä¸œå•†åŸæ¡Œé¢ç«¯é¦–ä¸ªä¿¡æ¯æ— éšœç¢å®è·µã€‚ æ¡Œé¢ç«¯è§†éšœç”¨æˆ·çš„æ“ä½œä¸»è¦é€šè¿‡é”®ç›˜è¿›è¡Œã€‚é’ˆå¯¹åˆšæ‰æå‡ºçš„å‡ ä¸ªé—®é¢˜ï¼ŒPC é¦–é¡µåˆæ­¥çš„æ— éšœç¢ä½“éªŒä¼˜åŒ–æ–¹æ¡ˆåˆ†ä¸ºå‡ ä¸ªé˜¶æ®µã€‚ ç¬¬ä¸€é˜¶æ®µï¼Œè¯­ä¹‰åŒ–ä¸€åˆ‡ tab å¯åŠçš„å…ƒç´ â€”â€”åŒ…å«é¡µé¢å¤–è·³è½¬é“¾æ¥çš„ a æ ‡ç­¾ç»Ÿä¸€æ·»åŠ  aria-label å±æ€§ï¼Œä»¥ä¾¿è¯»å±è½¯ä»¶èƒ½å¤Ÿç®€åŒ–è¯»å–å…ƒç´ ä¿¡æ¯ï¼› ç¬¬äºŒé˜¶æ®µï¼Œä¿è¯é¡µé¢ä¸»è¦æ¨¡å—çš„è®¿é—®â€”â€”æ‡’åŠ è½½å†…å®¹å ä½å®¹å™¨å°† tab-index è®¾ç½®ä¸ºå¤§äº 0 çš„å€¼ï¼Œä½¿å¾— tab é”®èƒ½å¤Ÿéå†åˆ°ï¼Œä»¥ä¾¿è§¦å‘é¡µé¢æ‡’åŠ è½½ï¼Œé¿å… tab ç›´æ¥è·³è¿‡ï¼› ç¬¬ä¸‰é˜¶æ®µï¼Œæ‰©å±•å¸¦å¼¹å‡ºæµ®å±‚ç­‰å…ƒç´ çš„æ“ä½œâ€”â€”é’ˆå¯¹æ— éšœç¢å¢åŠ å¼¹å‡ºæµ®å±‚äº¤äº’é€»è¾‘ï¼Œå…¥å£å¢åŠ  aria-haspopup å±æ€§ï¼Œå‘Šè¯‰è¯»å±è½¯ä»¶è¿™é‡Œæ˜¯å¼¹å‡ºæµ®å±‚çš„å…¥å£ï¼Œå°† tab-index è®¾ç½®ä¸ºå¤§äº 0 çš„æ•°å€¼ä½¿å¾— tab æ“ä½œå¯èšç„¦åˆ°ï¼Œæµ®å±‚å¼¹å‡ºåç„¦ç‚¹è‡ªåŠ¨èšç„¦è‡³æµ®å±‚ï¼› ç¬¬å››é˜¶æ®µï¼Œä¸ºè§†éšœç”¨æˆ·é¢å¤–å¢åŠ å¿«æ·è·³è½¬â€”â€”å‚è€ƒ Google æœç´¢ç»“æœé¡µï¼Œå¯åœ¨é¡µé¢çš„é¡¶éƒ¨ï¼Œå¢åŠ ä¸€äº›éšè—çš„å¿«æ·è·³è½¬ã€‚PC é¦–é¡µæœ¬æ¬¡å¯¹æœç´¢æ¡†ä»¥åŠåº•éƒ¨çš„â€œä¸ºä½ æ¨èâ€ä½ç½®å¢åŠ äº†éšè—è·³è½¬é“¾æ¥ï¼Œåªæœ‰ä½¿ç”¨é”®ç›˜æ“ä½œçš„ç”¨æˆ·èƒ½å¤Ÿå®šä½åˆ°ã€‚ å¯¹äºå•†åŸé¡µé¢æ¥è¯´ï¼Œç¬¬ä¸€é˜¶æ®µèƒ½æ»¡è¶³åŸºæœ¬çš„å†…å®¹è®¿é—®ï¼Œè€Œå¦‚æœèƒ½åšåˆ°ç¬¬å››é˜¶æ®µï¼Œæ‰èƒ½ç®—ä¸€ä¸ªå®Œæ•´çš„ä¿¡æ¯æ— éšœç¢ç½‘ç«™ã€‚å•†åŸä¸šåŠ¡ä¸­ï¼Œæ— éšœç¢ä½“éªŒä¸€ç›´ç¼ºä¹ç›¸åº”çš„è§„èŒƒä¸æµ‹è¯•æµç¨‹ï¼Œå› æ­¤é€šè¿‡æœ¬æ¬¡ PC é¦–é¡µçš„æ”¹ç‰ˆå®è·µï¼Œè¾“å‡ºäº†ä¸€ä»½é’ˆå¯¹å•†åŸé¢‘é“é¡µçš„ä¿¡æ¯æ— éšœç¢å¼€å‘è§„èŒƒï¼Œå†…å®¹åŒ…å«ï¼š è®¿é—®è·¯å¾„è®¾è®¡è§„èŒƒ è¯­ä¹‰åŒ–è§„èŒƒ è¯»å±æµ‹è¯•è§„èŒƒ æœªæ¥å°†å€Ÿç”±è¿™ä»½è§„èŒƒï¼Œé™†ç»­å®ç°å•†åŸå…¶ä»–ä¸šåŠ¡çš„æ— éšœç¢ä½“éªŒä¼˜åŒ–ã€‚ ç»¼ä¸Šï¼Œæœ¬æ¬¡æ”¹ç‰ˆå¯¹äºå¼€å‘è€…æ¥è¯´æœ€å¤§çš„å˜åŒ–ï¼Œå°±æ˜¯æœ¬åœ°å¼€å‘ä½“éªŒæ›´åŠ èˆ’æœã€å‘å¸ƒé£é™©æœ‰æ‰€é™ä½ã€æ•…éšœè¿½æº¯æ›´åŠ å®Œå–„ï¼Œè€Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œé¡µé¢åŠ è½½è·³åŠ¨æ„Ÿå¤§å¤§å‡å°ï¼Œè§†éšœç”¨æˆ·çš„ä½“éªŒç»ˆäºå¾—ä»¥ç…§é¡¾åˆ°ã€‚ä½œä¸ºå•†åŸæ¡Œé¢ç«¯çš„å…¥å£ä¸é—¨é¢ï¼Œé¦–é¡µçš„æ”¹è¿›ä¸€å®šä¸æ­¢äºæ­¤ï¼Œå¸Œæœ›æ¯ä¸€æ¬¡çš„æ”¹ç‰ˆéƒ½èƒ½æœ‰ä¸€ä¸çš„ä¼˜åŒ–ï¼Œä½¿å¾—é¦–é¡µè¿™ä¸ªé¡¹ç›®è¶‹è¿‘å®Œç¾ã€‚","pubDate":"Mon, 26 Aug 2019 09:00:00 GMT","guid":"https://aotu.io/notes/2019/08/26/jdindex_2019/","category":"PC"},{"title":"serverless","link":"https://aotu.io/notes/2019/08/05/serverless/","description":"Serverless æ¶æ„å³â€œæ— æœåŠ¡å™¨â€æ¶æ„ï¼Œå®ƒæ˜¯ä¸€ç§å…¨æ–°çš„æ¶æ„æ–¹å¼ï¼Œæ˜¯äº‘è®¡ç®—æ—¶ä»£ä¸€ç§é©å‘½æ€§çš„æ¶æ„æ¨¡å¼ã€‚ä¸äº‘è®¡ç®—ã€å®¹å™¨å’Œäººå·¥æ™ºèƒ½ä¸€æ ·ï¼ŒServerless æ˜¯è¿™ä¸¤å¹´ITè¡Œä¸šçš„ä¸€ä¸ªçƒ­é—¨è¯æ±‡ï¼Œå®ƒåœ¨å„ç§æŠ€æœ¯æ–‡ç« å’Œè®ºå›ä¸Šéƒ½æœ‰å¾ˆé«˜çš„æ›å…‰åº¦ã€‚ ç›®å‰è¡Œä¸šå¯èƒ½æ›´å¤šå¤„åœ¨å®¹å™¨ Docker+Kubernetes, åˆ©ç”¨ IaaSã€PaaSå’ŒSaaS æ¥å¿«é€Ÿæ­å»ºéƒ¨ç½²åº”ç”¨ ä»€ä¹ˆæ˜¯ServerlessServerless åœˆå†…ä¿—ç§°ä¸ºâ€œæ— æœåŠ¡å™¨æ¶æ„â€ï¼ŒServerless ä¸æ˜¯å…·ä½“çš„ä¸€ä¸ªç¼–ç¨‹æ¡†æ¶ã€ç±»åº“æˆ–è€…å·¥å…·ã€‚ç®€å•æ¥è¯´ï¼ŒServerless æ˜¯ä¸€ç§è½¯ä»¶ç³»ç»Ÿæ¶æ„æ€æƒ³å’Œæ–¹æ³•ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ç”¨æˆ·æ— é¡»å…³æ³¨æ”¯æ’‘åº”ç”¨æœåŠ¡è¿è¡Œçš„åº•å±‚ä¸»æœºã€‚è¿™ç§æ¶æ„çš„æ€æƒ³å’Œæ–¹æ³•å°†å¯¹æœªæ¥è½¯ä»¶åº”ç”¨çš„è®¾è®¡ã€å¼€å‘å’Œè¿è¥äº§ç”Ÿæ·±è¿œçš„å½±å“ã€‚ æ‰€è°“â€œæ— æœåŠ¡å™¨â€ï¼Œå¹¶ä¸æ˜¯è¯´åŸºäº Serverless æ¶æ„çš„è½¯ä»¶åº”ç”¨ä¸éœ€è¦æœåŠ¡å™¨å°±å¯ä»¥è¿è¡Œï¼Œå…¶æŒ‡çš„æ˜¯ç”¨æˆ·æ— é¡»å…³å¿ƒè½¯ä»¶åº”ç”¨è¿è¡Œæ¶‰åŠçš„åº•å±‚æœåŠ¡å™¨çš„çŠ¶æ€ã€èµ„æºï¼ˆæ¯”å¦‚ CPUã€å†…å­˜ã€ç£ç›˜åŠç½‘ç»œï¼‰åŠæ•°é‡ã€‚è½¯ä»¶åº”ç”¨æ­£å¸¸è¿è¡Œæ‰€éœ€è¦çš„è®¡ç®—èµ„æºç”±åº•å±‚çš„äº‘è®¡ç®—å¹³å°åŠ¨æ€æä¾›ã€‚ Serverlessçš„æŠ€æœ¯å®ç°Serverless çš„æ ¸å¿ƒæ€æƒ³æ˜¯è®©ä½œä¸ºè®¡ç®—èµ„æºçš„æœåŠ¡å™¨ä¸å†æˆä¸ºç”¨æˆ·æ‰€å…³æ³¨çš„ä¸€ç§èµ„æºã€‚å…¶ç›®çš„æ˜¯æé«˜åº”ç”¨äº¤ä»˜çš„æ•ˆç‡ï¼Œé™ä½åº”ç”¨è¿è¥çš„å·¥ä½œé‡å’Œæˆæœ¬ã€‚ä»¥ Serverless çš„æ€æƒ³ä½œä¸ºåŸºç¡€å®ç°çš„å„ç§æ¡†æ¶ã€å·¥å…·åŠå¹³å°ï¼Œæ˜¯å„ç§ Serverless çš„å®ç°ï¼ˆImplementationï¼‰ã€‚Serverlessä¸æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·æˆ–æ¡†æ¶ã€‚ç”¨æˆ·ä¸å¯èƒ½ç®€å•åœ°é€šè¿‡å®æ–½æŸä¸ªäº§å“æˆ–å·¥å…·å°±èƒ½å®ç° Serverless çš„è½åœ°ã€‚ä½†æ˜¯ï¼Œè¦å®ç° Serverless æ¶æ„çš„è½åœ°ï¼Œéœ€è¦ä¸€äº›å®å®åœ¨åœ¨çš„å·¥å…·å’Œæ¡†æ¶ä½œä¸ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æ’‘å’ŒåŸºç¡€ã€‚ éšç€ Serverless çš„æ—¥ç›Šæµè¡Œï¼Œè¿™å‡ å¹´ä¸šç•Œå·²ç»å‡ºç°äº†å¤šç§å¹³å°å’Œå·¥å…·å¸®åŠ©ç”¨æˆ·è¿›è¡Œ Serverless æ¶æ„çš„è½¬å‹å’Œè½åœ°ã€‚ç›®å‰å¸‚åœºä¸Šæ¯”è¾ƒæµè¡Œçš„ Serverless å·¥å…·ã€æ¡†æ¶å’Œå¹³å°æœ‰ï¼š AWS Lambdaï¼Œæœ€æ—©è¢«å¤§ä¼—æ‰€è®¤å¯çš„ Serverless å®ç°ã€‚ Azure Functionsï¼Œæ¥è‡ªå¾®è½¯å…¬æœ‰äº‘çš„ Serverless å®ç°ã€‚ OpenWhiskï¼ŒApache ç¤¾åŒºçš„å¼€æº Serverless æ¡†æ¶ã€‚ Kubelessï¼ŒåŸºäº Kubernetes æ¶æ„å®ç°çš„å¼€æº Serverless æ¡†æ¶ã€‚ Fissionï¼ŒPlatform9 æ¨å‡ºçš„å¼€æº Serverless æ¡†æ¶ã€‚ OpenFaaSï¼Œä»¥å®¹å™¨æŠ€æœ¯ä¸ºæ ¸å¿ƒçš„å¼€æº Serverless æ¡†æ¶ã€‚ Fnï¼Œæ¥è‡ª Oracle çš„å¼€æº Serverless æ¡†æ¶ï¼Œç”±åŸ Iron Functions å›¢é˜Ÿå¼€å‘ã€‚ åˆ—ä¸¾çš„ Serverless å®ç°æœ‰çš„æ˜¯å…¬æœ‰äº‘çš„æœåŠ¡ï¼Œæœ‰çš„åˆ™æ˜¯æ¡†æ¶å·¥å…·ï¼Œå¯ä»¥è¢«éƒ¨ç½²åœ¨ç§æœ‰æ•°æ®ä¸­å¿ƒçš„ç§æœ‰äº‘ä¸­ï¼ˆç§æœ‰äº‘ Serverless æ¡†æ¶ OpenWhiskã€Fission åŠ OpenFaaSï¼‰ã€‚æ¯ä¸ª Serverless æœåŠ¡æˆ–æ¡†æ¶çš„å®ç°éƒ½ä¸å°½ç›¸åŒï¼Œéƒ½æœ‰å„è‡ªçš„ç‰¹ç‚¹ã€‚ FaaSä¸BaaSITæ˜¯ä¸€ä¸ªæ°¸è¿œéƒ½ä¸æ¶ˆåœçš„è¡Œä¸šï¼Œåœ¨è¿™ä¸ªè¡Œä¸šé‡Œä¸æ–­æœ‰å„ç§å„æ ·æ–°çš„åè¯å’ŒæŠ€æœ¯è¯ç”Ÿï¼Œäº‘è®¡ç®—ï¼ˆCloud Computingï¼‰çš„å‡ºç°æ˜¯21ä¸–çºªITä¸šç•Œæœ€é‡å¤§çš„ä¸€æ¬¡å˜é©ã€‚äº‘è®¡ç®—çš„å‘å±•ä»åŸºç¡€æ¶æ„å³æœåŠ¡ï¼ˆInfrastructure as a Serviceï¼Œ IaaSï¼‰ï¼Œå¹³å°å³æœåŠ¡ï¼ˆPlatform as a Serviceï¼ŒPaaSï¼‰ï¼Œè½¯ä»¶å³æœåŠ¡ï¼ˆSoftware as a Serviceï¼ŒSaaSï¼‰ï¼Œæ…¢æ…¢å¼€å§‹æ¼”å˜åˆ°å‡½æ•°å³æœåŠ¡ï¼ˆFunction as a Serviceï¼ŒFaaSï¼‰ä»¥åŠåå°å³æœåŠ¡ï¼ˆBackend as a Serviceï¼ŒBaaSï¼‰ï¼ŒServerless æ— æœåŠ¡åŒ–ã€‚ ç›®å‰ä¸šç•Œçš„å„ç±» Serverless å®ç°æŒ‰åŠŸèƒ½è€Œè¨€ï¼Œä¸»è¦ä¸ºåº”ç”¨æœåŠ¡æä¾›äº†ä¸¤ä¸ªæ–¹é¢çš„æ”¯æŒï¼šå‡½æ•°å³æœåŠ¡ï¼ˆFunction as a Serviceï¼ŒFaaSï¼‰ä»¥åŠåå°å³æœåŠ¡ï¼ˆBackend as a Serviceï¼ŒBaaSï¼‰ã€‚ 1.FaaSFaaS æä¾›äº†ä¸€ä¸ªè®¡ç®—å¹³å°ï¼Œåœ¨è¿™ä¸ªå¹³å°ä¸Šï¼Œåº”ç”¨ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°çš„å½¢å¼å¼€å‘ã€è¿è¡Œå’Œç®¡ç†ã€‚FaaS å¹³å°æä¾›äº†å‡½æ•°å¼åº”ç”¨çš„è¿è¡Œç¯å¢ƒï¼Œä¸€èˆ¬æ”¯æŒå¤šç§ä¸»æµçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Javaã€PHP åŠ Python ç­‰ã€‚FaaS å¯ä»¥æ ¹æ®å®é™…çš„è®¿é—®é‡è¿›è¡Œåº”ç”¨çš„è‡ªåŠ¨åŒ–åŠ¨æ€åŠ è½½å’Œèµ„æºçš„è‡ªåŠ¨åŒ–åŠ¨æ€åˆ†é…ã€‚å¤§å¤šæ•° FaaS å¹³å°åŸºäºäº‹ä»¶é©±åŠ¨ï¼ˆEvent Drivenï¼‰çš„æ€æƒ³ï¼Œå¯ä»¥æ ¹æ®é¢„å®šä¹‰çš„äº‹ä»¶è§¦å‘æŒ‡å®šçš„å‡½æ•°åº”ç”¨é€»è¾‘ã€‚ ç›®å‰ä¸šç•Œ FaaS å¹³å°éå¸¸æˆåŠŸçš„ä¸€ä¸ªä»£è¡¨å°±æ˜¯AWS Lambdaå¹³å°ã€‚AWS Lambda æ˜¯ AWS å…¬æœ‰äº‘æœåŠ¡çš„å‡½æ•°å¼è®¡ç®—å¹³å°ã€‚é€šè¿‡ AWS Lambdaï¼ŒAWS ç”¨æˆ·å¯ä»¥å¿«é€Ÿåœ°åœ¨ AWS å…¬æœ‰äº‘ä¸Šæ„å»ºåŸºäºå‡½æ•°çš„åº”ç”¨æœåŠ¡ã€‚ 2.BaaSä¸ºäº†å®ç°åº”ç”¨åå°æœåŠ¡çš„ Serverless åŒ–ï¼ŒBaaSï¼ˆåå°å³æœåŠ¡ï¼‰ä¹Ÿåº”è¯¥è¢«çº³å…¥ä¸€ä¸ªå®Œæ•´çš„ Serverless å®ç°çš„èŒƒç•´å†…ã€‚é€šè¿‡ BaaS å¹³å°å°†åº”ç”¨æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—åŠå­˜å‚¨ç­‰æœåŠ¡åŒ–å¹¶å‘å¸ƒå‡ºæ¥ï¼Œç”¨æˆ·é€šè¿‡å‘ BaaS å¹³å°ç”³è¯·æ‰€éœ€è¦çš„æœåŠ¡è¿›è¡Œæ¶ˆè´¹ï¼Œè€Œä¸éœ€è¦å…³å¿ƒè¿™äº›æœåŠ¡çš„å…·ä½“è¿ç»´ã€‚ BaaS æ¶µç›–çš„èŒƒå›´å¾ˆå¹¿æ³›ï¼ŒåŒ…å«ä»»ä½•åº”ç”¨æ‰€ä¾èµ–çš„æœåŠ¡ã€‚ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ä¾‹å­æ˜¯æ•°æ®åº“å³æœåŠ¡ï¼ˆDatabase as a Serviceï¼ŒDBaaSï¼‰ã€‚è®¸å¤šåº”ç”¨éƒ½æœ‰å­˜å‚¨æ•°æ®çš„éœ€æ±‚ï¼Œå¤§éƒ¨åˆ†åº”ç”¨ä¼šå°†æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ä¼ ç»Ÿæƒ…å†µä¸‹ï¼Œæ•°æ®åº“éƒ½æ˜¯è¿è¡Œåœ¨æ•°æ®ä¸­å¿ƒé‡Œï¼Œç”±ç”¨æˆ·è¿ç»´å›¢é˜Ÿè´Ÿè´£è¿ç»´ã€‚åœ¨DBaaSçš„åœºæ™¯ä¸‹ï¼Œç”¨æˆ·å‘ DBaaS å¹³å°ç”³è¯·æ•°æ®åº“èµ„æºï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ•°æ®åº“çš„å®‰è£…éƒ¨ç½²åŠè¿ç»´ã€‚ Serverlessçš„æŠ€æœ¯ç‰¹ç‚¹ä¸ºäº†å®ç°è§£è€¦åº”ç”¨å’ŒæœåŠ¡å™¨èµ„æºï¼Œå®ç°æœåŠ¡å™¨èµ„æºå¯¹ç”¨æˆ·é€æ˜ï¼Œä¸ä¼ ç»Ÿæ¶æ„ç›¸æ¯”ï¼ŒServerless æ¶æ„åœ¨æŠ€æœ¯ä¸Šæœ‰è®¸å¤šä¸åŒçš„ç‰¹ç‚¹ã€‚ 1.æŒ‰éœ€åŠ è½½ åœ¨ Serverless æ¶æ„ä¸‹ï¼Œåº”ç”¨çš„åŠ è½½ï¼ˆloadï¼‰å’Œå¸è½½ï¼ˆunloadï¼‰ç”± Serverless äº‘è®¡ç®—å¹³å°æ§åˆ¶ã€‚è¿™æ„å‘³ç€åº”ç”¨ä¸æ€»æ˜¯ä¸€ç›´åœ¨çº¿çš„ã€‚åªæœ‰å½“æœ‰è¯·æ±‚åˆ°è¾¾æˆ–è€…æœ‰äº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šè¢«éƒ¨ç½²å’Œå¯åŠ¨ã€‚å½“åº”ç”¨ç©ºé—²è‡³ä¸€å®šæ—¶é•¿æ—¶ï¼Œåº”ç”¨ä¼šåˆ°è¾¾æˆ–è€…æœ‰äº‹ä»¶å‘ç”Ÿæ—¶æ‰ä¼šè¢«éƒ¨ç½²å’Œå¯åŠ¨ã€‚å½“åº”ç”¨ç©ºé—²è‡³ä¸€å®šæ—¶é•¿æ—¶ï¼Œåº”ç”¨ä¼šè¢«è‡ªåŠ¨åœæ­¢å’Œå¸è½½ã€‚å› æ­¤åº”ç”¨å¹¶ä¸ä¼šæŒç»­åœ¨çº¿ï¼Œä¸ä¼šæŒç»­å ç”¨è®¡ç®—èµ„æºã€‚ 2.äº‹ä»¶é©±åŠ¨ Serverless æ¶æ„çš„åº”ç”¨å¹¶ä¸æ€»æ˜¯ä¸€ç›´åœ¨çº¿ï¼Œè€Œæ˜¯æŒ‰éœ€åŠ è½½æ‰§è¡Œã€‚åº”ç”¨çš„åŠ è½½å’Œæ‰§è¡Œç”±äº‹ä»¶é©±åŠ¨ï¼Œæ¯”å¦‚HTTPè¯·æ±‚åˆ°è¾¾ã€æ¶ˆæ¯é˜Ÿåˆ—æ¥æ”¶åˆ°æ–°çš„ä¿¡æ¯æˆ–å­˜å‚¨æœåŠ¡çš„æ–‡ä»¶è¢«ä¿®æ”¹äº†ç­‰ã€‚é€šè¿‡å°†ä¸åŒäº‹ä»¶æ¥æºï¼ˆEvent Sourceï¼‰çš„äº‹ä»¶ï¼ˆEventï¼‰ä¸ç‰¹å®šçš„å‡½æ•°è¿›è¡Œå…³è”ï¼Œå®ç°å¯¹ä¸åŒäº‹ä»¶é‡‡å–ä¸åŒçš„ååº”åŠ¨ä½œï¼Œè¿™æ ·å¯ä»¥éå¸¸å®¹æ˜“åœ°å®ç°äº‹ä»¶é©±åŠ¨ï¼ˆEvent Drivenï¼‰æ¶æ„ã€‚ 3.çŠ¶æ€éæœ¬åœ°æŒä¹…åŒ– äº‘è®¡ç®—å¹³å°è‡ªåŠ¨æ§åˆ¶åº”ç”¨å®ä¾‹çš„åŠ è½½å’Œå¸è½½ï¼Œä¸”åº”ç”¨å’ŒæœåŠ¡å™¨å®Œå…¨è§£è€¦ï¼Œåº”ç”¨ä¸å†ä¸ç‰¹å®šçš„æœåŠ¡å™¨å…³è”ã€‚å› æ­¤åº”ç”¨çš„çŠ¶æ€ä¸èƒ½ï¼Œä¹Ÿä¸ä¼šä¿å­˜åœ¨å…¶è¿è¡Œçš„æœåŠ¡å™¨ä¹‹ä¸Šï¼Œä¸èƒ½åšåˆ°ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„çŠ¶æ€æœ¬åœ°æŒä¹…åŒ–ã€‚ 4.éä¼šè¯ä¿æŒ åº”ç”¨ä¸å†ä¸ç‰¹å®šçš„æœåŠ¡å™¨å…³è”ã€‚æ¯æ¬¡å¤„ç†è¯·æ±‚çš„åº”ç”¨å®ä¾‹å¯èƒ½æ˜¯ç›¸åŒæœåŠ¡å™¨ä¸Šçš„åº”ç”¨å®ä¾‹ï¼Œä¹Ÿå¯èƒ½æ˜¯æ–°ç”Ÿæˆçš„æœåŠ¡å™¨ä¸Šçš„åº”ç”¨å®ä¾‹ã€‚å› æ­¤ï¼Œç”¨æˆ·æ— æ³•ä¿è¯åŒä¸€å®¢æˆ·ç«¯çš„ä¸¤æ¬¡è¯·æ±‚ç”±åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„åŒä¸€ä¸ªåº”ç”¨å®ä¾‹æ¥å¤„ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— æ³•åšåˆ°ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä¼šè¯ä¿æŒï¼ˆSticky Sessionï¼‰ã€‚å› æ­¤ï¼ŒServerlessæ¶æ„æ›´é€‚åˆæ— çŠ¶æ€çš„åº”ç”¨ã€‚ 5.è‡ªåŠ¨å¼¹æ€§ä¼¸ç¼© Serverless åº”ç”¨åŸç”Ÿå¯ä»¥æ”¯æŒé«˜å¯ç”¨ï¼Œå¯ä»¥åº”å¯¹çªå‘çš„é«˜è®¿é—®é‡ã€‚åº”ç”¨å®ä¾‹æ•°é‡æ ¹æ®å®é™…çš„è®¿é—®é‡ç”±äº‘è®¡ç®—å¹³å°è¿›è¡Œå¼¹æ€§çš„è‡ªåŠ¨æ‰©å±•æˆ–æ”¶ç¼©ï¼Œäº‘è®¡ç®—å¹³å°åŠ¨æ€åœ°ä¿è¯æœ‰è¶³å¤Ÿçš„è®¡ç®—èµ„æºå’Œè¶³å¤Ÿæ•°é‡çš„åº”ç”¨å®ä¾‹å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚ 6.åº”ç”¨å‡½æ•°åŒ– æ¯ä¸€ä¸ªè°ƒç”¨å®Œæˆä¸€ä¸ªä¸šåŠ¡åŠ¨ä½œï¼Œåº”ç”¨ä¼šè¢«åˆ†è§£æˆå¤šä¸ªç»†é¢—ç²’åº¦çš„æ“ä½œã€‚ç”±äºçŠ¶æ€æ— æ³•æœ¬åœ°æŒä¹…åŒ–ï¼Œè¿™äº›ç»†é¢—ç²’åº¦çš„æ“ä½œæ˜¯æ— çŠ¶æ€çš„ï¼Œç±»ä¼¼äºä¼ ç»Ÿç¼–ç¨‹é‡Œæ— çŠ¶æ€çš„å‡½æ•°ã€‚Serverless æ¶æ„ä¸‹çš„åº”ç”¨ä¼šè¢«å‡½æ•°åŒ–ï¼Œä½†ä¸èƒ½è¯´ Serverless å°±æ˜¯ Function as a Serviceï¼ˆFaaSï¼‰ã€‚Serverless æ¶µç›–äº† FaaS çš„ä¸€äº›ç‰¹æ€§ï¼Œå¯ä»¥è¯´ FaaS æ˜¯ Serverless æ¶æ„å®ç°çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µã€‚ Serverlessçš„åº”ç”¨åœºæ™¯é€šè¿‡å°† Serverless çš„ç†å¿µä¸å½“å‰ Serverless å®ç°çš„æŠ€æœ¯ç‰¹ç‚¹ç›¸ç»“åˆï¼ŒServerless æ¶æ„å¯ä»¥é€‚ç”¨äºå„ç§ä¸šåŠ¡åœºæ™¯ã€‚ 1.Webåº”ç”¨ Serverless æ¶æ„å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒå„ç±»é™æ€å’ŒåŠ¨æ€Webåº”ç”¨ã€‚å¦‚ RESTful API çš„å„ç±»è¯·æ±‚åŠ¨ä½œï¼ˆGETã€POSTã€PUTåŠDELETEç­‰ï¼‰å¯ä»¥å¾ˆå¥½åœ°æ˜ å°„æˆ FaaS çš„ä¸€ä¸ªä¸ªå‡½æ•°ï¼ŒåŠŸèƒ½å’Œå‡½æ•°ä¹‹é—´èƒ½å»ºç«‹è‰¯å¥½çš„å¯¹åº”å…³ç³»ã€‚é€šè¿‡ FaaS çš„è‡ªåŠ¨å¼¹æ€§æ‰©å±•åŠŸèƒ½ï¼ŒServerless Web åº”ç”¨å¯ä»¥å¾ˆå¿«é€Ÿåœ°æ„å»ºå‡ºèƒ½æ‰¿è½½é«˜è®¿é—®é‡çš„ç«™ç‚¹ã€‚ 2.ç§»åŠ¨äº’è”ç½‘ Serverless åº”ç”¨é€šè¿‡ BaaS å¯¹æ¥åç«¯ä¸åŒçš„æœåŠ¡è€Œæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œæé«˜åº”ç”¨å¼€å‘çš„æ•ˆç‡ã€‚å‰ç«¯é€šè¿‡FaaSæä¾›çš„è‡ªåŠ¨å¼¹æ€§æ‰©å±•å¯¹æ¥ç§»åŠ¨ç«¯çš„æµé‡ï¼Œå¼€å‘è€…å¯ä»¥æ›´è½»æ¾åœ°åº”å¯¹çªå‘çš„æµé‡å¢é•¿ã€‚åœ¨ FaaS çš„æ¶æ„ä¸‹ï¼Œåº”ç”¨ä»¥å‡½æ•°çš„å½¢å¼å­˜åœ¨ã€‚å„ä¸ªå‡½æ•°é€»è¾‘ä¹‹é—´ç›¸å¯¹ç‹¬ç«‹ï¼Œåº”ç”¨æ›´æ–°å˜å¾—æ›´å®¹æ˜“ï¼Œä½¿æ–°åŠŸèƒ½çš„å¼€å‘ã€æµ‹è¯•å’Œä¸Šçº¿çš„æ—¶é—´æ›´çŸ­ã€‚ 3.ç‰©è”ç½‘ï¼ˆInternet of Thingsï¼ŒIoTï¼‰ ç‰©è”ç½‘ï¼ˆInternet of Thingsï¼ŒIoTï¼‰åº”ç”¨éœ€è¦å¯¹æ¥å„ç§ä¸åŒçš„æ•°é‡åºå¤§çš„è®¾å¤‡ã€‚ä¸åŒçš„è®¾å¤‡éœ€è¦æŒç»­é‡‡é›†å¹¶ä¼ é€æ•°æ®è‡³æœåŠ¡ç«¯ã€‚Serverless æ¶æ„å¯ä»¥å¸®åŠ©ç‰©è”ç½‘åº”ç”¨å¯¹æ¥ä¸åŒçš„æ•°æ®è¾“å…¥æºã€‚ 4.å¤šåª’ä½“å¤„ç† è§†é¢‘å’Œå›¾ç‰‡ç½‘ç«™éœ€è¦å¯¹ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å’Œè§†é¢‘ä¿¡æ¯è¿›è¡ŒåŠ å·¥å’Œè½¬æ¢ã€‚ä½†æ˜¯è¿™ç§å¤šåª’ä½“è½¬æ¢çš„å·¥ä½œå¹¶ä¸æ˜¯æ— æ—¶æ— åˆ»éƒ½åœ¨è¿›è¡Œçš„ï¼Œåªæœ‰åœ¨ä¸€äº›ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æ‰éœ€è¦è¢«æ‰§è¡Œï¼Œæ¯”å¦‚ç”¨æˆ·ä¸Šä¼ æˆ–ç¼–è¾‘å›¾ç‰‡å’Œè§†é¢‘æ—¶ã€‚é€šè¿‡ Serverless çš„äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘å¤„ç†é€»è¾‘ï¼Œä»è€ŒèŠ‚çœäº†ç©ºé—²æ—¶æ®µè®¡ç®—èµ„æºçš„å¼€é”€ï¼Œæœ€ç»ˆé™ä½äº†è¿ç»´çš„æˆæœ¬ã€‚ 5.æ•°æ®åŠäº‹ä»¶æµå¤„ç† Serverless å¯ä»¥ç”¨äºå¯¹ä¸€äº›æŒç»­ä¸æ–­çš„äº‹ä»¶æµå’Œæ•°æ®æµè¿›è¡Œå®æ—¶åˆ†æå’Œå¤„ç†ï¼Œå¯¹äº‹ä»¶å’Œæ•°æ®è¿›è¡Œå®æ—¶çš„è¿‡æ»¤ã€è½¬æ¢å’Œåˆ†æï¼Œè¿›è€Œè§¦å‘ä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚æ¯”å¦‚ï¼Œå¯¹å„ç±»ç³»ç»Ÿçš„æ—¥å¿—æˆ–ç¤¾äº¤åª’ä½“ä¿¡æ¯è¿›è¡Œå®æ—¶åˆ†æï¼Œé’ˆå¯¹ç¬¦åˆç‰¹å®šç‰¹å¾çš„å…³é”®ä¿¡æ¯è¿›è¡Œè®°å½•å’Œå‘Šè­¦ã€‚ 6.ç³»ç»Ÿé›†æˆ Serverless åº”ç”¨çš„å‡½æ•°å¼æ¶æ„éå¸¸é€‚åˆç”¨äºå®ç°ç³»ç»Ÿé›†æˆã€‚ç”¨æˆ·æ— é¡»åƒè¿‡å»ä¸€æ ·ä¸ºäº†æŸäº›ç®€å•çš„é›†æˆé€»è¾‘è€Œå¼€å‘å’Œè¿ç»´ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥æ›´ä¸“æ³¨äºæ‰€éœ€çš„é›†æˆé€»è¾‘ï¼Œåªç¼–å†™å’Œé›†æˆç›¸å…³çš„ä»£ç é€»è¾‘ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ã€‚å‡½æ•°åº”ç”¨çš„åˆ†æ•£å¼çš„æ¶æ„ï¼Œä½¿å¾—é›†æˆé€»è¾‘çš„æ–°å¢å’Œå˜æ›´æ›´åŠ çµæ´»ã€‚ Serverlessçš„å±€é™ä¸–ç•Œä¸Šæ²¡æœ‰èƒ½è§£å†³æ‰€æœ‰é—®é¢˜çš„ä¸‡èƒ½è§£å†³æ–¹æ¡ˆå’Œæ¶æ„ç†å¿µã€‚Serverless æœ‰å®ƒçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæœ‰å®ƒçš„å±€é™ã€‚æœ‰çš„å±€é™æ˜¯ç”±å…¶æ¶æ„ç‰¹ç‚¹å†³å®šçš„ï¼Œæœ‰çš„æ˜¯ç›®å‰æŠ€æœ¯çš„æˆç†Ÿåº¦å†³å®šçš„ï¼Œæ¯•ç«Ÿ Serverless è¿˜æ˜¯ä¸€ä¸ªèµ·æ­¥æ—¶é—´ä¸é•¿çš„æ–°å…´æŠ€æœ¯é¢†åŸŸï¼Œåœ¨è®¸å¤šæ–¹é¢è¿˜éœ€è¦é€æ­¥å®Œå–„ã€‚ 1.æ§åˆ¶åŠ› Serverless çš„ä¸€ä¸ªçªå‡ºä¼˜ç‚¹æ˜¯ç”¨æˆ·æ— é¡»å…³æ³¨åº•å±‚çš„è®¡ç®—èµ„æºï¼Œä½†æ˜¯è¿™ä¸ªä¼˜ç‚¹çš„åé¢æ˜¯ç”¨æˆ·å¯¹åº•å±‚çš„è®¡ç®—èµ„æºæ²¡æœ‰æ§åˆ¶åŠ›ã€‚å¯¹äºä¸€äº›å¸Œæœ›æŒæ§åº•å±‚è®¡ç®—èµ„æºçš„åº”ç”¨åœºæ™¯ï¼ŒServerless æ¶æ„å¹¶ä¸æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ã€‚ 2.å¯ç§»æ¤æ€§ Serverless åº”ç”¨çš„å®ç°åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äº Serverless å¹³å°åŠè¯¥å¹³å°ä¸Šçš„ FaaS å’Œ BaaS æœåŠ¡ã€‚ä¸åŒITå‚å•†çš„ Serverless å¹³å°å’Œè§£å†³æ–¹æ¡ˆçš„å…·ä½“å®ç°å¹¶ä¸ç›¸åŒã€‚è€Œä¸”ï¼Œç›®å‰ Serverless é¢†åŸŸå°šæ²¡æœ‰å½¢æˆæœ‰å…³çš„è¡Œä¸šæ ‡å‡†ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å°†ä¸€ä¸ªå¹³å°ä¸Šçš„ Serverless åº”ç”¨ç§»æ¤åˆ°å¦ä¸€ä¸ªå¹³å°æ—¶æ‰€éœ€è¦ä»˜å‡ºçš„æˆæœ¬ä¼šæ¯”è¾ƒé«˜ã€‚è¾ƒä½çš„å¯ç§»æ¤æ€§å°†é€ æˆå‚å•†é”å®šï¼ˆVendor Lock-inï¼‰ã€‚è¿™å¯¹å¸Œæœ›å‘å±• Serverless æŠ€æœ¯ï¼Œä½†æ˜¯åˆä¸å¸Œæœ›è¿‡åº¦ä¾èµ–ç‰¹å®šä¾›åº”å•†çš„ä¼ä¸šè€Œè¨€æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚ 3.å®‰å…¨æ€§ åœ¨ Serverless æ¶æ„ä¸‹ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥æ§åˆ¶åº”ç”¨å®é™…æ‰€è¿è¡Œçš„ä¸»æœºã€‚ä¸åŒç”¨æˆ·çš„åº”ç”¨ï¼Œæˆ–è€…åŒä¸€ç”¨æˆ·çš„ä¸åŒåº”ç”¨åœ¨è¿è¡Œæ—¶å¯èƒ½å…±ç”¨åº•å±‚çš„ä¸»æœºèµ„æºã€‚å¯¹äºä¸€äº›å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ï¼Œè¿™å°†å¸¦æ¥æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚ 4.æ€§èƒ½ å½“ä¸€ä¸ª Serverless åº”ç”¨é•¿æ—¶é—´ç©ºé—²æ—¶å°†ä¼šè¢«ä»ä¸»æœºä¸Šå¸è½½ã€‚å½“è¯·æ±‚å†æ¬¡åˆ°è¾¾æ—¶ï¼Œå¹³å°éœ€è¦é‡æ–°åŠ è½½åº”ç”¨ã€‚åº”ç”¨çš„é¦–æ¬¡åŠ è½½åŠé‡æ–°åŠ è½½çš„è¿‡ç¨‹å°†äº§ç”Ÿä¸€å®šçš„å»¶æ—¶ã€‚å¯¹äºä¸€äº›å¯¹å»¶æ—¶æ•æ„Ÿçš„åº”ç”¨ï¼Œéœ€è¦é€šè¿‡é¢„å…ˆåŠ è½½æˆ–å»¶é•¿ç©ºé—²è¶…æ—¶æ—¶é—´ç­‰æ‰‹æ®µè¿›è¡Œå¤„ç†ã€‚ 5.æ‰§è¡Œæ—¶é•¿ Serverless çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯åº”ç”¨æŒ‰éœ€åŠ è½½æ‰§è¡Œï¼Œè€Œä¸æ˜¯é•¿æ—¶é—´æŒç»­éƒ¨ç½²åœ¨ä¸»æœºä¸Šã€‚ç›®å‰ï¼Œå¤§éƒ¨åˆ† Serverless å¹³å°å¯¹ FaaS å‡½æ•°çš„æ‰§è¡Œæ—¶é•¿å­˜åœ¨é™åˆ¶ã€‚å› æ­¤ Serverless åº”ç”¨æ›´é€‚åˆä¸€äº›æ‰§è¡Œæ—¶é•¿è¾ƒçŸ­çš„ä½œä¸šã€‚ 6.æŠ€æœ¯æˆç†Ÿåº¦ è™½ç„¶ Serverless æŠ€æœ¯çš„å‘å±•å¾ˆå¿«ï¼Œä½†æ˜¯æ¯•ç«Ÿå®ƒè¿˜æ˜¯ä¸€é—¨èµ·æ­¥æ—¶é—´ä¸é•¿çš„æ–°å…´æŠ€æœ¯ã€‚å› æ­¤ï¼Œç›®å‰ Serverless ç›¸å…³å¹³å°ã€å·¥å…·å’Œæ¡†æ¶è¿˜å¤„åœ¨ä¸€ä¸ªä¸æ–­å˜åŒ–å’Œæ¼”è¿›çš„é˜¶æ®µï¼Œå¼€å‘å’Œè°ƒè¯•çš„ç”¨æˆ·ä½“éªŒè¿˜éœ€è¦è¿›ä¸€æ­¥æå‡ã€‚Serverless ç›¸å…³çš„æ–‡æ¡£å’Œèµ„æ–™ç›¸å¯¹æ¯”è¾ƒå°‘ï¼Œæ·±å…¥äº†è§£ Serverless æ¶æ„çš„æ¶æ„å¸ˆã€å¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜ä¹Ÿç›¸å¯¹è¾ƒå°‘ã€‚ Other Resourcesç²¾è¯»ã€ŠServerless ç»™å‰ç«¯å¸¦æ¥äº†ä»€ä¹ˆã€‹Docker â€” ä»å…¥é—¨åˆ°å®è·µserverless-chromeæ€ä¹ˆç†è§£ IaaSã€SaaS å’Œ PaaS çš„åŒºåˆ«ï¼Ÿ","pubDate":"Mon, 05 Aug 2019 02:27:06 GMT","guid":"https://aotu.io/notes/2019/08/05/serverless/","category":"Webå¼€å‘"},{"title":"ä½¿ç”¨ React Hooks é‡æ„ä½ çš„å°ç¨‹åº","link":"https://aotu.io/notes/2019/07/10/taro-hooks/","description":"æœ¬æ–‡ç”±ä½™æ¾ˆåœ¨ GMTC å…¨çƒå¤§å‰ç«¯æŠ€æœ¯ 2019 çš„æ¼”è®²ï¼šã€Šä½¿ç”¨ React Hooks é‡æ„ä½ çš„å°ç¨‹åºã€‹æ•´ç†è€Œæˆã€‚ èƒŒæ™¯ä¸€ç›´å…³æ³¨å°ç¨‹åºå¼€å‘çš„æœ‹å‹åº”è¯¥ä¼šæ³¨æ„åˆ°ï¼Œæœ€å¼€å§‹å°ç¨‹åºå°±æ˜¯ä¸ºäº†å¾®å‹åˆ›æ–°å‹ä¸šåŠ¡æ‰“é€ çš„ä¸€ä¸ªæ¡†æ¶ï¼Œæœ€å¤šåªèƒ½è¿è¡Œ 1m çš„åŒ…ã€‚å¯æ˜¯åæ¥å‘ç°å¾ˆå¤šå‚å•†æŠŠè¶Šæ¥è¶Šå¤šçš„ä¸šåŠ¡æ¬åˆ°äº†å°ç¨‹åºä¸Šï¼Œå°ç¨‹åºçš„èƒ½åŠ›ä¹Ÿåœ¨ä¸æ–­åœ°å¼€æ”¾ï¼Œå˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ã€‚äºæ˜¯åæ¥æ‰“åŒ…é™åˆ¶ä¸Šå‡åˆ°äº† 2mï¼Œç„¶åå¼•å…¥äº†åˆ†åŒ…ï¼Œç°åœ¨å·²ç»å·²ç»å¯ä»¥ä¸Šä¼  8m çš„å°ç¨‹åºã€‚å…¶å®è¿™ä¸ªä½“ç§¯å·²ç»å¯ä»¥å®ç°éå¸¸å·¨å‹éå¸¸å¤æ‚çš„ä¸šåŠ¡äº†ã€‚å°±ä» Taro çš„ç”¨æˆ·æ¥çœ‹ï¼Œä¾‹å¦‚äº¬ä¸œè´­ç‰©å°ç¨‹åºå’Œ 58 åŒåŸå°ç¨‹åºä¸ç®¡ä»ä»£ç çš„æ•°é‡è¿˜æ˜¯å¤æ‚åº¦éƒ½ä¸äºšäº PC ç«¯ä¸šåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´å‰ç«¯å¼€å‘çš„å¤æ‚åº¦æ­£åœ¨å‘å°ç¨‹åºç«¯è½¬ç§»ã€‚ è€Œå°ç¨‹åºå¼€å‘å…¶å®ä¹Ÿæ˜¯å‰ç«¯å¼€å‘çš„ä¸€ä¸ªå­é›†ï¼Œåœ¨æ•´ä¸ªå‰ç«¯ä¸šç•Œï¼Œæˆ‘ä»¬åˆæ˜¯æ€ä¹ˆè§£å†³å¤æ‚åº¦è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹ Reactï¼šReact Core Team æˆå‘˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Redux çš„ä½œè€… Dan Abramov åœ¨ 2018 å¹´çš„ ReactConf å‘å¤§å®¶é¦–æ¬¡ä»‹ç»äº† React Hooksã€‚React Hooks æ˜¯ä¸ºäº†è§£å†³ Class Component çš„ä¸€äº›é—®é¢˜è€Œå¼•å…¥çš„ï¼š Class Component ç»„ä»¶é—´çš„é€»è¾‘éš¾ä»¥å¤ç”¨ã€‚å› ä¸º JavaScript ä¸åƒ Go æˆ– C++ ä¸€æ ·ï¼ŒClass å¯ä»¥å¤šé‡ç»§æ‰¿ï¼Œç±»çš„é€»è¾‘çš„å¤ç”¨å°±æˆäº†ä¸€ä¸ªé—®é¢˜ï¼› å¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£ã€‚Class Component ç»å¸¸ä¼šåœ¨ç”Ÿå‘½å‘¨æœŸåšä¸€äº›æ•°æ®è·å–äº‹ä»¶ç›‘å¬çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹æˆ‘ä»¬å°±å¾ˆéš¾æŠŠç»„ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„åŠ›åº¦ï¼› Class ä»¤äººè¿·æƒ‘ã€‚å¾ˆå¤šæ–°æ‰‹åº”è¯¥ä¼šè¢« Class ç»„ä»¶ç»‘å®šäº‹ä»¶çš„ this è¿·æƒ‘è¿‡ï¼Œç»‘å®šäº‹ä»¶å¯ä»¥ç”¨ bindï¼Œå¯ä»¥ç›´æ¥å†™ç®­å¤´å‡½æ•°ï¼Œä¹Ÿå¯ä»¥å†™ç±»å±æ€§å‡½æ•°ï¼Œä½†åˆ°åº•å“ªç§æ–¹æ³•æ‰æ˜¯æœ€å¥½çš„å‘¢ï¼Ÿè€Œåˆ°äº† ES 2018ï¼Œclass è¿˜æœ‰å¤šç§è¯­æ³•ï¼Œä¾‹å¦‚è£…é¥°å™¨ï¼Œä¾‹å¦‚ private fileds è¿™äº›å¥‡å¥‡æ€ªæ€ªçš„è¯­æ³•ä¹Ÿä¸ºæ–°æ‰‹å¢åŠ äº†æ›´å¤šçš„å›°æƒ‘ã€‚ è€Œå¯¹äº Vue è€Œè¨€ä¹Ÿæœ‰ç›¸åŒçš„é—®é¢˜ï¼ŒVue çš„ä½œè€…å°¤ç‰æºªè€å¸ˆåœ¨ VueConf China 2019 ä¹Ÿç»™ Vue 3.0 å¼•å…¥äº†ä¸€ä¸ªå« Functional-based API çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å— React Hooks å¯å‘è€Œå¢åŠ çš„æ–° APIã€‚ç”±äº Vue 2.0 ç»„ä»¶ç»„åˆçš„æ¨¡å¼æ˜¯å¯¹è±¡å­—é¢é‡å½¢å¼ï¼Œæ‰€ä»¥ Functional-based API å¯ä»¥ä½œä¸º Mixins çš„æ›¿ä»£ï¼Œé…åˆæ–°çš„å“åº”å¼ API ä½œä¸ºæ–°çš„ç»„ä»¶ç»„åˆæ¨¡å¼ã€‚é‚£ä¹ˆå¯¹äº Vue 3.0 æˆ‘ä»¬è¿˜çŸ¥ä¹‹ç”šå°‘ï¼Œä»¥åçš„ API ä¹Ÿæœ‰å¯èƒ½æ”¹å˜ï¼Œä½†æˆ–è®¸æ˜¯è‹±é›„æ‰€è§ç•¥åŒï¼ŒReact å’Œ Vue å¯¹äºé™ä½å‰ç«¯å¼€å‘å¤æ‚åº¦è¿™ä¸€é—®é¢˜éƒ½ä¸çº¦è€ŒåŒåœ°é€‰æ‹©äº† Hooks è¿™ä¸€æ–¹æ¡ˆï¼Œè¿™åˆ°åº•æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä¸€ä¸‹ä¹‹å‰çš„ç»„ä»¶ç»„åˆæ–¹æ¡ˆï¼Œé¦–å…ˆæ˜¯ Mixinsï¼Œçº¢è‰²åœˆçš„ Mixinsï¼Œé»„è‰²çš„æ˜¯ç»„ä»¶ï¼Œæˆ‘ä»¬çŸ¥é“ Mixins å…¶å®å°±æ˜¯æŠŠå¤šä¸ªå¯¹è±¡ç»„åˆæˆä¸€ä¸ªå¯¹è±¡ï¼ŒMixins çš„è¿‡ç¨‹å°±æœ‰ç‚¹åƒè°ƒç”¨ Object.assgin æ–¹æ³•ã€‚é‚£ Mixins æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿé¦–å…ˆæ˜¯å‘½åç©ºé—´è€¦åˆï¼Œå¦‚æœå¤šä¸ªå¯¹è±¡åŒåå‚æ•°ï¼Œè¿™äº›å‚æ•°å°±ä¼šè€¦åˆåœ¨ä¸€èµ·ï¼›å…¶æ¬¡ç”±äº Mixins å¿…é¡»æ˜¯è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“å…·ä½“æœ‰ä»€ä¹ˆå‚æ•°ï¼Œæ‰€ä»¥æ˜¯ TypeScript æ˜¯æ— æ³•åšé™æ€æ£€æŸ¥çš„ï¼›ç¬¬ä¸‰æ˜¯ç»„ä»¶å‚æ•°ä¸æ¸…æ™°ï¼Œåœ¨ Mixins ä¸­ç»„ä»¶çš„ props å’Œå…¶ä»–å‚æ•°æ²¡ä»€ä¹ˆä¸¤æ ·ï¼Œå¾ˆå®¹æ˜“è¢«å…¶å®ƒçš„ Mixins è¦†ç›–æ‰ã€‚ ä¸ºäº†è§£å†³ Mixins çš„é—®é¢˜ï¼Œåæ¥å‘å±•å‡ºäº†é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰çš„æ–¹å¼ï¼Œé«˜é˜¶ç»„ä»¶å°±å’Œå›¾é‡Œä¸€æ ·ï¼Œä¸€ä¸ªç»„ä»¶åµŒå¥—ç€å¦å¤–çš„ç»„ä»¶ã€‚å®ƒçš„ç¡®è§£å†³äº† Mixins çš„ä¸€äº›é—®é¢˜ï¼Œä¾‹å¦‚å‘½åç©ºé—´è§£è€¦ï¼Œç”±äºæ¯æ¬¡éƒ½ä¼šç”Ÿæˆæ–°ç»„ä»¶ï¼Œå°±ä¸å­˜åœ¨å‘½åç©ºé—´é—®é¢˜äº†ï¼›å…¶æ¬¡å®ƒä¹Ÿèƒ½å¾ˆå¥½åœ°åšé™æ€æ£€æŸ¥ï¼›ä½†å®ƒä¾ç„¶æ²¡æœ‰åŠæ³•å¤„ç†ç»„ä»¶ props çš„é—®é¢˜ï¼Œprops è¿˜æ˜¯æœ‰å¯èƒ½ä¼šåœ¨é«˜é˜¶ç»„ä»¶ä¸­è¢«æ›´æ”¹ï¼›è€Œä¸”å®ƒè¿˜æœ‰äº†æ–°çš„é—®é¢˜ï¼Œæ¯å¤šç”¨ä¸€æ¬¡é«˜é˜¶ç»„ä»¶ï¼Œéƒ½ä¼šå¤šå‡ºä¸€ä¸ªç»„ä»¶å®ä¾‹ã€‚ æœ€åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Hooksï¼Œç´«è‰²çš„åœˆåœˆæ˜¯ Hooksï¼Œå°±åƒå›¾é‡Œä¸€æ ·ï¼ŒHooks éƒ½åœ¨åŒä¸€ä¸ªç»„ä»¶é‡Œï¼ŒHooks ä¹‹é—´è¿˜å¯ä»¥ç›¸äº’è°ƒç”¨ã€‚å› ä¸º Hooks è·‘åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°å¼ç»„ä»¶é‡Œï¼Œæ‰€ä»¥ä»–è‚¯å®šæ˜¯æ²¡æœ‰å‘½åç©ºé—´çš„é—®é¢˜ï¼ŒåŒæ—¶ TypeScript ä¹Ÿèƒ½å¯¹æ™®é€šå‡½æ•°åšå¾ˆå¥½çš„é™æ€æ£€æŸ¥ï¼Œè€Œä¸” Hooks ä¹Ÿä¸èƒ½æ›´æ”¹ç»„ä»¶çš„ Propsï¼Œä¼ å…¥çš„æ˜¯å•¥æœ€åå¯ç”¨çš„å°±æ˜¯å•¥ï¼›æœ€å Hooks ä¹Ÿä¸ä¼šç”Ÿæˆæ–°çš„ç»„ä»¶ï¼Œæ‰€ä»¥ä»–æ˜¯å•ç»„ä»¶å®ä¾‹ã€‚ åœ¨ Taro 1.3 ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€å¤§å †ç‰¹æ€§ï¼Œå…¶ä¸­çš„é‡å¤´æˆå°±æ˜¯ React Hooks çš„æ”¯æŒã€‚è™½ç„¶ React Hooks æ­£å¼ç¨³å®šçš„æ—¶é—´å¹¶ä¸é•¿ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªç‰¹æ€§èƒ½æœ‰æ•ˆåœ°ç®€åŒ–å¼€å‘æ¨¡å¼ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œå¼€å‘ä½“éªŒã€‚å³ä¾¿ Hooks çš„ç”Ÿæ€å’Œæœ€ä½³å®è·µè¿˜å°šæœªå®Œå–„ï¼Œä½†æˆ‘ä»¬ç›¸ä¿¡æœªæ¥ Hooks ä¼šæˆä¸º React å¼€å‘æ¨¡å¼çš„ä¸»æµï¼Œä¹Ÿä¼šæ·±åˆ»åœ°å½±å“å…¶å®ƒæ¡†æ¶æœªæ¥çš„ API æ„æˆã€‚æ‰€ä»¥åœ¨ Taro çš„è§„åˆ’ä¸­æˆ‘ä»¬ä¹ŸæŠŠ Hooks æ”¾åœ¨äº†å¾ˆé‡è¦çš„ä½ç½®ã€‚ ä»€ä¹ˆæ˜¯ Hooksï¼Ÿç›¸ä¿¡ç¬”è€…æ‰¯äº†é‚£ä¹ˆå¤šï¼Œå¤§å®¶å¯¹ Hooks åº”è¯¥äº§ç”Ÿäº†ä¸€äº›å…´è¶£ï¼Œé‚£ä»€ä¹ˆæ˜¯ Hooks å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼ŒHooks å°±æ˜¯ä¸€ç»„åœ¨ React ç»„ä»¶ä¸­è¿è¡Œçš„å‡½æ•°ï¼Œè®©ä½ åœ¨ä¸ç¼–å†™ Class çš„æƒ…å†µä¸‹ä½¿ç”¨ state åŠå…¶å®ƒç‰¹æ€§ã€‚å…·ä½“æ¥è¯´ï¼ŒHooks å¯ä»¥è¡¨ç°ä¸ºä»¥ä¸‹çš„å½¢å¼ï¼š useState ä¸å†…éƒ¨çŠ¶æ€æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªåŸç”Ÿå°ç¨‹åºçš„ç®€å•æ¡ˆä¾‹ï¼Œä¸€ä¸ªç®€å•è®¡æ•°å™¨ç»„ä»¶ï¼Œç‚¹å‡»æŒ‰é’®å°± + 1ï¼Œç›¸ä¿¡æ¯ä½å‰ç«¯å¼€å‘æœ‹å‹éƒ½å¯ä»¥è½»æ¾åœ°å†™ä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ã€‚ä½†æˆ‘ä»¬å¯ä»¥ç¨å¾®æ”¹ä¸€ä¸‹ä»£ç ï¼ŒæŠŠäº‹ä»¶å¤„ç†å‡½æ•°æ”¹ä¸ºç®­å¤´å‡½æ•°ã€‚å¦‚æœæ˜¯è¿™æ ·ä»£ç å°±è·‘ä¸äº†äº†ã€‚äº‹å®ä¸Šåœ¨åŸç”Ÿå¼€å‘ä¸­ this çš„é—®é¢˜æ˜¯ä¸€ä»¥è´¯ä¹‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸è¦å¼€ä¸ªæ–°å˜é‡æŠŠ this ç¼“å­˜èµ·æ¥ï¼Œå«åš self ä»€ä¹ˆçš„æ¥é¿å…ç±»ä¼¼çš„é—®é¢˜ã€‚æˆ‘ä»¬ä¹‹å‰ä¹Ÿæåˆ°è¿‡ï¼Œå¦‚æœé‡‡ç”¨ ES6 çš„ Class æ¥ç»„ç»‡ç»„ä»¶åŒæ ·ä¹Ÿä¼šé‡åˆ° this æŒ‡å‘ä¸æ¸…æ™°çš„é—®é¢˜ã€‚ 12345678910Page(&#123; data: &#123; count: 0 &#125;, increment: () =&gt; &#123; // è¿™é‡Œå†™ç®­å¤´å‡½æ•°å°±è·‘ä¸äº†äº† this.setData(&#123; count: this.data.count + 1 &#125;) &#125;&#125;) å†æ¥çœ‹çœ‹æˆ‘ä»¬çš„ hooks å†™æ³•ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªå« useState çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªåˆå§‹å€¼å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå¦‚æœæ˜¯å†™åç«¯çš„åŒå­¦åº”è¯¥å¯¹è¿™ä¸ªæ¨¡å¼æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå°±åƒ Koa æˆ–è€… Go ä¸€æ ·ï¼Œä¸€ä¸ªå‡½æ•°è¿”å›ä¸¤ä¸ªå€¼æˆ–è€…è¯´å«ä¸€ä¸ªå…ƒç»„ï¼Œä¸è¿‡æˆ‘ä»¬è¿”å›çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰çš„çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯è®¾ç½®è¿™ä¸ªçŠ¶æ€çš„å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨è¿™ä¸ªè®¾ç½®çŠ¶æ€çš„ setState å‡½æ•°éƒ½ä¼šä½¿å¾—æ•´ä¸ªç»„ä»¶è¢«é‡æ–°æ¸²æŸ“ã€‚ç„¶åç”¨ ES6 çš„ç»“æ„è¯­æ³•æŠŠå®ƒä¿©è§£æ„å‡ºæ¥ä½¿ç”¨ã€‚ ç„¶åæˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªå¢åŠ çš„å‡½æ•°ï¼ŒæŠŠä»–ç»‘å®šåˆ° onClick äº‹ä»¶ä¸Šã€‚ 123456789101112131415161718function Counter () &#123; // è¿”å›ä¸€ä¸ªå€¼å’Œä¸€ä¸ªè®¾ç½®å€¼çš„å‡½æ•° // æ¯æ¬¡è®¾ç½®å€¼ä¹‹åä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ const [ count, setCount ] = useState(0) function increment () &#123; setCount(count + 1) &#125; return ( &lt;View&gt; &lt;Text&gt;You clicked &#123;count&#125; times&lt;/Text&gt; &lt;Button onClick=&#123;increment&#125;&gt; Click me &lt;/Button&gt; &lt;/View&gt; )&#125; åŒæ ·æ˜¯éå¸¸ç®€å•çš„ä»£ç ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Taro ä¹‹å‰çš„ç‰ˆæœ¬çš„è¯å°±ä¼šçŸ¥é“è¿™æ ·çš„ä»£ç åœ¨ä»¥å‰çš„ Taro æ˜¯è·‘ä¸äº†çš„ï¼Œä¸è¿‡ Taro 1.3 ä¹‹åäº‹ä»¶ä¼ å‚å¯ä»¥ä¼ å…¥ä»»ä½•åˆæ³•å€¼ï¼Œä½ å¦‚æœæƒ³ç›´æ¥å†™ç®­å¤´å‡½æ•°æˆ–è€…å†™ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ã€‚ å¤§å®¶å¯ä»¥å‘ç°æˆ‘ä»¬ä½¿ç”¨çš„ Hooks å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•éå¸¸ normal çš„å‡½æ•°ï¼Œæ²¡æœ‰ this æ²¡æœ‰ classï¼Œæ²¡æœ‰ç±»æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰äº† thisï¼Œå†ä¹Ÿä¸ä¼šå‡ºç°é‚£ç§ thisã€self å‚»å‚»åˆ†ä¸æ¸…æ¥šçš„æƒ…å†µã€‚ å¤§å®¶å¯ä»¥è®°ä½è¿™ä¸ªç®€å•çš„è®¡æ•°å™¨ç»„ä»¶ï¼Œä»¥åä¹‹åè®²çš„å¾ˆå¤šæ¡ˆä¾‹æ˜¯åŸºäºè¿™ä¸ªç»„ä»¶åšçš„ã€‚ useEffect ä¸å‰¯ä½œç”¨æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›çš„ä¾‹å­ï¼Œä¸€ä¸ªå€’è®¡æ—¶ç»„ä»¶ï¼Œæˆ‘ä»¬ç‚¹å‡»æŒ‰é’®å°±å¼€å§‹å€’è®¡æ—¶ï¼Œå†ç‚¹å‡»å°±åœæ­¢å€’è®¡æ—¶ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªç»„ä»¶é‡Œæœ‰ä¸¤ä¸ªå˜é‡ï¼Œstart ç”¨äºæ§åˆ¶æ˜¯å¦å¼€å§‹è®¡æ—¶ï¼Œtime å°±æ˜¯æˆ‘ä»¬çš„å€’è®¡æ—¶æ—¶é—´ã€‚è¿™é‡Œæ³¨æ„æˆ‘ä»¬éœ€è¦å¤šæ¬¡æ¸…é™¤ intervalï¼Œè€Œåœ¨ç°å®ä¸šåŠ¡å¼€å‘ä¸­ï¼Œè¿™ä¸ª touchStart å‡½æ•°å¯èƒ½ä¼šå¤æ‚å¾—å¤šï¼Œä¸€ä¸å°å¿ƒå°±ä¼šæå‰æ¸…é™¤ interval æˆ–å¿˜è®°æ¸…é™¤ã€‚ 123456789101112131415161718192021Page(&#123; data: &#123; time: 60 &#125;, start: false, toggleStart () &#123; this.start = !this.start if (this.start) &#123; this.interval = setInterval(() =&gt; &#123; this.setData(&#123; time: this.data.time - 1 &#125;) &#125;, 1000) &#125; else &#123; clearInterval(this.interval) &#125; &#125;, onUnload () &#123; clearInterval(this.interval) &#125;&#125;) 12345&lt;view&gt; &lt;button bindtap=\"toggleStart\"&gt; &#123;&#123;time&#125;&#125; &lt;/button&gt;&lt;/view&gt; è€Œæˆ‘ä»¬ Hooks çš„ä¾‹å­ä¼šæ˜¯è¿™æ ·ï¼šæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ª useEffect å‡½æ•°ã€‚ä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡ï¼Œæ¯æ¬¡è°ƒç”¨ useState è¿”å›çš„ setState å‡½æ•°éƒ½ä¼šé‡æ–°è°ƒç”¨æ•´ä¸ªå‡½æ•°ï¼Œå…¶å®å°±åŒ…æ‹¬äº† useEffect å‡½æ•°ï¼ŒuseEffect æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå°±æ˜¯å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯ effect å‡½æ•°ï¼Œä»–ä¸æ¥å—ä¹Ÿä¸è¿”å›ä»»ä½•å‚æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–æ•°ç»„ï¼Œå½“æ•°ç»„ä¸­çš„å˜é‡å˜åŒ–æ—¶å°±ä¼šè°ƒç”¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•° effect å‡½æ•°ã€‚Effect å‡½æ•°è¿˜å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ä¸‹ä¸€æ¬¡ effect å‡½æ•°è¢«è°ƒç”¨æ—¶æˆ–æ¯æ¬¡ç»„ä»¶è¢«æ³¨é”€æ—¶æˆ–è€…å°±ä¼šè°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ¸…æ¥šæ‰ä¸€äº›äº‹ä»¶çš„è®¢é˜…æˆ–è€… interval ä¹‹ç±»å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„è¡Œä¸ºã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ start æ¯æ¬¡å˜åŒ–å°±ä¼šé‡æ–°è·‘ä¸€æ¬¡ effect å‡½æ•°ï¼Œæ¯éš”ä¸€ç§’ä¼šè®¾ç½®ä¸€æ¬¡ time çš„å€¼è®©å®ƒå‡ä¸€ï¼Œä½†è¿™æ ·çš„å†™æ³•æ˜¯æœ‰é—®é¢˜çš„ã€‚ 123456789101112131415161718192021function Counter () &#123; const [ start, setStart ] = useState(false) const [ time, setTime ] = useState(60) useEffect(() =&gt; &#123; // effect å‡½æ•°ï¼Œä¸æ¥å—ä¹Ÿä¸è¿”å›ä»»ä½•å‚æ•° let interval if (start) &#123; interval = setInterval(() =&gt; &#123; // setTime(time - 1) âŒ time åœ¨ effect é—­åŒ…å‡½æ•°é‡Œæ˜¯æ‹¿ä¸åˆ°å‡†ç¡®å€¼çš„ setTime(t =&gt; t -1) // âœ… åœ¨ setTime çš„å›è°ƒå‡½æ•°å‚æ•°é‡Œå¯ä»¥æ‹¿åˆ°å¯¹åº” state çš„æœ€æ–°å€¼ &#125;, 1000) &#125; return () =&gt; clearInterval(interval) // clean-up å‡½æ•°ï¼Œå½“å‰ç»„ä»¶è¢«æ³¨é”€æ—¶è°ƒç”¨ &#125;, [ start ]) // ä¾èµ–æ•°ç»„ï¼Œå½“æ•°ç»„ä¸­å˜é‡å˜åŒ–æ—¶ä¼šè°ƒç”¨ effect å‡½æ•° return ( &lt;View&gt; &lt;Button onClick=&#123;() =&gt; setStart(!start)&#125;&gt;&#123;time&#125;&lt;/Button&gt; &lt;/View&gt; )&#125; å› ä¸ºæˆ‘ä»¬åœ¨ setInterval è¿™ä¸ªå‡½æ•°çš„é—­åŒ…ä¸­ï¼Œæˆ‘ä»¬æ•æ‰åˆ° time è¿™ä¸ªå˜é‡çš„å€¼ä¸èƒ½å’Œæœ€æ–°çš„å€¼å¯¹åº”å¾—ä¸Šï¼Œtime çš„å€¼æœ‰å¯èƒ½åœ¨æˆ‘ä»¬æ„æ–™ä¹‹å¤–åœ°è¢«æ›´æ”¹äº†å¤šæ¬¡ã€‚è§£å†³çš„æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡ useState è¿”å›çš„ setState æ–¹æ³•ï¼Œå¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå°±æ˜¯ state æœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥åªè¦æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå‡½æ•°å°±å¥½äº†ã€‚è¿™æ˜¯å…¶ä¸­ä¸€ç§æ–¹æ³•ã€‚ è¿˜æœ‰å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ useRef Hooksï¼ŒuseRef å¯ä»¥è¿”å›ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œè¿™ä¸ªæœ‰ current å±æ€§ï¼Œè€Œ current çš„å€¼æ˜¯å¯å˜çš„ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œï¼Œæ¯æ¬¡æ›´æ”¹ currentTime.current éƒ½æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸” currentTime æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥ currentTime.current ä¸€å®šæ˜¯å¯æ§çš„ã€‚ 123456789101112131415161718192021function Counter () &#123; const [ start, setStart ] = useState(false) const [ time, setTime ] = useState(60) const currentTime = useRef(time) // ç”Ÿæˆä¸€ä¸ªå¯å˜å¼•ç”¨ useEffect(() =&gt; &#123; // effect å‡½æ•°ï¼Œä¸æ¥å—ä¹Ÿä¸è¿”å›ä»»ä½•å‚æ•° let interval if (start) &#123; interval = setInterval(() =&gt; &#123; setTime(currentTime.current--) // currentTime.current æ˜¯å¯å˜çš„ &#125;, 1000) &#125; return () =&gt; clearInterval(interval) // clean-up å‡½æ•°ï¼Œå½“å‰ç»„ä»¶è¢«æ³¨é”€æ—¶è°ƒç”¨ &#125;, [ start ]) // ä¾èµ–æ•°ç»„ï¼Œå½“æ•°ç»„ä¸­å˜é‡å˜åŒ–æ—¶ä¼šè°ƒç”¨ effect å‡½æ•° return ( &lt;View&gt; &lt;Button onClick=&#123;() =&gt; setStart(!start)&#125;&gt;&#123;time&#125;&lt;/Button&gt; &lt;/View&gt; )&#125; è™½ç„¶è¯´æˆ‘ä»¬å¯ä»¥ useRef æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ²¡å¿…è¦è¿™æ ·åšã€‚å› ä¸º setTime ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°çš„æ–¹æ³•æ˜¾ç„¶å¯è¯»æ€§æ›´é«˜ã€‚çœŸæ­£æœ‰å¿…è¦çš„æ˜¯æŠŠæˆ‘ä»¬çš„ interval å˜é‡ä½œä¸ºä¸€ä¸ª refï¼Œæˆ‘ä»¬åœ¨å‡½æ•°æœ€é¡¶å±‚çš„ä½œç”¨åŸŸæŠŠ interval ä½œä¸ºä¸€ä¸ª refï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°çš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹æŠŠä»–æ¸…é™¤ï¼Œè€ŒåŸæ¥çš„ä»£ç ä¸­æˆ‘ä»¬æŠŠ interval ä½œä¸ºä¸€ä¸ªæ™®é€šçš„å˜é‡æ”¾åœ¨ effect å‡½æ•°é‡Œï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªäº‹ä»¶ä¹Ÿéœ€è¦æ¸…é™¤ intervalï¼Œè¿™å°±æ²¡æ³•åšåˆ°äº†ã€‚ä½†æ˜¯ç”¨ useRef ç”Ÿæˆå¯å˜å¼•ç”¨å°±æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚ 1234567891011121314151617181920function Counter () &#123; const [ start, setStart ] = useState(false) const [ time, setTime ] = useState(60) const interval = useRef() // interval å¯ä»¥åœ¨è¿™ä¸ªä½œç”¨åŸŸé‡Œä»»ä½•åœ°æ–¹æ¸…é™¤å’Œè®¾ç½® useEffect(() =&gt; &#123; // effect å‡½æ•°ï¼Œä¸æ¥å—ä¹Ÿä¸è¿”å›ä»»ä½•å‚æ•° if (start) &#123; interval.current = setInterval(() =&gt; &#123; setTime(t =&gt; t - 1) // âœ… åœ¨ setTime çš„å›è°ƒå‡½æ•°å‚æ•°é‡Œå¯ä»¥æ‹¿åˆ°å¯¹åº” state çš„æœ€æ–°å€¼ &#125;, 1000) &#125; return () =&gt; clearInterval(interval.current) // clean-up å‡½æ•°ï¼Œå½“å‰ç»„ä»¶è¢«æ³¨é”€æ—¶è°ƒç”¨ &#125;, [ start ]) // ä¾èµ–æ•°ç»„ï¼Œå½“æ•°ç»„ä¸­å˜é‡å˜åŒ–æ—¶ä¼šè°ƒç”¨ effect å‡½æ•° return ( &lt;View&gt; &lt;Button onClick=&#123;() =&gt; setStart(!start)&#125;&gt;&#123;time&#125;&lt;/Button&gt; &lt;/View&gt; )&#125; useContext ä¸è·¨ç»„ä»¶é€šä¿¡æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªè·¨ç»„ä»¶é€šä¿¡çš„ä¾‹å­ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸‰ä¸ªç»„ä»¶ï¼Œpage ç»„ä»¶æœ‰ä¸€ä¸ª child ç»„ä»¶ï¼Œchild ç»„ä»¶æœ‰ä¸€ä¸ª counter ç»„ä»¶ï¼Œè€Œæˆ‘ä»¬ counter ç»„ä»¶çš„ count å€¼å’Œ setCount å‡½æ•°ï¼Œæ˜¯ç”± page ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ã€‚è¿™ç§æƒ…å†µåœ¨ä¸€ä¸ªå¤æ‚ä¸šåŠ¡çš„å¼€å‘ä¸­ä¹Ÿç»å¸¸èƒ½é‡åˆ°ï¼Œåœ¨åŸç”Ÿå°ç¨‹åºå¼€å‘ä¸­æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨çš„æŠŠæˆ‘ä»¬ counter çš„å€¼å’Œå‡½æ•°æ‰‹åŠ¨åœ°ä¾æ¬¡åœ°ä¼ é€’ä¸‹å»ï¼Œè€Œè¿™æ ·çš„ä¼ é€’å¿…é¡»æ˜¯æ˜¾å¼çš„ï¼Œä½ éœ€è¦åœ¨ JavaScript ä¸­è®¾ç½® props çš„å‚æ•°ï¼Œä¹Ÿéœ€è¦åœ¨ WXML é‡Œè®¾ç½® props çš„å‚æ•°ï¼Œä¸€ä¸ªä¹Ÿä¸èƒ½å°‘ï¼Œå°‘äº†å°±è·‘ä¸åŠ¨ã€‚æˆ‘ä»¬è¿˜æ³¨æ„åˆ°å³ä¾¿ child ç»„ä»¶æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œä»–ä¹Ÿå¿…é¡»è¦è®¾ç½®ä¸€ä¸ª triggerEvent çš„å‡½æ•°å’Œ props çš„ç±»å‹å£°æ˜ã€‚è¿™æ ·çš„å†™æ³•æ— ç–‘æ˜¯éå¸¸éº»çƒ¦è€Œä¸”é™åˆ¶å¾ˆå¤§çš„ã€‚ 1234567891011121314151617181920&lt;!-- page.wxml --&gt;&lt;view&gt; &lt;child /&gt;&lt;/view&gt;&lt;!-- child.wxml --&gt;&lt;view&gt; &lt;counter /&gt;&lt;/view&gt;&lt;!-- counter.wxml --&gt;&lt;view&gt; &lt;text&gt; You clicked &#123;&#123;count&#125;&#125; times &lt;/text&gt; &lt;butto bindtap=\"increment\"&gt; Click me &lt;/button&gt;&lt;/view&gt; 1234567891011121314151617181920212223242526272829303132333435// page.jsPage(&#123; data: &#123; count: 0 &#125;, increment () &#123; this.setData(&#123; count: this.data.count + 1 &#125;) &#125;&#125;)// child.jsComponent(&#123; properties: &#123; count: Number &#125;, methods: &#123; increment () &#123; this.triggerEvent('increment') &#125; &#125;&#125;)// counter.jsComponent(&#123; properties: &#123; count: Number &#125;, methods: &#123; increment () &#123; this.triggerEvent('increment') &#125; &#125;&#125;) è€Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹ Hooks çš„å†™æ³•ï¼Œé¦–å…ˆæˆ‘ä»¬ç”¨ Taro.createContext åˆ›å»ºä¸€ä¸ª context å¯¹è±¡ï¼Œåœ¨æˆ‘ä»¬ page ç»„ä»¶é‡ŒæŠŠæˆ‘ä»¬çš„ count å’Œ setCount å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡ä¼ å…¥åˆ° Context.Provider çš„ value é‡Œã€‚ç„¶ååœ¨æˆ‘ä»¬çš„ Counter ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useContext è¿™ä¸ª Hooks æŠŠæˆ‘ä»¬çš„ count å’Œ setCount å–å‡ºæ¥ï¼Œå°±ç›´æ¥å¯ä»¥ä½¿ç”¨äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334export const CounterContext = Taro.createContext(null);// page.jsconst Page = () =&gt; &#123; const [ count, setCount ] = useState(0) return ( &lt;CounterContext.Provider value=&#123;&#123; count, setCount &#125;&#125;&gt; &lt;Child /&gt; &lt;/CounterContext.Provider&gt; );&#125;;// child.jsconst Child = () =&gt; ( &lt;View&gt; &lt;Counter /&gt; &lt;/View&gt;);// counter.jsconst Counter = () =&gt; &#123; const &#123; count, setCount &#125; = useContext(CounterContext) return ( &lt;View&gt; &lt;Text&gt; You clicked &#123;count&#125; times &lt;/Text&gt; &lt;Button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/Button&gt; &lt;/View&gt; )&#125; å¤§å®¶å¯ä»¥å‘ç°ä½¿ç”¨ Context çš„ä»£ç æ¯”åŸæ¥çš„ä»£ç ç²¾ç®€äº†å¾ˆå¤šï¼Œå‚æ•°ä¸éœ€è¦ä¸€çº§ä¸€çº§åœ°æ˜¾å¼ä¼ é€’ï¼Œchild ç»„ä»¶ä¹Ÿå’Œäº‹å®ä¸€æ ·ï¼Œæ²¡æœ‰ä¸€è¡Œå¤šä½™çš„é€»è¾‘ã€‚ä½†ç²¾ç®€ä¸æ˜¯æœ€å¤§çš„å¥½å¤„ã€‚æœ€å¤§çš„å¥½å¤„æ˜¯å¤§å®¶å¯ä»¥å‘ç°æˆ‘ä»¬çš„ Context å¯ä»¥ä¼ é€’ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œç†Ÿæ‚‰å°ç¨‹åºåŸç”Ÿå¼€å‘çš„åŒå­¦å¯èƒ½ä¼šçŸ¥é“ï¼Œæ‰€æœ‰ props çš„ä¼ é€’éƒ½ä¼šè¢«å°ç¨‹åºåºåˆ—åŒ–æ‰ï¼Œå¦‚æœä¼ é€’äº†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡æœ€ç»ˆä¼šå˜æˆä¸€ä¸ª JSONã€‚ä½†æ˜¯ç”¨ Taro çš„ context åˆ™æ²¡æœ‰è¿™å±‚é™åˆ¶ï¼Œä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¸¦æœ‰å‡½æ•°çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥åƒæ˜¯ imutabale æˆ–è€… obserable è¿™æ ·å¤æ‚çš„å¯¹è±¡ã€‚åœ¨ taro 1.3 æˆ‘ä»¬å¯¹ props ç³»ç»Ÿè¿›è¡Œäº†ä¸€æ¬¡é‡æ„ï¼ŒTaro çš„ context å’Œ props ä¸€æ ·ï¼Œå±æ€§ä¼ é€’æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œæƒ³ä¼ å•¥å°±ä¼ å•¥ã€‚ å¦å¤–ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹çš„æ˜¯ï¼Œcontext çš„ä¼ é€’å¯ä»¥æ— è§†çˆ¶çº§ç»„ä»¶çš„æ›´æ–°ç­–ç•¥ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­å³ä¾¿æˆ‘ä»¬é€šè¿‡ shouldComponentUpdate() ç¦æ­¢äº† child ç»„ä»¶çš„æ›´æ–°ï¼Œä½† counter ä½œä¸ºå®ƒçš„å­ç»„ä»¶ä¾ç„¶æ˜¯å¯ä»¥æ›´æ–°çš„ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥è®©æˆ‘ä»¬åšæ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™æ›´ä¸ºçµæ´»ä¸€äº›ã€‚ Hooks åœ¨å°ç¨‹åºå®æˆ˜è®²å®Œäº† Hooks çš„åŸºæœ¬ä½¿ç”¨ï¼Œæœ‰äº›åŒå­¦ä¼šè§‰å¾—ï¼šå’¦ï¼Œæˆ‘æ€ä¹ˆè§‰å¾—ä½ è¿™å‡ ä¸ªä¸œè¥¿æ„Ÿè§‰å¹³å¹³æ— å¥‡ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ä½†å®é™…ä¸Šè¿™äº›åŸºç¡€çš„ Hooks å•ç‹¬æ‹¿å‡ºæ¥çœ‹çš„ç¡®ä¸èƒ½ç©å‡ºä»€ä¹ˆèŠ±æ ·ï¼Œä½†ä»–ä»¬ç»„åˆèµ·æ¥å´èƒ½è¿¸å‘å¼ºå¤§çš„åŠ›é‡ã€‚ è‡ªå®šä¹‰ Hookså¤§å®¶åœ¨ä¸šåŠ¡å¼€å‘å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œå®ç°ä¸€ä¸ªåŒå‡»äº‹ä»¶ï¼Œå¦‚æœä½ æ˜¯ä» H5 å¼€å‘è¿‡æ¥çš„å¯èƒ½ä¼šç›´æ¥å†™ onDoubleClickï¼Œä½†å¾ˆé—æ†¾ï¼Œå°ç¨‹åºç»„ä»¶æ˜¯æ²¡æœ‰ doubleClick è¿™ä¸ªäº‹ä»¶çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨ Taro åˆç”¨äº† TypeScript å°±ä¸ä¼šçŠ¯è¿™æ ·çš„é”™è¯¯ï¼Œç¼–è¾‘å™¨å°±å›ç›´æ¥ç»™ä½ æŠ¥é”™ Text ç»„ä»¶æ²¡æœ‰è¿™ä¸ªå±æ€§ã€‚ äºæ˜¯ä½ å°±è‡ªå·±å®ç°äº†ä¸€ä¸ªåŒå‡»äº‹ä»¶ï¼Œä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼Œæœ‰ä¸€ä¸ªä¸Šæ¬¡ç‚¹å‡»çš„æ—¶é—´ä½œä¸ºçŠ¶æ€ï¼Œæ¯æ¬¡è§¦å‘å•æœºäº‹ä»¶çš„æ—¶å€™å’Œä¸Šæ¬¡ç‚¹å‡»çš„æ—¶é—´åšå¯¹æ¯”ï¼Œå¦‚æœé—´éš”è¿‡å°ï¼Œé‚£ä»–å°±æ˜¯ä¸€ä¸ªåŒå‡»äº‹ä»¶ã€‚ä»£ç éå¸¸ç®€å•ï¼Œä½†æˆ‘ä»¬ä¸ç¦å°±ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜é—®é¢˜ï¼Œæ¯ä¸€æ¬¡ç»™ä¸€ä¸ªç»„ä»¶åŠ å•å‡»äº‹ä»¶ï¼Œæˆ‘ä»¬å°±æ¯æ¬¡éƒ½åŠ è¿™ä¹ˆä¸€å¨ä»£ç å—ï¼Ÿ 12345678910111213141516171819202122232425function EditableText (&#123; title &#125;) &#123; const [ lastClickTime, setClickTime ] = useState(0) const [ editing, setEditing ] = useState(false) return ( &lt;View&gt; &#123; editing ? &lt;TextInput editing=&#123;editing&#125; /&gt; : &lt;Text onClick=&#123;e =&gt; &#123; const currentTime = e.timeStamp const gap = currentTime - lastClickTime if (gap &gt; 0 &amp;&amp; gap &lt; 300) &#123; // double click setEditing(true) &#125; setClickTime(currentTime) &#125;&#125; &gt; &#123;title&#125; &lt;/Text&gt; &#125; &lt;/View&gt; )&#125; è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªè‡ªå®šä¹‰ Hooksï¼Œä»£ç å’ŒåŸæ¥çš„ä»£ç ä¹Ÿå·®ä¸å¤šï¼ŒuseDoubleClick ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œä½†å½“æˆ‘ä»¬è°ƒç”¨ useDoubleClick æ—¶å€™è¿”å›ä¸€ä¸ªåä¸º textOnDoubleClick çš„å‡½æ•°ï¼Œåœ¨åœ¨ Text ç»„ä»¶çš„äº‹ä»¶ä¼ å‚ä¸­ï¼Œæˆ‘ä»¬å†åœ¨ textOnDoubleClick å‡½æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯è§¦å‘åŒå‡»æ¡ä»¶æ—¶å€™çš„å‡½æ•°ã€‚å½“æˆ‘ä»¬ç»™è¿™ä¸ªè‡ªå®šä¹‰ Hooks åšäº†æŸ¯é‡ŒåŒ–ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åšåˆ°çŸ¥é“ Hook ä½¿ç”¨æ—¶æ‰æš´éœ²å›è°ƒå‡½æ•°: 123456789101112131415161718192021222324252627282930313233function useDoubleClick () &#123; const [ lastClickTime, setClickTime ] = useState(0) return (callback) =&gt; (e) =&gt; &#123; const currentTime = e.timeStamp const gap = currentTime - lastClickTime if (gap &gt; 0 &amp;&amp; gap &lt; 300) &#123; callback &amp;&amp; callback(e) &#125; setClickTime(currentTime) &#125;&#125;function EditableText (&#123; title &#125;) &#123; const [ editing, setEditing ] = useState(false) const textOnDoubleClick = useDoubleClick() return ( &lt;View&gt; &#123; editing ? &lt;TextInput editing=&#123;editing&#125; /&gt; : &lt;Text onClick=&#123;textOnDoubleClick(() =&gt; setEditing(true) )&#125; &gt; &#123;title&#125; &lt;/Text&gt; &#125; &lt;/View&gt; )&#125; æŸ¯é‡ŒåŒ–å‡½æ•°å¥½åƒæœ‰ä¸€ç‚¹ç‚¹ç»•ï¼Œä½†ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†è¿™ä¸€æ­¥ï¼Œè¿™ç§æˆ‘ä»¬çš„è‡ªå®šä¹‰ hooks å°±å¯ä»¥åƒå¤šæ¬¡è°ƒç”¨ï¼š 123456789101112131415function EditableText (&#123; title &#125;) &#123; const textOnDoubleClick = useDoubleClick() const buttonOnDoubleClick = useDoubleClick() // ä»»ä½•å®ç°å•å‡»ç±»å‹çš„ç»„ä»¶éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åŒå‡»çŠ¶æ€ return ( &lt;View&gt; &lt;Text onClick=&#123;textOnDoubleClick(...)&#125;&gt; &#123;title&#125; &lt;/Text&gt; &lt;Button onClick=&#123;buttonOnDoubleClick(...)&#125; /&gt; &lt;/View&gt; )&#125; æ¯ä¸€ä¸ªå¤§å®¶ä¸å¦¨è¯•æƒ³å¦‚æœæŒ‰ç…§æˆ‘ä»¬ä¼ ç»Ÿçš„ render props å®ç°ï¼Œæ¯æ¬¡éƒ½è¦å¤šå†™ä¸€ä¸ª container ç»„ä»¶ï¼Œå¦‚æœç”¨ Mixins æˆ–é«˜é˜¶ç»„ä»¶æ¥å®ç°å°±æ›´éº»çƒ¦ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºæ¯ä¸ªä¸åŒç±»å‹çš„ç»„ä»¶åˆ›é€ ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚è€Œä½¿ç”¨ Hooksï¼Œä»»ä½•ä¸€ä¸ªå®ç°äº†å•æœºç±»å‹çš„ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„è‡ªå®šä¹‰ Hook å®ç°åŒå‡»æ•ˆæœï¼Œä¸ç®¡ä»å®ƒçš„å†…éƒ¨å®ç°æ¥çœ‹ï¼Œè¿˜æ˜¯ä»å®ƒæš´éœ²çš„ API æ¥çœ‹éƒ½æ˜¯éå¸¸ä¼˜é›…çš„ã€‚ æ€§èƒ½ä¼˜åŒ–æ¥ä¸‹æ¥æˆ‘ä»¬è°ˆä¸€ä¸‹æ€§èƒ½ä¼˜åŒ–ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿæœ‰è¿‡è¿™ç§æƒ…å†µï¼Œæœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä»–åªéœ€æ‹¿åˆ°ä»–çš„ props è¦æ¸²æŸ“ä¸€æ¬¡ï¼Œä»æ­¤ä¹‹åä»–å°±å†ä¹Ÿä¸éœ€è¦æ›´æ–°äº†ã€‚å¯¹äºä¼ ç»Ÿè€Œè¨€çš„ Class Component æˆ‘ä»¬å¯ä»¥è®¾ç½® shouldComponentUpdate() è¿”å› falseã€‚ 12345678910111213class Numbers extends Component &#123; shouldComponentUpdate () &#123; return false &#125; render () &#123; return &lt;View&gt; &#123; expensive(this.props.array).map(i =&gt; &lt;View&gt;&#123;i&#125;&lt;/View&gt;) &#125; &lt;/View&gt; &#125;&#125; è€Œå¯¹äºå‡½æ•°å¼ç»„ä»¶è€Œè¨€ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åšä¸€æ ·çš„äº‹æƒ…ã€‚Taro å’Œ React ä¸€æ ·æä¾› Taro.memo APIï¼Œä»–çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥å—ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°å’Œæˆ‘ä»¬çš„ shouldComponentUpdate() ä¸€æ ·ï¼Œåˆ¤æ–­ç»„ä»¶åœ¨ä»€ä¹ˆæ ·çš„æƒ…å†µä¸‹éœ€è¦æ›´æ–°ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ²¡æœ‰ä¼ å…¥çš„è¯ï¼ŒTaro.memo çš„æ•ˆæœå°±å’Œ Taro.PureComponent ä¸€æ ·ï¼Œå¯¹æ–°æ—§ props åšä¸€å±‚æµ…å¯¹æ¯”ï¼Œå¦‚æœæµ…å¯¹æ¯”ä¸ç›¸ç­‰åˆ™æ›´æ–°ç»„ä»¶ã€‚ 12345678910111213function Numbers (&#123; array &#125;) &#123; return ( &lt;View&gt; &#123; expensive(array).map( i =&gt; &lt;View&gt;&#123;i&#125;&lt;/View&gt; ) &#125; &lt;/View&gt; )&#125;export default Taro.memo(Numbers, () =&gt; true) ç¬¬äºŒç§æƒ…å†µæˆ‘ä»¬å¯ä»¥çœ‹çœ‹æˆ‘ä»¬çš„è€æœ‹å‹ï¼Œè®¡æ•°å™¨ç»„ä»¶ã€‚ä½†æ˜¯è¿™ä¸ªè®¡æ•°å™¨ç»„ä»¶å’Œè€æœ‹å‹æœ‰ä¸¤ç‚¹ä¸ä¸€æ ·ï¼šç¬¬ä¸€æ˜¯æ¯æ¬¡ç‚¹å‡» + 1ï¼Œè®¡æ•°å™¨éœ€è¦è°ƒç”¨ expensive å‡½æ•°å¾ªç¯ 1 äº¿æ¬¡æ‰èƒ½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„å€¼ï¼Œç¬¬äºŒç‚¹æ˜¯å®ƒå¤šäº†ä¸€ä¸ª Input ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬çœŸå®çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œè¿™ç§æƒ…å†µä¹Ÿå¾ˆå¸¸è§ï¼šæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡æ˜‚è´µçš„æ•°æ®å¤„ç†æ‰èƒ½å¾—åˆ°æœ€ç»ˆæƒ³è¦çš„å€¼ï¼Œä½†è¿™ä¸ªç»„ä»¶åˆè¿˜æœ‰å¤šä¸ª state æ§åˆ¶å…¶å®ƒçš„ç»„ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚æœæ­£å¸¸ä¹¦å†™ä¸šåŠ¡é€»è¾‘æ˜¯æœ‰æ€§èƒ½é—®é¢˜çš„ï¼š 123456789101112131415161718192021function Counter () &#123; const [ count, setCount ] = useState(0) const [val, setValue] = useState('') function expensive() &#123; let sum = 0 for (let i = 0; i &lt; count * 1e9; i++) &#123; sum += i &#125; return sum &#125; return ( &lt;View&gt; &lt;Text&gt;You clicked &#123;expensive()&#125; times&#125;&lt;/Text&gt; &lt;Button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/Button&gt; &lt;Input value=&#123;val&#125; onChange=&#123;event =&gt; setValue(event.detail.value)&#125; /&gt; &lt;/View&gt; )&#125; å› ä¸ºæˆ‘ä»¬ count çš„å€¼è·Ÿ Input çš„å€¼æ²¡æœ‰å…³ç³»ï¼Œä½†æˆ‘ä»¬æ¯æ¬¡æ”¹å˜ Input çš„å€¼ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå¾ªç¯ä¸€äº¿æ¬¡çš„ expensive() å‡½æ•°å°±ä¼šé‡æ–°è°ƒç”¨ã€‚è¿™æ ·æƒ…å†µæ˜¾ç„¶æ˜¯ä¸èƒ½æ¥å—çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ useMemo APIã€‚useMemo çš„ç­¾åå’Œ useEffect æœ‰ç‚¹åƒï¼ŒåŒºåˆ«å°±åœ¨äº useMemo çš„ç¬¬ä¸€ä¸ªå‡½æ•°æœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›çš„å€¼åŒæ—¶ä¹Ÿæ˜¯ useMemo å‡½æ•°çš„è¿”å›å€¼ã€‚è€Œç¬¬äºŒä¸ªå‚æ•°åŒæ ·æ˜¯ä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“è¿™ä¸ªæ•°ç»„çš„æ•°æ®å˜åŒ–æ—¶å€™ï¼ŒuseMemo çš„å‡½æ•°æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œå¦‚æœæ•°ç»„æ²¡æœ‰å˜åŒ–ï¼Œé‚£å°±ç›´æ¥ä»ç¼“å­˜ä¸­å–æ•°æ®ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªä¾‹å­é‡Œæˆ‘ä»¬åªéœ€è¦ count å˜åŒ–æ‰è¿›è¡Œè®¡ç®—ï¼Œè€Œ Input value å˜åŒ–æ— éœ€è®¡ç®—ã€‚ 123456789101112131415161718192021function Counter () &#123; const [ count, setCount ] = useState(0) const [val, setValue] = useState('') const expensive = useMemo(() =&gt; &#123; let sum = 0 for (let i = 0; i &lt; count * 100; i++) &#123; sum += i &#125; return sum &#125;, [ count ]) // âœ… åªæœ‰ count å˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œ return ( &lt;View&gt; &lt;Text&gt;You Clicked &#123;expensive&#125; times&lt;/Text&gt; &lt;Button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/Button&gt; &lt;Input value=&#123;val&#125; onChange=&#123;event =&gt; setValue(event.detail.value)&#125; /&gt; &lt;/View&gt; )&#125; æˆ‘ä»¬åˆšæ‰æåˆ°çš„ä¸¤ä¸ª memo çš„ API ï¼Œä»–çš„å…¨ç§°å…¶å®æ˜¯ Memoizationã€‚ç”±äº Hooks éƒ½æ˜¯åœ¨æ™®é€šå‡½æ•°ä¸­è¿è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšå¥½æ€§èƒ½ä¼˜åŒ–ï¼Œä¸€å®šè¦å¥½å¥½åˆ©ç”¨ç¼“å­˜å’Œè®°å¿†åŒ–è¿™ä¸€æŠ€æœ¯ã€‚ åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè®°å¿†åŒ–ï¼ˆMemoizationï¼‰æ˜¯ä¸€ç§æé«˜ç¨‹åºè¿è¡Œé€Ÿåº¦çš„ä¼˜åŒ–æŠ€æœ¯ã€‚é€šè¿‡å‚¨å­˜å¤§è®¡ç®—é‡å‡½æ•°çš„è¿”å›å€¼ï¼Œå½“è¿™ä¸ªç»“æœå†æ¬¡è¢«éœ€è¦æ—¶å°†å…¶ä»ç¼“å­˜æå–ï¼Œè€Œä¸ç”¨å†æ¬¡è®¡ç®—æ¥èŠ‚çœè®¡ç®—æ—¶é—´ã€‚ å¤§è§„æ¨¡çŠ¶æ€ç®¡ç†æåˆ°çŠ¶æ€ç®¡ç†ï¼ŒReact ç¤¾åŒºæœ€æœ‰åçš„å·¥å…·å½“ç„¶æ˜¯ Reduxã€‚åœ¨ react-redux@7 ä¸­æ–°å¼•ç”¨äº†ä¸‰ä¸ª API: useSelectorã€‚å®ƒæœ‰ç‚¹åƒ connect() å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° mapStateToPropsï¼ŒæŠŠæ•°æ®ä» state ä¸­å–å‡ºæ¥ï¼› useStore ã€‚è¿”å› store æœ¬èº«ï¼› useDispatchã€‚è¿”å› store.dispatchã€‚ åœ¨ Taro ä¸­å…¶å®ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ createContext å’Œ useContext ç›´æ¥å°±æŠŠ useStore å’Œ useDispatch å®ç°äº†ã€‚è€ŒåŸºäº useStore å’Œ useDispatch ä»¥åŠ useStateï¼ŒuseMemoï¼ŒuseEffect ä¹Ÿå¯ä»¥å®ç° useSelectorã€‚ä¹Ÿå°±æ˜¯è¯´ react-redux@7 çš„æ–° API å…¨éƒ½æ˜¯æ™®é€š Hooks æ„å»ºè€Œæˆçš„è‡ªå®šä¹‰ Hooksã€‚å½“ç„¶æˆ‘ä»¬ä¹ŸæŠŠ react-redux@7 çš„æ–°åŠŸèƒ½ç§»æ¤åˆ°äº† @tarojs/reduxï¼Œåœ¨ Taro 1.3 ç‰ˆæœ¬ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™å‡ ä¸ª APIã€‚ Hooks çš„å®ç°æˆ‘ä»¬ç°åœ¨å¯¹ Hooks å·²ç»æœ‰äº†ä»¥ä¸‹çš„äº†è§£ï¼Œä¸€ä¸ªåˆæ³•çš„ Hooks ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹éœ€æ±‚æ‰èƒ½æ‰§è¡Œ: åªèƒ½åœ¨å‡½æ•°å¼å‡½æ•°ä¸­è°ƒç”¨ åªèƒ½åœ¨å‡½æ•°æœ€é¡¶å±‚ä¸­è°ƒç”¨ ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ ä¸èƒ½åœ¨å¾ªç¯ä¸­è°ƒç”¨ ä¸èƒ½åœ¨åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ æˆ‘æƒ³è¯·å¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¸€ä¸ª Hook å‡½æ•°éœ€è¦æ»¡è¶³ä»¥ä¸Šçš„éœ€æ±‚å‘¢ï¼Ÿæˆ‘æƒ³è¯·å¤§å®¶ä»¥å¯ä»¥æ¡†æ¶å¼€å‘è€…çš„è§’åº¦å»æ€è€ƒä¸‹è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸æ˜¯ä»¥ API çš„è°ƒç”¨è€…çš„è§’åº¦å»é€†å‘åœ°æ€è€ƒã€‚å½“ä¸€ä¸ª Hook å‡½æ•°è¢«è°ƒç”¨çš„æ—¶ï¼Œè¿™ä¸ª Hook å‡½æ•°çš„å†…éƒ¨å®ç°åº”è¯¥å¯ä»¥è®¿é—®åˆ°å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç»„ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ Hooks API çš„å…¥å‚å´æ²¡æœ‰ä¼ å…¥è¿™ä¸ªç»„ä»¶ï¼Œé‚£ç©¶ç«Ÿæ˜¯æ€ä¹ˆæ ·çš„è®¾è®¡æ‰å¯ä»¥è®©æˆ‘ä»¬çš„ hook å‡½æ•°è®¿é—®åˆ°æ­£åœ¨æ‰§è¡Œçš„ç»„ä»¶ï¼Œä¹Ÿèƒ½å¤Ÿå‡†ç¡®åœ°å®šä½è‡ªå·±å‘¢ï¼Ÿ èªæ˜çš„æœ‹å‹æˆ–è®¸å·²ç»çŒœåˆ°äº†ï¼Œè¿™äº›æ‰€æœ‰çº¿ç´¢éƒ½æŒ‡å‘ä¸€ä¸ªç»“æœï¼ŒHooks å¿…é¡»æ˜¯ä¸€ä¸ªæŒ‰é¡ºåºæ‰§è¡Œçš„å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æ•´ä¸ªç»„ä»¶æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæ¸²æŸ“å¤šå°‘æ¬¡ï¼Œç»„ä»¶ä¸­ Hooks çš„é¡ºåºéƒ½æ˜¯ä¸ä¼šå˜çš„ã€‚ æˆ‘ä»¬è¿˜çŸ¥é“å¦å¤–ä¸€æ¡è§„åˆ™ï¼ŒHooks æ˜¯ React å‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼Œè¦å®ç° Hooks æœ€å…³é”®çš„é—®é¢˜åœ¨äºä¸¤ä¸ª: æ‰¾åˆ°æ­£åœ¨æ‰§è¡Œçš„ React å‡½æ•° æ‰¾åˆ°æ­£åœ¨æ‰§è¡Œçš„ Hooks çš„é¡ºåºã€‚ æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå…¨å±€çš„å¯¹è±¡å« CurrentOwnerï¼Œå®ƒæœ‰ä¸¤ä¸ªå±æ€§ï¼Œç¬¬ä¸€ä¸ªæ˜¯ currentï¼Œä»–æ˜¯æ­£åœ¨æ‰§è¡Œçš„ Taro å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶åŠ è½½å’Œæ›´æ–°æ—¶è®¾ç½®å®ƒçš„å€¼ï¼ŒåŠ è½½æˆ–æ›´æ–°å®Œæ¯•ä¹‹åå†è®¾ç½®ä¸º nullï¼›ç¬¬äºŒä¸ªå±æ€§æ˜¯ indexï¼Œå®ƒå°±æ˜¯ CurrentOwner.current ä¸­ Hooks çš„é¡ºåºï¼Œæ¯æ¬¡æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª Hook å‡½æ•°å°±è‡ªå¢ 1ã€‚ 1234567891011const CurrentOwner: &#123; current: null | Component&lt;any, any&gt;, index: number&#125; = &#123; // æ­£åœ¨æ‰§è¡Œçš„ Taro å‡½æ•°, // åœ¨ç»„ä»¶åŠ è½½å’Œé‡æ–°æ¸²æŸ“å‰è®¾ç½®å®ƒçš„å€¼ current: null, // Taro å‡½æ•°ä¸­ hooks çš„é¡ºåº // æ¯æ‰§è¡Œä¸€ä¸ª Hook è‡ªå¢ index: 0&#125; åœ¨ React ä¸­å…¶å®ä¹Ÿæœ‰è¿™ä¹ˆä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”ä½ è¿˜å¯ä»¥ä½¿ç”¨å®ƒï¼Œå®ƒå«åš __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwnerï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ æƒ³ç»™ React 15 å®ç° Hooksï¼Œå…¶å®ä¹Ÿå¯ä»¥åšåˆ°çš„ã€‚ä½†ä¹Ÿæ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œå¦‚æœä½ ç”¨äº†è¯´ä¸å®šå°±è¢« fire äº†ï¼Œè¢«ä¼˜åŒ–äº†ï¼Œæ‰€ä»¥æ›´å¥½çš„æ–¹æ¡ˆè¿˜æ˜¯ç›´æ¥ä½¿ç”¨æˆ‘ä»¬ taroã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°æˆ‘ä»¬çš„ getHook å‡½æ•°ï¼ŒåŒæ ·å¾ˆç®€å•ï¼Œå¦‚æœ CurrenOwner.current æ˜¯ nullï¼Œé‚£è¿™å°±ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ hook å‡½æ•°ï¼Œæˆ‘ä»¬ç›´æ¥æŠ¥é”™ã€‚å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œæˆ‘ä»¬å°±æŠŠ hook çš„ index + 1ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠç»„ä»¶çš„ Hooks éƒ½ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„é‡Œï¼Œå¦‚æœ index å¤§äº Hooks çš„é•¿åº¦ï¼Œè¯´æ˜ Hooks æ²¡æœ‰è¢«åˆ›é€ ï¼Œæˆ‘ä»¬å°± push ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé¿å…ä¹‹åå–å€¼å‘ç”Ÿ runtime errorã€‚ç„¶åæˆ‘ä»¬ç›´æ¥è¿”å›æˆ‘ä»¬çš„ Hookã€‚ 1234567891011function getHook (): Hook &#123; if (CurrentOwner.current === null) &#123; throw new Error(`invalid hooks call: hooks can only be called in a taro component.`) &#125; const index = CurrentOwner.index++ // hook åœ¨è¯¥ Taro å‡½æ•°ä¸­çš„ ID const hooks: Hook[] = CurrentOwner.current.hooks // æ‰€æœ‰çš„ hooks if (index &gt;= hooks.length) &#123; // å¦‚æœ hook è¿˜æ²¡æœ‰åˆ›å»º hooks.push(&#123;&#125; as Hook) // å¯¹è±¡å°±æ˜¯ hook çš„å†…éƒ¨çŠ¶æ€ &#125; return hooks[index] // è¿”å›æ­£åœ¨æ‰§è¡Œçš„ hook çŠ¶æ€&#125; æ—¢ç„¶æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†æˆ‘ä»¬æ­£åœ¨æ‰§è¡Œçš„ Hooksï¼Œå®Œæ•´åœ°å®ç° Hooks ä¹Ÿå°±ä¸éš¾äº†ã€‚ä¹‹å‰æˆ‘ä»¬è®¨è®ºè¿‡ useState çš„ç­¾åï¼Œç°åœ¨æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°çœ‹ä»–çš„å®ç°ã€‚ é¦–å…ˆå¦‚æœ initState æ˜¯å‡½æ•°ï¼Œç›´æ¥æ‰§è¡Œå®ƒã€‚å…¶æ¬¡è°ƒç”¨æˆ‘ä»¬æˆ‘ä»¬ä¹‹å‰å†™å¥½çš„ getHook å‡½æ•°ï¼Œå®ƒè¿”å›çš„å°±æ˜¯ Hook çš„çŠ¶æ€ã€‚æ¥ä¸‹æ¥å°±æ˜¯ useState çš„ä¸»é€»è¾‘ï¼Œå¦‚æœ hook è¿˜æ²¡æœ‰çŠ¶æ€çš„è¯ï¼Œæˆ‘ä»¬å°±å…ˆæŠŠæ­£åœ¨æ‰§è¡Œçš„ç»„ä»¶ç¼“å­˜èµ·æ¥ï¼Œç„¶å useState è¿”å›çš„ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ hook.state, å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå€¼å½“ç„¶å°±æ˜¯æˆ‘ä»¬ initStateï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±æ‰§è¡Œå®ƒï¼Œå¦åˆ™å°±ç›´æ¥æŠŠå‚æ•°èµ‹å€¼ç»™æˆ‘ä»¬ çš„ hook.state ç¬¬ä¸€ä¸ªå€¼ï¼Œèµ‹å€¼å®Œæ¯•ä¹‹åæˆ‘ä»¬æŠŠå½“å‰çš„ç»„ä»¶åŠ å…¥åˆ°æ›´æ–°é˜Ÿåˆ—ï¼Œç­‰å¾…æ›´æ–°ã€‚ 1234567891011121314151617function useState&lt;S&gt; (initialState: S | (() =&gt; S)): [S, Dispatch&lt;SetStateAction&lt;S&gt;&gt;] &#123; if (isFunction(initialState)) &#123; // å¦‚æœ initialState æ˜¯å‡½æ•° initialState = initialState() // å°±ç›´æ¥æ‰§è¡Œ &#125; const hook = getHook() as HookState&lt;S&gt; // æ‰¾åˆ°è¯¥å‡½æ•°ä¸­å¯¹åº”çš„ hook if (isUndefined(hook.state)) &#123; // å¦‚æœ hook è¿˜æ²¡æœ‰çŠ¶æ€ hook.component = Current.current! // æ­£åœ¨æ‰§è¡Œçš„ Taro å‡½æ•°ï¼Œç¼“å­˜èµ·æ¥ hook.state = [ // hook.state å°±æ˜¯æˆ‘ä»¬è¦è¿”å›çš„å…ƒç»„ initialState, (action) =&gt; &#123; hook.state[0] = isFunction(action) ? action(hook.state[0]) : action enqueueRender(hook.component) // åŠ å…¥æ›´æ–°é˜Ÿåˆ— &#125; ] &#125; return hook.state // å·²ç»åˆ›å»º hook å°±ç›´æ¥è¿”å›&#125; æœ€åæˆ‘ä»¬æŠŠ hook.state è¿”å›å‡ºå»å°±å¤§åŠŸå‘Šæˆäº†ã€‚ Taro çš„ Hooks æ€»å…±æœ‰å…«ä¸ª APIï¼Œ useState çš„å®ç°å¤§å®¶å¯ä»¥å‘ç°éå¸¸ç®€å•ï¼Œä½†å…¶å®å®ƒçš„ä»£ç é‡å’Œå¤æ‚åº¦æ˜¯æ‰€æœ‰ Hooks çš„å®ç°ä¸­ç¬¬äºŒé«˜çš„ã€‚æ‰€ä»¥å…¶å® Hooks ä¹Ÿæ²¡æœ‰ä»€ä¹ˆé»‘ç§‘æŠ€ï¼Œå¤§å®¶å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°ä½¿ç”¨ã€‚ æ€»ç»“ä¸å±•æœ›åœ¨ 2018 å¹´ Ember.js çš„ä½œè€…æå‡ºè¿‡ä¸€ä¸ªè§‚ç‚¹ï¼ŒCompilers are the New Frameworksï¼Œç¼–è¯‘å™¨å³æ¡†æ¶ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ‹¿ React æ¥ä¸¾ä¾‹ï¼Œå•å•ä¸€ä¸ª React å…¶å®æ²¡ä»€ä¹ˆç”¨ï¼Œä½ è¿˜éœ€è¦é…åˆ create-react-app, eslint-plugin-react-hooks, prettier ç­‰ç­‰ç¼–è¯‘ç›¸å…³çš„å·¥å…·æœ€ç»ˆæ‰èƒ½æ„æˆä¸€ä¸ªæ¡†æ¶ï¼Œè€Œè¿™äº›å·¥å…·ä¹Ÿæ°å·§æ˜¯ React Core Team çš„äººåˆ›é€ çš„ã€‚è€Œè¿™æ ·è¶‹åŠ¿ä¸ä»…ä»…å‘ç”Ÿåœ¨ React èº«ä¸Šï¼Œå¤§å®¶å¯ä»¥å‘ç°åœ¨2018å¹´ï¼Œå°¤ç‰æºªè€å¸ˆçš„ä¸»è¦å·¥ä½œå°±æ˜¯å¼€å‘ vue-cliã€‚è€Œå¯¹ä¸€äº›æ›´æ¿€è¿›çš„æ¡†æ¶ï¼Œä¾‹å¦‚ svelteï¼Œå®ƒçš„æ¡†æ¶å°±æ˜¯ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å™¨å°±æ˜¯æ¡†æ¶ã€‚ è€Œåˆ°äº† 2019 å¹´ï¼Œæˆ‘æƒ³æå‡ºä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå«æ¡†æ¶å³ç”Ÿæ€ã€‚å°±æ‹¿ Taro æ¥è¯´ï¼Œä½¿ç”¨ Taro ä½ å¯ä»¥å¤ç”¨ React ç”Ÿæ€çš„ä¸œè¥¿ï¼ŒåŒæ—¶ Taro è¿˜æœ‰ taro doctorï¼ŒTaro å¼€å‘è€…ç¤¾åŒºï¼ŒTaro ç‰©æ–™å¸‚åœºï¼Œè¿˜æœ‰è…¾è®¯å°ç¨‹åºÂ·äº‘å¼€å‘ç­‰ç­‰å¤šä¸ªåˆä½œä¼™ä¼´ä¸€èµ·æ„æˆäº† Taro ç”Ÿæ€ï¼Œè€Œæ•´ä¸ª Taro ç”Ÿæ€æ‰æ˜¯æ¡†æ¶ã€‚åœ¨è¿‡å»çš„åŠå¹´ï¼Œæˆ‘ä»¬æŒç»­æ”¹è¿›å¹¶ä¼˜åŒ–äº† Taro æ¡†æ¶çš„è¡¨ç°ï¼Œä»¥ä¸Šæåˆ°çš„ç‰¹æ€§ä¸åŠŸèƒ½åœ¨ Taro 1.3 å…¨éƒ¨éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚è€Œåœ¨æ¡†æ¶ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæ·±è€•ç¤¾åŒºï¼Œæ¨å‡ºäº† Taro ç‰©æ–™å¸‚åœºå’Œ Taro å¼€å‘è€…ç¤¾åŒºï¼Œå¹¶å’Œè…¾è®¯å°ç¨‹åºÂ·äº‘å¼€å‘åˆä½œä¸¾åŠäº†ç‰©æ–™å¼€å‘ç«èµ›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è¯šæŒšé‚€è¯·ä½ ä¸€èµ·æ¥å‚ä¸ç¤¾åŒºè´¡çŒ®ï¼Œè®©å°ç¨‹åºå¼€å‘å˜å¾—æ›´å¥½ã€æ›´å¿«ã€æ›´æ–¹ä¾¿ï¼š Taro å®˜ç½‘ï¼šhttps://taro.jd.com/ Taro ç‰©æ–™å¸‚åœºï¼šhttps://taro-ext.jd.com/ Taro å¼€å‘è€…ç¤¾åŒºï¼šhttps://taro-club.jd.com/","pubDate":"Wed, 10 Jul 2019 13:00:00 GMT","guid":"https://aotu.io/notes/2019/07/10/taro-hooks/","category":"å°ç¨‹åº"},{"title":"é‚€æ‚¨å‚åŠ ã€ŒTaro x å°ç¨‹åºÂ·äº‘å¼€å‘ã€ç‰©æ–™å¼€å‘ç«èµ›","link":"https://aotu.io/notes/2019/07/01/taro-ext-action/","description":"å¤šç«¯ç»Ÿä¸€å¼€å‘è§£å†³æ–¹æ¡ˆ Taro æ˜¯ç”±å‡¹å‡¸å®éªŒå®¤å¼€æºã€éµå¾ª React è¯­æ³•è§„èŒƒçš„å¤šç«¯å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œæˆªæ­¢ç›®å‰ star æ•°å³å°†çªç ´ä¸¤ä¸‡ï¼Œå—åˆ°äº†å‰ç«¯å¼€å‘è€…çš„å¹¿æ³›å…³æ³¨ï¼Œæˆä¸ºäº†å½“å‰æœ€å—æ¬¢è¿çš„å°ç¨‹åºå¤šç«¯å¼€å‘æ¡†æ¶ä¹‹ä¸€ã€‚å¼€å‘è€…åªéœ€ä¹¦å†™ä¸€å¥—ä»£ç ï¼Œé€šè¿‡ Taro çš„ç¼–è¯‘ï¼Œå³å¯å°†æºä»£ç åˆ†åˆ«ç¼–è¯‘å‡ºå¯ä»¥åœ¨ä¸åŒç«¯ï¼ˆå¾®ä¿¡/ç™¾åº¦/æ”¯ä»˜å®/å­—èŠ‚è·³åŠ¨/QQ/å¿«åº”ç”¨å°ç¨‹åºã€H5ã€React-Native ç­‰ï¼‰è¿è¡Œçš„ä»£ç ï¼Œå¾ˆå¤§ç¨‹åº¦æé«˜äº†å°ç¨‹åºçš„å¼€å‘æ•ˆç‡å’Œå¼€å‘ä½“éªŒã€‚ å°ç¨‹åºÂ·äº‘å¼€å‘æä¾›çš„ä¸€ç«™å¼å¼€å‘æœåŠ¡ã€‚æ‰“é€šäº†å°ç¨‹åºå‰ç«¯ä¸äº‘èµ„æºçš„é“¾è·¯ï¼Œè®©å¼€å‘è€…æ— éœ€ç®¡ç†åç«¯æœåŠ¡æ¶æ„ï¼Œå³å¯è½»æ¾æ‹¥æœ‰å„ç§åç«¯èƒ½åŠ›ï¼Œæå¤§å‡è½»å¼€å‘è¿‡ç¨‹ä¸­ç¹æ‚çš„åç«¯æ“ä½œï¼Œä½¿å°ç¨‹åºå¼€å‘æ›´ç®€å•ã€‚å‘Šåˆ«ä»¥å‰å¼€å‘å°ç¨‹åºéœ€è¦ä¹°æœåŠ¡å™¨ã€éƒ¨ç½²åç«¯æœåŠ¡ã€æ­å»ºè¿ç»´æœåŠ¡ç­‰ç¹çå·¥ä½œã€‚ éšç€ Taro å—åˆ°è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ï¼Œä¹Ÿæ¶Œç°äº†è®¸å¤š ä¼˜ç§€æ¡ˆä¾‹ å’Œä¼˜ç§€è½®å­ï¼Œä»–ä»¬åˆ†æ•£å„å¤„ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªé›†ä¸­çš„åœ°æ–¹è®©å¤§å®¶å¿«é€ŸæŸ¥æ‰¾ï¼Œæ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›è½®å­è€Œä¸ç”¨é‡å¤åˆ¶é€ ï¼Œå› æ­¤æ¨å‡ºäº† Taro ç‰©æ–™å¸‚åœºï¼Œå¤§å®¶å¯ä»¥åˆ†äº«ã€å­¦ä¹ æˆ–ä½¿ç”¨ã€‚ Taro å›¢é˜Ÿå’Œè…¾è®¯äº‘å›¢é˜Ÿä¸€ç›´æœ‰ç€æ·±å…¥çš„åˆä½œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ Taro é¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™æä¾›äº†â€œäº‘å¼€å‘æ¨¡æ¿â€ï¼›åœ¨ Taro æ˜é‡‘å°å†Œé‡Œä»‹ç»å’Œä½¿ç”¨å°ç¨‹åºäº‘å¼€å‘ï¼›åœ¨è…¾è®¯äº‘çš„é«˜æ ¡å…¬å¼€è¯¾é‡Œæœ‰ Taro çš„å‚ä¸â€¦â€¦ å€¼ç‰©æ–™å¸‚åœºä¸Šçº¿ä¹‹é™…ï¼ŒTaro å›¢é˜Ÿå’Œè…¾è®¯äº‘å›¢é˜Ÿå†æ¬¡åˆä½œï¼Œè”åˆä¸¾åŠæ­¤æ¬¡ Taro x å°ç¨‹åºÂ·äº‘å¼€å‘ç‰©æ–™ä¸Šä¼ æ¿€åŠ±æ´»åŠ¨ ï¼ŒTaro çš„å¼€å‘è€…ä»¬åªè¦ä¸Šä¼  Taro å¼€å‘çš„åŒ…å«è…¾è®¯äº‘å¼€å‘èƒ½åŠ›ï¼ˆä¾‹å¦‚ï¼šäº‘æ•°æ®åº“ã€äº‘å­˜å‚¨ã€äº‘å‡½æ•°ï¼‰çš„ç‰©æ–™ï¼Œå°±å¯ä»¥å‚ä¸æ´»åŠ¨ï¼Œå¹¶æœ‰æœºä¼šèµ¢å¾—å¥–å“ã€‚ æ´»åŠ¨æ—¶é—´åŠè¯„å¥–æ–¹å¼ï¼š å³æ—¥èµ·è‡³ 2019 å¹´ 07 æœˆ 30 æ—¥ï¼Œæäº¤ç‰©æ–™å¹¶è¢«å®¡æ ¸é€šè¿‡ã€‚ 2019 å¹´ 8 æœˆ 1 æ—¥ - 8 æœˆ 10 æ—¥ï¼Œç«èµ›è¯„å§”å°†æ ¹æ®ç‰©æ–™çš„å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€å¤šç«¯å…¼å®¹æ€§ã€è¯„åˆ†ã€ä¸‹è½½é‡ã€Github Star ç­‰ç»¼åˆæƒé‡æ‰“åˆ†ï¼Œè¯„é€‰å‡ºæ­¤æ¬¡æ´»åŠ¨çš„è·å¥–è€…ã€‚ 2019 å¹´ 8 æœˆ 12 æ—¥ï¼Œå…¬å¸ƒè·å¥–åå•ï¼Œè·å¥–è€…å‘é€åœ°å€ç»™ Taro å›¢é˜Ÿï¼ŒTaro å›¢é˜ŸæŒ‰åœ°å€å‘æ”¾å¥–å“ã€‚ è¯´æ˜ï¼šç›®å‰ç‰©æ–™å¸‚åœºä¸Šç®¡ç†å‘˜å·²ç»ä¸Šä¼ çš„ç‰©æ–™æ¬¢è¿åŸä½œè€…è®¤é¢†ã€‚ï¼ˆåŸä½œè€…åªéœ€ä¸Šä¼ è‡ªå·±çš„ç‰©æ–™ï¼Œç®¡ç†å‘˜çœ‹åˆ°åä¼šæŠŠç®¡ç†å‘˜ä¸Šä¼ çš„åˆ é™¤ï¼‰ å¥–å“è®¾ç½®ï¼šä¸€ç­‰å¥–ï¼ˆ 1 åï¼‰ï¼š è…¾è®¯äº‘ä»£é‡‘åˆ¸3000å…ƒ è…¾è®¯äº‘ç²¾ç¾ç”µè„‘åŒ… 1 ä¸ªï¼ˆé¢œè‰²éšæœºï¼‰ å‡¹å‡¸å®éªŒå®¤çè— T æ¤ 1 ä»¶ äºŒç­‰å¥–ï¼ˆ 2 åï¼‰ï¼š è…¾è®¯äº‘ä»£é‡‘åˆ¸1500å…ƒ è…¾è®¯äº‘Qç‰ˆè“ç‰™éŸ³ç®± 1ä¸ªï¼ˆé¢œè‰²éšæœºï¼‰ å‡¹å‡¸å®éªŒå®¤çè— T æ¤ 1 ä»¶ ä¸‰ç­‰å¥–ï¼ˆ 3 åï¼‰ï¼š è…¾è®¯äº‘ä»£é‡‘åˆ¸500å…ƒ è…¾è®¯äº‘æŠ±æ• 1 ä¸ª å‡¹å‡¸å®éªŒå®¤çè— T æ¤ 1 ä»¶ å‚ä¸å¥–ï¼ˆä¸é™åé¢ï¼‰ï¼š è…¾è®¯äº‘å®šåˆ¶å…¬ä»” æˆ– äº¬ä¸œJoyå…¬ä»” 1 ä¸ª å…¶ä»– è·å¥–ä½œè€…å°†è¿›å…¥æ ¸å¿ƒå¼€å‘è€…äº¤æµç¾¤ï¼Œäº«å— Taro å’Œäº‘å¼€å‘æ ¸å¿ƒå¼€å‘è€…æä¾›ä¼˜å…ˆçš„æŠ€æœ¯æ”¯æŒå’Œ bug å—ç†ã€‚ ä¼˜ç§€çš„ä½œå“å’Œè·å¥–ä½œè€…å°†å¾—åˆ°å®£ä¼ æŠ¥é“ï¼Œæœ‰åŠ©äºä¸ºç®€å†èµ„è´¨æ·»å½©ã€‚ å‚èµ›æ–¹å¼ ç™»å½•ç‰©æ–™å¸‚åœº https://taro-ext.jd.com ç‚¹å‡» ã€Œå‘å¸ƒç‰©æ–™ã€ å¡«å…¥ç‰©æ–™ç›¸å…³ä¿¡æ¯å¹¶æäº¤å‘å¸ƒ ç‰©æ–™æœ‰å¤šç§ç±»å‹ï¼ŒåŒ…å«ç»„ä»¶ã€é¡¹ç›®æ¨¡ç‰ˆæˆ–é¡µé¢æ¨¡ç‰ˆã€JS SDKã€UIåº“ï¼Œéƒ½å¯ä»¥å‚ä¸æ´»åŠ¨ï¼Œè¦æ±‚ä½¿ç”¨ Taro å¼€å‘ å’Œ å°ç¨‹åºÂ·äº‘å¼€å‘ è¯„å§”äººå‘˜ Taro æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ å°ç¨‹åºäº‘å¼€å‘ æ ¸å¿ƒå¼€å‘å›¢é˜Ÿ Taro è”åˆå¼€å‘å›¢é˜Ÿ é»„è½¶ Zoom Â· å‰ç«¯æ¶æ„å¸ˆ è®¸ä¸–è¶… ç½‘æ˜“ä¸¥é€‰ Â· å‰ç«¯è´Ÿè´£äºº å´ç«‹å¥‡ ç¾çš„ Â· ç¾çš„å®˜æ–¹å•†åŸæ ¸å¿ƒå¼€å‘ Â· å°ç¨‹åºâ€˜è½»æ¾é—®å·â€™å¼€å‘è€… å…¶ä»–æ³¨æ„äº‹é¡¹ æäº¤çš„ç‰©æ–™éƒ½ä¼šç»è¿‡åå°å®¡æ ¸ å®Œæ•´æ€§ã€å¯ç”¨æ€§æ˜¯æ¯”è¾ƒé‡è¦çš„å‚è€ƒç»´åº¦ æ„Ÿè°¢æ„Ÿè°¢è…¾è®¯äº‘å°ä¼™ä¼´çš„æ”¯æŒï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¥–å“ï¼Œæ¬¢è¿å¤§å®¶ä½“éªŒè…¾è®¯äº‘äº§å“ã€‚ å£°æ˜æœ¬æ´»åŠ¨è§£é‡Šæƒå½’ Taro å›¢é˜Ÿå’Œè…¾è®¯äº‘å›¢é˜Ÿ ç›¸å…³ç½‘å€ï¼š Taro å®˜ç½‘ï¼šhttps://taro.jd.com Taro ç‰©æ–™å¸‚åœº: https://taro-ext.jd.com Taro ç¤¾åŒºï¼šhttps://taro-club.jd.com GitHub: https://github.com/NervJS/taro","pubDate":"Mon, 01 Jul 2019 13:00:00 GMT","guid":"https://aotu.io/notes/2019/07/01/taro-ext-action/","category":"å°ç¨‹åº"},{"title":"Taro ã€Œç‰©æ–™å¸‚åœºã€åŠã€Œäº¤æµç¤¾åŒºã€ æƒŠå–œä¸Šçº¿","link":"https://aotu.io/notes/2019/06/21/taro-ext-club/","description":"å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ Taro è‡ª 2018 å¹´ 6 æœˆå¼€æºä»¥æ¥ï¼Œä¸€ç›´å—åˆ°ä¸šç•Œçš„å¹¿æ³›å…³æ³¨å’Œæ”¯æŒã€‚ ç›®å‰ï¼ŒTaro GitHub star æ•°å·²ç»çªç ´äº† 1.8Wã€‚ä½œä¸ºç ”å‘å›¢é˜Ÿï¼Œæˆ‘ä»¬ä¸ºå–å¾—çš„æˆç»©æ„Ÿåˆ°æ¬£å–œï¼Œä½†ä¹Ÿå§‹ç»ˆä¸å¿˜åˆå¿ƒã€‚ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä»¬å¯¹ Taro æ¡†æ¶ä¸æ–­å®Œå–„å’Œä¼˜åŒ–ï¼Œè¿‘æœŸä¹Ÿå³å°†å‘å¸ƒå…¨æ–°çš„å¤§ç‰ˆæœ¬ï¼ˆTaro 1.3ï¼‰ï¼Œå°†æä¾›å¿«åº”ç”¨å’Œ QQ å°ç¨‹åºçš„å¼€å‘æ”¯æŒï¼ŒReact Hooks æ”¯æŒï¼ŒTaro Doctor ç­‰é‡å¤§ç‰¹æ€§ (è¯¦æƒ…)ã€‚è€Œä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿé©¬ä¸åœè¹„ï¼Œå¯¹ Taro è¿›è¡Œäº†å…¨æ–¹ä½çš„å‡çº§ï¼Œå¸Œæœ›ç»™å¤§å®¶å¸¦æ¥å°å°çš„æƒŠå–œã€‚ æˆ‘ä»¬ä¸ä»…å¸¦æ¥äº†ç„•ç„¶ä¸€æ–°çš„ Taro å®˜ç½‘ï¼Œè¿˜ä¸€æ¬¡æ€§æ¨å‡ºäº† Taro ç‰©æ–™å¸‚åœº å’Œ Taro å¼€å‘è€…ç¤¾åŒºã€‚å¸®åŠ© Taro å®ç°ä» å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ åˆ° å¤šç«¯ç»Ÿä¸€å¼€å‘è§£å†³æ–¹æ¡ˆ çš„è½¬å‹ã€‚ Taro ç‰©æ–™å¸‚åœºï¼šhttps://taro-ext.jd.com/Taro å¼€å‘è€…ç¤¾åŒºï¼šhttps://taro-club.jd.com/ ç‰©æ–™å¸‚åœº â€” â€œè®©æ¯ä¸€ä¸ªè½®å­äº§ç”Ÿä»·å€¼â€éšç€ Taro å—åˆ°è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ï¼Œè®¸å¤š Taro é¡¹ç›®ä¹Ÿæ­£å¼æŠ•å…¥ç”Ÿäº§ï¼Œæ¶µç›–åŒ…æ‹¬ ç”µå•†ã€å·¥å…·ã€æœåŠ¡ ç­‰å¤šç§ç±»å‹ï¼Œä¹Ÿæ¶Œç°äº†è®¸å¤šä¼˜ç§€æ¡ˆä¾‹ã€‚ ä½†é¡¹ç›®å¼€å‘ä¸­ï¼Œå¼€å‘è€…éƒ½ä¸å¾—ä¸é¢ä¸´é‡å¤çš„é€»è¾‘å¼€å‘ï¼Œå¯¹ç°æœ‰çš„é€»è¾‘è¿›è¡Œ Taro ä»£ç çš„é€‚é…ç­‰é—®é¢˜ï¼Œä¸¥é‡å½±å“å¼€å‘æ•ˆèƒ½ã€‚ å¼€æºçš„æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›é—­é—¨é€ è½¦ï¼Œæˆ‘ä»¬è¯šé‚€å¼€å‘è€…ä»¬å…±åŒæ‰“é€ å®Œæ•´çš„ å¤šç«¯é€‚é… ç”Ÿæ€ï¼Œä¸€èµ·æ²‰æ·€ä¼˜ç§€çš„å¼€å‘ç‰©æ–™ï¼Œè¿›è€Œèµ‹èƒ½æ›´å¤šçš„å¼€å‘è€…ã€‚ å› æ­¤ï¼Œç‰©æ–™å¸‚åœºåº”è¿è€Œç”Ÿã€‚ æˆ‘ä»¬å°†ç‰©æ–™åˆ’åˆ†ä¸º 4 ä¸ªå¤§ç±»ï¼šç»„ä»¶ã€UI åº“ã€æ¨¡ç‰ˆã€SDKã€‚æ¯ä¸ªç‰©æ–™éƒ½é…æœ‰è¯´æ˜æ–‡æ¡£ï¼Œå¹¶å¯¹æ”¯æŒçš„ç«¯è¿›è¡Œæ ‡è®°ï¼Œæ–¹ä¾¿æ¥å…¥ä½¿ç”¨ã€‚ ç‰©æ–™çš„è·å–æ–¹å¼ä¹Ÿç›¸å½“çµæ´»ï¼Œå¯é€šè¿‡ ZIP/TAR åŒ…ä¸‹è½½ï¼Œä¹Ÿå¯ç›´æ¥é€šè¿‡ä½œè€…æä¾›çš„ NPM æˆ– GitHub åœ°å€ä¸‹è½½ã€‚ æ­¤å¤–ï¼Œè¿˜å¯ä»¥å¯¹ç‰©æ–™è¿›è¡Œè¯„è®ºã€æ”¶è—å’Œæ‰“åˆ†ï¼Œè¿™å°†ä½œä¸ºè¡¡é‡ç‰©æ–™è´¨é‡çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œä¸ºç­›é€‰ç‰©æ–™æä¾›å‚è€ƒã€‚ åç»­ï¼Œæˆ‘ä»¬å°†åŠ å…¥æ‰“èµåŠŸèƒ½ï¼Œå¼€å‘è€…é€šè¿‡å‘å¸ƒä¼˜è´¨çš„ç‰©æ–™ï¼Œç»™ä¸åˆ«äººä¾¿åˆ©çš„åŒæ—¶ï¼Œè‡ªå·±å¯ä»¥æ”¶è·ä¸€å®šçš„å¥–åŠ±ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šä¸æ–­å®Œå–„ç‰©æ–™è´¨é‡è¯„å®šæ ‡å‡†ï¼Œåˆ¶å®šç”¨æˆ·ç§¯åˆ†ä½“ç³»ï¼Œç­‰ç­‰ã€‚è¿™éƒ½å°†ä¿ƒè¿›æ•´ä¸ªç”Ÿæ€æ›´åŠ å¥åº·è€Œå…¨é¢çš„å‘å±•ã€‚ å¦‚æœä½ å¯¹ç‰©æ–™å¸‚åœºæœ‰ä»»ä½•å»ºè®®ï¼Œæˆ–æœ‰æ„æ„¿å‚ä¸ç‰©æ–™å¸‚åœºçš„å»ºè®¾ï¼Œæ¬¢è¿éšæ—¶ä¸æˆ‘ä»¬è”ç³»ï¼štaro@jd.comã€‚ å¼€å‘è€…ç¤¾åŒº â€” â€œè®©æ¯ä¸€æ¬¡äº¤æµè¢«æ²‰æ·€â€ç›®å‰ï¼ŒTaro å…±æ”¶åˆ°äº† 2k å¤šä¸ª GitHub Issueï¼Œå¹¶å»ºç«‹äº†åå¤šä¸ªå¼€å‘äº¤æµå¾®ä¿¡ç¾¤ï¼ˆæ¯ä¸ªç¾¤ä¸Šé™äººæ•° 500ï¼‰ã€‚ æˆ‘ä»¬å¸Œæœ›ä¸å¼€å‘è€…è¿›è¡ŒåŠæ—¶ä¸”é¡ºç•…çš„äº¤æµï¼Œæ›´å¸Œæœ›æ¯ä¸€æ¬¡çš„é—®é¢˜ç­”ç–‘ã€ç»éªŒäº¤æµéƒ½èƒ½è¢«æ²‰æ·€ï¼Œåˆ†äº«ç»™æ›´å¤šå¼€å‘è€…ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬æ¸´æœ›å¼€å‘è€…ä¹‹é—´å¯ä»¥å¼€æ”¾äº’åŠ©ï¼Œå› æ­¤æˆ‘ä»¬æ‰“é€ äº†ä¸€ä¸ªå…¨æ–°çš„å¼€å‘è€…ç¤¾åŒºã€‚ å¼€å‘è€…å¯é€šè¿‡ç¤¾åŒºå¤šä¸ªç‰ˆå—äº¤æµé—®é¢˜ã€å…±äº«ç»éªŒã€å‘å¸ƒæ¡ˆä¾‹ï¼Œç­‰ç­‰ã€‚ Taro ç¤¾åŒºåŸºäº NodeBB å¼€å‘ï¼Œå…±è®¾æœ‰ 12 ä¸ªç‰ˆå—ï¼ŒåŒ…æ‹¬ Taroã€Taro UI åŠå…¶å¯¹åº”è½¬æ¢çš„ 8 ä¸ªç«¯ï¼Œæœ‰æ•ˆåœ°å¯¹å†…å®¹åšäº†å½’ç±»ã€‚æ­¤å¤–ï¼Œè¿˜è®¾ç½®äº† æ–°é—» ç‰ˆå—ï¼Œç”¨äºå‘å¸ƒ Taro æ–°é—»ã€å…¬å‘Šã€è§„åˆ’ç­‰ï¼›æ‹›è˜ ç‰ˆå—ï¼Œè®© Taro æ±‚èŒè€…å’Œæ‹›è˜è€…å¿«é€ŸåŒ¹é…ï¼›çŒæ°´ ç‰ˆå—ï¼Œæä¾›ä¸€ä¸ªå¥åº·æ–‡æ˜çš„äº¤æµï¼ˆyouï¼‰å¹³å°ã€‚ ä¸ºäº†åŠ å¼ºç¤¾åŒºå†…å®¹çš„ç®¡ç†ï¼Œæˆ‘ä»¬æ²‰æ·€äº†ä¸€å¥—è‡ªåŠ¨åŒ–çš„ç¤¾åŒºç®¡ç†è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡æ™ºèƒ½åˆ†æå¾®ä¿¡ç¾¤èŠè®°å½•ï¼Œå¯¹æœ‰æ•ˆä¿¡æ¯è¿›è¡Œç­›é€‰å’Œæ•´åˆï¼Œè‡ªåŠ¨åŒæ­¥è‡³ç¤¾åŒºï¼›å¹¶ä½¿ç”¨æ’ä»¶ GitHub Embed å°† GitHub Issue ç›´æ¥å¯¼å…¥ï¼Œä»è€Œæ‰“é€š GitHubã€å¾®ä¿¡ã€ç¤¾åŒº ä¸‰æ–¹å¹³å°ï¼Œæ—¨åœ¨è®©ç¤¾åŒºå†…å®¹æ›´åŠæ—¶ã€æ›´å…¨é¢ã€‚ å¦‚æœä½ å¯¹å¼€å‘è€…ç¤¾åŒºæœ‰ä»»ä½•å»ºè®®ï¼Œæˆ–æœ‰æ„æ„¿å‚ä¸ç¤¾åŒºçš„å»ºè®¾ä¸ç®¡ç†å·¥ä½œï¼Œæ¬¢è¿éšæ—¶ä¸æˆ‘ä»¬è”ç³»ï¼štaro@jd.comã€‚ å®˜ç½‘ â€” â€œå…¨æ–°é¢è²Œï¼Œè“„åŠ¿å¾…å‘â€å¼€æºè¿‘ä¸€å¹´ï¼ŒTaro æˆé•¿äº†è®¸å¤šã€‚ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬è¯•å›¾ç”¨ React æ¥å®ç°å¾®ä¿¡å°ç¨‹åºå¼€å‘ï¼›è€Œç°åœ¨ï¼Œæˆ‘ä»¬æœŸå¾…çš„æ˜¯ï¼ŒTaro åœ¨ç§»åŠ¨ç«¯å¼€å‘ã€å¤šç«¯é€‚é…é¢†åŸŸå¯ä»¥æ— å¾€ä¸åˆ©ã€‚ Taro æ­£åœ¨ç»å†ç”±å†…è€Œå¤–çš„æˆé•¿ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯¹ Taro å“ç‰Œè¿›è¡Œäº†å…¨æ–°å‡çº§ï¼Œæ—¨åœ¨èµ‹äºˆå…¶ç‹¬ç‰¹çš„å“ç‰Œé£æ ¼ã€‚ å…¨æ–°çš„å®˜ç½‘å°†ä½œä¸ºå“ç‰ŒåŒ–çš„ä¸€ä¸ªçª—å£ï¼Œä¸ä»…å¸¦æ¥äº†å…¨æ–°çš„è§†è§‰ä½“éªŒï¼Œå†…å®¹ä¸Šæ›´æ˜¯å¢åŠ äº†ç”Ÿæ€èƒ½åŠ›å’Œä¸šç•Œåˆä½œçš„å±•ç¤ºï¼Œå¹¶ä¸°å¯Œäº†åº”ç”¨æ¡ˆä¾‹å’Œå­¦ä¹ èµ„æ–™ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿…é€Ÿä¸Šæ‰‹ Taroã€‚ æ„¿æ™¯è¿™ä¸€åˆ‡ä»…ä»…æ˜¯èµ·æ­¥ï¼Œæœªæ¥æˆ‘ä»¬è¿˜å°†æ¨å‡ºæ›´å¤šå¹³å°ã€å·¥å…·ã€æœåŠ¡ï¼ŒåŠªåŠ›å°† Taro æ‰“é€ ä¸ºåå‰¯å…¶å®çš„ç§»åŠ¨ç«¯è§£å†³æ–¹æ¡ˆã€‚ å¸Œæœ›é€šè¿‡æˆ‘ä»¬çš„ç‚¹æ»´åŠªåŠ›ï¼Œåˆ›é€ å‡ºæ›´å¥½çš„ç§»åŠ¨ç«¯å¼€å‘ç¯å¢ƒï¼Œè®©å·¥ä½œå›å½’ç®€å•ã€è®©ç”Ÿæ´»æ—¥ç›Šä¸°æ»¡ã€‚ ç›¸å…³ç½‘å€ï¼š Taro å®˜ç½‘ï¼šhttps://taro.jd.com Taro ç‰©æ–™å¸‚åœº: https://taro-ext.jd.com Taro ç¤¾åŒºï¼šhttps://taro-club.jd.com GitHub: https://github.com/NervJS/taro","pubDate":"Fri, 21 Jun 2019 13:00:00 GMT","guid":"https://aotu.io/notes/2019/06/21/taro-ext-club/","category":"å°ç¨‹åº"},{"title":"Taro 1.3 éœ‡æ’¼å‡çº§ï¼šå…¨é¢æ”¯æŒ JSX è¯­æ³•å’Œ HOOKS","link":"https://aotu.io/notes/2019/06/13/taro-1-3/","description":"åœ¨ Taro 1.2 å‘å¸ƒä¹‹åï¼ŒTaro åœ¨ä¸šç•Œæ”¶è·äº†å·¨å¤§çš„èµèª‰å’Œå…³æ³¨ï¼šGitHub ä¸Š Star æ•°é‡è¶…è¿‡ 19000 ç²’ï¼ŒNPM ä¸‹è½½é‡ä¹Ÿç¨³å±…åŒç±»å¼€å‘æ¡†æ¶ä¹‹é¦–ï¼ŒåŒæ—¶ Taro å›¢é˜Ÿä¹Ÿå’Œè…¾è®¯ã€ç™¾åº¦ã€åä¸ºç­‰æ•°åå®¶ä¸šç•Œå·¨å¤´çš„ç ”å‘å›¢é˜Ÿå±•å¼€äº†æ·±å…¥å’Œæœ‰æ•ˆçš„åˆä½œã€‚ Taro 1.3 æ˜¯æˆ‘ä»¬é…é…¿æœ€ä¹…çš„ç‰ˆæœ¬ï¼šç»å†äº†æ¨ªè·¨ 6 ä¸ªæœˆçš„å¼€å‘æ—¶é—´ï¼Œè¿‘ 2000 æ¬¡çš„ä»£ç æäº¤ï¼Œè¿‘ç™¾ä½å¼€å‘è€…çš„å…±åŒå‚ä¸ã€‚æˆ‘ä»¬ç»ˆäºåœ¨ä»Šå¤©éª„å‚²åœ°å‘å¸ƒäº† Taro 1.3ã€‚ Taro 1.3 çš„ç‰¹æ€§åŒ…æ‹¬ä½†ä¸é™äºï¼š æ”¯æŒå¿«åº”ç”¨å’Œ QQ å°ç¨‹åºçš„å¼€å‘ å…¨é¢æ”¯æŒ JSX è¯­æ³•å’Œ React Hooks å¤§å¹…æé«˜ H5 æ€§èƒ½å’Œå¯ç”¨æ€§ Taro Doctor æ”¯æŒå¿«åº”ç”¨å’Œ QQ å°ç¨‹åºçš„å¼€å‘å¿«åº”ç”¨çš„å¼€å‘æ¨¡å¼éå¸¸ç‰¹åˆ«ï¼Œå®ƒçš„ APIã€ç»„ä»¶ç³»ç»Ÿã€ç»„ä»¶åº“å’Œå…¶ä»–å°ç¨‹åºç«¯å·®å¼‚éå¸¸å¤§ï¼Œå¹¶ä¸”å¿«åº”ç”¨åªæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå„å®¶å®‰å“å‚å•†å¯¹è¿è¡Œæ—¶çš„å®ç°ä¹Ÿå„ä¸ç›¸åŒã€‚è€Œè¿™å—ã€Œç¡¬éª¨å¤´ã€ç»ˆäºä¹Ÿè¢« Taro å•ƒä¸‹äº†ã€‚ QQ å°ç¨‹åºä½œä¸ºæ–°å…´çš„å°ç¨‹åºç±»å®¹å™¨ï¼Œå¤§å®¶æ™®éå¯¹å®ƒçŸ¥ä¹‹ç”šå°‘ï¼Œä½† Taro ä¹Ÿç‡å…ˆå®ç°äº†å¯¹ QQ å°ç¨‹åºçš„æ”¯æŒã€‚ æ”¯æŒå¿«åº”ç”¨å’Œ QQ å°ç¨‹åºæ„å‘³ç€ Taro çœŸæ­£å¯¹ä¸šç•Œä¸»æµå°ç¨‹åºå®ç°äº†ã€Œå…¨è¦†ç›–ã€ï¼Œä¸ç®¡ä½ çš„ä¸šåŠ¡è¦æ”¯æŒå“ªä¸€ä¸ªå°ç¨‹åºç«¯ï¼Œåªè¦ç»´æŠ¤ä¸€å¥—ä»£ç ï¼ŒTaro å°±èƒ½ç”Ÿæˆå¯¹åº”å°ç¨‹åºå¹³å°çš„ä»£ç ã€‚åŒæ—¶ Taro ä¹Ÿæˆä¸ºäº†ä¸šç•Œé¦–ä¸ªåŒæ—¶æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€ç™¾åº¦æ™ºèƒ½å°ç¨‹åºã€å­—èŠ‚è·³åŠ¨å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€å¿«åº”ç”¨ã€QQ å°ç¨‹åºå…± 6 ç«¯å°ç¨‹åºçš„å¼€å‘æ¡†æ¶ã€‚ å…¨é¢æ”¯æŒ JSX è¯­æ³•å’Œ React Hooksä½œä¸ºä½¿ç”¨ React å’Œ JSX è¯­æ³•çš„å¼€å‘æ¡†æ¶ï¼ŒTaro æ—©æœŸçš„ç‰ˆæœ¬åœ¨ç¼–è¯‘å™¨å’Œç¼–è¾‘å™¨æ£€æŸ¥å·¥å…·éƒ½å¯¹è¯­æ³•åšäº†é«˜å¼ºåº¦çš„é™åˆ¶ã€‚è€Œåœ¨ Taro 1.3 ä¸­ï¼Œå¼€å‘è€…å¯ä»¥å……åˆ†å‘æŒ¥è‡ªå·±çš„åˆ›é€ åŠ›å’Œæƒ³è±¡åŠ›ï¼Œå¯ä»¥ä»»æ„åœ°å†™ if-elseï¼Œå¯ä»¥ä»»æ„åœ°å†™åŒ¿åå‡½æ•°ï¼Œå¯ä»¥æŠŠ JSX æ”¾åœ¨ç±»å‡½æ•°ä¸­ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨æ™®é€šå‡½æ•°ä¸­ï¼Œç­‰ç­‰ã€‚åªè¦ç¼–è¯‘å™¨å’Œå’Œ ESLint ä¸æŠ¥é”™ï¼Œå°±å¯ä»¥è¿™ä¹ˆå†™ã€‚ è™½ç„¶ React Hooks æ­£å¼ç¨³å®šçš„æ—¶é—´å¹¶ä¸é•¿ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªç‰¹æ€§èƒ½æœ‰æ•ˆåœ°ç®€åŒ–å¼€å‘æ¨¡å¼ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œå¼€å‘ä½“éªŒã€‚å³ä¾¿ Hooks çš„ç”Ÿæ€å’Œæœ€ä½³å®è·µè¿˜å°šæœªå®Œå–„ï¼Œä½†æˆ‘ä»¬ç›¸ä¿¡æœªæ¥ Hooks ä¼šæˆä¸º React å¼€å‘æ¨¡å¼çš„ä¸»æµï¼Œä¹Ÿä¼šæ·±åˆ»åœ°å½±å“å…¶å®ƒæ¡†æ¶æœªæ¥çš„ API æ„æˆã€‚æ‰€ä»¥æˆ‘ä»¬ä¼˜å…ˆæŠŠ React Hooks å¸¦åˆ°äº† Taro ä¸­ï¼Œè¿˜å†™äº†ä¸¤ä¸ªå°ä¾‹å­å±•ç¤ºå¦‚ä½•åœ¨ Taro ä¸­ä½¿ç”¨ Hooksï¼š V2EX: https://github.com/NervJS/taro-v2ex-hooks TodoMVC: https://github.com/NervJS/taro-todomvc-hooks å…¨æ–°ç”Ÿå‘½å‘¨æœŸå’Œ Context APIåœ¨ Taro 1.3 æˆ‘ä»¬è¿˜å®ç°äº† React 16 çš„æ–°ç”Ÿå‘½å‘¨æœŸå‡½æ•° static getDerivedStateFromProps() å’Œ getSnapshotBeforeUpdate()ã€‚å½“æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ³¨å…¥åˆ°ç±»ç»„ä»¶æ—¶ï¼Œè€çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°†ä¸ä¼šè¢«è°ƒç”¨ï¼Œæ²¡æœ‰ä½¿ç”¨æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åˆ™ä¸ä¼šå½±å“åŸæœ‰ç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨ã€‚å°±å¤šæ•°æƒ…å†µè€Œè¨€ï¼Œæˆ‘ä»¬æ›´æ¨èä½¿ç”¨æ–°çš„ç”Ÿå‘½å‘¨æœŸæ¥æ„å»ºä½ çš„ç±»ç»„ä»¶ï¼Œå› ä¸ºè¿™æ ·èƒ½å‡å°‘ä¸€æ¬¡æ¸²æŸ“å’Œæ›´æ–°çš„å¼€é”€ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚ Taro 1.3 è¿˜å®ç°äº† React 16 çš„ createContextã€contextType å’Œ useContext APIã€‚æ–° Context é€šè¿‡å£°æ˜å¼çš„ API æ¥ä¼ é€’ç»„ä»¶çš„æ›´æ–°ï¼Œä½¿å¾—Taro è·¨ç»„ä»¶é€šä¿¡å’Œå…±äº«çŠ¶æ€æ›´ä¸ºç›´è§‚ã€‚åŒæ—¶ï¼Œä¾‹å¦‚ react-redux è¿™æ ·çš„çƒ­é—¨åº“ä¹Ÿæ­£åœ¨åŸºäº Context å’Œ Hooks è¿›è¡Œé‡æ„ï¼Œæˆ‘ä»¬ä¹Ÿéå¸¸æœŸå¾…ä¸ç¤¾åŒºä¸€èµ·æ¢ç´¢ React/Taro æ–°çš„å¼€å‘ä¸è®¾è®¡æ¨¡å¼ã€‚ å¤§å¹…æé«˜ H5 æ€§èƒ½å’Œå¯ç”¨æ€§ä½œä¸ºé™¤å¾®ä¿¡å°ç¨‹åºä¹‹å¤–éœ€æ±‚é‡æœ€é«˜çš„ç«¯ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½éƒ¨ç½²äº†é‡è¦çš„å¼€å‘æˆ˜åŠ›åœ¨ H5 ç«¯ã€‚è€Œåœ¨ Taro 1.3 ä¸­ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº†ç¼–è¯‘ä»£ç çš„æ–¹å¼ï¼Œå®ç°äº†èµ„æºæœ€å°å¼•å…¥å’ŒæŒ‰éœ€å¼•å…¥ï¼Œå°†åŸæœ‰æœ€å°é¡¹ç›®çš„ç¼–è¯‘å¤§å°é™ä½äº† 80% å·¦å³ã€‚è¿™å¯¹äºç½‘ç»œçŠ¶å†µä¸ä½³çš„ H5 ç«¯æ— ç–‘æ˜¯å·¨å¤§çš„æå‡ã€‚ H5 ç«¯çš„ API æ•°é‡å’Œè´¨é‡ä¹Ÿå¾—åˆ°äº†å¤§å¹…åœ°å¢é•¿ï¼ŒTaro 1.3 æ–°å¢äº† 28 ä¸ª H5 APIï¼Œè§£å†³äº†ä¸Šç™¾ä¸ª H5 ç›¸å…³çš„ issueã€‚ å…³äº H5 ç«¯æ€§èƒ½æ›´æ„Ÿå…´è¶£å¯ä»¥æŸ¥çœ‹æ–‡ç« :ã€Šå†³æˆ˜æ€§èƒ½ä¹‹å·… - Taro H5 è½¬æ¢ä¸ä¼˜åŒ–å‡çº§ã€‹ã€‚ Taro Doctoræˆ‘ä»¬è¿˜ä» Flutter Doctor ä¸­å¾—åˆ°å¯å‘ï¼Œå¼€å‘äº† Taro Doctorã€‚ Taro Doctor å°±åƒä¸€ä¸ªåŒ»ç”Ÿä¸€æ ·ï¼Œå¯ä»¥è¯Šæ–­é¡¹ç›®çš„ä¾èµ–ã€è®¾ç½®ã€ç»“æ„ï¼Œä»¥åŠä»£ç çš„è§„èŒƒæ˜¯å¦å­˜åœ¨é—®é¢˜ï¼Œå¹¶å°è¯•ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚ ä½†å’ŒçœŸæ­£çš„åŒ»ç”Ÿä¸ä¸€æ ·ï¼ŒTaro Doctor ä¸éœ€è¦æ’é˜ŸæŒ‚å·ï¼Œä¹Ÿä¸ç”¨èŠ±é’±ã€‚ä½ åªéœ€è¦åœ¨ç»ˆç«¯è¿è¡Œå‘½ä»¤ï¼štaro doctorï¼Œå°±åƒå›¾é‡Œä¸€æ ·ï¼š è¿˜æœ‰æ›´å¤šé™¤äº†ä»¥ä¸Šçš„ç‰¹æ€§ä¹‹å¤–ï¼ŒTaro 1.3 è¿˜åšäº†è®¸å¤šé¢å¤–çš„å·¥ä½œï¼Œè¿™äº›å·¥ä½œå¯èƒ½å¯¹æ—¥å¸¸å¼€å‘å½±å“ä¸å¤§ï¼Œä½†ä¸º Taro çš„ç¨³å®šæ€§ä»¥åŠå°†æ¥æ›´å¤šçš„å¯èƒ½æ€§å¤¯å®äº†åŸºç¡€ï¼š ç»„ä»¶ä¼ å‚ï¼ˆpropsï¼‰ç³»ç»Ÿé‡æ„åœ¨ Taro 1.0 åˆ° 1.2 çš„å°ç¨‹åºç«¯ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨åŸç”Ÿå°ç¨‹åºæ¡†æ¶çš„ç»„ä»¶ä¼ å‚ç³»ç»Ÿï¼Œä½†å°ç¨‹åºç»„ä»¶ç³»ç»Ÿæ²¡åŠæ³•ä¼ é€’å‡½æ•°çš„å€¼ï¼Œä¹Ÿæ— æ³•ä¼ é€’éå…·åå‚æ•°ï¼Œå¹¶ä¸”å„å°ç¨‹åºç»„ä»¶çš„å®ç°å„ä¸ç›¸åŒã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œåœ¨ Taro 1.3 ä¸­æˆ‘ä»¬è‡ªå·±å®ç°äº†ä¸€å¥—ç»„ä»¶ä¼ å‚ç³»ç»Ÿã€‚æ–°ç³»ç»Ÿä¼šä½¿å¾—ä¼ å‚ç›¸å…³çš„ä»£ç æ›´ä¸ºå¯é ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æˆ‘ä»¬æ”¯æŒæ›´å¤š JSX è¯­æ³•çš„åŸºç¡€ã€‚ å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰ é‡æ„åœ¨ Taro 1.3ï¼Œæˆ‘ä»¬å°†å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ TypeScript è¿›è¡Œäº†é‡æ„å¹¶é€æ­¥æ·»åŠ æ›´å¤šæµ‹è¯•ç”¨ä¾‹ã€‚é‡æ„ä¹‹åæˆ‘ä»¬å¯ä»¥æ›´åŠ å¤§èƒ†åœ°ä¸º CLI æ·»åŠ æ–°åŠŸèƒ½ï¼Œæ›¿æ¢è€æ—§ä¾èµ–ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿä¼šå°† CLI çš„åŠŸèƒ½ä»¥ API çš„å½¢å¼æš´éœ²å‡ºæ¥ï¼Œèµ‹èƒ½ç»™å…¶å®ƒå¼€å‘å·¥å…·å’Œæˆ‘ä»¬çš„åˆä½œä¼™ä¼´ã€‚ ç§»åŠ¨ç«¯å®¹å™¨æ›´æ¢æˆ‘ä»¬å’Œäº¬ä¸œçš„ ARES) å›¢é˜Ÿåˆä½œï¼ŒæŠŠåŸæœ‰çš„ç§»åŠ¨ç«¯å®¹å™¨ expo æ›¿æ¢ä¸ºæ·±åº¦å®šåˆ¶çš„ JDReactã€‚JDReact å¤§å¹…æå‡äº† Taro ç§»åŠ¨ç«¯çš„å¯æ§æ€§ï¼Œå¯ä»¥è®©æˆ‘ä»¬çªç ´ expo çš„æ£è‚˜ï¼Œå¼•å…¥åŸç”Ÿç§»åŠ¨ç«¯ä»£ç ï¼Œæä¾›å®šåˆ¶åŠŸèƒ½å’Œ APIï¼Œå¹¶ä¸”æ€§èƒ½å’Œç¨³å®šæ€§çš„è¡¨ç°éƒ½ä¼šæ›´å¥½ã€‚ æ”¯æŒå¼€å‘å°ç¨‹åºæ’ä»¶å°ç¨‹åºæ’ä»¶æ˜¯å°ç¨‹åºå¸¦æ¥çš„ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ç‰¹æ€§ï¼Œå¯ä»¥æå¤§åœ°æé«˜ä»£ç å¤ç”¨ç‡ï¼Œé™ä½åŒ…å¤§å°ï¼Œä¸ºå¼€å‘è€…å¸¦æ¥è¯¸å¤šä¾¿åˆ©ï¼Œç›®å‰å¾®ä¿¡ã€æ”¯ä»˜å®å°ç¨‹åºå·²ç»æ”¯æŒæ’ä»¶åŠŸèƒ½ã€‚è€Œä» 1.3 ç‰ˆæœ¬å¼€å§‹ï¼ŒTaro æ”¯æŒç›´æ¥å¼€å‘å¾®ä¿¡ä¸æ”¯ä»˜å®å°ç¨‹åºæ’ä»¶ï¼Œè¿™æ„å‘³ç€ Taro é¡¹ç›®å°†å’Œå°ç¨‹åºæ’ä»¶æ— ç¼å¯¹æ¥ï¼Œä¸å†æœ‰å¼€å‘æ¨¡å¼åˆ‡æ¢çš„æˆæœ¬ã€‚ æ”¯æŒã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€ã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€æ˜¯å¾®ä¿¡å°ç¨‹åºè”åˆè…¾è®¯äº‘å›¢é˜Ÿæä¾›çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒæ˜¯ä¸€æ¬¾ Serverless æœåŠ¡ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ã€Œäº‘å‡½æ•°ã€ã€ã€Œäº‘æ•°æ®åº“ã€å’Œã€Œäº‘æ–‡ä»¶å­˜å‚¨ã€ä¸‰å¤§èƒ½åŠ›ï¼Œå¹¶ä¸”å°†è¿™äº›èƒ½åŠ›å°è£…æˆç‰¹å®šçš„æ¥å£ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå¾®ä¿¡å°ç¨‹åºçš„åç«¯æœåŠ¡ã€‚ä¸ºäº†è®© Taro å¼€å‘è€…èƒ½å¤Ÿäº«å—åˆ°ã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€çš„èƒ½åŠ›ï¼ŒTaro ä¹ŸåŠ å…¥äº†å¯¹ã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€çš„æ”¯æŒï¼Œä¸ºã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€æä¾›äº†åˆå§‹åŒ–æ¨¡æ¿ï¼Œå¹¶ä¸”å°†å°ç¨‹åºäº‘ç›¸å…³çš„ API è¿›è¡Œäº†å°è£…ï¼Œæ–¹ä¾¿å¼€å‘è€…è¿›è¡Œä½¿ç”¨ã€‚åŒæ—¶ï¼Œã€Œå°ç¨‹åºÂ·äº‘å¼€å‘ã€å·²æä¾› H5 ç‰ˆæœ¬çš„ SDKï¼ŒTaro æ”¯æŒå°†å°ç¨‹åºã€H5 çš„è°ƒç”¨æ–¹å¼è¿›è¡Œç»Ÿä¸€å°è£…ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ‰“é€  Serverless çš„å¤šç«¯åº”ç”¨ã€‚ å‡çº§å…¼å®¹æ€§æ­£å¦‚å‰é¢æ‰€æåˆ°ï¼ŒTaro 1.3 æ˜¯ä¸€ä¸ªé…é…¿æ—¶é—´æœ€ä¹…ï¼Œæ‹¥æœ‰ç‰¹æ€§æœ€å¤šçš„å¤§ç‰ˆæœ¬ï¼Œå¯¹ Taro åº•å±‚ä¹Ÿè¿›è¡Œäº†ä¸å°çš„é‡æ„ï¼Œæ‰€ä»¥ï¼Œ1.3 ç‰ˆæœ¬çš„å‡çº§å¸¦äº†ä»¥ä¸‹ 2 ä¸ªå…¼å®¹æ€§é—®é¢˜ã€‚ JSX ä¸­çš„äº‹ä»¶ç›‘å¬å‡½æ•°å¿…é¡»ç»‘å®šä½œç”¨åŸŸåœ¨ä¹‹å‰çš„ Taro ç‰ˆæœ¬ä¸­ï¼ŒJSX ä¸­ç»‘å®šçš„äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œæ˜¯å¯ä»¥ä¸éœ€è¦ç»‘å®šä»»ä½•ä½œç”¨åŸŸï¼Œå°±èƒ½è®¿é—®åˆ°ç»„ä»¶å®ä¾‹çš„ï¼Œä¾‹å¦‚ 123456789101112131415161718192021import Taro, &#123; Component, Config &#125; from '@tarojs/taro'import &#123; View, Button &#125; from '@tarojs/components'export default class Test extends Component &#123; state = &#123; hello: 'noclick' &#125; clickHandler () &#123; this.setState(&#123; hello: 'click' &#125;) &#125; render () &#123; return ( &lt;View className=&#123;styles.index&#125;&gt; &lt;Button onClick=&#123;this.clickHandler&#125;&gt;ç‚¹å‡»&lt;/Button&gt; &lt;/View&gt; ) &#125;&#125; ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ&lt;Button /&gt; æŒ‰é’®ç»‘å®šçš„ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­æ˜¯èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œçš„ï¼ŒTaro ä¼šé»˜è®¤å°† clickHandler çš„ä½œç”¨åŸŸç»‘å®šä¸ºå½“å‰ç»„ä»¶å®ä¾‹ï¼Œä½†æ˜¯è¿™å¹¶ä¸ç¬¦åˆ React ä¸­çš„å®é™…æƒ…å†µï¼Œæ‰€ä»¥ï¼Œåœ¨ 1.3 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸€é—®é¢˜è¿›è¡Œäº†ä¿®å¤ï¼Œç°åœ¨ JSX ä¸­çš„äº‹ä»¶ç›‘å¬å‡½æ•°å¿…é¡»ç»‘å®šä½œç”¨åŸŸï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚ ä¸Šè¿°ä»£ç ä¸­ JSX éƒ¨åˆ†å¯ä»¥ä¿®æ”¹ä¸ºå¦‚ä¸‹ 1234567render () &#123; return ( &lt;View className=&#123;styles.index&#125;&gt; &lt;Button onClick=&#123;this.clickHandler.bind(this)&#125;&gt;ç‚¹å‡»&lt;/Button&gt; &lt;/View&gt; )&#125; æˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨ constructor ä¸­å°†å‡½æ•°è¿›è¡Œæå‰ç»‘å®šä½œç”¨åŸŸï¼Œ 1234567891011constructor () &#123; this.clickHandlerBind = this.clickHandler.bind(this)&#125;render () &#123; return ( &lt;View className=&#123;styles.index&#125;&gt; &lt;Button onClick=&#123;this.clickHandlerBind&#125;&gt;ç‚¹å‡»&lt;/Button&gt; &lt;/View&gt; )&#125; è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯ï¼Œå°† clickHandler å†™æˆç®­å¤´å‡½æ•°ï¼Œè¿™ç§æ–¹å¼åœ¨æ–°æ—§ç‰ˆæœ¬ä¸­å‡å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ æš‚æ—¶æ— æ³•åœ¨åŸç”Ÿåº”ç”¨ä¸­ä½¿ç”¨ Taro ç»„ä»¶åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ Taro ç¼–è¯‘åçš„ç»„ä»¶æ˜¯å¯ä»¥ç›´æ¥ç”¨åœ¨åŸç”Ÿé¡¹ç›®ä¸­çš„ï¼Œä»¥æå‡å¤ç”¨æ€§ï¼Œä½† 1.3 ç‰ˆæœ¬ç”±äºç»„ä»¶çš„ props ç³»ç»Ÿå½»åº•é‡æ„äº†ï¼Œå‡çº§ 1.3 åæš‚æ—¶æ— æ³•åœ¨åŸç”Ÿé¡¹ç›®ä¸­ä½¿ç”¨ Taro ç»„ä»¶ï¼Œæˆ‘ä»¬æ­£åœ¨ç§¯æå¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­å°†ç»§ç»­æ”¯æŒè¿™ä¸€ç‰¹æ€§ã€‚ åœ¨æ¡†æ¶ä¹‹å¤–Taro å›¢é˜Ÿé™¤äº† 1.3 ç‰ˆæœ¬ä¸­å®Œå–„å¤šç«¯é€‚é…ï¼Œæé«˜æ¡†æ¶å¼€å‘ä½“éªŒå’Œå¼€å‘æ•ˆç‡ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨ç”Ÿæ€å»ºè®¾ä¸Šä»˜å‡ºäº†è¯¸å¤šåŠªåŠ›ï¼Œå…¶ä¸­åŒ…æ‹¬å…¨æ–°å‡çº§çš„å®˜ç½‘ï¼Œç‰©æ–™/æ’ä»¶å¸‚åœºï¼Œç‹¬ç«‹çš„ç¤¾åŒº/è®ºå›ã€‚ æˆ‘ä»¬è®¤ä¸ºï¼ŒTaro èƒ½å¤Ÿå®‰èº«ç«‹å‘½çš„æœ¬é’±æ˜¯ä½œä¸ºå¼€å‘æ¡†æ¶çš„ç¡¬å®åŠ›ï¼Œä½†çœŸæ­£å†³å®š Taro èƒ½èµ°å¤šè¿œå´æ˜¯ç”Ÿæ€ã€ç¤¾åŒºä»¥åŠåˆä½œä¼™ä¼´ã€‚æˆ‘ä»¬åœ¨ 1.3 å·²ç»æŠŠå®åŠ›å¤§å¹…å¢å¼ºï¼Œç°åœ¨é‚€è¯·ä½ ä¸€èµ·å‚ä¸æˆ–è§‚å¯Ÿ Taro åœ¨ç”Ÿæ€å’Œç¤¾åŒºçš„å»ºè®¾ï¼š Taro å®˜ç½‘ï¼šhttps://taro.jd.com Taro ç‰©æ–™å¸‚åœº: https://taro-ext.jd.com Taro ç¤¾åŒºï¼šhttps://taro-club.jd.com GitHub: https://github.com/NervJS/taro","pubDate":"Thu, 13 Jun 2019 06:00:00 GMT","guid":"https://aotu.io/notes/2019/06/13/taro-1-3/","category":"å°ç¨‹åº"},{"title":"å°ç¨‹åºæ¡†æ¶å…¨é¢æµ‹è¯„","link":"https://aotu.io/notes/2019/03/12/mini-program-framework-full-review/","description":"æœ€è¿‘å‰ç«¯å±Šå¤šç«¯æ¡†æ¶é¢‘å‡ºï¼Œç›¸ä¿¡å¾ˆå¤šæœ‰ä»£ç å¤šç«¯è¿è¡Œéœ€æ±‚çš„å¼€å‘è€…éƒ½ä¼šäº§ç”Ÿä¸€äº›ç–‘æƒ‘ï¼šè¿™äº›æ¡†æ¶éƒ½æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿåˆ°åº•åº”è¯¥ç”¨å“ªä¸ªï¼Ÿ ä½œä¸º Taro å¼€å‘å›¢é˜Ÿä¸€å‘˜ï¼Œç¬”è€…æƒ³åœ¨æœ¬æ–‡å°½é‡ç«™åœ¨ä¸€ä¸ªå®¢è§‚å…¬æ­£çš„è§’åº¦å»è¯„ä»·å„ä¸ªæ¡†æ¶çš„é€‰å‹å’Œä¼˜åŠ£ã€‚ä½†å®¥äºåˆ©ç›Šç›¸å…³ï¼Œæœ¬æ–‡çš„è§‚ç‚¹å¾ˆå¯èƒ½æ˜¯å¸¦æœ‰åå‘æ€§çš„ï¼Œå¤§å®¶å¯ä»¥å¸¦ç€æ‰¹åˆ¤çš„çœ¼å…‰å»çœ‹å¾…ï¼Œæƒå½“æŠ›ç –å¼•ç‰ã€‚ é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬åœ¨è®¨è®ºå¤šç«¯æ¡†æ¶æ—¶ï¼Œæˆ‘ä»¬åœ¨è°ˆè®ºä»€ä¹ˆï¼š å¤šç«¯ç¬”è€…ä»¥ä¸ºï¼Œç°åœ¨æµè¡Œçš„å¤šç«¯æ¡†æ¶å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸‰ç±»ï¼š 1. å…¨åŒ…å‹è¿™ç±»æ¡†æ¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä»åº•å±‚çš„æ¸²æŸ“å¼•æ“ã€å¸ƒå±€å¼•æ“ï¼Œåˆ°ä¸­å±‚çš„ DSLï¼Œå†åˆ°ä¸Šå±‚çš„æ¡†æ¶å…¨éƒ¨ç”±è‡ªå·±å¼€å‘ï¼Œä»£è¡¨æ¡†æ¶æ˜¯ Qt å’Œ Flutterã€‚è¿™ç±»æ¡†æ¶ä¼˜ç‚¹éå¸¸æ˜æ˜¾ï¼šæ€§èƒ½ï¼ˆçš„ä¸Šé™ï¼‰é«˜ï¼›å„å¹³å°æ¸²æŸ“ç»“æœä¸€è‡´ã€‚ç¼ºç‚¹ä¹Ÿéå¸¸æ˜æ˜¾ï¼šéœ€è¦å®Œå…¨é‡æ–°å­¦ä¹  DSLï¼ˆQML/Dartï¼‰ï¼Œä»¥åŠéš¾ä»¥é€‚é…ä¸­å›½ç‰¹è‰²çš„ç«¯ï¼šå°ç¨‹åºã€‚ è¿™ç±»æ¡†æ¶æ˜¯æœ€åŸå§‹ä¹Ÿæ˜¯æœ€çº¯æ­£çš„çš„å¤šç«¯å¼€å‘æ¡†æ¶ï¼Œç”±äºåº•å±‚åˆ°ä¸Šå±‚æ¯ä¸ªç¯èŠ‚éƒ½æŒæ¡åœ¨è‡ªå·±æ‰‹é‡Œï¼Œä¹Ÿèƒ½æœ€å¤§å¯èƒ½åœ°å»ä¿è¯å¼€å‘å’Œè·¨ç«¯ä½“éªŒä¸€è‡´ã€‚ä½†å®ƒä»¬çš„æ¡†æ¶ç ”å‘æˆæœ¬å·¨å¤§ï¼Œæ¸²æŸ“å¼•æ“ã€å¸ƒå±€å¼•æ“ã€DSLã€ä¸Šå±‚æ¡†æ¶æ¯ä¸ªéƒ¨åˆ†éƒ½éœ€è¦å¤§é‡äººåŠ›å¼€å‘ç»´æŠ¤ã€‚ 2. Web æŠ€æœ¯å‹è¿™ç±»æ¡†æ¶æŠŠ Web æŠ€æœ¯ï¼ˆJavaScriptï¼ŒCSSï¼‰å¸¦åˆ°ç§»åŠ¨å¼€å‘ä¸­ï¼Œè‡ªç ”å¸ƒå±€å¼•æ“å¤„ç† CSSï¼Œä½¿ç”¨ JavaScript å†™ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç”¨æµè¡Œçš„å‰ç«¯æ¡†æ¶ä½œä¸º DSLï¼Œå„ç«¯åˆ†åˆ«ä½¿ç”¨å„è‡ªçš„åŸç”Ÿç»„ä»¶æ¸²æŸ“ã€‚ä»£è¡¨æ¡†æ¶æ˜¯ React Native å’Œ Weexï¼Œè¿™æ ·åšçš„ä¼˜ç‚¹æœ‰ï¼š å¼€å‘è¿…é€Ÿ å¤ç”¨å‰ç«¯ç”Ÿæ€ æ˜“äºå­¦ä¹ ä¸Šæ‰‹ï¼Œä¸ç®¡å‰ç«¯åç«¯ç§»åŠ¨ç«¯ï¼Œå¤šå¤šå°‘å°‘éƒ½ä¼šä¸€ç‚¹ JSã€CSS ç¼ºç‚¹æœ‰ï¼š äº¤äº’å¤æ‚æ—¶éš¾ä»¥å†™å‡ºé«˜æ€§èƒ½çš„ä»£ç ï¼Œè¿™ç±»æ¡†æ¶çš„è®¾è®¡å°±å¿…ç„¶å¯¼è‡´ JS å’Œ Native ä¹‹é—´éœ€è¦é€šä¿¡ï¼Œç±»ä¼¼äºæ‰‹åŠ¿æ“ä½œè¿™æ ·é¢‘ç¹åœ°è§¦å‘é€šä¿¡å°±å¾ˆå¯èƒ½ä½¿å¾— UI æ— æ³•åœ¨ 16ms å†…åŠæ—¶ç»˜åˆ¶ã€‚React Native æœ‰ä¸€äº›å£°æ˜å¼çš„ç»„ä»¶å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½†å£°æ˜å¼çš„å†™æ³•å¾ˆéš¾æ»¡è¶³å¤æ‚äº¤äº’çš„éœ€æ±‚ã€‚ ç”±äºæ²¡æœ‰æ¸²æŸ“å¼•æ“ï¼Œä½¿ç”¨å„ç«¯çš„åŸç”Ÿç»„ä»¶æ¸²æŸ“ï¼Œç›¸åŒä»£ç æ¸²æŸ“çš„ä¸€è‡´æ€§æ²¡æœ‰ç¬¬ä¸€ç§é«˜ã€‚ 3. JavaScript ç¼–è¯‘å‹è¿™ç±»æ¡†æ¶å°±æ˜¯æˆ‘ä»¬è¿™ç¯‡æ–‡ç« çš„ä¸»è§’ä»¬ï¼šTaroã€WePY ã€uni-app ã€ mpvue ã€ chameleonï¼Œå®ƒä»¬çš„åŸç†ä¹Ÿéƒ½å¤§åŒå°å¼‚ï¼šå…ˆä»¥ JavaScript ä½œä¸ºåŸºç¡€é€‰å®šä¸€ä¸ª DSL æ¡†æ¶ï¼Œä»¥è¿™ä¸ª DSL æ¡†æ¶ä¸ºæ ‡å‡†åœ¨å„ç«¯åˆ†åˆ«ç¼–è¯‘ä¸ºä¸åŒçš„ä»£ç ï¼Œå„ç«¯åˆ†åˆ«æœ‰ä¸€ä¸ªè¿è¡Œæ—¶æ¡†æ¶æˆ–å…¼å®¹ç»„ä»¶åº“ä¿è¯ä»£ç æ­£ç¡®è¿è¡Œã€‚ è¿™ç±»æ¡†æ¶æœ€å¤§ä¼˜ç‚¹å’Œåˆ›é€ çš„æœ€å¤§åŸå› å°±æ˜¯å°ç¨‹åºï¼Œå› ä¸ºç¬¬ä¸€ç¬¬äºŒç§æ¡†æ¶å…¶å®é™¤äº†å¯ä»¥è·¨ç³»ç»Ÿå¹³å°ä¹‹å¤–ï¼Œä¹Ÿéƒ½èƒ½ç¼–è¯‘è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚(Qt æœ‰ Qt for WebAssembly, Flutter æœ‰ Hummingbirdï¼ŒReact Native æœ‰ react-native-web, Weex åŸç”Ÿæ”¯æŒ) å¦å¤–ä¸€ä¸ªä¼˜ç‚¹æ˜¯åœ¨ç§»åŠ¨ç«¯ä¸€èˆ¬ä¼šç¼–è¯‘åˆ° React Native/Weexï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿéƒ½æ‹¥æœ‰ Web æŠ€æœ¯å‹æ¡†æ¶çš„ä¼˜ç‚¹ã€‚è¿™çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†å®é™…ä¸Š React Native/Weex çš„ç¼ºç‚¹ç¼–è¯‘å‹æ¡†æ¶ä¹Ÿæ— æ³•é¿å…ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç¼–è¯‘å‹æ¡†æ¶çš„æŠ½è±¡ä¹Ÿä¸æ˜¯å…è´¹çš„ï¼šå½“ bug å‡ºç°æ—¶ï¼Œé—®é¢˜çš„æ ¹æºå¯èƒ½å‡ºåœ¨è¿è¡Œæ—¶ã€ç¼–è¯‘æ—¶ã€ç»„ä»¶åº“ä»¥åŠä¸‰è€…ä¾èµ–çš„åº“ç­‰ç­‰å„ä¸ªæ–¹é¢ã€‚åœ¨ Taro å¼€æºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±é‡åˆ°è¿‡ Babel çš„ bugï¼ŒReact Native çš„ bugï¼ŒJavaScript å¼•æ“çš„ bugï¼Œå½“ç„¶ä¹Ÿå°‘ä¸äº† Taro æœ¬èº«çš„ bugã€‚ç›¸ä¿¡å…¶å®ƒåŸç†ç›¸åŒçš„æ¡†æ¶ä¹Ÿæ— æ³•é¿å…è¿™ä¸€é—®é¢˜ã€‚ ä½†è¿™å¹¶ä¸æ„å‘³ç€è¿™ç±»ä¸ºäº†å°ç¨‹åºè€Œè®¾è®¡çš„å¤šç«¯æ¡†æ¶å°±éƒ½ä¸å ªå¤§ç”¨ã€‚é¦–å…ˆç°åœ¨å„å·¨å¤´è¶…çº§ App çš„å°ç¨‹åºç™¾èŠ±é½æ”¾ï¼Œæ¡†æ¶ä¼šä¸ºäº†æŠ¹å¹³å°ç¨‹åºåšäº†è®¸å¤šå·¥ä½œï¼Œè¿™äº›å·¥ä½œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦å¼€å‘è€…å…³å¿ƒçš„ã€‚å…¶æ¬¡æ˜¯è®¸å¤šä¸šåŠ¡ç±»å‹å¹¶ä¸éœ€è¦å¤æ‚çš„é€»è¾‘å’Œäº¤äº’ï¼Œæ²¡é‚£ä¹ˆå®¹æ˜“è§¦å‘åˆ°æ¡†æ¶åº•å±‚ä¾èµ–çš„ bugã€‚ é‚£ä¹ˆå½“ä½ çš„ä¸šåŠ¡é€‚åˆé€‰æ‹©ç¼–è¯‘å‹æ¡†æ¶æ—¶ï¼Œåœ¨ç¬”è€…çœ‹æ¥é¦–å…ˆè¦è€ƒè™‘çš„å°±æ˜¯é€‰æ‹© DSL çš„èµ·ç‚¹ã€‚å› ä¸ºæœ‰å¤šç«¯éœ€æ±‚ä¸šåŠ¡é€šå¸¸éƒ½å¸Œæœ›èƒ½å¿«é€Ÿå¼€å‘ï¼Œä¸€ä¸ªèƒ½å¤Ÿå¿«é€Ÿé€‚åº”å›¢é˜Ÿå¼€å‘èŠ‚å¥çš„ DSL å°±è‡³å…³é‡è¦ã€‚ä¸ç®¡æ˜¯ React è¿˜æ˜¯ Vueï¼ˆæˆ–è€…ç±» Vueï¼‰éƒ½æœ‰å®ƒä»¬çš„ä¼˜ç¼ºç‚¹ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å›¢é˜ŸæŠ€æœ¯æ ˆå’Œåå¥½è‡ªè¡Œé€‰æ‹©ã€‚ å¦‚æœä¸ç®¡ä»€ä¹ˆ DSL éƒ½èƒ½æ¥å—ï¼Œé‚£å°±å¯ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªç¯èŠ‚ï¼š ç”Ÿæ€ä»¥ä¸‹å†…å®¹å‡ä»¥å„æ¡†æ¶ç°åœ¨ï¼ˆ2019 å¹´ 3 æœˆ 11æ—¥ï¼‰å·²å‘å¸ƒç¨³å®šç‰ˆä¸ºæ ‡å‡†è¿›è¡Œè®¨è®ºã€‚ å¼€å‘å·¥å…·å°±å¼€å‘å·¥å…·è€Œè¨€ uni-app åº”è¯¥æ˜¯ä¸€éª‘ç»å°˜ï¼Œå®ƒçš„æ–‡æ¡£å†…å®¹æœ€ä¸ºç¿”å®ä¸°å¯Œï¼Œè¿˜è‡ªå¸¦äº† IDE å›¾å½¢åŒ–å¼€å‘å·¥å…·ï¼Œé¼ æ ‡ç‚¹ç‚¹ç‚¹å°±èƒ½ç¼–è¯‘æµ‹è¯•å‘å¸ƒã€‚ å…¶å®ƒçš„æ¡†æ¶éƒ½æ˜¯ä½¿ç”¨ CLI å‘½ä»¤è¡Œå·¥å…·ï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ chameleon æœ‰ç‹¬ç«‹çš„è¯­æ³•æ£€æŸ¥å·¥å…·ï¼ŒTaro åˆ™å•ç‹¬å†™äº† ESLint è§„åˆ™å’Œè§„åˆ™é›†ã€‚ åœ¨è¯­æ³•æ”¯æŒæ–¹é¢ï¼Œmpvueã€uni-appã€Taro ã€WePY å‡æ”¯æŒ TypeScriptï¼Œå››è€…ä¹Ÿéƒ½èƒ½é€šè¿‡ typing å®ç°ç¼–è¾‘å™¨è‡ªåŠ¨è¡¥å…¨ã€‚é™¤äº† API è¡¥å…¨ä¹‹å¤–ï¼Œå¾—ç›Šäº TypeScript å¯¹äº JSX çš„è‰¯å¥½æ”¯æŒï¼ŒTaro ä¹Ÿèƒ½å¯¹ç»„ä»¶è¿›è¡Œè‡ªåŠ¨è¡¥å…¨ã€‚ CSS æ–¹é¢ï¼Œæ‰€æœ‰æ¡†æ¶å‡æ”¯æŒ SASSã€LESSã€Stylusï¼ŒTaro åˆ™å¤šä¸€ä¸ª CSS Modules çš„æ”¯æŒã€‚ æ‰€ä»¥è¿™ä¸€è½®æ¯”æ‹¼çš„ç»“æœåº”è¯¥æ˜¯ï¼š uni-app &gt; Taro &gt; chameleon &gt; WePYã€mpvue å¤šç«¯æ”¯æŒåº¦åªä»æ”¯æŒç«¯çš„æ•°é‡æ¥çœ‹ï¼ŒTaro å’Œ uni-app ä»¥å…­ç«¯ç•¥å¾®é¢†å…ˆï¼ˆç§»åŠ¨ç«¯ã€H5ã€å¾®ä¿¡å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºã€å¤´æ¡å°ç¨‹åºï¼‰ï¼Œchameleon å°‘äº†å¤´æ¡å°ç¨‹åºç´§éšå…¶åã€‚ ä½†å€¼å¾—ä¸€æçš„æ˜¯ chameleon æœ‰ä¸€å¥—è‡ªç ”å¤šæ€åè®®ï¼Œç¼–å†™å¤šç«¯ä»£ç çš„ä½“éªŒä¼šå¥½è®¸å¤šï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªèƒ½æˆ³åˆ°å¤šç«¯å¼€å‘ç—›ç‚¹çš„åŠŸèƒ½ã€‚uni-app åˆ™æœ‰ä¸€å¥—ç‹¬ç«‹çš„æ¡ä»¶ç¼–è¯‘è¯­æ³•ï¼Œè¿™å¥—è¯­æ³•èƒ½åŒæ—¶ä½œç”¨äº jsã€æ ·å¼å’Œæ¨¡æ¿æ–‡ä»¶ã€‚Taro å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­æ ¹æ®ç¯å¢ƒå˜é‡ä½¿ç”¨æ¡ä»¶ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ¡ä»¶ç¼–è¯‘æ–‡ä»¶ï¼ˆç±»ä¼¼ React Native çš„æ–¹å¼ï¼‰ã€‚ åœ¨ç§»åŠ¨ç«¯æ–¹é¢ï¼Œuni-app åŸºäº weex å®šåˆ¶äº†ä¸€å¥— nvue æ–¹æ¡ˆ å¼¥è¡¥ weex API çš„ä¸è¶³ï¼›Taro åˆ™æ˜¯æš‚æ—¶åŸºäº expo è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼›chameleon åœ¨ç§»åŠ¨ç«¯åˆ™æœ‰ä¸€å¥— SDK é…åˆå¤šç«¯åè®®ä¸åŸç”Ÿè¯­è¨€é€šä¿¡ã€‚ H5 æ–¹é¢ï¼Œchameleon åŒæ ·æ˜¯ç”±å¤šæ€åè®®å®ç°æ”¯æŒï¼Œuni-app å’Œ Taro åˆ™æ˜¯éƒ½åœ¨ H5 å®ç°äº†ä¸€å¥—å…¼å®¹çš„ç»„ä»¶åº“å’Œ APIã€‚ mpvue å’Œ WePY éƒ½æä¾›äº†è½¬æ¢å„ç«¯å°ç¨‹åºçš„åŠŸèƒ½ï¼Œä½†éƒ½æ²¡æœ‰ h5 å’Œç§»åŠ¨ç«¯çš„æ”¯æŒã€‚ æ‰€ä»¥æœ€åä¸€è½®å¯¹æ¯”çš„ç»“æœæ˜¯ï¼š chameleon &gt; Taroã€uni-app &gt; mpvue &gt; WePY ç»„ä»¶åº“/å·¥å…·åº“/demoä½œä¸ºå¼€æºæ—¶é—´æœ€é•¿çš„æ¡†æ¶ï¼ŒWePY ä¸ç®¡ä» Demoï¼Œç»„ä»¶åº“æ•°é‡ ï¼Œå·¥å…·åº“æ¥çœ‹éƒ½å æœ‰ä¸€å®šä¼˜åŠ¿ã€‚ uni-app åˆ™æœ‰è‡ªå·±çš„æ’ä»¶å¸‚åœºå’Œ UI åº“ï¼Œå¦‚æœç®—ä¸Šæ”¶è´¹çš„æ¡†æ¶å’Œæ’ä»¶æ¯”èµ· WePy ä¹Ÿæ˜¯å®Œå…¨ä¸é‘å¤šè®©çš„ã€‚ Taro ä¹Ÿæœ‰å®˜æ–¹ç»´æŠ¤çš„è·¨ç«¯ UI åº“ taro-ui ï¼Œå¦å¤–åœ¨çŠ¶æ€ç®¡ç†å·¥å…·ä¸Šä¹Ÿæœ‰éå¸¸ä¸°å¯Œçš„é€‰æ‹©ï¼ˆReduxã€MobXã€dvaï¼‰ï¼Œä½† demo çš„æ•°é‡ä¸å¦‚å‰ä¸¤ä¸ªã€‚ä½† Taro æœ‰ä¸€ä¸ªè½¬æ¢å¾®ä¿¡å°ç¨‹åºä»£ç ä¸º Taro ä»£ç çš„å·¥å…·ï¼Œå¯ä»¥å¼¥è¡¥è¿™ä¸€é—®é¢˜ã€‚ è€Œ mpvue æ²¡æœ‰å®˜æ–¹ç»´æŠ¤çš„ UI åº“ï¼Œchameleon ç¬¬ä¸‰æ–¹çš„ demo å’Œå·¥å…·åº“ä¹Ÿè¿˜åŸºæœ¬æ²¡æœ‰ã€‚ æ‰€ä»¥è¿™è½®çš„æ’åºæ˜¯ï¼š WePY &gt; uni-app ã€taro &gt; mpvue &gt; chameleon æ¥å…¥æˆæœ¬æ¥å…¥æˆæœ¬æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š ç¬¬ä¸€æ˜¯æ¡†æ¶æ¥å…¥åŸæœ‰å¾®ä¿¡å°ç¨‹åºç”Ÿæ€ã€‚ç”±äºç›®å‰å¾®ä¿¡å°ç¨‹åºå·²å‘ˆä¸€å®¶ç‹¬å¤§ä¹‹åŠ¿ï¼Œå¼€æºçš„ç»„ä»¶å’Œåº“ï¼ˆä¾‹å¦‚ wxparseã€echartã€zan-ui ç­‰ï¼‰å¤šæ˜¯åŸºäºåŸç”Ÿå¾®ä¿¡å°ç¨‹åºæ¡†æ¶è¯­æ³•å†™æˆçš„ã€‚ç›®å‰çœ‹æ¥ uni-app ã€Taroã€mpvue å‡æœ‰æ–‡æ¡£æˆ– demo åœ¨æ¡†æ¶ä¸­ç›´æ¥ä½¿ç”¨åŸç”Ÿå°ç¨‹åºç»„ä»¶/åº“ï¼ŒWePY ç”±äºè¿è¡Œæœºåˆ¶çš„é—®é¢˜ï¼Œå¾ˆå¤šæƒ…å†µéœ€è¦å°æ”¹ä¸€ä¸‹ç›®æ ‡åº“çš„æºç ï¼Œchameleon åˆ™æ˜¯æä¾›äº†ä¸€ä¸ªæŒ‰æ­¥éª¤å¤§æ”¹ç›®æ ‡åº“æºç çš„è¿ç§»æ–¹å¼ã€‚ ç¬¬äºŒæ˜¯åŸæœ‰å¾®ä¿¡å°ç¨‹åºé¡¹ç›®éƒ¨åˆ†æ¥å…¥æ¡†æ¶é‡æ„ã€‚åœ¨è¿™ä¸ªæ–¹é¢ Taro åœ¨äº¬ä¸œè´­ç‰©å°ç¨‹åºä¸Šè¿›è¡Œäº†å¤§èƒ†çš„å®è·µï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æ–‡ç« ã€ŠTaro åœ¨äº¬ä¸œè´­ç‰©å°ç¨‹åºä¸Šçš„å®è·µã€‹ã€‚å…¶å®ƒæ¡†æ¶åˆ™æ²¡æœ‰æåˆ°ç›¸å…³å†…å®¹ã€‚ è€Œå¯¹äºä¸¤ç§æ¥å…¥æ–¹å¼ Taro éƒ½æä¾›äº† taro convert åŠŸèƒ½ï¼Œæ—¢å¯ä»¥å°†åŸæœ‰å¾®ä¿¡å°ç¨‹åºé¡¹ç›®è½¬æ¢ä¸º Taro å¤šç«¯ä»£ç ï¼Œä¹Ÿå¯ä»¥å°†å¾®ä¿¡å°ç¨‹åºç”Ÿæ€çš„ç»„ä»¶è½¬æ¢ä¸º Taro ç»„ä»¶ã€‚ æ‰€ä»¥è¿™è½®çš„æ’åºæ˜¯ï¼š Taro &gt; mpvue ã€ uni-app &gt; WePY &gt; chameleon æµè¡Œåº¦ä» GitHub çš„ star æ¥çœ‹ï¼Œmpvue ã€Taroã€WePY çš„å·®è·éå¸¸å°ã€‚ä» NPM å’Œ CNPM çš„ CLI å·¥å…·ä¸‹è½½é‡æ¥çœ‹ï¼Œæ˜¯ Taroï¼ˆ3k/weekï¼‰&gt; mpvue (2k/w) &gt; WePY (1k/w)ã€‚ä½†å‘å¸ƒæ—¶é—´ä¹Ÿåˆšå¥½åè¿‡æ¥ã€‚ç¬”è€…ä¼°è®¡ä¸‰å®¶çš„æµè¡Œç¨‹åº¦å’Œæ¡ˆä¾‹éƒ½å·®ä¸å¤ªå¤šã€‚ uni-app åˆ™å·ç§°æœ‰ä¸Šä¸‡æ¡ˆä¾‹ï¼Œä½†ä¸åƒå…¶å®ƒæ¡†æ¶ä¸€æ ·æœ‰ä¸€äº›å¤§å‚åº”ç”¨æ¡ˆä¾‹ã€‚å¦å¤–ä»å¼€å‘è€…çš„æ•°é‡æ¥çœ‹ä¹Ÿæ˜¯ uni-app é¢†å…ˆï¼Œå®ƒæ‹¥æœ‰ 20+ ä¸ª QQ äº¤æµç¾¤ï¼ˆæœ€å¤§äººæ•° 2000ï¼‰ã€‚ æ‰€ä»¥ä»æµè¡Œç¨‹åº¦æ¥çœ‹åº”è¯¥æ˜¯ï¼š uni-app &gt; Taroã€WePYã€mpvue &gt; chameleon å¼€æºå»ºè®¾ä¸€ä¸ªå¼€æºä½œå“èƒ½èµ°å¤šè¿œæ˜¯ç”±æ¡†æ¶ç»´æŠ¤å›¢é˜Ÿå’Œç¬¬ä¸‰æ–¹å¼€å‘è€…å…±åŒå†³å®šçš„ã€‚è™½ç„¶å¼€æºå»ºè®¾ä¸èƒ½å…·ä½“åœ°é‡åŒ–ï¼Œä½†ä¾ç„¶æ˜¯è¡¡é‡ä¸€ä¸ªæ¡†æ¶/åº“ç”Ÿå‘½åŠ›çš„éå¸¸é‡è¦çš„æ ‡å‡†ã€‚ ä»ç¬¬ä¸‰æ–¹è´¡çŒ®è€…æ•°é‡æ¥çœ‹ï¼ŒTaro åœ¨è¿™ä¸€æ–¹é¢é¢†å…ˆï¼Œå¹¶ä¸” Taro çš„ä¸€äº›æ ¸å¿ƒåŒ…/åŠŸèƒ½ï¼ˆMobXã€CSS Modulesã€aliasï¼‰ä¹Ÿæ˜¯ç”±ç¬¬ä¸‰æ–¹å¼€å‘è€…è´¡çŒ®çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè…¾è®¯å¼€æºçš„ omi æ¡†æ¶å°ç¨‹åºéƒ¨åˆ†ä¹Ÿæ˜¯åŸºäº Taro å®Œæˆçš„ã€‚ WePY åœ¨è…¾è®¯å¼€æºè®¡åˆ’çš„åŠ æŒä¸‹åœ¨è¿™ä¸€æ–¹é¢ä¹Ÿæœ‰ä¸é”™çš„è¡¨ç°ï¼›mpvue ç”±äºåœæ»å¼€å‘äº†å¾ˆä¹…å°±æ¯”è¾ƒè½åäº†ï¼›å¯èƒ½æ˜¯äº§å“ç­–ç•¥çš„åŸå› ï¼Œuni-app åœ¨å¼€æºå»ºè®¾ä¸Šå¹¶ä¸çƒ­å¿ƒï¼Œç”šè‡³æœ‰äº›éƒ¨åˆ†ä»£ç éƒ½æ²¡æœ‰å¼€æºï¼›chameleon åˆšåˆšå¼€æºä¸ä¹…ï¼Œä½†å®ƒçš„ä»£ç å’Œæµ‹è¯•ç”¨ä¾‹éƒ½éå¸¸è§„èŒƒï¼Œä»¥åæˆ–è®¸ä¼šæœ‰ä¸é”™çš„è¡¨ç°ã€‚ é‚£ä¹ˆè¿™ä¸€è½®çš„å¯¹æ¯”ç»“æœæ˜¯ï¼š Taro &gt; WePY &gt; mpvue &gt; chameleon &gt; uni-app æœ€åè¡¥ä¸€ä¸ªæ€»çš„ç”Ÿæ€å¯¹æ¯”å›¾è¡¨ï¼š æœªæ¥ä»å„æ¡†æ¶å·²ç»å…¬å¸ƒçš„è§„åˆ’æ¥çœ‹ï¼š WePY å·²ç»å‘å¸ƒäº† v2.0.alpha ç‰ˆæœ¬ï¼Œè™½ç„¶æ²¡æœ‰å…¬å¼€çš„æ–‡æ¡£å¯ä»¥æŸ¥é˜…åˆ° 2.0 ç‰ˆæœ¬æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½/ç‰¹æ€§ï¼Œä½†æ®å…¶ä½œè€…ä»‹ç»ï¼ŒWePY 2.0 ä¼šæ”¾å¤§æ‹›ï¼Œæ˜¯ä¸€ä¸ªã€Œå¯¹å¾—èµ·å¼€å‘è€…ã€çš„ç‰ˆæœ¬ã€‚ç¬”è€…ä¹Ÿéå¸¸æœŸå¾… 2.0 æ­£å¼å‘å¸ƒå WePY çš„è¡¨ç°ã€‚ mpvue å·²ç»å‘å¸ƒäº† 2.0 çš„ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯æ›´æ–°äº†å…¶å®ƒç«¯å°ç¨‹åºçš„æ”¯æŒã€‚ä½†ä»ä»£ç æäº¤ï¼Œ issue çš„å›å¤/è§£å†³ç‡æ¥çœ‹ï¼Œmpvue è¦æƒ³åœ¨æœªæ¥æœ‰ä½œä¸ºé¦–å…ˆè¦æ‰“æ¶ˆç¤¾åŒºå¯¹äº mpvue ä¸ç®¡ä¸é¡¾ä¸æ›´æ–°çš„è´¨ç–‘ã€‚ uni-app å·²ç»åœ¨ç”Ÿæ€ä¸Šå»ºè®¾å¾—å¾ˆå¥½äº†ï¼Œåº”è¯¥ä¼šåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šç»§ç»­ç¨³æ­¥å‘å±•ã€‚å¦‚æœ uni-app èƒ½åŠ å¼ºå¼€æºå¼€æ”¾ï¼Œå†åŠ å¼ºä¸å¤§å‚çš„åˆä½œï¼Œç›¸ä¿¡æœªæ¥è¿˜èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ã€‚ chameleon çš„è§„åˆ’æ¯”è¾ƒå®å¤§ï¼Œè™½ç„¶æ˜¯æœ€åå‘çš„æ¡†æ¶ï¼Œä½†å·²ç»åœ¨è§„åˆ’æˆ–æ­£åœ¨å®ç°çš„åŠŸèƒ½æœ‰ï¼š å¿«åº”ç”¨å’Œç«¯æ‹“å±•åè®® é€šç”¨ç»„ä»¶åº“å’Œå‚ç›´ç±»ç»„ä»¶åº“ é¢å‘ç ”å‘çš„å›¾å½¢åŒ–å¼€å‘å·¥å…· é¢å‘éç ”å‘çš„å›¾å½¢åŒ–é¡µé¢æ­å»ºå·¥å…· å¦‚æœ chameleon æŠŠè¿™äº›åŠŸèƒ½éƒ½åšå‡ºæ¥çš„è¯ï¼Œå†ç»§ç»­å®Œå–„ç”Ÿæ€ï¼Œäº‰å–æ›´å¤šç¬¬ä¸‰æ–¹å¼€å‘è€…ï¼Œé‚£ä¹ˆåœ¨æœªæ¥ chameleon å°†å¤§æœ‰å¯ä¸ºã€‚ Taro çš„æœªæ¥ä¹Ÿä¸€æ ·å€¼å¾—æ†§æ†¬ã€‚Taro å³å°†è¦å‘å¸ƒçš„ 1.3 ç‰ˆæœ¬å°±ä¼šæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š å¿«åº”ç”¨æ”¯æŒ Taro Doctorï¼Œè‡ªåŠ¨åŒ–æ£€æŸ¥é¡¹ç›®é…ç½®å’Œä»£ç åˆæ³•æ€§ æ›´å¤šçš„ JSX è¯­æ³•æ”¯æŒï¼Œ1.3 ä¹‹åé™åˆ¶ç”Ÿäº§åŠ›çš„è¯­æ³•åªæœ‰ åªèƒ½ç”¨ map åˆ›é€ å¾ªç¯ç»„ä»¶ ä¸€æ¡ H5 æ‰“åŒ…ä½“ç§¯å¤§å¹…ç²¾ç®€ åŒæ—¶ Taro ä¹Ÿæ­£åœ¨å¯¹ç§»åŠ¨ç«¯è¿›è¡Œå¤§è§„æ¨¡é‡æ„ï¼›å¼€å‘å›¾å½¢åŒ–å¼€å‘å·¥å…·ï¼›å¼€å‘ç»„ä»¶/ç‰©æ–™å¹³å°ä»¥åŠå›¾å½¢åŒ–é¡µé¢æ­å»ºå·¥å…·ã€‚ ç»“è¯­é‚£è¯´äº†é‚£ä¹ˆå¤šï¼Œåˆ°åº•ç”¨å“ªä¸ªå‘¢ï¼Ÿ å¦‚æœä¸ä»‹æ„å°é²œå’Œå­¦ä¹  DSL çš„è¯ï¼Œå®Œå…¨å¯ä»¥å°è¯• WePY 2.0 å’Œ chameleon ï¼Œä¸€ä¸ªæ˜¯é…é…¿äº†å¾ˆä¹…çš„ 2.0 å…¨æ–°å‡çº§ï¼Œä¸€ä¸ªæœ‰ä¸“é—¨é’ˆå¯¹å¤šç«¯å¼€å‘çš„å¤šæ€åè®®ã€‚ uni-app å’Œ Taro ç›¸æ¯”èµ·æ¥å°±æ›´åƒæ˜¯ã€Œæ°´æ¡¶å‹ã€æ¡†æ¶ï¼Œä»å·¥å…·ã€UI åº“ï¼Œå¼€å‘ä½“éªŒã€å¤šç«¯æ”¯æŒç­‰å„æ–¹é¢æ¥çœ‹éƒ½æ²¡æœ‰æ˜æ˜¾çš„çŸ­æ¿ã€‚è€Œ mpvue ç”±äºå¼€å‘ä¸€åº¦åœæ»ï¼Œç°åœ¨çœ‹æ¥å„ä¸ªæ–¹é¢éƒ½ä¸å¦‚åœ¨å°ç¨‹åºç«¯åŸºäºå®ƒçš„ uni-app ã€‚ å½“ç„¶ï¼ŒTalk is cheapã€‚å¦‚æœå¯¹è¿™ä¸ªè¯é¢˜æœ‰æ›´å¤šå…´è¶£çš„åŒå­¦å¯ä»¥å» GitHub å¦è¡Œç ”ç©¶ï¼Œæœ‰ç©ºçœ‹ä»£ç ï¼Œæ²¡ç©ºçœ‹æäº¤ï¼š chameleon: https://github.com/didi/chameleon mpvue: https://github.com/Meituan-Dianping/mpvue Taro: https://github.com/NervJS/taro uni-app: https://github.com/dcloudio/uni-app WePY: https://github.com/Tencent/wepy (æŒ‰å­—æ¯é¡ºåºæ’åº)","pubDate":"Tue, 12 Mar 2019 15:09:41 GMT","guid":"https://aotu.io/notes/2019/03/12/mini-program-framework-full-review/","category":"å°ç¨‹åº"},{"title":"å†³æˆ˜æ€§èƒ½ä¹‹å·… - Taro H5 è½¬æ¢ä¸ä¼˜åŒ–å‡çº§","link":"https://aotu.io/notes/2019/02/28/taro-h5-optimize/","description":"å‰è¨€ä½œä¸ºä¸€ä¸ªå¤šç«¯å¼€å‘æ¡†æ¶ï¼ŒTaro ä»é¡¹ç›®å‘èµ·æ—¶å°±å·²ç»æ”¯æŒç¼–è¯‘åˆ° H5 ç«¯ã€‚éšç€ Taro å¤šç«¯èƒ½åŠ›çš„ä¸æ–­æˆç†Ÿï¼Œæˆ‘ä»¬å¯¹ Taro H5 ç«¯åº”ç”¨çš„è¦æ±‚ä¹Ÿä¸æ–­æå‡ã€‚æˆ‘ä»¬å·²ç»ä¸å†æ»¡è¶³äºâ€œèƒ½è·‘â€ï¼Œæ›´å¸Œæœ› Taro èƒ½è·‘å¾—å¿«ã€‚ æˆ‘ä»¬ç»å¸¸æ”¶åˆ°ç”¨æˆ·åé¦ˆï¼šä¸ºä»€ä¹ˆä½¿ç”¨ Taro è„šæ‰‹æ¶åˆ›å»ºçš„ç©ºé¡¹ç›®ï¼Œæ‰“åŒ…åä»£ç ä½“ç§¯å´æœ‰ 400KB+ï¼›ä¹Ÿæœ‰ç”¨æˆ·åœ¨ Issue ä¸­æåˆ°ï¼ŒTaro çš„éƒ¨åˆ† Api å ç”¨ç©ºé—´å·¨å¤§ï¼Œäº‹å®ä¸ŠåŠŸèƒ½å´å¹¶ä¸å®Œç¾ï¼Œç­‰ç­‰ã€‚ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬éå¸¸é‡è§†ç¤¾åŒºå¼€å‘è€…ä»¬çš„æ„è§ã€‚æ‰€ä»¥åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹ Taro H5 ç«¯çš„æ€§èƒ½è¡¨ç°è¿›è¡Œäº†ä¼˜åŒ–ã€‚ ä½œä¸ºè¿è¡Œæ—¶çš„åŸºç¡€ï¼Œæ¯ä¸€ä¸ª Taro çš„ H5 ç«¯åº”ç”¨éƒ½éœ€è¦å¼•å…¥ @tarojs/components å’Œ @tarojs/taro-h5 ç­‰åŸºç¡€ä¾èµ–åŒ…ã€‚åœ¨ç¼–è¯‘ã€æ‰“åŒ…ä¹‹åï¼Œè¿™äº›ä¾èµ–åŒ…å¤§çº¦ä¼šåœ¨é¦–å±å ç”¨ 400KB ä»¥ä¸Šçš„ç©ºé—´ã€‚å¦‚æœå¼€å‘è€…è¿˜ä½¿ç”¨äº† UI åº“ï¼Œä¾‹å¦‚ Taro-UIï¼ŒåŸºç¡€ä½“ç§¯è¿˜ä¼šæ›´å¤§ï¼Œè¿™ä¸¥é‡é™åˆ¶äº† Taro H5 ç«¯åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–ç©ºé—´ã€‚ äº‹å®ä¸Šï¼Œæˆ‘ä»¬åœ¨ H5 ç«¯åº”ç”¨ä¸­å¹¶ä¸ä¼šä½¿ç”¨åˆ°å…¨éƒ¨çš„ Taro ç»„ä»¶å’Œ Apiã€‚å°†è¿™äº›ä¾èµ–åŒ…å…¨éƒ¨æ‰“åŒ…è¿›åº”ç”¨æ˜¯æ²¡æœ‰å¿…è¦ï¼Œä¹Ÿæ˜¯ä¸åˆç†çš„ã€‚è¿›è¡Œæ­»ç åˆ é™¤ï¼ˆDead code eliminationï¼‰ï¼Œè¿›ä¸€æ­¥ç¼©å‡ä»£ç ä½“ç§¯ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ä¼˜åŒ–æ–¹å‘ä¹‹ä¸€ã€‚ æ•ˆæœåœ¨ä»‹ç»å…·ä½“ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€çœ‹ä¼˜åŒ–çš„æ•ˆæœï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šè®©ä½ æ›´æœ‰å…´è¶£äº†è§£åé¢çš„å†…å®¹ã€‚ç”¨ä¸€å¥è¯æ¥è¯´ï¼Œæ•ˆæœéå¸¸æ˜¾è‘—ã€‚ æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªç©ºé¡¹ç›®ï¼Œåœ¨é¡¹ç›®é…ç½®ä¸­åŠ å…¥äº†webpack-bundle-analyzeræ’ä»¶ä»¥æŸ¥çœ‹ç¼–è¯‘åˆ†æã€‚ä¸‹å›¾æ˜¯ä¼˜åŒ–å‰çš„æ‰“åŒ…æ–‡ä»¶åˆ†æç»“æœï¼š è€Œåœ¨ä¼˜åŒ–åï¼Œå¯¹æ¯”éå¸¸æ˜æ˜¾ï¼š ä¼˜åŒ–å‰ç”Ÿæˆçš„ä»£ç æ€»å¤§å°ä¸º 455KBï¼Œè€Œåœ¨ä¼˜åŒ–åä»…å‰©çº¦ 96KBï¼Œä»…æ˜¯åŸæ¥çš„ 1/5 å·¦å³ã€‚ ä½ éœ€è¦åšä»€ä¹ˆå¾ˆç®€å•ï¼Œä½œä¸ºä½¿ç”¨è€…ï¼Œä½ ä¸éœ€è¦åšä»»ä½•ä»£ç ä¸Šçš„æ”¹åŠ¨ï¼Œåªéœ€è¦å°† Taro æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬å³å¯ã€‚ä½†åœ¨çœ‹ä¸è§çš„åœ°æ–¹ï¼ŒTaro å´é»˜é»˜åœ°åšäº†è®¸å¤šå·¥ä½œã€‚ä¸‹é¢ä¼šä»åŸç†å‡ºå‘ï¼Œè¯¦ç»†ä»‹ç» Taro çš„å·¥ä½œã€‚ åŸç†æ­»ç åˆ é™¤ï¼ˆDead code eliminationï¼‰æ˜¯ä¸€ç§ä»£ç ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥åˆ é™¤å¯¹åº”ç”¨ç¨‹åºæ‰§è¡Œç»“æœæ²¡æœ‰å½±å“çš„ä»£ç ã€‚Web Fundamentals çš„ä¸€ç¯‡æ–‡ç« æœ‰æåˆ°ï¼Œtreeshaking æ˜¯ç”± Rollup æå‡ºçš„ä¸€ç§æ­»ç åˆ é™¤çš„å½¢å¼ã€‚ Tree shaking is a form of dead code elimination. The term was popularized by Rollup, but the concept of dead code elimination has existed for some time. â€“ Reduce JavaScript Payloads with Tree Shaking, Jeremy Wagner é€šè¿‡åœ¨æ„å»ºæ—¶è¿›è¡Œé™æ€åˆ†æï¼Œç¼–è¯‘å·¥å…·å¯ä»¥åˆ†æå‡ºæˆ‘ä»¬ä»£ç ä¸­çœŸæ­£çš„ä¾èµ–å…³ç³»ã€‚treeshaking æŠŠæˆ‘ä»¬çš„ä»£ç æƒ³è±¡æˆä¸€æ£µæ ‘ï¼Œä»£ç çš„æ¯ä¸ªä¾èµ–é¡¹çœ‹ä½œæ ‘ä¸Šçš„èŠ‚ç‚¹ã€‚å°†æœªä½¿ç”¨è¿‡çš„ä¾èµ–é¡¹ä»æ„å»ºç»“æœä¸­ç§»é™¤ï¼Œè¿™å°±æ˜¯ treeshaking çš„åŸºæœ¬æ€æƒ³ã€‚ é‚£ä¹ˆï¼Œå‡è®¾æˆ‘ä»¬æ‰‹å¤´æœ‰ä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬è¦æ€æ ·è¾¨åˆ«å…¶ä¸­å¯ä»¥åˆ é™¤çš„éƒ¨åˆ†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œé€šè¿‡åˆ†æå‰¯ä½œç”¨ï¼š 123456789101112// add.jsexport default function addï¼ˆa, bï¼‰&#123; return a + b; &#125;// add2.jsconsole.log('è¿™æ˜¯ä¸€ä¸ªlog')export default function add2ï¼ˆa, bï¼‰&#123; return a + b; &#125;// index.jsimport add from './add.js' // æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¯ä»¥åˆ é™¤import add2 from './add2.js' // æœ‰å‰¯ä½œç”¨ï¼Œä¸èƒ½ç›´æ¥åˆ é™¤// EOF å‰¯ä½œç”¨è¿™ä¸ªåè¯å¯¹äºäº†è§£å‡½æ•°å¼ç¼–ç¨‹çš„åŒå­¦è‚¯å®šä¸é™Œç”Ÿã€‚ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ï¼Œæˆ–è€…æ˜¯äº§ç”Ÿè¾“å‡ºç­‰ç­‰ï¼Œéƒ½æ˜¯å‰¯ä½œç”¨ï¼›è€Œå­˜åœ¨å‰¯ä½œç”¨çš„ä»£ç ï¼Œæ˜¯ä¸èƒ½è¢«ç›´æ¥ç§»é™¤çš„ã€‚ç±»ä¼¼ä¸Šé¢è¿™ä¸ªä»£ç ç¤ºæ„ï¼Œadd2 æ¨¡å—å°±æ˜¯å­˜åœ¨å‰¯ä½œç”¨çš„ã€‚ ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šé™¤äº† Rollup ä¹‹å¤–ï¼Œæ”¯æŒ treeshaking çš„å·¥å…·/æ’ä»¶è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ babel-plugin-transform-dead-code-eliminationã€uglifyã€terserç­‰ã€‚ webpack åœ¨ v2 ä¹‹åå°±å†…ç½®äº†å¯¹ treeshaking çš„æ”¯æŒï¼Œå¹¶åœ¨ webpack@4 ä¸­å¯¹ treeshaking åŠŸèƒ½è¿›è¡Œäº†æ‰©å±•ã€‚ Taro H5 ç«¯åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ webpack ä½œä¸ºæ„å»ºçš„æ ¸å¿ƒã€‚åœ¨ webpack ä¸­ä½¿ç”¨ treeshaking åŠŸèƒ½æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š å¦‚æœæ˜¯ npm æ¨¡å—ï¼Œéœ€è¦package.jsonä¸­å­˜åœ¨sideEffectså­—æ®µï¼Œå¹¶ä¸”å‡†ç¡®é…ç½®äº†å­˜åœ¨å‰¯ä½œç”¨çš„æºä»£ç ã€‚ å¿…é¡»ä½¿ç”¨ ES6 æ¨¡å—è¯­æ³•ã€‚ç”±äºè¯¸å¦‚babel-preset-envä¹‹ç±»çš„ babel é¢„é…ç½®åŒ…é»˜è®¤ä¼šå¯¹ä»£ç çš„æ¨¡å—æœºåˆ¶è¿›è¡Œæ”¹å†™ï¼Œè¿˜éœ€è¦å°†modulesè®¾ç½®ä¸ºfalseï¼Œå°†æ¨¡å—è§£æçš„å·¥ä½œç›´æ¥äº¤ç»™ webpackã€‚ éœ€è¦å·¥ä½œåœ¨ webpack çš„productionæ¨¡å¼ä¸‹ã€‚ webpack çš„ treeshaking å·¥ä½œä¸»è¦åˆ†ä¸ºä¸¤æ­¥ã€‚ç¬¬ä¸€æ­¥æ˜¯åœ¨æ¨¡å—çº§åˆ«ç§»é™¤æœªä½¿ç”¨ä¸”æ— å‰¯ä½œç”¨çš„æ¨¡å—ï¼Œè¿™ä¸€æ­¥ç”± webpack çš„å†…ç½®æ’ä»¶å®Œæˆï¼›ç¬¬äºŒæ­¥æ˜¯åœ¨æ–‡ä»¶çº§åˆ«ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œè¿™ä¸€æ­¥ç”±ä»£ç å‹ç¼©å·¥å…· Terser å®Œæˆçš„ã€‚ ç§»é™¤æœªä½¿ç”¨çš„æ¨¡å—å‰é¢æˆ‘ä»¬æåˆ°ï¼Œéœ€è¦åœ¨package.jsonä¸­é…ç½®sideEffectså­—æ®µã€‚ åœ¨ webpack æ–‡æ¡£ ä¸­æœ‰æåˆ°ï¼Œè¿™ä¸€ä¸¾åŠ¨æ­£æ˜¯ä¸ºäº†è®© webpack æ­£ç¡®åœ°è¯†åˆ«åˆ°æ²¡æœ‰å‰¯ä½œç”¨çš„ä»£ç æ¨¡å—ã€‚ åœ¨ webpack ä¸­ï¼Œæ¨¡å—ä¾èµ–åˆ†ææ˜¯ç”±å†…ç½®æ’ä»¶ SideEffectsFlagPlugin è¿›è¡Œçš„ã€‚ ç»è¿‡ SideEffectsFlagPluginå¤„ç†åï¼Œæ²¡æœ‰ä½¿ç”¨è¿‡å¹¶ä¸”æ²¡æœ‰å‰¯ä½œç”¨çš„æ¨¡å—éƒ½ä¼šè¢«æ‰“ä¸ŠsideEffectFreeæ ‡è®°ã€‚ åœ¨ ModuleConcatenationPlugin ä¸­ï¼Œå¸¦ç€sideEffectFreeæ ‡è®°çš„æ¨¡å—å°†ä¸ä¼šè¢«æ‰“åŒ…ï¼š æ¥åˆ°è¿™é‡Œï¼Œwebpack å®Œæˆäº†åœ¨æ¨¡å—çº§åˆ«å¯¹æœªä½¿ç”¨æ¨¡å—çš„æ’é™¤ã€‚æ¥ä¸‹æ¥ï¼Œä¾é  Terserï¼Œwebpack å¯ä»¥åœ¨æ–‡ä»¶çº§åˆ«ï¼Œå¯¹æœªä½¿ç”¨ã€æ— å‰¯ä½œç”¨çš„ä»£ç è¿›è¡Œç§»é™¤ã€‚ ç§»é™¤æœªä½¿ç”¨çš„ä»£ç åœ¨ CommonJS è§„èŒƒä¸­ï¼Œæˆ‘ä»¬é€šè¿‡requireå‡½æ•°æ¥å¼•å…¥æ¨¡å—ï¼Œé€šè¿‡module.exportsè¿›è¡Œå¯¼å‡ºã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹ç”¨ä»»ä½•æ–¹å¼å¼•å…¥å’Œå¯¼å‡ºæ¨¡å—ï¼šå¯ä»¥æ˜¯åœ¨æŸä¸ªéœ€è¦ç­‰å¾…ç”¨æˆ·è¾“å…¥çš„å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ–è€…æ˜¯åœ¨ç¬¦åˆæŸä¸ªæ¡ä»¶æ‰è¿›è¡Œå¼•å…¥ç­‰ç­‰ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ ES6 çš„æ¨¡å—ç³»ç»Ÿä¹‹å‰ï¼Œå¯¹ Javascript åšç¼–è¯‘æ—¶çš„ä¾èµ–å…³ç³»åˆ†ææ˜¯è¿‘ä¹ä¸å¯èƒ½çš„ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨ä¸å¯èƒ½ã€‚prepack é€šè¿‡å®ç°ä¸€ä¸ª JS è§£é‡Šå™¨ï¼Œç”šè‡³å¯ä»¥åœ¨ç¼–è¯‘æ—¶æå‰è¿›è¡Œé™æ€è®¡ç®—ï¼‰ã€‚ 12345678// utils.jsmodule.exports.add = function (a, b) &#123; return a + b &#125;;module.exports.minus = function (a, b) &#123; return a - b &#125;;// index.js;var utils = require('./utils.js');utils.add(1, 2); åƒä¸Šé¢è¿™æ®µä»£ç ï¼Œè™½ç„¶æˆ‘ä»¬æœ€ç»ˆåªä½¿ç”¨äº†addå‡½æ•°ï¼Œä½†minuså‡½æ•°ä¹Ÿä¼šåœ¨æœ€ç»ˆçš„æ‰“åŒ…ä»£ç ä¸­å‡ºç°ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶æ— æ³•å¿«é€Ÿå¾—çŸ¥æ˜¯å¦ä½¿ç”¨äº†minuså‡½æ•°ã€‚ åœ¨ ES6 çš„æ¨¡å—ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨import/exportè¯­æ³•æ¥è¿›è¡Œæ¨¡å—çš„å¼•å…¥å’Œå¯¼å‡ºã€‚ä¸ CommonJS è§„èŒƒä¸åŒçš„æ˜¯ï¼Œè¿™å¥—æ–°çš„æ¨¡å—ç³»ç»Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ï¼šimport/exportè¡Œä¸ºåªèƒ½åœ¨ä»£ç çš„é¡¶å±‚ã€é»˜è®¤ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ç­‰ç­‰ã€‚è¿™äº›é™åˆ¶ä½¿ä»£ç æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡ºå˜å¾—é™æ€åŒ–ï¼Œæ¨¡å—é—´çš„ä¾èµ–å…³ç³»åœ¨å¼€å‘æ—¶å·²ç»ç¡®å®šï¼Œç¼–è¯‘å™¨ä¹Ÿæ›´å®¹æ˜“è§£ææˆ‘ä»¬çš„ä»£ç ã€‚ 1234567// utils.jsexport function add (a, b) &#123; return a + b &#125;;export function minus (a, b) &#123; return a - b &#125;;// index.js;import &#123; add &#125; from './utils.js';add(1, 2); åœ¨ä½¿ç”¨ ES6 æ¨¡å—ç³»ç»Ÿæ”¹é€ åï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œminuså‡½æ•°ç¡®å®æ²¡æœ‰è¢«ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°å°†å…¶ä»æœ€ç»ˆæ‰“åŒ…ä»£ç ä¸­ç§»é™¤ã€‚ å½“ç„¶ï¼Œå…·ä½“çš„åˆ†æè¿‡ç¨‹éå¸¸å¤æ‚ã€‚å˜é‡æå‡ã€object å–å€¼æ“ä½œã€for(var i in list) è¯­å¥ã€è‡ªæ‰§è¡Œå‡½æ•°ã€å‡½æ•°ä¼ å‚ï¼ˆonClick(function a () {â€¦})ï¼‰ç­‰ç­‰ï¼Œéƒ½æœ‰å¯èƒ½å¯¼è‡´æ„æ–™ä¹‹å¤–çš„æƒ…å†µï¼Œä»è€Œå¯¼è‡´ treeshaking å¤±æ•ˆã€‚å¦‚æœæƒ³äº†è§£ Terser çš„å…·ä½“å¤„ç†è¿‡ç¨‹ï¼Œç™¾åº¦/Google ä¼šæ˜¯æœ€å¥½çš„è€å¸ˆã€‚ Taro åšäº†ä»€ä¹ˆTaro éœ€è¦å¯¹ä¾èµ–åŒ…åšä¸€äº›ä¿®æ”¹ã€‚ ç»„ä»¶çš„ ES æ¨¡å—åŒ–åœ¨è¿›è¡Œç»„ä»¶åº“çš„ ES æ¨¡å—åŒ–æ”¹é€ ä¹‹å‰ï¼Œå¦‚æœè¦å‘å¸ƒ @tarojs/components åŒ…ï¼ŒTaro ä¼šæ‰§è¡Œå‘½ä»¤ yarn buildï¼Œä½¿ç”¨ webpack å¯¹æºä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œè¾“å‡ºä¸ºdist/index.jsæ–‡ä»¶ã€‚ç”±äº webpack å¹¶ä¸æ”¯æŒè¾“å‡ºä¸º ES æ¨¡å—ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸ª UMD æ¨¡å—ã€‚ è¿™ä¸ªæ–‡ä»¶å æ®äº† 462KB çš„ç©ºé—´ï¼Œå¹¶ä¸”ç”±äºæ¨¡å—è§„èŒƒç­‰é—®é¢˜ï¼Œæ— æ³•è¿›è¡Œ treeshakingã€‚æ‰€ä»¥å°±ç®—å¼€å‘è€…åœ¨ Taro çš„é¡¹ç›®ä¸­åªå¼•å…¥äº†ä¸¤ä¸ªç»„ä»¶ï¼Œæœ€ç»ˆçš„æ‰“åŒ…ç»“æœä¹Ÿä¼šåŒ…å«æ‰€æœ‰çš„å†…ç½®ç»„ä»¶ã€‚ äº‹å®ä¸Šï¼Œ@tarojs/components çš„æºç æœ¬èº«æ˜¯ä½¿ç”¨ ESM è§„èŒƒçš„ï¼š æ‰€ä»¥åªè¦è®© webpack ç›´æ¥è§£æç»„ä»¶åº“çš„æºç ï¼Œæˆ‘ä»¬ç«‹å³å°±å¯ä»¥äº«å—åˆ° webpack è‡ªå¸¦ treeshaking å¸¦æ¥çš„å¥½å¤„äº†ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨sideEffectså±æ€§ä¸­å¯¹æ ·å¼æ–‡ä»¶åšäº†æ ‡è®°ï¼Œå¸®åŠ© webpack å¯¹æ ·å¼ä»£ç çš„å‰¯ä½œç”¨è¿›è¡Œè¯†åˆ«ï¼Œåœ¨é¡¹ç›®ç¼–è¯‘çš„ä»£ç ä¸­ä¿ç•™æ ·å¼ä»£ç ã€‚ Api çš„ ES æ¨¡å—åŒ–åŒæ ·ï¼Œä»¥å‰åœ¨å‘å¸ƒ @tarojs/taro-h5 ä¹‹å‰ï¼ŒTaro ä¹Ÿéœ€è¦æ‰§è¡Œå‘½ä»¤ yarn buildï¼Œä½¿ç”¨ Rollup å¯¹æºä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œè¾“å‡ºä¸ºdist/index.jsæ–‡ä»¶ï¼š è¿™ä¸ªæ–‡ä»¶å æ®äº† 262KB çš„ç©ºé—´ã€‚åŒæ ·ï¼Œåªè¦æ˜¯ä¸ª Taro çš„ H5 ç«¯åº”ç”¨ï¼Œç”Ÿæˆçš„ä»£ç éƒ½ä¼šå…¨é‡å¼•å…¥è¿™ä¸ªæ–‡ä»¶ã€‚ æˆ‘ä»¬å¯¹ @tarojs/taro-h5 è¿›è¡Œæ¨¡å—åŒ–æ”¹é€ çš„æ€è·¯ä¸ @tarojs/components ç›¸åŒã€‚æˆ‘ä»¬å¸Œæœ› @tarojs/taro-h5 æ¨¡å—æœ¬èº«éµå®ˆ ESM æ¨¡å—è§„èŒƒï¼Œé‚£å°±åªéœ€è¦æ ‡è®°ä¸€ä¸‹sideEffectsï¼Œå†ä¿®æ”¹ä¸€ä¸‹æ¨¡å—å…¥å£å°±å¥½ã€‚ ç²—ç•¥ä¸€çœ‹ï¼Œ@tarojs/taro-h5 è¿˜æŒº â€œESMâ€ çš„ï¼Œä½†è¿™è¿˜ä¸å¤Ÿã€‚æˆ‘ä»¬è¿˜éœ€è¦å°†è¿™äº› Api ä»¥ namedExports çš„å½¢å¼å¯¼å‡ºï¼Œå¼€å‘è€…ä½¿ç”¨import { XXX } from &#39;@tarojs/taro-h5&#39;å¯¼å…¥ Api å³å¯ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ã€‚åœ¨ Taro é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨çš„æ˜¯ defaultImportï¼Œå¹¶ä¸ä¼šä½¿ç”¨ Api çš„ namedExports å½¢å¼ï¼š 12345import Taro from '@tarojs/taro-h5'Taro.navigateTo()Taro.getSystemInfo()// Taro.xxx ... åªè¦ Api æ˜¯é€šè¿‡å¯¹Taroå˜é‡å–å±æ€§è·å–ï¼ŒTaroå˜é‡å°±éœ€è¦å…·å¤‡æ‰€æœ‰çš„ Apiï¼Œtreeshaking ä¹Ÿå°±æ— ä»è°ˆèµ·ã€‚ æœ‰æ²¡æœ‰åŠæ³•æŠŠ defaultImport ä¿®æ”¹ä¸º namedImports å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æˆ‘ä»¬å†™äº†ä¸€ä¸ª babel æ’ä»¶ babel-plugin-transform-taroapiï¼Œå°†æŒ‡å®šçš„ Api è°ƒç”¨æ›¿æ¢ä¸º namedImportsï¼ŒæœªæŒ‡å®šçš„å˜é‡åˆ™ä¿ç•™å±æ€§å–å€¼çš„å½¢å¼ã€‚å…·ä½“æºç å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ã€‚ 12345678910111213// const apis = new Set(['navigateTo', 'navigateBack', ...])&#123; babel: &#123; preset: ['babel-preset-env'], plugins: [ // ..., ['babel-plugin-transform-taroapi', &#123; packageName: '@tarojs/taro-h5', apis &#125;] ] &#125;&#125; è¿™ä¸ªæ’ä»¶æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºé…ç½®å‚æ•°ï¼špackageNameå±æ€§æŒ‡å®šéœ€è¦è¿›è¡Œæ›¿æ¢çš„æ¨¡å—åï¼Œapisæ¥å—ä¸€ä¸ª Set å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ Api çš„åˆ—è¡¨ã€‚ ä¸ºäº†é¿å…åæœŸæ‰‹åŠ¨ç»´æŠ¤ Api åˆ—è¡¨çš„æƒ…å†µï¼Œæˆ‘ä»¬ç»™ @tarojs/taro-h5 æ¨¡å—åŠ äº†ä¸€ä¸ªç¼–è¯‘ä»»åŠ¡ï¼Œé€šè¿‡ä¸€ä¸ªç®€å•çš„Rollup æ’ä»¶ï¼Œåœ¨æ‰§è¡Œyarn buildå‘½ä»¤æ—¶ç”Ÿæˆä¸€ä»½ Api åˆ—è¡¨ï¼š ä¸‹é¢æ˜¯ç¼–è¯‘å‰åçš„ä»£ç å¯¹æ¯”ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç¼–è¯‘åsetStorageã€getStorageçš„è°ƒç”¨éƒ½è¢«æ›¿æ¢ä¸º namedImportsã€‚ 1234567891011// ç¼–è¯‘å‰import Taro from '@tarojs/taro-h5';Taro.initPxTransform(&#123;&#125;);Taro.setStorage()Taro['getStorage']()// ç¼–è¯‘åimport Taro, &#123; setStorage as _setStorage, getStorage as _getStorage &#125; from '@tarojs/taro-h5';Taro.initPxTransform(&#123;&#125;);_setStorage();_getStorage(); åˆ°è¿™é‡Œï¼Œè™½ç„¶è¿‡ç¨‹æ¯”è¾ƒè‰°è¾›ï¼Œä½†æˆ‘ä»¬å¯¹ @tarojs/taro-h5 çš„æ¨¡å—åŒ–æ”¹é€ ç»ˆäºå®Œæˆäº†ã€‚ æœ€åæˆªè‡³ç›®å‰ï¼ŒTaro åœ¨ H5 ç«¯çš„å®Œæˆåº¦å·²ç»å¾ˆé«˜ï¼Œä½†æ˜¯å¹¶ä¸å®Œç¾ã€‚æœªæ¥ï¼Œåœ¨å¯¹å·²æœ‰é—®é¢˜è¿›è¡Œä¿®å¤çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å°†ç»§ç»­ä¸º Taro H5 ç«¯å¸¦æ¥æ›´å¤šæ–°çš„ç‰¹æ€§ï¼Œæ¯”å¦‚å¯¹ç¤¾åŒºä¸­å‘¼å£°ç›¸å½“é«˜çš„switchTabã€é¡µé¢æ»šåŠ¨ç›‘å¬onPageScrollã€ä¸‹æ‹‰åˆ·æ–°onPullDownRefreshç­‰ Api çš„æ”¯æŒï¼Œæ›´åŠ ç»Ÿä¸€çš„é¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼Œä»¥åŠæ›´åŠ ç¨³å®šçš„å¤šé¡µé¢æ¨¡å¼ç­‰ç­‰ã€‚ Taro å‘å±•åˆ°ç°åœ¨ï¼Œç¦»ä¸å¼€ç¤¾åŒºçš„æ”¯æŒã€‚éå¸¸æ„Ÿè°¢åœ¨ githubã€å¾®ä¿¡ç¾¤ä¸­è¸Šè·ƒåé¦ˆçš„å¼€å‘è€…ä»¬ã€‚å¦‚æœä½ å¯¹Taroæœ‰ä»€ä¹ˆæƒ³æ³•æˆ–å»ºè®®ï¼ŒTaro éå¸¸æ¬¢è¿ä½ æ¥åæ§½æˆ–è§‚å…‰ï¼š https://github.com/NervJS/taro","pubDate":"Thu, 28 Feb 2019 15:09:41 GMT","guid":"https://aotu.io/notes/2019/02/28/taro-h5-optimize/","category":"å°ç¨‹åº"},{"title":"Taro UI 2.0 å‘å¸ƒï¼šæ–°å¢è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½ï¼Œé€‚é…æ›´å¤šå°ç¨‹åº","link":"https://aotu.io/notes/2019/02/25/taro-ui-2.0/","description":"å‰è¨€è½¬çœ¼é—´ï¼ŒTaro UI å‘å¸ƒå·²æœ‰åŠå¹´ï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒï¼Œè®©æˆ‘ä»¬æ”¶è·äº† GitHub 1400+ starã€‚åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬ä¸æ–­å®Œå–„ç»„ä»¶åº“çš„åŠŸèƒ½å’Œç‰¹æ€§ï¼Œæ–°å¢äº†è®¸å¤šç»„ä»¶å’Œå°å·¥å…·ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº: æ–°å¢æ—¥å†ã€ç´¢å¼•é€‰æ‹©ã€åŒºåŸŸé€‰æ‹©ã€å›¾ç‰‡é€‰æ‹©ç­‰åä¸€ä¸ªç»„ä»¶ é€‚é…æ”¯ä»˜å®å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åº æ–°å¢è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½ æ–°å¢ä¸»é¢˜ç”Ÿæˆå™¨ï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½ æ–°å¢ Issue Helperï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ›´è§„èŒƒåœ°å¡«å†™ Issue æ–°å¢ç»„ä»¶åœ¨ 1.0 ç‰ˆæœ¬å‘å¸ƒä¹‹åï¼Œæˆ‘ä»¬åˆé™†ç»­æ–°å¢äº†å¦‚ä¸‹åä¸€ä¸ªç»„ä»¶ï¼š è§†å›¾ç»„ä»¶ï¼šé¡µé¢æç¤ºã€ åˆ†éš”ç¬¦ã€å€’è®¡æ—¶ã€ å¹•å¸˜ ã€æ­¥éª¤æ¡ æ“ä½œåé¦ˆï¼šå…¨å±€ä¿¡æ¯ç»„ä»¶ è¡¨å•ï¼šå›¾ç‰‡é€‰æ‹©å™¨ã€åŒºåŸŸé€‰æ‹©å™¨ã€ç´¢å¼•é€‰æ‹©å™¨ã€æ—¥å†ç»„ä»¶ã€æœç´¢æ  å…¶ä¸­ï¼Œåœ¨ç¤¾åŒºé‡Œå‘¼å£°æœ€é«˜çš„ç»„ä»¶ï¼Œéæ—¥å†ç»„ä»¶è«å±ã€‚ç”±äºæ—¥å†ç»„ä»¶å¤æ‚åº¦åé«˜ï¼Œè¦é€‚é…å¤šç«¯ç¯å¢ƒéš¾åº¦åå¤§ï¼Œçºµè§‚å¸‚é¢ä¸Šçš„å°ç¨‹åº UI ç»„ä»¶åº“ï¼ŒåŒ…å«æ—¥å†ç»„ä»¶çš„å¯¥å¯¥æ— å‡ ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬å›¢é˜Ÿçš„å¤§é±¼å…„ä»ç‹¬è‡ªæŒ‘èµ·é‡æ‹…ï¼Œå‡ ä¹å®Œç¾åœ°å®ç°äº†è¯¥ç»„ä»¶ï¼Œæ­¤å¤„æŒå£°çŒ®ç»™å¤§é±¼å…„ã€‚ æ—¥å†ç»„ä»¶åŠŸèƒ½é¢„è§ˆï¼š é€‚é…æ”¯ä»˜å®å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºåœ¨ 1.0 ç‰ˆæœ¬é€‚é…å¾®ä¿¡å°ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†å¾ˆå¤šå›°éš¾ã€‚æ¯”å¦‚ï¼š å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨ Shadow DOM è¿›è¡Œæ¸²æŸ“ï¼Œå¼•èµ·äº†ä»¥ä¸‹å‡ ç§é—®é¢˜ï¼š ç»„ä»¶ä¹‹é—´æ— æ³•ä½¿ç”¨ç›¸é‚»é€‰æ‹©å™¨ï¼Œå¦‚ç»„ä»¶é—´åŠ  border çš„éœ€æ±‚ï¼Œæœ€ç»ˆåªèƒ½é€šè¿‡æ–°å¢ props ç»™å¼€å‘è€…è‡ªè¡Œæ§åˆ¶ æ— æ³•è‡ªå®šä¹‰ flex å¸ƒå±€ç»„ä»¶ï¼Œæœ€ç»ˆåªèƒ½æä¾›æ ·å¼ç»™å¼€å‘è€…è‡ªè¡Œä½¿ç”¨ Component ç»„ä»¶å¯¹åº” wxss æ–‡ä»¶çš„æ ·å¼ï¼Œåªå¯¹ç»„ä»¶ wxml å†…çš„èŠ‚ç‚¹ç”Ÿæ•ˆã€‚ç»è¿‡ä¸æ–­æ¢ç´¢ï¼Œæ‰å‘ç° addGlobalClass è¿™ä¸€å±æ€§ï¼Œéœ€åœ¨è‡ªå®šä¹‰ç»„ä»¶å†…æ¿€æ´» addGlobalClass é€‰é¡¹ï¼Œæ‰èƒ½ä½¿è‡ªå®šä¹‰ç»„ä»¶è¢« app.wxss æˆ–é¡µé¢çš„ wxss ä¸­çš„æ‰€æœ‰çš„æ ·å¼å®šä¹‰å½±å“ã€‚ã€‚ åŸç”Ÿç»„ä»¶çš„ä½¿ç”¨é™åˆ¶ã€‚ç”±äºåŸç”Ÿç»„ä»¶è„±ç¦»åœ¨ WebView æ¸²æŸ“æµç¨‹å¤–ï¼ŒåŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œæ‰€ä»¥é¡µé¢ä¸­çš„å…¶ä»–ç»„ä»¶æ— è®ºè®¾ç½® z-index ä¸ºå¤šå°‘ï¼Œéƒ½æ— æ³•ç›–åœ¨åŸç”Ÿç»„ä»¶ä¸Šã€‚ç”±æ­¤å¯¼è‡´æ¨¡æ€æ¡†ç­‰ç»„ä»¶æ— æ³•é®æŒ¡ inputã€textareaç­‰åŸç”Ÿç»„ä»¶ï¼Œé€ æˆç©¿é€æ•ˆæœã€‚ å¯å–œçš„æ˜¯ï¼Œå¾®ä¿¡å®˜æ–¹å›¢é˜Ÿå·²ç»åœ¨æ”¹å–„è¯¥é—®é¢˜ï¼Œå¯¹å°ç¨‹åºåŸç”Ÿç»„ä»¶å¼•å…¥äº†åŒå±‚æ¸²æŸ“æ¨¡å¼ã€‚é€šè¿‡åŒå±‚æ¸²æŸ“ï¼Œå°ç¨‹åºåŸç”Ÿç»„ä»¶å¯ä¸å…¶ä»–å†…ç½®ç»„ä»¶å¤„äºç›¸åŒå±‚çº§ï¼Œä¸å†æœ‰ç‰¹æ®Šçš„ä½¿ç”¨é™åˆ¶ã€‚è¯¦è§ã€‚ å°ç¨‹åºä¸æ”¯æŒ requestAnimationFrameï¼Œæ— æ³•å¾ˆå¥½åœ°å®ç° js åŠ¨ç”»ã€‚ å…‹æœå®Œä¸Šè¿°å¾®ä¿¡å°ç¨‹åºçš„å›°éš¾åï¼Œæ”¯ä»˜å®å°ç¨‹åºå’Œç™¾åº¦å°ç¨‹åºçš„é€‚é…å·¥ä½œå¤§å¤šæ˜¯è§£å†³æ ·å¼å’ŒæŸäº›APIçš„å·®å¼‚ã€‚å¾—ç›Šäº Taro è‰¯å¥½çš„æ”¯æŒï¼ŒTaro UI çš„é€‚é…å·¥ä½œæš‚æ—¶å‘Šä¸€æ®µè½ã€‚ æ–°å¢è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½Taro UI 1.0 å‘å¸ƒæ—¶åªæœ‰ä¸€å¥—é»˜è®¤çš„ä¸»é¢˜é…è‰²ï¼Œä¸ºæ»¡è¶³ä¸šåŠ¡å’Œå“ç‰Œä¸Šå¤šæ ·åŒ–çš„è§†è§‰éœ€æ±‚ï¼ŒUI åº“æ”¯æŒä¸€å®šç¨‹åº¦çš„æ ·å¼å®šåˆ¶ã€‚ Taro UI çš„ç»„ä»¶æ ·å¼æ˜¯ä½¿ç”¨ SCSS ç¼–å†™çš„ï¼Œå¦‚æœä½ çš„é¡¹ç›®ä¸­ä¹Ÿä½¿ç”¨äº† SCSSï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­æ”¹å˜ Taro UI çš„æ ·å¼å˜é‡ã€‚ æ–°å»ºä¸€ä¸ªä¸»é¢˜æ ·å¼æ–‡ä»¶ï¼ˆä¾‹å¦‚ custom-variables.scssï¼‰å¹¶è¦†ç›–é»˜è®¤ä¸»é¢˜å˜é‡ï¼š 1234/* æ”¹å˜ä¸»é¢˜å˜é‡ï¼Œå…·ä½“å˜é‡åå¯æŸ¥çœ‹ taro-ui/dist/style/variables/default.scss æ–‡ä»¶ */$color-brand: #6190E8;/* å¼•å…¥ Taro UI é»˜è®¤æ ·å¼ */@import \"~taro-ui/dist/style/index.scss\"; ä¹‹ååœ¨é¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ä»¥ä¸Šçš„æ ·å¼æ–‡ä»¶å³å¯ï¼ˆæ— éœ€é‡å¤å¼•å…¥ç»„ä»¶çš„é»˜è®¤æ ·å¼ï¼‰ã€‚ ç›®å‰ï¼Œæˆ‘ä»¬é¢å¤–å®šåˆ¶äº†äº¬ä¸œä¸»é¢˜å’Œ 7Fresh ä¸»é¢˜è‰²ï¼Œå¯é€šè¿‡æ‰«æä»¥ä¸‹äºŒç»´ç æŸ¥çœ‹ã€‚ äº¬ä¸œä¸»é¢˜ï¼š 7Fresh ä¸»é¢˜ï¼š æ–°å¢ä¸»é¢˜ç”Ÿæˆå™¨ä¸ºäº†è®©å¼€å‘è€…æ›´å¥½åœ°ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿˜æ–°å¢äº†ä¸»é¢˜ç”Ÿæˆå™¨ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨è¯¥å·¥å…·æ–¹ä¾¿åœ°å®šåˆ¶ UI ä¸»é¢˜ã€‚ ä¸»é¢˜ç”Ÿæˆå™¨åœ°å€ï¼š https://nervjs.github.io/taro-ui-theme-preview/ æ•ˆæœé¢„è§ˆï¼š æ–°å¢ Issue Helperè™½ç„¶æˆ‘ä»¬é…ç½®äº† Issue Templateï¼Œä½†ä»æœ‰éƒ¨åˆ†å¼€å‘è€…æ²¡æœ‰æ ¹æ®è§„èŒƒå¡«å†™ Issueã€‚æˆ‘ä»¬æ’æŸ¥é—®é¢˜æ—¶ç»å¸¸éœ€è¦å†æ¬¡è¯¢é—®ç‰ˆæœ¬å·ä¿¡æ¯ã€å¤ç°ä»£ç ç­‰ç­‰ï¼Œè¿™ä¸ä»…æ¶ˆè€—æˆ‘ä»¬ç»´æŠ¤é¡¹ç›®çš„ç²¾åŠ›ï¼Œè¿˜é™ä½äº† Issue å¤„ç†æ•ˆç‡ã€‚å› æ­¤æˆ‘ä»¬å‚è€ƒäº† Ant å’Œ iView å›¢é˜Ÿçš„åšæ³•ï¼Œåˆ¶ä½œäº† Issue Helper é¡µé¢ï¼Œå¸®åŠ©å¼€å‘è€…æ›´è§„èŒƒåœ°å¡«å†™ Issueã€‚ Taro UI Issue Helper åœ°å€ï¼š https://nervjs.github.io/taro-ui-issue-helper/ æ­¤å¤–ï¼Œæˆ‘ä»¬å‘ç°é‡å¤åˆ¶ä½œ Issue Helper é¡µé¢æ˜¯ä¸€ä»¶å¾ˆæµªè´¹åŠ³åŠ¨åŠ›çš„äº‹æƒ…ï¼Œäºæ˜¯å°† Issue Helper å°è£…æˆä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç®€å•é…ç½® config.jsï¼Œæ‰§è¡Œå‘½ä»¤ issue-helper build å°±å¯ä»¥ç”Ÿæˆæ‰€éœ€è¦çš„é¡µé¢ã€‚ Issue Helper å·¥å…·ä»“åº“åœ°å€ï¼š https://github.com/jimczj/issue-helper æœªæ¥è®¡åˆ’ é€‚é…å­—èŠ‚è·³åŠ¨å°ç¨‹åº å›½é™…åŒ– i18n è‡´è°¢æ„Ÿè°¢å¤§å®¶å¯¹ Taro UI çš„ä½¿ç”¨ä¸åé¦ˆï¼Œæˆ‘ä»¬ä¼šè‡´åŠ›äºå°† Taro UI æ‰“é€ æˆé«˜è´¨é‡ç»„ä»¶åº“ï¼Œä¸æ–­ä¸°å¯Œç»„ä»¶åŠŸèƒ½ä¸ç‰¹æ€§ï¼Œç´§è·Ÿ Taro çš„æ­¥ä¼é€‚é…æ›´å¤šå¹³å°ã€‚ æœ€åï¼Œæ¬¢è¿å…³æ³¨å¹¶ä½¿ç”¨æˆ‘ä»¬çš„ç»„ä»¶åº“ï¼š https://github.com/NervJS/taro-ui","pubDate":"Mon, 25 Feb 2019 04:53:41 GMT","guid":"https://aotu.io/notes/2019/02/25/taro-ui-2.0/","category":"å°ç¨‹åº"},{"title":"å…¨æ–° Phaser 3 æ¸¸æˆå¼•æ“ç‰¹æ€§ä¸€è§ˆ","link":"https://aotu.io/notes/2018/12/23/phaser3/","description":"ä»€ä¹ˆæ˜¯ Phaser ?Phaser æ˜¯ä¸€æ¬¾å¿«é€Ÿã€å…è´¹ä»¥åŠå¼€æº HTML5 æ¸¸æˆæ¡†æ¶ï¼Œå®ƒæ”¯æŒ WebGL å’Œ Canvas ä¸¤ç§æ¸²æŸ“æ¨¡å¼ï¼Œå¯ä»¥åœ¨ä»»ä½• Web æµè§ˆå™¨ç¯å¢ƒä¸‹è¿è¡Œï¼Œæ¸¸æˆå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·è½¬ä¸º iOSã€Android æ”¯æŒçš„ Native APPï¼Œå…è®¸ä½¿ç”¨ JavaScript å’Œ TypeScript è¿›è¡Œå¼€å‘ã€‚ ç›®å‰ Phaser å­˜åœ¨ä¸‰ä¸ªç‰ˆæœ¬ï¼šåˆ†åˆ«æ˜¯ Phaser 2 ç‰ˆæœ¬ã€ç¤¾åŒºç‰ˆæœ¬ Phaser CE å’Œæœ€æ–°ç‰ˆæœ¬ Phaser 3ã€‚","pubDate":"Sun, 23 Dec 2018 16:00:00 GMT","guid":"https://aotu.io/notes/2018/12/23/phaser3/","category":"H5æ¸¸æˆå¼€å‘"},{"title":"Taro 1.2ï¼šå°†å·²æœ‰å¾®ä¿¡å°ç¨‹åºè½¬æ¢ä¸ºå¤šç«¯åº”ç”¨","link":"https://aotu.io/notes/2018/12/17/taro-1-2/","description":"åœ¨è·ç¦» Taro 1.1 å‘å¸ƒ ä¹‹åä¸€ä¸ªæœˆï¼Œç»å†äº† 500 å¤šæ¬¡æäº¤å’Œ 17 ä¸ªé¢„è§ˆç‰ˆæœ¬çš„è¿­ä»£ä¹‹åï¼Œæˆ‘ä»¬æœ‰ä¿¡å¿ƒåœ¨ä»Šå¤©å‘å¸ƒ Taro 1.2 æ­£å¼ç‰ˆã€‚ Taro 1.2 æ¯”èµ· Taro 1.1 å’Œå…¶å®ƒçš„å°ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œå¢åŠ äº†è®¸å¤šé¦–æ¬¡åœ¨å°ç¨‹åºæ¡†æ¶ä¸Šå®ç°çš„åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½åŒ…æ‹¬ä½†ä¸é™äºï¼š å¾®ä¿¡å°ç¨‹åºè½¬å¤šç«¯åº”ç”¨ å­—èŠ‚è·³åŠ¨ï¼ˆå¤´æ¡ï¼‰å°ç¨‹åºæ”¯æŒ CSS Modules æ”¯æŒ MobX æ”¯æŒ å¾®ä¿¡å°ç¨‹åºè½¬å¤šç«¯åº”ç”¨å°±åƒåšå®¢å¤§æˆ˜æ—¶ä»£åšå®¢æœåŠ¡å•†æä¾›äº†ã€Œæ¬å®¶ã€å·¥å…·ä¸€æ ·ï¼ŒTaro ç°åœ¨ä¹Ÿæä¾›äº†ã€Œæ¬å®¶ã€å·¥å…·è®©ä½ æ–¹ä¾¿åœ°å…¥é©» Taro ç¤¾åŒºã€‚è½¬æ¢åŸæœ‰å¾®ä¿¡å°ç¨‹åºåº”ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å®‰è£… Taro å‘½ä»¤è¡Œå·¥å…·ï¼Œå®šä½åˆ°å¾…è½¬é¡¹ç›®æ ¹ç›®å½•ï¼Œè¿è¡Œå‘½ä»¤ï¼š1$ taro convertTaro å°±ä¼šæŠŠè½¬æ¢å¥½çš„ä»£ç ç”Ÿæˆåœ¨æ ¹ç›®å½•ä¸‹çš„ taroConvert æ–‡ä»¶å¤¹ã€‚è½¬æ¢åçš„ä»£ç æ˜¯é«˜å¯è¯»æ€§çš„ JSX ä»£ç ï¼Œæ²¡æœ‰é¢å¤–çš„åºå¤§ç»„ä»¶åº“å¼€é”€ã€‚ä½ å¯ä»¥è½»æ˜“åœ°è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæˆ–è€…ç›´æ¥å°†è¿™äº›ä»£ç é€šè¿‡ taro build å‘½ä»¤ç”Ÿæˆä»»æ„ Taro å·²ç»æ”¯æŒå¹³å°çš„åº”ç”¨ã€‚æˆ‘ä»¬å·²ç»å°è¯•ä½¿ç”¨ taro convert æˆåŠŸè½¬æ¢äº†å››ä¸ª GitHub ä¸Šæœ€çƒ­é—¨çš„å¼€æºå¾®ä¿¡å°ç¨‹åºåº”ç”¨ï¼Œå®ƒä»¬è½¬æ¢ä¹‹åéƒ½è¡¨ç°è‰¯å¥½ï¼š- EastWorld/wechat-app-mall â˜…5000+ - å¾®ä¿¡å°ç¨‹åºå•†åŸ- tumobi/nideshop-mini-program â˜…3000+ - åŸºäº Node.js + MySQL å¼€å‘çš„å¼€æºå¾®ä¿¡å°ç¨‹åºå•†åŸ- RebeccaHanjw/weapp-wechat-zhihu â˜…1000+ - ä»¿çŸ¥ä¹- jectychen/wechat-v2ex â˜…400+ - V2EX taro convert ä¸ä»…ä»…èƒ½æ”¯æŒè½¬æ¢å¾®ä¿¡å°ç¨‹åºåº”ç”¨ï¼Œå®ƒè¿˜èƒ½è½¬æ¢å¾®ä¿¡å°ç¨‹åºç¬¬ä¸‰æ–¹ç»„ä»¶ã€‚ä¾‹å¦‚ wxParse ç»è¿‡ taro convert ç¼–è¯‘ä¹‹åè¿˜èƒ½çªç ´åŸæœ‰åªèƒ½è§£æ 11 å±‚ HTML åµŒå¥—çš„é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥è§£ææ— é™å±‚ HTML åµŒå¥—ã€‚æ›´å¤šè¯¦æƒ…å¯ä»¥è®¿é—®æ–‡æ¡£ https://nervjs.github.io/taro/docs/taroize.html äº†è§£æ›´å¤šã€‚å­—èŠ‚è·³åŠ¨ï¼ˆå¤´æ¡ï¼‰å°ç¨‹åºæ”¯æŒä½œä¸ºä¸€ä¸ªã€Œå¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ã€ï¼ŒTaro å½“ç„¶ä¹Ÿä¸ä¼šæ”¾è¿‡å­—èŠ‚è·³åŠ¨å°ç¨‹åºã€‚åœ¨ Taro 1.2ï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå­—èŠ‚è·³åŠ¨å°ç¨‹åºç«¯çš„ç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…ï¼š123456789# npm script$ npm run dev:tt$ npm run build:tt# ä»…é™å…¨å±€å®‰è£…$ taro build --type tt --watch$ taro build --type tt# npx ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type tt --watch$ npx taro build --type tté€‰æ‹©å­—èŠ‚è·³åŠ¨å°ç¨‹åºæ¨¡å¼ï¼Œä½ éœ€è¦ä¸‹è½½å¹¶æ‰“å¼€å­—èŠ‚è·³åŠ¨å°ç¨‹åºå¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨é¡¹ç›®ç¼–è¯‘å®Œåé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist ç›®å½•è¿›è¡Œé¢„è§ˆã€‚ç›¸åº”åœ°ï¼ŒTaro çš„å¹³å°æ ‡è¯†ï¼ˆprocess.env.TARO_ENVï¼‰ä¹Ÿå¢åŠ äº†æ–°æˆå‘˜ttï¼Œä»£è¡¨å­—èŠ‚è·³åŠ¨å°ç¨‹åºã€‚CSS Modules æ”¯æŒ åœ¨ Taro æœ€æ—©å¼€æºçš„æ—¶å€™æˆ‘ä»¬å°±æ”¯æŒäº† SCSS ã€ LESS å’Œ Stylusï¼Œè€Œåœ¨ Taro 1.2 ä¸­æˆ‘ä»¬ç™¾å°ºç«¿å¤´æ›´è¿›ä¸€æ­¥ï¼Œç»™ç¤¾åŒºå¸¦æ¥äº† JSX çš„å¥½ä¼™ä¼´ï¼šCSS Modulesã€‚ å¯¹äº Taro è€Œè¨€æ”¯æŒ CSS Modules æœ‰ç€é‡è¦çš„æ„ä¹‰ã€‚Taro åœ¨ 1.0 çš„æ—¶å€™å·²ç»æ”¯æŒç»„ä»¶çš„ style ä¼ å…¥ JavaScript å¯¹è±¡ï¼Œæ”¯æŒäº† CSS Modules ä¹‹åç»„ä»¶çš„ className ä¹Ÿèƒ½åšè¿™ç‚¹â€”â€”è¿™æ„å‘³ç€ Taro å®Œå…¨å¯ä»¥åšåˆ° JSX çš„ä¸€é¡¹ç‰¹æ€§ï¼šã€ŒEverything in JavaScriptã€ã€‚åŒæ—¶ï¼Œé€šè¿‡ç¼–è¾‘å™¨çš„è‡ªåŠ¨è¡¥å…¨å’Œæ ¡éªŒåŠŸèƒ½ï¼Œå¼€å‘è€…å†ä¹Ÿä¸ç”¨æ‹…å¿ƒ CSS ç±»è¯¯è¾“å…¥å’Œ CSS ç±»çš„å‘½åé—®é¢˜ã€‚ ä½ å¯ä»¥æŸ¥é˜…æ–‡æ¡£ CSS Modules çš„ä½¿ç”¨ æ‰¾åˆ° CSS Modules çš„å¼€å¯æ–¹æ³•ã€‚ CSS Modules çš„æ”¯æŒä¸»è¦ç”± Taro ç¤¾åŒºçš„ä¸ªäººå¼€å‘è€… @MrKou47 (MrKou47) å¼€å‘ï¼Œæ„Ÿè°¢ä»–çš„è´¡çŒ®ã€‚ MobX æ”¯æŒ åœ¨å°ç¨‹åºåº”ç”¨å˜å¾—æ—¥è¶‹å¤æ‚çš„ä»Šå¤©ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…é€‰æ‹©ä½¿ç”¨ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚åœ¨ Taro 1.1 ä½ å¯ä»¥é€‰æ‹© Redux çš„ä½“ç³»çš„ redux-thunk ã€dva-coreã€redux-saga ç­‰å·¥å…·ã€‚åœ¨ Taro 1.2 æˆ‘ä»¬åˆå¸¦æ¥äº† taro-mobxã€‚ åœ¨ Taro ä¸­ä½¿ç”¨ MobX éå¸¸ç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡ taro init &lt;your app&gt; å‘½ä»¤åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ MobX æ¨¡æ¿é¡¹ç›®ã€‚ä¹Ÿå¯ä»¥æŸ¥é˜… ä½¿ç”¨ MobX æ–‡æ¡£å°† taro-mobx æ¥å…¥å·²æœ‰é¡¹ç›®ã€‚ MobX çš„æ”¯æŒä¸»è¦ç”± Taro ç¤¾åŒºçš„ä¸ªäººå¼€å‘è€… @nanjingboy (Tom Huang) å¼€å‘ï¼Œæ„Ÿè°¢ä»–çš„è´¡çŒ®ã€‚ æ›´å¤šç‰¹æ€§é¢å¯¹ç¤¾åŒºé‡Œç»™åŠ›çš„ä¸ªäººè´¡çŒ®è€…ï¼ŒTaro å®˜æ–¹å›¢é˜Ÿä¹Ÿæ²¡æœ‰é—²ç€ã€‚åœ¨ Taro 1.2 å¼€å‘æœŸé—´é€šè¿‡ commit å…³é—­äº† 169 ä¸ª issue çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜æŠ«æ˜Ÿæˆ´æœˆå¸¦æ¥äº†æ›´å¤šç‰¹æ€§ã€‚å…¶ä¸­å€¼å¾—ä¸€æçš„æ˜¯ï¼š H5 è·¯ç”±ç³»ç»Ÿå½»åº•é‡æ„ å°ç¨‹åºç»„ä»¶çš„ props æ”¯æŒä¼ å…¥ JSX å…ƒç´  æ”¯æŒ JSX å…ƒç´ å†™åœ¨ switch-case ä¸­ï¼Œå¹¶æ”¯æŒ if-else å’Œ switch-case çš„å¤šé‡åµŒå¥— æ”¯æŒå¼•ç”¨åˆ«åï¼ˆaliasï¼‰ ä¸ç™¾åº¦å°ç¨‹åºå’Œå­—èŠ‚è·³åŠ¨å°ç¨‹åºå®˜æ–¹é€šåŠ›åˆä½œï¼ŒæŠ¹å¹³äº†ä¸€å¤§æ³¢å’Œå¾®ä¿¡å°ç¨‹åºçš„å·®å¼‚ ä½ å¯ä»¥é€šè¿‡ CHANGELOG æŸ¥é˜…å®Œæ•´çš„åŠŸèƒ½è¿­ä»£çºªå½•ã€‚ å†™åœ¨æœ€åTaro 1.2 æœ€ä¸ºæ¿€åŠ¨äººå¿ƒçš„åŠŸèƒ½æ˜¾ç„¶æ˜¯ã€Œå¾®ä¿¡å°ç¨‹åºè½¬ Taroã€ åŠŸèƒ½ï¼Œé€šè¿‡è¿™ä¸ªåŠŸèƒ½å·²æœ‰çš„å¾®ä¿¡å°ç¨‹åºåº”ç”¨èƒ½è½¬åŒ–æ›´å¥½ç»´æŠ¤çš„ Taroï¼ˆç±» Reactï¼‰ ä»£ç ï¼Œä¹Ÿèƒ½æŠŠ Taro ä»£ç è½¬åŒ–ä¸ºå¤šç«¯åº”ç”¨ã€‚ ä½†æ›´é‡è¦çš„æ˜¯ï¼Œæœ¬æ¬¡ Taro 1.2 æ›´æ–°çš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ç‚¹å‡ç”±ä¸ªäººå¼€å‘è€…è´¡çŒ®â€”â€”è¿™å®Œå…¨ä½“ç°äº† Taro ç¤¾åŒºçš„æ´»è·ƒã€å¼ºå¤§å’Œå¼€æ”¾ã€‚æˆ‘ä»¬ä¹Ÿä¼šé•¿æœŸåœ°ç»´æŠ¤ä¸ç¤¾åŒºå¼€å‘è€…ä»¬çš„å…³ç³»ï¼Œä¸å¼€å‘è€…ä»¬ä¸€åŒæˆé•¿ï¼Œäº’åˆ©äº’èµ¢ã€‚è¿™ä¹Ÿæ˜¯ Taro é€‰æ‹©å¼€æºçš„æ„ä¹‰æ‰€åœ¨ã€‚ å¦‚æœä½ æœ‰ä»»ä½•æƒ³æ³•ï¼Œæˆ–è€…æ²¡æœ‰æƒ³æ³•ï¼ŒTaro éƒ½éå¸¸æ¬¢è¿ä½ æ¥åæ§½æˆ–è§‚å…‰ï¼š https://github.com/NervJS/taro","pubDate":"Mon, 17 Dec 2018 16:00:00 GMT","guid":"https://aotu.io/notes/2018/12/17/taro-1-2/","category":"å°ç¨‹åº"},{"title":"Taroæ·±åº¦å¼€å‘å®è·µ","link":"https://aotu.io/notes/2018/11/30/taro_practice/","description":"å‰è¨€å‡¹å‡¸å®éªŒå®¤çš„ Taro æ˜¯éµå¾ª React è¯­æ³•è§„èŒƒçš„å¤šç«¯å¼€å‘æ–¹æ¡ˆï¼ŒTaro ç›®å‰å·²å¯¹å¤–å¼€æºä¸€æ®µæ—¶é—´ï¼Œå—åˆ°äº†å‰ç«¯å¼€å‘è€…çš„å¹¿æ³›æ¬¢è¿å’Œå…³æ³¨ã€‚æˆªæ­¢ç›®å‰ star æ•°å·²ç»çªç ´11.2kï¼Œè¿˜åœ¨å¼€å¯çš„ Issues æœ‰ 200å¤šä¸ªï¼Œå·²ç»å…³é—­700å¤šä¸ªï¼Œå¯è§ä½¿ç”¨å¹¶å‚ä¸è®¨è®ºçš„å¼€å‘è€…æ˜¯éå¸¸å¤šçš„ã€‚Taro ç›®å‰å·²ç»æ”¯æŒå¾®ä¿¡å°ç¨‹åºã€H5ã€RNã€æ”¯ä»˜å®å°ç¨‹åºã€ç™¾åº¦å°ç¨‹åºï¼ŒæŒç»­è¿­ä»£ä¸­çš„ Taroï¼Œä¹Ÿæ­£åœ¨å…¼å®¹æ›´å¤šçš„ç«¯ä»¥åŠå¢åŠ ä¸€äº›æ–°ç‰¹æ€§çš„æ”¯æŒã€‚ å›å½’æ­£é¢˜ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦è®²çš„æ˜¯ Taro æ·±åº¦å¼€å‘å®è·µï¼Œç»¼åˆæˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Taro çš„ä¸€äº›ç»éªŒå’Œæ€»ç»“ï¼Œé¦–å…ˆä¼šè°ˆè°ˆ Taro ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•ï¼Œç„¶åå†ä»Taroé¡¹ç›®çš„ä»£ç ç»„ç»‡ã€æ•°æ®çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ä»¥åŠå¤šç«¯å…¼å®¹ç­‰å‡ ä¸ªæ–¹é¢æ¥é˜è¿° Taro çš„æ·±åº¦å¼€å‘å®è·µä½“éªŒã€‚ ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•è¿™ä¸ªè¦ä»ä¸¤ä¸ªæ–¹é¢æ¥è¯´ï¼Œä¸€æ˜¯å°ç¨‹åºåŸç”Ÿçš„å¼€å‘æ–¹å¼ä¸å¤Ÿå‹å¥½ï¼Œæˆ–è€…è¯´ä¸å¤Ÿå·¥ç¨‹åŒ–ï¼Œåœ¨å¼€å‘ä¸€äº›å¤§å‹é¡¹ç›®æ—¶å°±ä¼šæ˜¾å¾—å¾ˆåƒåŠ›ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ç‚¹ï¼š ä¸€ä¸ªå°ç¨‹åºé¡µé¢æˆ–ç»„ä»¶ï¼Œéœ€è¦åŒæ—¶åŒ…å« 4 ä¸ªæ–‡ä»¶ï¼Œä»¥è‡³å¼€å‘ä¸€ä¸ªåŠŸèƒ½æ¨¡å—æ—¶ï¼Œéœ€è¦å¤šä¸ªæ–‡ä»¶é—´æ¥å›åˆ‡æ¢ æ²¡æœ‰è‡ªå®šä¹‰æ–‡ä»¶é¢„å¤„ç†ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ Sassã€Less ä»¥åŠè¾ƒæ–°çš„ ES Next è¯­æ³• å­—ç¬¦ä¸²æ¨¡æ¿å¤ªè¿‡å­±å¼±ï¼Œå°ç¨‹åºçš„å­—ç¬¦ä¸²æ¨¡æ¿ä»¿çš„æ˜¯ Vueï¼Œä½†æ˜¯æ²¡æœ‰æä¾› Vue é‚£ä¹ˆå¤šçš„è¯­æ³•ç³–ï¼Œå½“å®ç°ä¸€äº›æ¯”è¾ƒå¤æ‚çš„å¤„ç†æ—¶ï¼Œå†™èµ·æ¥å°±éå¸¸éº»çƒ¦ï¼Œè™½ç„¶æä¾›äº† wxs ä½œä¸ºè¡¥å……ï¼Œä½†æ˜¯ä½¿ç”¨ä½“éªŒè¿˜æ˜¯éå¸¸ç³Ÿç³• ç¼ºä¹æµ‹è¯•å¥—ä»¶ï¼Œæ— æ³•ç¼–å†™æµ‹è¯•ä»£ç æ¥ä¿è¯é¡¹ç›®è´¨é‡ï¼Œä¹Ÿå°±ä¸èƒ½è¿›è¡ŒæŒç»­é›†æˆï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ… åŸç”Ÿçš„å¼€å‘æ–¹å¼ä¸å‹å¥½ï¼Œè‡ªç„¶å°±æƒ³è¦æœ‰æ›´é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚æ‰€ä»¥æˆ‘ä»¬å°†ç›®å…‰æŠ•å‘äº†å¸‚é¢ä¸Šæµè¡Œçš„ä¸‰å¤§å‰ç«¯æ¡†æ¶Reactã€Vueã€Angular ã€‚Angularåœ¨å›½å†…çš„æµè¡Œç¨‹åº¦ä¸é«˜ï¼Œæˆ‘ä»¬é¦–å…ˆæ’é™¤äº†è¿™ç§è¯­æ³•è§„èŒƒã€‚è€Œç±» Vue çš„å°ç¨‹åºå¼€å‘æ¡†æ¶å¸‚é¢ä¸Šå·²ç»æœ‰ä¸€äº›ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼ŒåŒæ—¶æˆ‘ä»¬éƒ¨é—¨å†…çš„æŠ€æœ¯æ ˆä¸»è¦æ˜¯ Reactï¼Œé‚£ä¹ˆ React è¯­æ³•è§„èŒƒ ä¹Ÿè‡ªç„¶æˆä¸ºäº†æˆ‘ä»¬çš„ç¬¬ä¸€é€‰æ‹©ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»¥ä¸‹å‡ ç‚¹çš„è€ƒè™‘ï¼š React ä¸€é—¨éå¸¸æµè¡Œçš„æ¡†æ¶ï¼Œä¹Ÿæœ‰å¹¿å¤§çš„å—ä¼—ï¼Œä½¿ç”¨å®ƒä¹Ÿèƒ½é™ä½å°ç¨‹åºå¼€å‘çš„å­¦ä¹ æˆæœ¬ å°ç¨‹åºçš„æ•°æ®é©±åŠ¨æ¨¡æ¿æ›´æ–°çš„æ€æƒ³ä¸å®ç°æœºåˆ¶ï¼Œä¸ React ç±»ä¼¼ React é‡‡ç”¨ JSX ä½œä¸ºè‡ªèº«æ¨¡æ¿ï¼ŒJSX ç›¸æ¯”å­—ç¬¦ä¸²æ¨¡æ¿æ¥è¯´æ›´åŠ è‡ªç”±ï¼Œæ›´è‡ªç„¶ï¼Œæ›´å…·è¡¨ç°åŠ›ï¼Œä¸éœ€è¦ä¾èµ–å­—ç¬¦ä¸²æ¨¡æ¿çš„å„ç§è¯­æ³•ç³–ï¼Œä¹Ÿèƒ½å®Œæˆå¤æ‚çš„å¤„ç† React æœ¬èº«æœ‰è·¨ç«¯çš„å®ç°æ–¹æ¡ˆ ReactNativeï¼Œå¹¶ä¸”éå¸¸æˆç†Ÿï¼Œç¤¾åŒºæ´»è·ƒï¼Œå¯¹äº Taro æ¥è¯´æœ‰æ›´å¤šçš„å¤šç«¯å¼€å‘å¯èƒ½æ€§ ç»¼ä¸Šæ‰€è¿°ï¼ŒTaro æœ€ç»ˆé‡‡ç”¨äº† React è¯­æ³• æ¥ä½œä¸ºè‡ªå·±çš„è¯­æ³•æ ‡å‡†ï¼Œé…åˆå‰ç«¯å·¥ç¨‹åŒ–çš„æ€æƒ³ï¼Œä¸ºå°ç¨‹åºå¼€å‘æ‰“é€ äº†æ›´åŠ ä¼˜é›…çš„å¼€å‘ä½“éªŒã€‚ Taroé¡¹ç›®çš„ä»£ç ç»„ç»‡è¦è¿›è¡Œ Taro çš„é¡¹ç›®å¼€å‘ï¼Œé¦–å…ˆè‡ªç„¶è¦å®‰è£… taro-cliï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•å¯å‚ç…§æ–‡æ¡£ï¼Œè¿™é‡Œä¸åšè¿‡å¤šä»‹ç»äº†ï¼Œé»˜è®¤ä½ å·²ç»è£…å¥½äº† taro-cli å¹¶èƒ½è¿è¡Œå‘½ä»¤ã€‚ ç„¶åæˆ‘ä»¬ç”¨ cli æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¾—åˆ°çš„é¡¹ç›®æ¨¡æ¿å¦‚ä¸‹ï¼š 12345678910111213â”œâ”€â”€ dist ç¼–è¯‘ç»“æœç›®å½•â”œâ”€â”€ config é…ç½®ç›®å½•| â”œâ”€â”€ dev.js å¼€å‘æ—¶é…ç½®| â”œâ”€â”€ index.js é»˜è®¤é…ç½®| â””â”€â”€ prod.js æ‰“åŒ…æ—¶é…ç½®â”œâ”€â”€ src æºç ç›®å½•| â”œâ”€â”€ pages é¡µé¢æ–‡ä»¶ç›®å½•| | â”œâ”€â”€ index indexé¡µé¢ç›®å½•| | | â”œâ”€â”€ index.js indexé¡µé¢é€»è¾‘| | | â””â”€â”€ index.css indexé¡µé¢æ ·å¼| â”œâ”€â”€ app.css é¡¹ç›®æ€»é€šç”¨æ ·å¼| â””â”€â”€ app.js é¡¹ç›®å…¥å£æ–‡ä»¶â””â”€â”€ package.json å¦‚æœæ˜¯ååˆ†ç®€å•çš„é¡¹ç›®ï¼Œç”¨è¿™æ ·çš„æ¨¡æ¿ä¾¿å¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œåœ¨ index.js æ–‡ä»¶ä¸­ç¼–å†™é¡µé¢æ‰€éœ€è¦çš„é€»è¾‘ å‡å¦‚é¡¹ç›®å¼•å…¥äº† reduxï¼Œä¾‹å¦‚æˆ‘ä»¬ä¹‹å‰å¼€å‘çš„é¡¹ç›®ï¼Œç›®å½•åˆ™æ˜¯è¿™æ ·çš„ï¼š 1234567891011121314151617181920â”œâ”€â”€ dist ç¼–è¯‘ç»“æœç›®å½•â”œâ”€â”€ config é…ç½®ç›®å½•| â”œâ”€â”€ dev.js å¼€å‘æ—¶é…ç½®| â”œâ”€â”€ index.js é»˜è®¤é…ç½®| â””â”€â”€ prod.js æ‰“åŒ…æ—¶é…ç½®â”œâ”€â”€ src æºç ç›®å½•| â”œâ”€â”€ actions reduxé‡Œçš„actions| â”œâ”€â”€ asset å›¾ç‰‡ç­‰é™æ€èµ„æº| â”œâ”€â”€ components ç»„ä»¶æ–‡ä»¶ç›®å½•| â”œâ”€â”€ constants å­˜æ”¾å¸¸é‡çš„åœ°æ–¹ï¼Œä¾‹å¦‚apiã€ä¸€äº›é…ç½®é¡¹| â”œâ”€â”€ reducers reduxé‡Œçš„reducers| â”œâ”€â”€ store reduxé‡Œçš„store| â”œâ”€â”€ utils å­˜æ”¾å·¥å…·ç±»å‡½æ•°| â”œâ”€â”€ pages é¡µé¢æ–‡ä»¶ç›®å½•| | â”œâ”€â”€ index indexé¡µé¢ç›®å½•| | | â”œâ”€â”€ index.js indexé¡µé¢é€»è¾‘| | | â””â”€â”€ index.css indexé¡µé¢æ ·å¼| â”œâ”€â”€ app.css é¡¹ç›®æ€»é€šç”¨æ ·å¼| â””â”€â”€ app.js é¡¹ç›®å…¥å£æ–‡ä»¶â””â”€â”€ package.json æˆ‘ä»¬ä¹‹å‰å¼€å‘çš„ä¸€ä¸ªç”µå•†å°ç¨‹åºï¼Œæ•´ä¸ªé¡¹ç›®å¤§æ¦‚3ä¸‡è¡Œä»£ç ï¼Œæ•°åä¸ªé¡µé¢ï¼Œå°±æ˜¯æŒ‰ä¸Šè¿°ç›®å½•çš„æ–¹å¼ç»„ç»‡ä»£ç çš„ã€‚æ¯”è¾ƒé‡è¦çš„æ–‡ä»¶å¤¹ä¸»è¦æ˜¯pagesã€componentså’Œactionsã€‚ pagesé‡Œé¢æ˜¯å„ä¸ªé¡µé¢çš„å…¥å£æ–‡ä»¶ï¼Œç®€å•çš„é¡µé¢å°±ç›´æ¥ä¸€ä¸ªå…¥å£æ–‡ä»¶å¯ä»¥äº†ï¼Œå€˜è‹¥é¡µé¢æ¯”è¾ƒå¤æ‚é‚£ä¹ˆå…¥å£æ–‡ä»¶å°±ä¼šä½œä¸ºç»„ä»¶çš„èšåˆæ–‡ä»¶ï¼Œreduxçš„ç»‘å®šä¸€èˆ¬ä¹Ÿæ˜¯æ­¤é¡µé¢é‡Œè¿›è¡Œã€‚ ç»„ä»¶éƒ½æ”¾åœ¨componentsé‡Œé¢ã€‚é‡Œé¢çš„ç›®å½•æ˜¯è¿™æ ·çš„ï¼Œå‡å¦‚æœ‰ä¸ªcouponä¼˜æƒ åˆ¸é¡µé¢ï¼Œåœ¨pagesè‡ªç„¶å…ˆæœ‰ä¸ªcouponï¼Œä½œä¸ºé¡µé¢å…¥å£ï¼Œç„¶åå®ƒçš„ç»„ä»¶å°±ä¼šå­˜æ”¾åœ¨components/couponé‡Œé¢ï¼Œå°±æ˜¯componentsé‡Œé¢ä¹Ÿä¼šæŒ‰ç…§é¡µé¢åˆ†æ¨¡å—ï¼Œå…¬å…±çš„ç»„ä»¶å¯ä»¥å»ºä¸€ä¸ªcomponents/publicæ–‡ä»¶å¤¹ï¼Œè¿›è¡Œå¤ç”¨ã€‚ è¿™æ ·çš„å¥½å¤„æ˜¯é¡µé¢ä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚æ‰€ä»¥æˆ‘ä»¬å‡ ä¸ªå¼€å‘äººå‘˜ï¼Œä¹Ÿæ˜¯æŒ‰ç…§é¡µé¢çš„ç»´åº¦æ¥è¿›è¡Œåˆ†å·¥ï¼Œäº’ä¸å¹²æ‰°ï¼Œå¤§å¤§æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚ actionsè¿™ä¸ªæ–‡ä»¶å¤¹ä¹Ÿæ˜¯æ¯”è¾ƒé‡è¦ï¼Œè¿™é‡Œå¤„ç†çš„æ˜¯æ‹‰å–æ•°æ®ï¼Œæ•°æ®å†å¤„ç†çš„é€»è¾‘ã€‚å¯ä»¥è¯´ï¼Œæ•°æ®å¤„ç†å¾—å¥½ï¼ŒæµåŠ¨æ¸…æ™°ï¼Œæ•´ä¸ªé¡¹ç›®å°±æˆåŠŸäº†ä¸€åŠï¼Œå…·ä½“å¯ä»¥çœ‹ä¸‹é¢æ•°æ®çŠ¶æ€ç®¡ç†çš„éƒ¨åˆ†ã€‚å¦‚ä¸Šï¼Œå‡å¦‚æ˜¯couponé¡µé¢çš„actionsï¼Œé‚£ä¹ˆå°±ä¼šæ”¾åœ¨actions/couponé‡Œé¢ï¼Œå¯ä»¥å†ä¸€æ¬¡è§åˆ°ï¼Œæ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯ä»¥é¡µé¢çš„ç»´åº¦æ¥åŒºåˆ†çš„ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œassetæ–‡ä»¶ç”¨æ¥å­˜æ”¾çš„é™æ€èµ„æºï¼Œå¦‚ä¸€äº›iconç±»çš„å›¾ç‰‡ï¼Œä½†å»ºè®®ä¸è¦å­˜æ”¾å¤ªå¤šï¼Œæ¯•ç«Ÿç¨‹åºåŒ…æœ‰é™åˆ¶ã€‚è€Œconstantsåˆ™æ˜¯ä¸€äº›å­˜æ”¾å¸¸é‡çš„åœ°æ–¹ï¼Œä¾‹å¦‚apiåŸŸåï¼Œé…ç½®ç­‰ç­‰ã€‚ é¡¹ç›®æ­å»ºå®Œæ¯•åï¼Œåœ¨æ ¹ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤è¡Œ npm run build:weapp æˆ–è€… taro build --type weapp --watch ç¼–è¯‘æˆå°ç¨‹åºï¼Œç„¶åå°±å¯ä»¥æ‰“å¼€å°ç¨‹åºå¼€å‘å·¥å…·è¿›è¡Œé¢„è§ˆå¼€å‘äº†ã€‚ç¼–è¯‘æˆå…¶ä»–ç«¯çš„è¯ï¼Œåªéœ€æŒ‡å®š type å³å¯ï¼ˆå¦‚ç¼–è¯‘ H5 ï¼štaro build --type h5 --watch ï¼‰ã€‚ ä½¿ç”¨ Taro å¼€å‘é¡¹ç›®æ—¶ï¼Œä»£ç ç»„ç»‡å¥½ï¼Œéµå¾ªè§„èŒƒå’Œçº¦å®šï¼Œä¾¿æˆåŠŸäº†ä¸€åŠï¼Œè‡³å°‘ä¼šè®©å¼€å‘å˜å¾—æ›´æœ‰æ•ˆç‡ã€‚ æ•°æ®çŠ¶æ€ç®¡ç†ä¸Šé¢è¯´åˆ°ï¼Œä¼šç”¨ redux è¿›è¡Œæ•°æ®çŠ¶æ€ç®¡ç†ã€‚ è¯´åˆ° reduxï¼Œç›¸ä¿¡å¤§å®¶æ—©å·²è€³ç†Ÿèƒ½è¯¦äº†ã€‚åœ¨ Taro ä¸­ï¼Œå®ƒçš„ç”¨æ³•å’Œå¹³æ—¶åœ¨ React ä¸­çš„ç”¨æ³•å¤§åŒå°å¼‚ï¼Œå…ˆå»ºç«‹ storeã€reducersï¼Œå†ç¼–å†™ actionsï¼›ç„¶åé€šè¿‡@tarojs/reduxï¼Œä½¿ç”¨Provider å’Œ connectï¼Œå°† store å’Œ actions ç»‘å®šåˆ°ç»„ä»¶ä¸Šã€‚åŸºç¡€çš„ç”¨æ³•å¤§å®¶éƒ½æ‡‚ï¼Œä¸‹é¢æˆ‘ç»™å¤§å®¶ä»‹ç»ä¸‹å¦‚ä½•æ›´å¥½åœ°ä½¿ç”¨ reduxã€‚ æ•°æ®é¢„å¤„ç†ç›¸ä¿¡å¤§å®¶éƒ½é‡åˆ°è¿‡è¿™ç§æ—¶å€™ï¼Œæ¥å£è¿”å›çš„æ•°æ®å’Œé¡µé¢æ˜¾ç¤ºçš„æ•°æ®å¹¶ä¸æ˜¯å®Œå…¨å¯¹åº”çš„ï¼Œå¾€å¾€éœ€è¦å†åšä¸€å±‚é¢„å¤„ç†ã€‚é‚£ä¹ˆè¿™ä¸ªä¸šåŠ¡é€»è¾‘åº”è¯¥åœ¨å“ªé‡Œç®¡ç†ï¼Œæ˜¯ç»„ä»¶å†…éƒ¨ï¼Œè¿˜æ˜¯reduxçš„æµç¨‹é‡Œï¼Ÿ ä¸¾ä¸ªä¾‹å­ï¼š ä¾‹å¦‚ä¸Šå›¾çš„è´­ç‰©è½¦æ¨¡å—ï¼Œæ¥å£è¿”å›çš„æ•°æ®æ˜¯ 123456789&#123; code: 0, data: &#123; shopMap: &#123;...&#125;, // å­˜æ”¾è´­ç‰©è½¦é‡Œå•†å“çš„åº—é“ºä¿¡æ¯çš„map goods: &#123;...&#125;, // è´­ç‰©è½¦é‡Œçš„å•†å“ä¿¡æ¯ ... &#125; ...&#125; å¯¹çš„ï¼Œè´­è½¦é‡Œçš„å•†å“åº—é“ºå’Œå•†å“æ˜¯æ”¾åœ¨ä¸¤ä¸ªå¯¹è±¡é‡Œé¢çš„ï¼Œä½†è§†å›¾è¦æ±‚å®ƒä»¬è¦æ˜¾ç¤ºåœ¨ä¸€èµ·ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœç›´æ¥å°†è¿”å›çš„æ•°æ®å­˜åˆ°storeï¼Œç„¶ååœ¨ç»„ä»¶å†…éƒ¨renderçš„æ—¶å€™ä¸œæ‹¼è¥¿å‡‘ï¼Œå°†ä¸¤è€…ä¿¡æ¯åŒ¹é…ï¼Œå†åšæ˜¾ç¤ºçš„è¯ï¼Œä¼šæ˜¾å¾—ç»„ä»¶å†…éƒ¨çš„é€»è¾‘ååˆ†çš„æ··ä¹±ï¼Œä¸å¤Ÿçº¯ç²¹ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ï¼Œåœ¨æ¥å£è¿”å›æ•°æ®ä¹‹åï¼Œç›´æ¥å°†å…¶å¤„ç†ä¸ºä¸é¡µé¢æ˜¾ç¤ºå¯¹åº”çš„æ•°æ®ï¼Œç„¶åå†dispatchå¤„ç†åçš„æ•°æ®ï¼Œç›¸å½“äºåšäº†ä¸€å±‚æ‹¦æˆªï¼Œåƒä¸‹é¢è¿™æ ·ï¼š 123456789101112const data = result.data // resultä¸ºæ¥å£è¿”å›çš„æ•°æ®const cartData = handleCartData(data) // handleCartDataä¸ºå¤„ç†æ•°æ®çš„å‡½æ•°dispatch(&#123;type: 'RECEIVE_CART', payload: cartData&#125;) // dispatchå¤„ç†è¿‡åçš„å‡½æ•°...// handleCartDataå¤„ç†åçš„æ•°æ®&#123; commoditys: [&#123; shop: &#123;...&#125;, // å•†å“åº—é“ºçš„ä¿¡æ¯ goods: &#123;...&#125;, // å¯¹åº”å•†å“ä¿¡æ¯ &#125;, ...]&#125; å¯ä»¥è§åˆ°ï¼Œå¤„ç†æ•°æ®çš„æµç¨‹åœ¨renderå‰è¢«æ‹¦æˆªå¤„ç†äº†ï¼Œå°†å¯¹åº”çš„å•†å“åº—é“ºå’Œå•†å“æ”¾åœ¨äº†ä¸€ä¸ªå¯¹è±¡äº†. è¿™æ ·åšæœ‰å¦‚ä¸‹å‡ ä¸ªå¥½å¤„ï¼š ä¸€ä¸ªæ˜¯ç»„ä»¶çš„æ¸²æŸ“æ›´çº¯ç²¹ï¼Œåœ¨ç»„ä»¶å†…éƒ¨ä¸ç”¨å†å…³å¿ƒå¦‚ä½•å°†æ•°æ®ä¿®æ”¹è€Œæ»¡è¶³è§†å›¾è¦æ±‚ï¼Œåªéœ€å…³å¿ƒç»„ä»¶æœ¬èº«çš„é€»è¾‘ï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’ç­‰ äºŒæ˜¯æ•°æ®çš„æµåŠ¨æ›´å¯æ§ï¼Œåå°æ•°æ® â€”â€”&gt; æ‹¦æˆªå¤„ç† â€”â€”&gt; æœŸæœ›çš„æ•°æ®ç»“æ„ â€”â€”&gt; ç»„ä»¶ï¼Œå‡å¦‚åå°è¿”å›çš„æ•°æ®æœ‰å˜åŠ¨ï¼Œæˆ‘ä»¬è¦åšçš„åªæ˜¯æ”¹å˜ handleCartData å‡½æ•°é‡Œé¢çš„é€»è¾‘ï¼Œä¸ç”¨æ”¹åŠ¨ç»„ä»¶å†…éƒ¨çš„é€»è¾‘ã€‚ å®é™…ä¸Šï¼Œä¸åªæ˜¯åå°æ•°æ®è¿”å›çš„æ—¶å€™ï¼Œå…¶å®ƒæ•°æ®ç»“æ„éœ€è¦å˜åŠ¨çš„æ—¶å€™éƒ½å¯ä»¥åšä¸€å±‚æ•°æ®æ‹¦æˆªï¼Œæ‹¦æˆªçš„æ—¶æœºä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘è°ƒæ•´ï¼Œé‡ç‚¹æ˜¯è¦è®©ç»„ä»¶å†…éƒ¨æœ¬èº«ä¸å…³å¿ƒæ•°æ®ä¸è§†å›¾æ˜¯å¦å¯¹åº”ï¼Œåªä¸“æ³¨äºå†…éƒ¨äº¤äº’çš„é€»è¾‘ï¼Œè¿™ä¹Ÿå¾ˆç¬¦åˆ React æœ¬èº«çš„åˆè¡·ï¼Œæ•°æ®é©±åŠ¨è§†å›¾ã€‚ ç”¨Connectå®ç°è®¡ç®—å±æ€§è®¡ç®—å±æ€§ï¼Ÿè¿™ä¸æ˜¯å“åº”å¼è§†å›¾åº“æ‰ä¼šæœ‰çš„ä¹ˆï¼Œå…¶å®ä¹Ÿä¸æ˜¯çœŸæ­£çš„è®¡ç®—å±æ€§ï¼Œåªæ˜¯é€šè¿‡ä¸€äº›å¤„ç†è¾¾åˆ°æ¨¡æ‹Ÿçš„æ•ˆæœè€Œå·²ã€‚å› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨ redux å°±åªæ˜¯æ ¹æ®æ ·æ¿ä»£ç å¤åˆ¶ä¸€ä¸‹ï¼Œæ”¹æ”¹ç»„ä»¶å„è‡ªçš„storeã€actionsã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒå¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š 123456789101112131415export default connect((&#123; cart,&#125;) =&gt; (&#123; couponData: cart.couponData, commoditys: cart.commoditys, editSkuData: cart.editSkuData&#125;), (dispatch) =&gt; (&#123; // ...actionsç»‘å®š&#125;))(Cart)// ç»„ä»¶é‡Œrender () &#123; const isShowCoupon = this.props.couponData.length !== 0 return isShowCoupon &amp;&amp; &lt;Coupon /&gt;&#125; ä¸Šé¢æ˜¯å¾ˆæ™®é€šçš„ä¸€ç§connectå†™æ³•ï¼Œç„¶årenderå‡½æ•°æ ¹æ®couponDataé‡Œæ˜¯å¦æ•°æ®æ¥æ¸²æŸ“ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠthis.props.couponData.length !== 0è¿™ä¸ªåˆ¤æ–­ä¸¢åˆ°connecté‡Œï¼Œè¾¾æˆä¸€ç§computedçš„æ•ˆæœï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718export default connect((&#123; cart,&#125;) =&gt; &#123; const &#123; couponData, commoditys, editSkuData &#125; = cart const isShowCoupon = couponData.length !== 0 return &#123; isShowCoupon, couponData, commoditys, editSkuData&#125;&#125;, (dispatch) =&gt; (&#123; // ...actionsç»‘å®š&#125;))(Cart)// ç»„ä»¶é‡Œrender () &#123; return this.props.isShowCoupon &amp;&amp; &lt;Coupon /&gt;&#125; å¯ä»¥è§åˆ°ï¼Œåœ¨connecté‡Œå®šä¹‰äº†isShowCouponå˜é‡ï¼Œå®ç°äº†æ ¹æ®couponDataæ¥è¿›è¡Œcomputedçš„æ•ˆæœã€‚ å®é™…ä¸Šï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ•°æ®æ‹¦æˆªå¤„ç†ã€‚é™¤äº†computedï¼Œè¿˜å¯ä»¥å®ç°å…¶å®ƒçš„åŠŸèƒ½ï¼Œå…·ä½“å°±ç”±å„ä½çœ‹å®˜è‡ªç”±å‘æŒ¥äº†ã€‚ æ€§èƒ½ä¼˜åŒ–å…³äºæ•°æ®çŠ¶æ€å¤„ç†ï¼Œæˆ‘ä»¬æåˆ°äº†ä¸¤ç‚¹ï¼Œä¸»è¦éƒ½æ˜¯å…³äº redux çš„ç”¨æ³•ã€‚æ¥ä¸‹æˆ‘ä»¬èŠä¸€ä¸‹å…³äºæ€§èƒ½ä¼˜åŒ–çš„ã€‚ setStateçš„ä½¿ç”¨å…¶å®åœ¨å°ç¨‹åºçš„å¼€å‘ä¸­ï¼Œæœ€å¤§å¯èƒ½çš„ä¼šé‡åˆ°çš„æ€§èƒ½é—®é¢˜ï¼Œå¤§å¤šæ•°å‡ºç°åœ¨setDataï¼ˆå…·ä½“åˆ° Taro ä¸­å°±æ˜¯è°ƒç”¨ setState å‡½æ•°ï¼‰ä¸Šã€‚è¿™æ˜¯ç”±å°ç¨‹åºçš„è®¾è®¡æœºåˆ¶æ‰€å¯¼è‡´çš„ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡ setDataï¼Œå°ç¨‹åºå†…éƒ¨éƒ½ä¼šå°†è¯¥éƒ¨åˆ†æ•°æ®åœ¨é€»è¾‘å±‚ï¼ˆè¿è¡Œç¯å¢ƒ JSCoreï¼‰è¿›è¡Œç±»ä¼¼åºåˆ—åŒ–çš„æ“ä½œï¼Œå°†æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ä¼ é€’ç»™è§†å›¾å±‚ï¼ˆè¿è¡Œç¯å¢ƒ WebViewï¼‰ï¼Œè§†å›¾å±‚é€šè¿‡ååºåˆ—åŒ–æ‹¿åˆ°æ•°æ®åå†è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸‹æ¥æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ã€‚ æ‰€ä»¥å…³äºsetStateçš„ä½¿ç”¨ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸåˆ™ï¼š é¿å…ä¸€æ¬¡æ€§æ›´æ–°å·¨å¤§çš„æ•°æ®ã€‚è¿™ä¸ªæ›´å¤šçš„æ˜¯ç»„ä»¶è®¾è®¡çš„é—®é¢˜ï¼Œåœ¨å¹³è¡¡å¥½å¼€å‘æ•ˆç‡çš„æƒ…å†µä¸‹å°½å¯èƒ½åœ°ç»†åˆ†ç»„ä»¶ã€‚ é¿å…é¢‘ç¹åœ°è°ƒç”¨ setStateã€‚å®é™…ä¸Šåœ¨ Taro ä¸­ setState æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šå¸®ä½ åšäº†è¿™å±‚ä¼˜åŒ–ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°é‡Œè°ƒç”¨äº†ä¸¤æ¬¡ setStateï¼Œæœ€å Taro ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­å°†ä¸¤è€…åˆå¹¶ï¼Œå¹¶å‰”é™¤é‡å¤æ•°æ®ã€‚ é¿å…åå°æ€é¡µé¢è¿›è¡Œ setStateã€‚è¿™ä¸ªæ›´æœ‰å¯èƒ½æ˜¯å› ä¸ºåœ¨å®šæ—¶å™¨ç­‰å¼‚æ­¥æ“ä½œä¸­ä½¿ç”¨äº† setStateï¼Œå¯¼è‡´åå°æ€é¡µé¢è¿›è¡Œäº† setState æ“ä½œã€‚è¦è§£å†³é—®é¢˜è¯¥å°±åœ¨é¡µé¢é”€æ¯æˆ–æ˜¯éšè—æ—¶è¿›è¡Œé”€æ¯å®šæ—¶å™¨æ“ä½œå³å¯ã€‚ åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–åœ¨æˆ‘ä»¬å¼€å‘çš„ä¸€ä¸ªå•†å“åˆ—è¡¨é¡µé¢ä¸­ï¼Œæ˜¯éœ€è¦æœ‰æ— é™ä¸‹æ‹‰çš„åŠŸèƒ½ã€‚ å› æ­¤ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå½“åŠ è½½çš„å•†å“æ•°æ®è¶Šæ¥è¶Šå¤šæ—¶ï¼Œå°±ä¼šæŠ¥é”™ï¼ŒinvokeWebviewMethod æ•°æ®ä¼ è¾“é•¿åº¦ä¸º 1227297 å·²ç»è¶…è¿‡æœ€å¤§é•¿åº¦ 1048576ã€‚åŸå› å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼Œå°ç¨‹åºåœ¨ setData çš„æ—¶å€™ä¼šå°†è¯¥éƒ¨åˆ†æ•°æ®åœ¨é€»è¾‘å±‚ä¸è§†å›¾å±‚ä¹‹é—´ä¼ é€’ï¼Œå½“æ•°æ®é‡è¿‡å¤§æ—¶å°±ä¼šè¶…å‡ºé™åˆ¶ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ä¸ªå¤§åˆ†é¡µæ€æƒ³çš„æ–¹æ³•ã€‚å°±æ˜¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­è®°å½•å½“å‰åˆ†é¡µï¼Œè¾¾åˆ° 10 é¡µçš„æ—¶å€™ï¼Œå°±ä»¥ 10 é¡µä¸ºåˆ†å‰²ç‚¹ï¼Œå°†å½“å‰ this.state é‡Œçš„ list å–åˆ†å‰²ç‚¹åé¢çš„æ•°æ®ï¼Œåˆ¤æ–­æ»šåŠ¨å‘å‰æ»šåŠ¨å°±å°†å‰é¢æ•°æ® setState è¿›å»ï¼Œæµç¨‹å›¾å¦‚ä¸‹ï¼š å¯ä»¥è§åˆ°ï¼Œæˆ‘ä»¬å…ˆæŠŠå•†å“æ‰€æœ‰çš„åŸå§‹æ•°æ®æ”¾åœ¨this.allListä¸­ï¼Œç„¶ååˆ¤æ–­æ ¹æ®é¡µé¢çš„æ»šåŠ¨é«˜åº¦ï¼Œåœ¨é¡µé¢æ»šåŠ¨äº‹ä»¶ä¸­åˆ¤æ–­å½“å‰çš„é¡µç ã€‚é¡µç å°äº10ï¼Œå– this.allList.slice çš„å‰åé¡¹ï¼Œå¤§äºç­‰äº10ï¼Œåˆ™å–ååé¡¹ï¼Œæœ€åå†è°ƒç”¨ this.setState è¿›è¡Œåˆ—è¡¨æ¸²æŸ“ã€‚è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼ŒæŠŠçœ‹å¾—è§çš„æ•°æ®æ‰æ¸²æŸ“å‡ºæ¥ï¼Œä»è€Œé¿å…æ•°æ®é‡è¿‡å¤§è€Œå¯¼è‡´çš„æŠ¥é”™ã€‚ åŒæ—¶ä¸ºäº†æå‰æ¸²æŸ“ï¼Œæˆ‘ä»¬ä¼šé¢„è®¾ä¸€ä¸ª500çš„é˜ˆå€¼ï¼Œä½¿æ•´ä¸ªæ¸²æŸ“åˆ‡æ¢çš„æµç¨‹æ›´åŠ é¡ºç•…ã€‚ å¤šç«¯å…¼å®¹å°½ç®¡ Taro ç¼–è¯‘å¯ä»¥é€‚é…å¤šç«¯ï¼Œä½†æœ‰äº›æƒ…å†µæˆ–è€…æœ‰äº› API åœ¨ä¸åŒç«¯çš„è¡¨ç°å·®å¼‚æ˜¯ååˆ†å·¨å¤§çš„ï¼Œè¿™æ—¶å€™ Taro æ²¡åŠæ³•å¸®æˆ‘ä»¬é€‚é…ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é€‚é…ã€‚ process.env.TARO_ENVä½¿ç”¨process.env.TARO_ENVå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å½“å‰çš„ç¼–è¯‘ç¯å¢ƒï¼Œä»è€Œåšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œç›®å‰å®ƒçš„å–å€¼æœ‰ weapp ã€swan ã€ alipay ã€ h5 ã€ rn äº”ä¸ªã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªå˜é‡æ¥ä¹¦å†™å¯¹åº”ä¸€äº›ä¸åŒç¯å¢ƒä¸‹çš„ä»£ç ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šå°†ä¸å±äºå½“å‰ç¼–è¯‘ç±»å‹çš„ä»£ç å»æ‰ï¼Œåªä¿ç•™å½“å‰ç¼–è¯‘ç±»å‹ä¸‹çš„ä»£ç ï¼Œä»è€Œè¾¾åˆ°å…¼å®¹çš„ç›®çš„ã€‚ä¾‹å¦‚æƒ³åœ¨å¾®ä¿¡å°ç¨‹åºå’Œ H5 ç«¯åˆ†åˆ«å¼•ç”¨ä¸åŒèµ„æºï¼š 12345if (process.env.TARO_ENV === 'weapp') &#123; require('path/to/weapp/name')&#125; else if (process.env.TARO_ENV === 'h5') &#123; require('path/to/h5/name')&#125; æˆ‘ä»¬çŸ¥é“äº†è¿™ä¸ªå˜é‡çš„ç”¨æ³•åï¼Œå°±å¯ä»¥è¿›è¡Œä¸€äº›å¤šç«¯å…¼å®¹äº†ï¼Œä¸‹é¢ä¸¾ä¸¤ä¸ªä¾‹å­æ¥è¯¦ç»†é˜è¿° æ»šåŠ¨äº‹ä»¶å…¼å®¹åœ¨å°ç¨‹åºä¸­ï¼Œç›‘å¬é¡µé¢æ»šåŠ¨éœ€è¦åœ¨é¡µé¢ä¸­çš„onPageScrolläº‹ä»¶é‡Œè¿›è¡Œï¼Œè€Œåœ¨ H5 ä¸­åˆ™æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒç”¨window.addEventListeneræ¥è¿›è¡Œäº‹ä»¶ç»‘å®šï¼Œæ‰€ä»¥å…·ä½“çš„å…¼å®¹æˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†ï¼š 123456789101112131415161718192021222324class Demo extends Component &#123; constructor() &#123; super(...arguments) this.state = &#123; &#125; this.pageScrollFn = throttle(this.scrollFn, 200, this) &#125; scrollFn = (scrollTop) =&gt; &#123; // do something &#125; // åœ¨H5æˆ–è€…å…¶å®ƒç«¯ä¸­ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«å¿½ç•¥ onPageScroll (e) &#123; this.pageScrollFn(e.scrollTop) &#125; componentDidMount () &#123; // åªæœ‰ç¼–è¯‘ä¸ºh5æ—¶ä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘ if (process.env.TARO_ENV === 'h5') &#123; window.addEventListener('scroll', this.pageScrollFn) &#125; &#125;&#125; å¯ä»¥è§åˆ°ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰äº†é¡µé¢æ»šåŠ¨æ—¶æ‰€éœ€æ‰§è¡Œçš„å‡½æ•°ï¼ŒåŒæ—¶å¤–é¢åšäº†ä¸€å±‚èŠ‚æµçš„å¤„ç†ï¼ˆä¸äº†è§£å‡½æ•°èŠ‚æµçš„å¯ä»¥çœ‹è¿™é‡Œï¼‰ã€‚ç„¶åï¼Œåœ¨ onPageScroll å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†è¯¥å‡½æ•°æ‰§è¡Œã€‚åŒæ—¶çš„ï¼Œåœ¨ componentDidMount ä¸­ï¼Œè¿›è¡Œç¯å¢ƒåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ h5 ç¯å¢ƒå°±å°†å…¶ç»‘å®šåˆ° window çš„æ»šåŠ¨äº‹ä»¶ä¸Šã€‚ é€šè¿‡è¿™æ ·çš„å¤„ç†ï¼Œåœ¨å°ç¨‹åºä¸­ï¼Œé¡µé¢æ»šåŠ¨æ—¶å°±ä¼šæ‰§è¡Œ onPageScroll å‡½æ•°ï¼ˆåœ¨å…¶å®ƒç«¯è¯¥å‡½æ•°ä¼šè¢«å¿½ç•¥ï¼‰ï¼›åœ¨ h5 ç«¯ï¼Œåˆ™ç›´æ¥å°†æ»šåŠ¨äº‹ä»¶ç»‘å®šåˆ°windowä¸Šã€‚å› æ­¤æˆ‘ä»¬å°±è¾¾æˆå°ç¨‹åºï¼Œh5ç«¯çš„æ»šåŠ¨äº‹ä»¶çš„ç»‘å®šå…¼å®¹ï¼ˆå…¶å®ƒç«¯çš„å¤„ç†ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼‰ã€‚ canvaså…¼å®¹å‡å¦‚è¦åŒæ—¶åœ¨å°ç¨‹åºå’Œ H5 ä¸­ä½¿ç”¨ canvasï¼ŒåŒæ ·æ˜¯éœ€è¦è¿›è¡Œä¸€äº›å…¼å®¹å¤„ç†ã€‚canvas åœ¨å°ç¨‹åºå’Œ H5 ä¸­çš„ API åŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä½†æœ‰å‡ ç‚¹ä¸åŒï¼š canvas ä¸Šä¸‹æ–‡çš„è·å–æ–¹å¼ä¸åŒï¼Œh5 ä¸­æ˜¯ç›´æ¥ä» dom ä¸­è·å–ï¼›è€Œå°ç¨‹åºé‡Œè¦é€šè¿‡è°ƒç”¨ Taro.createCanvasContext æ¥æ‰‹åŠ¨åˆ›å»º ç»˜åˆ¶æ—¶ï¼Œå°ç¨‹åºé‡Œè¿˜éœ€åœ¨æ‰‹åŠ¨è°ƒç”¨ CanvasContext.draw æ¥è¿›è¡Œç»˜åˆ¶ æ‰€ä»¥åšå…¼å®¹å¤„ç†æ—¶å°±å›´ç»•è¿™ä¸¤ä¸ªç‚¹æ¥è¿›è¡Œå…¼å®¹ 1234567891011121314151617181920212223componentDidMount () &#123; // åªæœ‰ç¼–è¯‘ä¸ºh5ä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘ if (process.env.TARO_ENV === 'h5') &#123; this.context = document.getElementById('canvas-id').getContext('2d') // åªæœ‰ç¼–è¯‘ä¸ºå°ç¨‹åºä¸‹é¢ä»£ç æ‰ä¼šè¢«ç¼–è¯‘ &#125; else if (process.env.TARO_ENV === 'weapp') &#123; this.context = Taro.createCanvasContext('canvas-id', this.$scope) &#125;&#125;// ç»˜åˆ¶çš„å‡½æ•°draw () &#123; // è¿›è¡Œä¸€äº›ç»˜åˆ¶æ“ä½œ // ..... // å…¼å®¹å°ç¨‹åºç«¯çš„ç»˜åˆ¶ typeof this.context.draw === 'function' &amp;&amp; this.context.draw(true)&#125;render () &#123; // åŒæ—¶æ ‡è®°ä¸Šidå’Œcanvas-id return &lt;Canvas id='canvas-id' canvas-id='canvas-id'/&gt;&#125; å¯ä»¥è§åˆ°ï¼Œå…ˆæ˜¯åœ¨ componentDidMount ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œåˆ†åˆ«é’ˆå¯¹ä¸åŒçš„ç«¯çš„æ–¹æ³•è€Œå–å¾— CanvasContext ä¸Šä¸‹æ–‡ï¼Œåœ¨å°ç¨‹åºç«¯æ˜¯ç›´æ¥é€šè¿‡Taro.createCanvasContextè¿›è¡Œåˆ›å»ºï¼ŒåŒæ—¶éœ€è¦åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥this.$scopeï¼›åœ¨ H5 ç«¯åˆ™æ˜¯é€šè¿‡ document.getElementById(id).getContext(&#39;2d&#39;)æ¥è·å¾— CanvasContext ä¸Šä¸‹æ–‡ã€‚ è·å¾—ä¸Šä¸‹æ–‡åï¼Œç»˜åˆ¶çš„è¿‡ç¨‹æ˜¯ä¸€è‡´çš„ï¼Œå› ä¸ºä¸¤ç«¯çš„ API åŸºæœ¬ä¸€æ ·ï¼Œè€Œåªéœ€åœ¨ç»˜åˆ¶åˆ°æœ€åæ—¶åˆ¤è¯»ä¸Šä¸‹æ–‡æ˜¯å¦æœ‰ draw å‡½æ•°ï¼Œæœ‰çš„è¯å°±æ‰§è¡Œä¸€éæ¥å…¼å®¹å°ç¨‹åºç«¯ï¼Œå°†å…¶ç»˜åˆ¶å‡ºæ¥ã€‚ æˆ‘ä»¬å†…éƒ¨ç”¨ Canvas å†™äº†ä¸€ä¸ªå¼¹å¹•æŒ‚ä»¶ï¼Œæ­£æ˜¯ç”¨è¿™ç§æ–¹æ³•æ¥è¿›è¡Œä¸¤ç«¯çš„å…¼å®¹ã€‚ ä¸Šè¿°ä¸¤ä¸ªå…·ä½“ä¾‹å­æ€»ç»“èµ·æ¥ï¼Œå°±æ˜¯å…ˆæ ¹æ® Taro å†…ç½®çš„ process.env.TARO_ENV ç¯å¢ƒå˜é‡æ¥åˆ¤æ–­å½“å‰ç¯å¢ƒï¼Œç„¶åå†å¯¹æŸäº›ç«¯è¿›è¡Œå•ç‹¬é€‚é…ã€‚å› æ­¤å…·ä½“çš„ä»£ç å±‚çº§çš„å…¼å®¹æ–¹å¼ä¼šå¤šç§å¤šæ ·ï¼Œå®Œå…¨å–å†³äºä½ çš„éœ€æ±‚ï¼Œå¸Œæœ›ä¸Šé¢çš„ä¾‹å­èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚ æ€»ç»“æœ¬æ–‡å…ˆè°ˆäº† Taro ä¸ºä»€ä¹ˆé€‰æ‹©ä½¿ç”¨Reactè¯­æ³•ï¼Œç„¶åå†ä»Taroé¡¹ç›®çš„ä»£ç ç»„ç»‡ã€æ•°æ®çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–ä»¥åŠå¤šç«¯å…¼å®¹è¿™å‡ ä¸ªæ–¹é¢æ¥é˜è¿°äº† Taro çš„æ·±åº¦å¼€å‘å®è·µä½“éªŒã€‚æ•´ä½“è€Œè¨€ï¼Œéƒ½æ˜¯ä¸€äº›è¾ƒä¸ºæ·±å…¥çš„ï¼Œåå®è·µç±»çš„å†…å®¹ï¼Œå¦‚æœ‰ä»€ä¹ˆè§‚ç‚¹æˆ–å¼‚è®®ï¼Œæ¬¢è¿åŠ å…¥å¼€å‘äº¤æµç¾¤ï¼Œä¸€èµ·å‚ä¸è®¨è®ºã€‚","pubDate":"Fri, 30 Nov 2018 06:40:26 GMT","guid":"https://aotu.io/notes/2018/11/30/taro_practice/","category":"å°ç¨‹åº"},{"title":"SVG vs Image, SVG vs Iconfont","link":"https://aotu.io/notes/2018/11/23/SVG_vs_Image_vs_iconfont/","description":"è¿™å¯èƒ½æ˜¯ä¸ªåˆ«äººå†™è¿‡å¾ˆå¤šæ¬¡çš„è¯é¢˜ï¼Œä½†è²Œä¼¼ç”±äºå…¼å®¹æ€§çš„åŸå› ï¼Ÿå›¾æ ‡çš„æ˜¾ç¤ºè¿˜æ˜¯ç”¨ç€ Iconfont æˆ–è€… CSS Sprite çš„å½¢å¼ï¼Ÿå¸Œæœ›é€šè¿‡è‡ªå·±æ–°ç“¶è£…æ—§é…’çš„æ–¹å¼èƒ½é‡æ–°å¼•å¯¼ä¸€ä¸‹é—®é¢˜ã€‚ SVG vs Imageæ¯”æ–¹è¯´ç°åœ¨è¦åšä¸‹å›¾è¿™æ ·çš„è§†è§‰æ•ˆæœï¼š åˆ†æï¼šå¯èƒ½éœ€è¦ä¸‰å¼ å›¾ç‰‡ é¼ æ ‡ç§»å…¥æ—¶çš„èƒŒæ™¯å›¾ æ¸å˜è‰²å‰æ™¯å›¾ é¼ æ ‡ç§»å…¥æ—¶ç™½è‰²å‰æ™¯å›¾ ç‹¬ç«‹å›¾åƒç°åœ¨å¯¹æ¯”ä¸€ä¸‹èƒŒæ™¯å›¾ä½¿ç”¨å›¾ç‰‡ä¸ä½¿ç”¨ SVG æ ¼å¼çš„ä½“ç§¯å¤§å°ï¼ˆåšå›¾çš„æ—¶å€™æ‹¿é”™é¢œè‰²äº†ï¼Œå…¶ä»–éƒ½ä¸€æ ·ï¼Œèƒ½è¯´æ˜é“ç†å°±è¡Œï¼Œè§è°…è§è°…ï¼‰ å¯ä»¥çœ‹å‡ºï¼Œåœ¨è‚‰çœ¼æ„Ÿè§‰å·®å¼‚ä¸å¤§çš„æƒ…å†µä¸‹ï¼ŒWebP æ ¼å¼ä½“ç§¯æœ€å°ï¼Œå…¶æ¬¡æ˜¯ SVGï¼Œè€Œ PNG çš„ä½“ç§¯è¿‡å¤§ã€‚ è¿™ä¸ª SVG æ˜¯åœ¨ Sketch è®¾è®¡ç¨¿ä¸­å¯¼å‡ºæ¥çš„ï¼Œæºç åŒ…å«äº†å¾ˆå¤šå†—ä½™æ— æ•ˆçš„ä»£ç ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå¦‚ä¸‹ã€‚ å†…éƒ¨æºç  ä¼˜åŒ–å ä¼˜åŒ–åå¤§çº¦å¯ä»¥å‡å» 1K ä¸ªå­—ç¬¦ã€‚å½“ç„¶è¿™ä¸ªéœ€è¦å†…è”ä½¿ç”¨ï¼ˆInline SVGï¼‰ CSS Spriteä½¿ç”¨ CSS Sprite çš„æ–¹å¼å¯ä»¥å‡å°‘ HTTP è¯·æ±‚ï¼Œè²Œä¼¼è¿˜å¯ä»¥å‡å°‘æ€»ä½“å›¾ç‰‡ä½“ç§¯ã€‚è¿™é‡Œç”¨å‰æ™¯å›¾æ¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå®é™…ä¸ŠèƒŒæ™¯å›¾å’Œå‰æ™¯å›¾éƒ½å¯ä»¥åˆæˆä¸€å¼  spriteã€‚ å¯ä»¥çœ‹å‡ºï¼ŒCSS Sprite çš„ä½“ç§¯æ¯” Inline SVG + CSS çš„æ–¹å¼å¤§å¾ˆå¤šã€‚ SVG vs Image ç»“è®º ç»¿è‰²éƒ¨åˆ†è¡¨ç¤º SVG æ¯” Image ç•¥èƒœä¸€ç­¹çš„åœ°æ–¹ï¼Œé»„è‰²éƒ¨åˆ†è¡¨ç¤ºæœ‰æ‰€æ¬ ç¼ºçš„åœ°æ–¹ï¼Œç°ç»¿è‰²è¡¨ç¤ºå·®ä¸å¤šã€‚ 1ã€å¦‚ä»Šå·²æ¥è¿‘ 2019 å¹´äº†ï¼Œå¯¹äº IE9 (2011å¹´) è¿™ç§å¤è€çš„æµè§ˆå™¨éƒ½æ”¯æŒ SVGï¼Œæ‰€ä»¥å†è¿‡å¤šå¼ºè°ƒæ›´ä½çš„å…¼å®¹æ€§ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„æ€ã€‚2ã€Inline SVG åœ¨æµè§ˆå™¨åº”è¯¥æ˜¯è¢«æ¸²æŸ“æˆ DOM èŠ‚ç‚¹ï¼Œæ‰€ä»¥å…³äº DOM èŠ‚ç‚¹çš„æ€§èƒ½ä¼˜åŒ–éƒ½æœ‰å¿…è¦æ³¨æ„ï¼›ä¸€ä¸ª SVG å›¾åƒå¯èƒ½å°±ä¼šæœ‰å¾ˆå¤šè·¯å¾„ï¼Œå³ DOM èŠ‚ç‚¹ï¼Œå¤ªå¤šçš„ DOM èŠ‚ç‚¹å¿…ç„¶ä¼šå½±å“æµè§ˆå™¨çš„æ¸²æŸ“æ€§èƒ½åŠå†…å­˜å ç”¨ï¼Œè€Œçº¯ä½å›¾çš„æ¸²æŸ“æ–¹å¼åº”è¯¥æ˜¯æ²¡æœ‰è¿™æ–¹é¢çš„é¡¾è™‘ã€‚ï¼ˆDOM æ•°é‡å½±å“å‚è€ƒï¼šGoogle WEB å¼€å‘è€…æ–‡æ¡£ï¼‰ ç»¼ä¸Šç»“è®ºï¼šé™¤å¼€å¤æ‚å›¾åƒï¼Œé€‰æ‹© Inline SVG æˆ–è€… &lt;img/&gt; æ ‡ç­¾çš„æ–¹å¼å¼•å…¥ SVGï¼Œä¼šæ¯”ä½¿ç”¨ ç‹¬ç«‹å›¾åƒ æˆ– ç»„åˆå›¾åƒ (CSS sprite) çš„æ–¹å¼æ›´å¥½ã€‚ SVG vs Iconfontä¹¦å†™å¯¹æ¯” é¦–å…ˆçœ‹ä¸‹ Iconfont ä¸ SVG å›¾æ ‡çš„ä½¿ç”¨æ–¹å¼ï¼Œæ¥æº é˜¿é‡Œ Iconfont å¹³å° å¾ˆæ˜æ˜¾ SVG Sprite ä½¿ç”¨èµ·æ¥æ²¡æœ‰ Iconfont æ–¹ä¾¿ï¼Œéœ€è¦å†™ 3 è¡Œä»£ç ï¼Œ è€Œåè€…åªéœ€è¦å†™ 1 è¡Œã€‚å½“ç„¶ä¸Šé¢çš„ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯ä¸‹é¢çš„æ¢è‰²ä¸å¤šè‰²æ”¯æŒ æ¢è‰²ä¸å¤šè‰²æ”¯æŒæ¢è‰²1ã€Iconfont é€šè¿‡ CSS color å¯ä»¥è½»æ¾æ›´æ¢å›¾æ ‡é¢œè‰²ã€‚ 2ã€è€Œ SVG Sprite æ¯”è¾ƒéº»çƒ¦ï¼ŒSVG Sprite çš„ä»£ç åŸç†å¦‚ä¸‹ã€‚ 12345678910111213// å®šä¹‰ symbol&lt;svg&gt; &lt;symbol id=\"icon-arrow-left\" viewBox=\"0 0 1024 1024\"&gt; &lt;path d=\"M694 ... 44.576-45.952\"&gt;&lt;/path&gt; &lt;/symbol&gt; &lt;symbol id=\"icon-arrow-right\" viewBox=\"0 0 1024 1024\"&gt; &lt;path d=\"M693 ... 0-0.48-46.4\"&gt;&lt;/path&gt; &lt;/symbol&gt;&lt;/svg&gt;// ä½¿ç”¨&lt;svg&gt;&lt;use xlink:href=\"#icon-arrow-left\"/&gt;&lt;/svg&gt;&lt;svg&gt;&lt;use xlink:href=\"#icon-arrow-right\"/&gt;&lt;/svg&gt; æ¸²æŸ“å‡ºæ¥çš„ DOM ç»“æ„æ˜¯è¿™æ ·çš„ï¼š æ¸²æŸ“åœ¨äº† Shadow DOM ä¸­ï¼ˆå…³äº Shadow DOM çš„çŸ¥è¯†å¯ä»¥é˜…è¯»ä¸‹è¿™ç¯‡æ–‡ç« æˆ–è¿™ç¯‡ï¼‰ï¼Œè¿™æ ·çš„ DOM å…ƒç´ æ ·å¼å°±å…·æœ‰äº†ä½œç”¨åŸŸï¼Œå¤–é¢çš„ CSS å¯¹ shadow-root å†…çš„å…ƒç´ ä¸ä¼šç”Ÿæ•ˆï¼Œå¦‚æœæƒ³è¦æ›´æ¢å…ƒç´ çš„é¢œè‰²ï¼Œéœ€è¦ä½¿ç”¨ /deep/ æ¥ç©¿é€æ·»åŠ æ ·å¼ï¼Œå¦‚ä¸‹ã€‚123svg /deep/ path &#123; fill: red;&#125; å½“ç„¶ï¼Œå®é™…ä¸Šåœ¨åªéœ€è¦åœ¨çˆ¶çº§å…ƒç´ ä¸Šæ·»åŠ  fill: red è¿™æ ·çš„ CSS ä¹Ÿèƒ½èµ·åˆ°åŒæ ·çš„æ•ˆæœï¼Œé‡Œé¢çš„å…ƒç´ ä¼šç»§æ‰¿çˆ¶çº§çš„æ ·å¼ã€‚ PS: /deep/ æ˜¯ shadow DOM v0 çš„å†™æ³•ï¼Œv1 å·²ç»æŠŠè¿™æ ·çš„å†™æ³•æŠ›å¼ƒäº†ï¼Œå®é™…ä¸Šæ”¯æŒ v1 çš„ shadow DOM, çˆ¶çº§çš„æ ·å¼å¯ä»¥ç›´æ¥ä½œç”¨åœ¨ shadow-root é‡Œé¢çš„å…ƒç´ ã€‚ å¤šè‰²æ”¯æŒ1ã€Iconfont æ˜¯ä¸æ”¯æŒå¤šè‰²å›¾æ ‡çš„ã€‚ 2ã€è€Œ SVG Sprite å¯ä»¥åˆ©ç”¨ CSS å˜é‡æˆ– shadow DOM çš„æ–¹å¼æ”¯æŒå¤šè‰²å›¾æ ‡ï¼Œshadow DOMçš„æ–¹å¼ä¸Šé¢å·²ç»è¯´æ˜ï¼Œä¸‹é¢å€Ÿç”¨ä»–äººçš„æ–‡ç« è§£é‡Š CSS å˜é‡å®ç°å¤šè‰²ï¼Œå¦‚ä¸‹ã€‚ ä¸è¿‡ä½¿ç”¨ CSS å˜é‡æˆ– shadow DOM çš„æ–¹å¼å…¼å®¹æ€§éƒ½ä¸å¥½ï¼Œ CSS å˜é‡ï¼šEdge15+ shadow DOMï¼šæ›´å·®ã€‚å…¼å®¹æ€§åˆ—è¡¨ 3ã€Inline SVG å¯ä»¥è‰¯å¥½åœ°æ”¯æŒå¤šè‰²åŠå¤šè‰²å˜åŒ–ã€‚ æ¸å˜è‰²æ”¯æŒIconfont ä¸ SVG Sprite ä¸æ”¯æŒæ¸å˜è‰²ã€‚Inline SVG æ”¯æŒæ¸å˜è‰²ï¼Œå¹¶ä¸”å…¼å®¹æ€§è‰¯å¥½ã€‚ æ¸²æŸ“æ— æŠ–åŠ¨ä½¿ç”¨ Iconfontï¼Œå› ä¸ºå­—ä½“æ–‡ä»¶æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥åœ¨å­—ä½“æ–‡ä»¶è¿˜æ²¡æœ‰åŠ è½½å®Œæ¯•ä¹‹å‰ï¼Œå›¾æ ‡ä½ä¼šç•™ç©ºï¼ŒåŠ è½½å®Œæ¯•åæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ä¼šå‡ºç°å‘ä¸‹å›¾ï¼ˆæ¥è‡ª GitHub blogï¼‰è¿™æ ·çš„æŠ–åŠ¨ï¼Œè€Œ SVG Sprite æˆ– Inline SVG å†…è”åŠ è½½åˆ™ä¸ä¼šå‡ºç°è¿™æ ·çš„æŠ–åŠ¨ã€‚ å½“ç„¶ï¼ŒIconfont ä¹Ÿå¯ä»¥å†…è”åŠ è½½ï¼Œä¸è¿‡éœ€è¦è½¬æ¢æˆ base64 åŒæ ·å¼è¡¨ä¸€èµ·åŠ è½½ï¼Œè½¬æ¢åçš„æ–‡ä»¶ä½“ç§¯åˆ™ä¼šå˜ä¸ºåŸæ¥çš„ 1.3 å€å·¦å³è¿™æ˜¯ç”± base64 ç¼–ç å†³å®šçš„ï¼ˆç¼–ç çŸ¥è¯†é“¾æ¥ï¼‰ã€‚ å­—ä½“è½¬æ¢æˆ base64 çš„ä¸€ä¸ªåœ¨çº¿å·¥å…·ï¼šhttps://transfonter.org/ ä½“ç§¯è¾ƒå¤§è¿™ä¸ªæ˜¯ SVG å¯¹æ¯”äº Iconfont çš„ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œå¦‚ä¸‹å›¾ã€‚ Inline SVG ä¸ SVG Sprite ä½“ç§¯å·®ä¸å¤šã€‚ å¼€å‘æˆæœ¬ä¸‰è€…çš„å¼€å‘æˆæœ¬éƒ½å·®ä¸å¤šï¼Œä¸è¿‡ SVG çš„ä¸¤ç§æ–¹å¼éƒ½éœ€è¦å‰æœŸåšäº›é…ç½®ï¼ŒåæœŸå¼€å‘å°±ä¼šé¡ºæ‰‹å¾ˆå¤šï¼ˆå•é¡µåº”ç”¨ï¼‰ã€‚ ä»¥ vue + vue cli ä¸ºä¾‹è¯´æ˜ Inline SVG ä¾¿æ·ä½¿ç”¨ã€‚ 1ã€ é…ç½® Webpack loader:12345678910111213141516171819202122232425262728293031&#123; // æ’é™¤éœ€è¦è½¬æ¢æˆ Inline SVG çš„ç›®å½• exclude: [resolve('src/svgicons')], test: /\\.(png|jpe?g|gif|svg)(\\?.*)?$/, loader: 'url-loader', options: &#123; limit: 1, name: utils.assetsPath('img/[name].[hash:7].[ext]') &#125;&#125;,&#123; // æŒ‡å®šç‰¹å®šçš„ç›®å½•ç”¨äº Inline SVG include: [resolve('src/svgicons')], test: /\\.svg$/, use: [ // è¯»å– SVG æºä»£ç  &#123; loader: 'raw-loader' &#125;, // ç²¾ç®€ä¼˜åŒ– SVG æºä»£ç  &#123; loader: 'svgo-loader', options: &#123; plugins: [ &#123; removeTitle: true &#125;, &#123; removeViewBox: false &#125;, &#123; removeDimensions: true &#125;, // ...å…¶ä»–å‚æ•° ] &#125; &#125; ]&#125; 2ã€ åˆ›å»º SvgIcon.vue ç»„ä»¶:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;template&gt; &lt;div class=\"svg-icon\"&gt; &lt;div class=\"svg-icon-wrapper\" v-html=\"icon\"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: 'SvgIcon', props: &#123; name: &#123; type: String, required: true, &#125;, &#125;, data () &#123; return &#123; icon: this.getIcon(), &#125; &#125;, watch: &#123; name () &#123; this.icon = this.getIcon() &#125;, &#125;, methods: &#123; getIcon () &#123; return require(`@/svgicons/$&#123;this.name&#125;.svg`) &#125;, &#125;,&#125;&lt;/script&gt;&lt;style lang=\"stylus\" scoped&gt;.svg-icon &#123; overflow hidden display inline-block width 1em height 1em &amp;-wrapper &#123; display flex align-items center &gt;&gt;&gt; svg &#123; width 100% height 100% fill currentColor *[fill='none'] &#123; fill none &#125; *[stroke='none'] &#123; stroke none &#125; &#125; &#125;&#125;&lt;/style&gt;&lt;style lang=\"stylus\"&gt;.svg-icon-hover &#123; &amp;:hover &#123; svg &#123; *[fill] &#123; fill currentColor &#125; *[stroke] &#123; stroke currentColor &#125; &#125; &#125;&#125;&lt;/style&gt; 3ã€ä½¿ç”¨ï¼š1234567&lt;SvgIcon name=\"arrow-right\" /&gt;æˆ–è€…&lt;a class=\"svg-icon-hover\" href=\"#\"&gt; &lt;SvgIcon name=\"arrow-right\" /&gt;&lt;/a&gt; SVG vs Iconfont ç»“è®ºåº”è¯¥æ˜¯ Inline SVG vs SVG Sprite vs Iconfont çš„ç»“è®ºï¼Œå¦‚ä¸‹å›¾ã€‚ ç»¼ä¸Šç»“è®ºé€‰æ‹© Inline SVG æˆ–è®¸æ˜¯ä¸€ä¸ªä¸é”™åœ°é€‰æ‹©å»æ›¿ä»£ Iconfont çš„ä½¿ç”¨æ–¹å¼ã€‚ æ‰©å±•é˜…è¯» GitHub ç½‘ç«™å¾ˆæ—©ä¹‹å‰å·²ç»å°†å›¾æ ‡çš„å±•ç¤ºæ–¹å¼ç”± Iconfont è½¬æˆäº† Inline SVG, è¿™ä¸€ç¯‡æ–‡ç« æ˜¯ä»–ä»¬çš„æè¿°ï¼šhttps://blog.github.com/2016-02-22-delivering-octicons-with-svg/ å¾ˆæ—©çš„ä¸€ç¯‡æ–‡ç« å…³äºä¸¤è€…çš„å¯¹æ¯”ï¼šhttps://css-tricks.com/icon-fonts-vs-svg/","pubDate":"Fri, 23 Nov 2018 01:00:00 GMT","guid":"https://aotu.io/notes/2018/11/23/SVG_vs_Image_vs_iconfont/","category":"WEBå¼€å‘"},{"title":"Taro 1.1 å‘å¸ƒï¼Œå…¨é¢æ”¯æŒå¾®ä¿¡/ç™¾åº¦/æ”¯ä»˜å® å°ç¨‹åº","link":"https://aotu.io/notes/2018/11/05/taro-1-1/","description":"åœ¨ 9 æœˆ 16 æ—¥çš„æ˜é‡‘å°ç¨‹åºå¤§ä¼šä¸Šï¼ŒTaro æ­£å¼å‘å¸ƒäº† 1.0 ç‰ˆæœ¬ã€‚ ä½œä¸ºä¸€ä¸ªå¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼ŒTaro 1.0 ç‰ˆæœ¬ä¸ºå¹¿å¤§å¼€å‘è€…å¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…ä»¬æ›´æ–¹ä¾¿å¿«æ·åœ°å¼€å‘å¤šç«¯åº”ç”¨ã€‚ å‰è¿›çš„è„šæ­¥æ²¡æœ‰åœä¸‹ï¼Œå†æ—¶ä¸€ä¸ªå¤šæœˆï¼ŒTaro 1.1 ç‰ˆæœ¬æ­£å¼æ¥è¢­ï¼ ä» 1.0 åˆ° 1.1ï¼ŒæœŸé—´äº§ç”Ÿäº† 500 ä½™æ¬¡ Commitï¼Œå‘å¸ƒäº† 23 ä¸ªç‰ˆæœ¬ï¼ŒTaro ä¸€ç›´ä¿æŒé«˜é€Ÿçš„è¿­ä»£é¢‘ç‡ï¼Œåªä¸ºä¸æ–­æ‰“ç£¨ï¼Œä¸ºå®ƒæ³¨å…¥æ›´å¤šä¼˜ç§€çš„ç‰¹æ€§ï¼Œè®©æ›´å¤šå¼€å‘è€…å—ç›Šã€‚ Taro 1.1 æ­£å¼æ¥è¢­æ›´ä¸°å¯Œçš„å¹³å°è½¬æ¢æ”¯æŒè‡ªä»å¾®ä¿¡å°ç¨‹åºè¯ç”Ÿä»¥æ¥ï¼Œå°ç¨‹åºçš„ä¼˜åŠ¿å¤§å®¶æœ‰ç›®å…±ç¹ï¼Œå„å¤§äº’è”ç½‘å‚å•†å¼€å§‹æ‘©æ‹³æ“¦æŒï¼Œçº·çº·å¸ƒå±€å°ç¨‹åºé¢†åŸŸï¼Œå…¶ä¸­åŠ¿å¤´æœ€åŠ²çš„å½“å±ç™¾åº¦æ™ºèƒ½å°ç¨‹åºå’Œæ”¯ä»˜å®å°ç¨‹åºã€‚å¯¹äºå‰ç«¯è€Œè¨€ï¼Œæ—¢æ˜¯æœºé‡ï¼Œå› ä¸ºå¹³å°æ„ˆå¤šï¼Œå¸¦æ¥çš„æœºä¼šæ„ˆå¤šï¼›ä¹Ÿæ˜¯æŒ‘æˆ˜ï¼Œå› ä¸ºä¸åŒçš„å¹³å°æ€»ä¼šå„æœ‰å·®å¼‚ï¼Œä¸ºæ¯ä¸ªå¹³å°ç»´æŠ¤ä¸€ä»½ä»£ç ï¼Œæˆæœ¬æ˜¾ç„¶å¤ªé«˜ã€‚ ä¸ºäº†é™ä½å¤šç«¯åº”ç”¨çš„å¼€å‘æˆæœ¬ï¼Œåœ¨å·²å…¨é¢æ”¯æŒ å¾®ä¿¡å°ç¨‹åº çš„åŸºç¡€ä¸Šï¼ŒTaro åœ¨ 1.1 ç‰ˆæœ¬ä¸­åŠ å…¥äº†å¯¹ ç™¾åº¦æ™ºèƒ½å°ç¨‹åº å’Œ æ”¯ä»˜å®å°ç¨‹åº çš„æ”¯æŒã€‚ æ”¯æŒç™¾åº¦æ™ºèƒ½å°ç¨‹åºå‡çº§åˆ° 1.1 ç‰ˆæœ¬åï¼Œå³å¯è·å¾—å°†ç°æœ‰é¡¹ç›®è½¬æ¢æˆç™¾åº¦æ™ºèƒ½å°ç¨‹åºçš„èƒ½åŠ›ã€‚ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç™¾åº¦æ™ºèƒ½å°ç¨‹åºç«¯ç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…ï¼š 123456789# npm script$ npm run dev:swan$ npm run build:swan# ä»…é™å…¨å±€å®‰è£…$ taro build --type swan --watch$ taro build --type swan# npx ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type swan --watch$ npx taro build --type swan é€‰æ‹©ç™¾åº¦æ™ºèƒ½å°ç¨‹åºæ¨¡å¼ï¼Œéœ€è¦ä½ ä¸‹è½½å¹¶æ‰“å¼€ç™¾åº¦å¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨é¡¹ç›®ç¼–è¯‘å®Œåé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist ç›®å½•è¿›è¡Œé¢„è§ˆã€‚ ç›®å‰å·²æœ‰ä½¿ç”¨ Taro å¼€å‘çš„é¦–æ¬¾ç™¾åº¦æ™ºèƒ½å°ç¨‹åº â€œäº¬ä¸œå¥½ç‰©è¡—â€ æ­£å¼ä¸Šçº¿ï¼Œå¯ä»¥ä½¿ç”¨ç™¾åº¦ APPï¼Œæ‰«æä»¥ä¸‹äºŒç»´ç è¿›è¡Œä½“éªŒï¼š æ”¯æŒæ”¯ä»˜å®å°ç¨‹åºæ”¯ä»˜å®å°ç¨‹åºçš„è½¬æ¢æ–¹å¼ä¸ç™¾åº¦æ™ºèƒ½å°ç¨‹åºä¸€è‡´ã€‚ ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç™¾åº¦æ™ºèƒ½å°ç¨‹åºç«¯ç¼–è¯‘é¢„è§ˆåŠæ‰“åŒ…ï¼š 123456789# npm script$ npm run dev:alipay$ npm run build:alipay# ä»…é™å…¨å±€å®‰è£…$ taro build --type alipay --watch$ taro build --type alipay# npx ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type alipay --watch$ npx taro build --type alipay é€‰æ‹©æ”¯ä»˜å®å°ç¨‹åºæ¨¡å¼ï¼Œéœ€è¦ä½ ä¸‹è½½å¹¶æ‰“å¼€æ”¯ä»˜å®å°ç¨‹åºå¼€å‘è€…å·¥å…·ï¼Œç„¶ååœ¨é¡¹ç›®ç¼–è¯‘å®Œåé€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹ dist ç›®å½•è¿›è¡Œé¢„è§ˆã€‚ æ–°å¢å¹³å°æ ‡è¯†åœ¨åŠ å…¥ ç™¾åº¦æ™ºèƒ½å°ç¨‹åº å’Œ æ”¯ä»˜å®å°ç¨‹åº æ”¯æŒåï¼Œç›®å‰ Taro å·²ç»æä¾›äº†å¯¹ 5 ä¸ªå¹³å°çš„æ”¯æŒï¼Œåˆ†åˆ«æ˜¯ å¾®ä¿¡/ç™¾åº¦/æ”¯ä»˜å®/React Native/H5ï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ä¹¦å†™å¹³å°å·®å¼‚åŒ–ä»£ç ï¼ŒTaro ä¸ºæ¯ä¸ªå¹³å°æä¾›äº†å¹³å°æ ‡è¯†ï¼Œå¹¶å¯ä»¥é€šè¿‡ process.env.TARO_ENV æ¥è·å¾—ï¼Œå…¶å–å€¼åˆ†åˆ«å¦‚ä¸‹ weappï¼Œä»£è¡¨å¾®ä¿¡å°ç¨‹åº h5ï¼Œä»£è¡¨ H5 rnï¼Œä»£è¡¨ React Native swanï¼Œä»£è¡¨ç™¾åº¦æ™ºèƒ½å°ç¨‹åºï¼Œ1.1 ç‰ˆæœ¬æ–°å¢ alipayï¼Œä»£è¡¨æ”¯ä»˜å®å°ç¨‹åºï¼Œ1.1 ç‰ˆæœ¬æ–°å¢ å¼€æ”¾å¤šç«¯ UI åº“æ‰“åŒ…èƒ½åŠ›åœ¨ 1.0 ç‰ˆæœ¬ä¸­ï¼ŒTaro çš„ build å‘½ä»¤æ–°å¢äº† --ui å‚æ•°ï¼Œæ¥å°†æŒ‰ç…§ä¸€å®šè§„åˆ™ç»„ç»‡çš„ä»£ç æ‰“åŒ…æˆå¯ä»¥åœ¨ Taro ä¸­ä½¿ç”¨çš„å¤šç«¯ UI åº“ã€‚ å¹¶ä¸”ï¼ŒåŸºäºè¿™ä¸€åŠŸèƒ½ï¼ŒTaro æ¨å‡ºäº†é¦–ä¸ªå¯ä»¥è·¨å¤šç«¯ä½¿ç”¨çš„å¤šç«¯ UI åº“ Taro UIã€‚ ä¸ºäº†å®Œå–„ Taro ç”Ÿæ€ï¼Œæ‰©å±• Taro ç¤¾åŒºï¼Œåœ¨ 1.1 ç‰ˆæœ¬ä¸­å¼€æ”¾äº†å¤šç«¯ UI åº“çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¹¶æä¾›äº†è¯¦ç»†çš„å¼€å‘æŒ‡å—ã€‚ åŒæ—¶ Taro ä¹Ÿæä¾›äº†å®˜æ–¹çš„å¤šç«¯ UI åº“ç¤ºä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´è§„èŒƒçš„ UI åº“å¼€å‘ä¾‹å­ï¼ŒåŒ…å«å¿…è¦çš„é¡¹ç›®æ”¹é€ ä»¥åŠæµ‹è¯•å¥—ä»¶ï¼ŒåŸºäºè¿™ä¸ªç¤ºä¾‹ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå¤šç«¯ UI åº“é¡¹ç›®ã€‚ è¿˜æœ‰æ›´å¤šåœ¨ 1.0 ç‰ˆæœ¬ä¸­ï¼ŒTaro æä¾›äº†å¯¹ å¾®ä¿¡å°ç¨‹åºã€H5 ä»¥åŠ React Native çš„æ”¯æŒï¼Œè€Œ 1.1 ç‰ˆæœ¬ï¼Œåœ¨åŸæœ‰æ”¯æŒçš„åŸºç¡€ä¹‹ä¸Šï¼Œå¯¹æ¯ä¸€ä¸ªå¹³å°è¿›è¡Œä¸æ–­å®Œå–„ï¼Œè®©å…¶æ›´åŠ ä¸°å¯Œå®Œæ•´ã€‚ å¾®ä¿¡å°ç¨‹åº F è°ƒç”¨ this.setState æ—¶ï¼ŒJSON Diff ç®—æ³• Bug ä¿®å¤ F ä¿®å¤ this.setState å›è°ƒé‡Œå†è°ƒç”¨ this.setState çš„ Bug A æ–°å¢ componentWillPreload ç”Ÿå‘½å‘¨æœŸï¼Œç”¨äºæ•°æ®é¢„åŠ è½½ A æ”¯æŒåœ¨åŒä¸€ä½œç”¨åŸŸå¯¹ JSX èµ‹å€¼ F å¤šå±‚ Map å¾ªç¯åµŒå¥—åŒ…å«æ¡ä»¶åˆ¤æ–­æ—¶é—®é¢˜ä¿®å¤ F ä¸­æ–‡å­—ç¬¦è¢«ç¼–è¯‘æˆ unicode ç é—®é¢˜ä¿®å¤ F ä¸‰å…ƒè¡¨è¾¾å¼è§£æé—®é¢˜ä¿®å¤ A æå‡å­—ç¬¦ä¸²æ¨¡æ¿çš„æ€§èƒ½ H5 A H5 æ”¯æŒåˆ†åŒ…é…ç½® F ä¿®å¤ H5 åå°é¡µé¢ä¾ç„¶æ‰§è¡Œç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ F ä¿®å¤ PUT ã€DELETE ç­‰è¯·æ±‚ body ä¸ºå¯¹è±¡æ—¶æ— æ³•å‘é€ body çš„é—®é¢˜ A å¢åŠ  setTabBarStyle ä¸ setTabBarItem API A å¢åŠ  arrayBufferToBase64 ä¸ base64ToArrayBuffer API A ç¼–è¯‘æ‰“åŒ…æ”¯æŒå°†å…¬å…± npm åŒ…æŠ½ç¦»æˆ lib åº“ React Native A æ”¯æŒ TypeScript F ä¿®å¤é¡¹ç›®åˆå§‹åŒ–å less ç¼–è¯‘æŠ¥é”™ A æ·»åŠ  config.window.navigationStyle é…ç½® A æ·»åŠ  showNavigationBarLoading ä¸ hideNavigationBarLoading API A å¢åŠ  arrayBufferToBase64 ä¸ base64ToArrayBuffer API F ä¿®å¤æ ·å¼æ”¯æŒè­¦å‘Š A watch æ¨¡å¼æ—¶ä»£ç æŒ‰éœ€ç¼–è¯‘ F ä¿®å¤åŒä¸€æ–‡ä»¶å¤¹ä¸‹å¤šä¸ªJSæ–‡ä»¶æ ·å¼å¼•ç”¨é”™è¯¯ F app.json çš„ expo é…ç½®æ”¹ä¸ºå¯è¦†ç›– A æ”¯æŒ Taro.pxTransform F iconPath å’Œ selectedPath çš„ä¸ºåŒä¸€ä¸ªè·¯å¾„å¯¼è‡´çš„é‡å¤å¼•ç”¨çš„æŠ¥é”™ A åœ¨ config ä¸­æ·»åŠ  rn çš„ expo é…ç½® A æ”¯æŒ deviceRatio è‡ªå®šä¹‰ æ›´å®Œæ•´çš„åŠŸèƒ½è¿­ä»£è®°å½•è¯·å‚é˜… CHANGELOG æœªæ¥è§„åˆ’Taro å°†ä¼šç»§ç»­ä¿æŒé«˜æ•ˆè¿­ä»£ï¼Œä»¥æ»¡è¶³æ—¥ç›Šå¢é•¿çš„å¤šç«¯å¼€å‘éœ€æ±‚ ç›®å‰å·²ç»ç¡®è®¤çš„å¼€å‘è®¡åˆ’å¯ä»¥å‚è§ Taro ç‰ˆæœ¬å¼€å‘è®¡åˆ’ã€‚ å°ç¨‹åºè½¬ Taro ä»£ç å¼€å¯å†…æµ‹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¿€åŠ¨äººå¿ƒçš„å°ç¨‹åºè½¬ Taro ä»£ç åŠŸèƒ½å·²ç»å¼€å‘å®Œæˆï¼Œè¿›å…¥å†…æµ‹é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…åˆ° canary ç‰ˆæœ¬ï¼Œè¿›è¡Œä½“éªŒ 1$ npm i -g @tarojs/cli@canary æ¬¢è¿é’ˆå¯¹è¿™ä¸€åŠŸèƒ½ï¼Œæä¾›å®è´µæ„è§ï¼Œæ„è§å…¥å£è¯·æˆ³ ğŸ‘ˆğŸ‘ˆğŸ‘ˆ åŒæ—¶ï¼Œä¸ºäº†å¸®åŠ© Taro æ›´å¥½åœ°æˆé•¿ï¼Œè®© Taro æ›´å¥½åœ°å›é¦ˆæ‰€æœ‰å¼€å‘è€…ï¼Œæ¬¢è¿æ‚¨ç»™ Taro æä¾›ä¼˜ç§€æƒ³æ³•ï¼Œæˆ–è€…ç›´æ¥è´¡çŒ®ä»£ç ã€‚","pubDate":"Mon, 05 Nov 2018 12:00:00 GMT","guid":"https://aotu.io/notes/2018/11/05/taro-1-1/","category":"å°ç¨‹åº"},{"title":"å•å±é¡µé¢å“åº”å¼é€‚é…ç©æ³•","link":"https://aotu.io/notes/2018/10/22/Responsive-single-screen-design/","description":"é¦–å…ˆç…ä¸€ä¸‹æ•ˆæœå›¾ æ¥ç€å°±æ˜¯æ€è€ƒæ€ä¹ˆåšï¼Œæˆ‘çš„æƒ³æ³•å¦‚ä¸‹å›¾ã€‚ æŠŠå…¬å…±çš„ é¡µå¤´ ã€é¡µè„šã€å¯¼èˆªæ ã€è¾¹æ¡† æ”¾åˆ°æœ€é¡¶å±‚ï¼Œæ¯”æ–¹è¯´è®¾ç½®å±‚çº§ä¸º 999ï¼Œå…¶ä»–æ¯ä¸ªç‹¬ç«‹é¡µåˆ™æ”¾åœ¨ä¸‹é¢ï¼Œç„¶ååˆ‡æ¢é¡µé¢çš„æ—¶å€™æ›´æ–°ç‹¬ç«‹é¡µçš„å±‚çº§ä»¥è¾¾åˆ°æ•ˆæœå›¾çš„æ•ˆæœï¼ˆå½“ç„¶ä¸èƒ½è¶…è¿‡æœ€é¡¶å±‚ï¼‰ã€‚ é€‚é… ä¸Šé¢çš„æ–¹å¼å·²ç»æŠŠæ•ˆæœåšå‡ºæ¥äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å“åº”å¼é€‚é…äº†ã€‚ 1ã€Mac OS + Chromeå…ˆè€ƒè™‘ä¸€ä¸‹æˆ‘è‡ªå·±çš„ç³»ç»ŸåŠæ˜¾ç¤ºå™¨ï¼Œ MacBook Pro 1440 x 900 + å¤–è®¾ hp 1920 x 1080 ä¹Ÿå°±æ˜¯è¯´ Chrome çš„ç½‘é¡µå¯è§†åŒºé«˜åº¦å¤§æ¦‚ä¸ºï¼š 900(æˆ–1080) - 180 = 720px 180 = 60 + 20 + 10012360: MAC æ¡Œé¢ç¨‹åºååŠ¨æ€å°ºå¯¸ï¼Œ60 å¯èƒ½æ˜¯æˆ‘å¸¸ç”¨çš„å°ºå¯¸å§ï¼Œé‚£å°±å…ˆè¿™ä¸ª20: MAC æ¡Œé¢æœ€é¡¶éƒ¨ icon æ”¾ç½®æ é«˜åº¦100: Chrome æ ‡ç­¾é¡µé«˜åº¦ + åœ°å€æ é«˜åº¦ + ä¹¦ç­¾æ é«˜åº¦ 2ã€Windows + Chromeç„¶åæˆ‘ä»¬å†çœ‹çœ‹ Windows + Chrome çš„æƒ…å†µï¼Œä»¥ 1366 x 768 ä¸ºä¾‹ï¼Œ Chrome çš„ç½‘é¡µå¯è§†åŒºé«˜åº¦å¤§æ¦‚ä¸º 768 - 150 = 618px 150 = 40 + 1101240: Windows æ¡Œé¢åº•éƒ¨ç¨‹åºåå°ºå¯¸110: Chrome æ ‡ç­¾é¡µé«˜åº¦ + åœ°å€æ é«˜åº¦ + ä¹¦ç­¾æ é«˜åº¦ 3ã€æ€»ç»“ä¸Šé¢ä¸¤ç‚¹ ä»¥ä¸Šä¸¤ç‚¹çš„é«˜åº¦è®¡ç®—é€šè¿‡æˆªå›¾è·å¾—ï¼Œå¯èƒ½ä¼šæœ‰äº›è®¸è¯¯å·®ã€‚ æ‰€ä»¥ä¸ç®¡åœ¨å“ªç§ç³»ç»Ÿä¸‹ï¼Œæµè§ˆå™¨çš„å®½åº¦ä¸åˆ†è¾¨ç‡æ˜¯ä¿æŒä¸€è‡´çš„ï¼ˆç¨‹åºååœ¨åº•éƒ¨çš„æ—¶å€™ï¼Œç¨‹åºååœ¨å·¦å³ä¸¤è¾¹ä¸€èˆ¬æƒ…å†µå¯¹å®½åº¦æ²¡æœ‰å½±å“ï¼‰ï¼Œé«˜åº¦åˆ™æ ¹æ®ç³»ç»ŸåŠæµè§ˆå™¨çš„ä¸åŒå„æœ‰ä¸åŒï¼Œæ¯”æ–¹è¯´ Safari æ²¡æœ‰ä¹¦ç­¾é«˜åº¦ã€‚ ä¸åŒç³»ç»ŸåŠ æµè§ˆå™¨å ç”¨çš„æœ€é«˜é«˜åº¦çº¦ä¸º 180ï¼Œæœ€å°çº¦ä¸º 0ï¼ˆå…¨å±çš„æ—¶å€™ï¼‰ 4ã€ä¸»æµç³»ç»Ÿåˆ†è¾¨ç‡å°ºå¯¸ç„¶åæˆ‘ä»¬çœ‹ä¸‹å½“å‰ä¸»æµç³»ç»ŸåŠåˆ†è¾¨ç‡æœ‰å“ªäº› PC &amp; MAC &amp; Chrome12345678910111213å¸¸ç”¨1280 x 8001366 x 1024 (IPad Pro)1440 x 9001680 x 10501600 x 9001920 x 12002560 x 1440æ›´é«˜å¿½ç•¥2880 x 16203200 x 18005120 x 2880 PC &amp; Windows &amp; Chrome ï¼ˆæˆ– PC &amp; MAC &amp; Chrome &amp; å¤–è®¾æ˜¾ç¤ºå™¨ï¼‰123451280 x 720/10241366 x 7681440 Ã— 9001600 x 9001920 x 1080 Mobile &amp; Android123360 x 480412 x 732å¾…è¡¥å…… Mobile &amp; IOS123IPhone 6: 375 x 667IPhone 6 Plus: 414 x 736IPhone X: 375 x 812 ä¸ä¸Šä¸ä¸‹çš„ IPad:1768 x 1024 5ã€åˆ†ææˆ‘ä»¬ä»¥å®½åº¦ 1024 åŠä»¥ä¸‹ç®—ä½œç§»åŠ¨ç«¯ï¼Œä»¥ä¸Šç®—ä½œ PC ç«¯ï¼Œæ‰€ä»¥ä¸¤ç§é€‰æ‹© ç§»åŠ¨ç«¯é€‚é…ä¸€ä¸ªç§»åŠ¨ç«¯é¡µé¢ï¼ŒPC ç«¯é€‚é…ä¸€ä¸ª PC ç«¯é¡µé¢ã€‚ è®¾è®¡ä¹‹åˆå°±æƒ³å¥½ä¸€ä¸ªé¡µé¢é€‚é…ä¸¤ç«¯ï¼Œå½“ç„¶è¿™ä¸ªè®¾è®¡ç¨¿éœ€è¦æ¯”è¾ƒç¬¦åˆé€‚é…ä¸¤ç«¯çš„æ¡ä»¶ã€‚ 6ã€åˆ«äººé€‚é…æ˜¯æ€ä¹ˆåšçš„ï¼Ÿè´´å‡ ä¸ªå½•åˆ¶çš„è§†é¢‘~ æ‰€ä»¥ï¼Œå•å±é¡µé¢æœ€å¥½é¡µé¢å†…å®¹è¨€ç®€æ„èµ…ï¼Œè®¾è®¡å±‚é¢å€¾å‘äºæ°´å¹³å‚ç›´éƒ½å±…ä¸­çš„æƒ…å†µï¼Œæ˜¯æœ€é€‚åˆåšå¥½è¿™ä¸ªé¡µé¢çš„ï¼Œå¹¶ä¸”åœ¨å„ç§å°ºå¯¸å˜åŒ–çš„æƒ…å†µä¸‹èƒ½æ¯”è¾ƒè‰¯å¥½åœ°å±•ç¤ºUIï¼Œä¸”å¼€å‘æˆæœ¬ä¹Ÿæ¯”è¾ƒåˆç†ã€‚ 7ã€è‡ªèº«æƒ…å†µåŠå®ç°æˆ‘ä»¬æ˜¯åˆ†ä¸¤ä¸ªé¡µé¢åšçš„ï¼Œå…ˆçœ‹ä¸€ä¸‹ PC ç«¯è®¾è®¡ç¨¿ ç»“åˆåŠ¨ç”»çš„å±•ç°å½¢å¼ï¼Œå…¶å®å¹¶ä¸æ˜¯å¾ˆç†æƒ³åšå“åº”å¼ï¼Œä½†è¿˜æ˜¯è¦é€‚é…ã€‚ æœ¬æ¥æƒ³ç”¨ rem åšé€‚é…çš„ï¼Œä½†æ˜¯ rem éœ€è¦äº›å†™å¾ˆå¤šä¸ªåŒ¹é…ï¼Œå³ä¸‹é¢çš„ä»£ç 12345678910111213@media all and (max-width: 1024px) &#123; html, body &#123; font-size: 10px; &#125;&#125;@media all and (max-width: 1366px) &#123; html, body &#123; font-size: 12px; &#125;&#125;// 1680 1920 2560 ç­‰ ç„¶åæœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼Œ@media æ˜¯æ ¹æ® width çš„å˜åŒ–æ¥åŒ¹é…çš„ï¼Œå®Œå…¨æŒ‰ç…§æ¡Œé¢åˆ†è¾¨ç‡æ¥æ˜¾ç¤ºæ˜¯æ²¡é—®é¢˜çš„ï¼Œä¸è¿‡é«˜åº¦éšä¾¿è°ƒèŠ‚ä¸€ä¸‹ï¼ˆå˜å°ï¼‰ï¼Œè€Œå®½åº¦è¿˜æ˜¯å¾ˆå®½ï¼Œè¿™æ—¶å€™é¡µé¢åº•éƒ¨çš„éƒ¨åˆ†æ–‡æœ¬å°±ä¼šæº¢å‡ºè¢«éšè—æ‰ã€‚ æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘æ›´ä½ç«¯çš„æµè§ˆå™¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æ¯”è¾ƒå‰æ²¿çš„ç‰¹æ€§ï¼Œå¦‚ pointer-events ç­‰ç‰¹æ€§ã€‚ æ‰€ä»¥ä½¿ç”¨ vh åšé€‚é…æ–¹æ¡ˆï¼Œvh æ˜¯ä»€ä¹ˆå•ä½è¯¦æƒ…å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œè¿™é‡Œåšä¸ªç®€å•ä»‹ç»ã€‚ 12vw: ç›¸å¯¹äºæµè§ˆå™¨å¯è§†åŒºçš„å®½åº¦ 1vw = æµè§ˆå™¨å¯è§†åŒºå®½åº¦çš„ 1%vh: ç›¸å¯¹äºæµè§ˆå™¨å¯è§†åŒºçš„é«˜åº¦ 1vh = æµè§ˆå™¨å¯è§†åŒºé«˜åº¦çš„ 1% ä¹Ÿå°±æ˜¯è¯´ 100vh å®é™…ä¸Šç­‰äºæµè§ˆå™¨å¯è§†åŒºçš„é«˜åº¦ï¼Œæ‰€ä»¥ px ä¸ vh çš„æ¢ç®—æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼ˆä¸€ä¸ªå¾ˆç®€å•çš„æ•°å­¦æ¢ç®—ï¼‰ã€‚å‡è®¾æµè§ˆå™¨å¯è§†åŒºé«˜åº¦ä¸º 720pxï¼ŒæŸä¸ªå…ƒç´ çš„å®½åº¦ä¸º 300pxï¼Œé‚£åº”è¯¥å†™æˆå¤šå°‘ vh æ‰ä¸ 300px ç›¸ç­‰å‘¢ï¼Œå¦‚ä¸‹ã€‚1300 Ã· (720 Ã· 100) â‰ˆ 41.666 æ¯”å¦‚è®¾è®¡ç¨¿ä¸º 1920x1080ï¼ˆå•å±è®¾è®¡é«˜åº¦åº”è¯¥æ›´å°ä¸€ç‚¹ï¼Œå¦‚é€‚é…ç¬¬ä¸€èŠ‚æ‰€è¯´ï¼‰ï¼Œå¯ä»¥å†™ä¸ª CSS é¢„å¤„ç†å‡½æ•°ï¼Œè¿™æ ·æ–¹ä¾¿ç›´æ¥ä½¿ç”¨è®¾è®¡ç¨¿çš„å°ºå¯¸ï¼Œä»¥ Sass ä¸ºä¾‹å¦‚ä¸‹ã€‚ 123456789@function vh( $value ) &#123; @return ( $value / 1080 / 100 ) + vh;&#125;æˆ–è€…@function vw( $value ) &#123; @return ( $value / 1920 / 100 ) + vw;&#125; ç„¶åï¼Œ300px å¯ä»¥æ— ç¼å†™æˆ vh(300) æˆ– vw(300)ã€‚ soâ€¦ å¯¹äºæˆ‘ä»¬çš„é¡µé¢é€‰æ‹© vh ä¸€ä¸¾ä¸¤å¾—ï¼Œä¸ç”¨å†™å¾ˆå¤š rem åŒ¹é…ï¼Œä¹Ÿä¸ä¼šå‡ºç°æº¢å‡ºçš„é—®é¢˜ã€‚ å› ä¸ºé«˜åº¦å˜çŸ®ï¼Œå†…å®¹çš„å°ºå¯¸ä¼šéšä¹‹å˜å°ï¼Œè€Œé¡µé¢æ˜¯ 1190 å®½ï¼Œæ°´å¹³å±…ä¸­å¸ƒå±€ï¼Œæ‰€ä»¥å½“åªæ”¹å˜æµè§ˆå™¨å®½åº¦çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‡ºç°å®½åº¦å˜åŒ–æº¢å‡ºé—®é¢˜ï¼ˆé™¤éåˆ†è¾¨ç‡è¶…å¤§ï¼Œç„¶åé«˜åº¦å±…å¾ˆé«˜ï¼ŒåªæŠŠå®½åº¦ç¼©å¾ˆå°çš„æƒ…å†µï¼Œè¿™ä¸ªä¸‹é¢ä¼šè¯´åˆ°ï¼‰ã€‚å†™å®Œååœ¨ä¸Šé¢åˆ—ä¸¾çš„ä¸»æµåˆ†è¾¨ç‡ä¸‹ä¸€ä¸€æµ‹è¯•é€šè¿‡ã€‚ çœ‹çœ‹æ•ˆæœï¼ˆå½“ç„¶è¿™ä¸ªæ˜¯æœ€ç»ˆæ•ˆæœï¼Œåªæ”¹å˜å®½åº¦çš„æ‹‰ä¼¸é€‚é…åœ¨æœ€åä¼šè¯´ï¼‰ï¼š 8ã€ç‰¹æ®Šåœºæ™¯è¿™é‡Œå°±æ˜¯åˆšåˆšè¯´åˆ°çš„ åˆ†è¾¨ç‡è¶…å¤§ï¼Œç„¶åé«˜åº¦å±…å¾ˆé«˜ï¼ŒåªæŠŠå®½åº¦ç¼©å¾ˆå°çš„æƒ…å†µï¼Œå› ä¸ºè®¾è®¡ç¨¿æ˜¯é•¿å®½æ¯”ä¾‹ä¸ºæ¨ªå‘çŸ©å½¢ï¼Œæ‰€ä»¥æ˜æ˜¾ä¸ç”¨é•¿å®½æ¯”ä¸ºç«–å‘çš„çŸ©å½¢æ¥çœ‹é¡µé¢æ˜¯èƒŒé“è€Œé©°çš„ã€‚ å§”å±ˆå§”å±ˆï¼Œä½†è¿˜æ˜¯è¦å…¼å®¹ä¸‹ï¼Œè‡³å°‘çœ‹èµ·æ¥è¦æ˜¾ç¤ºæ­£å¸¸ã€‚ 8.1ã€å°è¯• rem + vh æ–¹æ¡ˆä¸€å¼€å§‹æƒ³çš„æ˜¯ rem + vh ç»“åˆä½¿ç”¨ï¼Œæ ¹å…ƒç´  html ä½¿ç”¨ vhï¼Œå…¶ä»–å•ä½åˆ™ä½¿ç”¨ remï¼Œç„¶åæ‰¾åˆ°æœ‰é—®é¢˜çš„å®½é«˜æ¯”ï¼Œé€šè¿‡ @media æ–¹å¼è®¾ç½® html ä¸º vw æ¥è¾¾åˆ°é€‚é…ã€‚ äº‹å®æ˜¯ï¼Œrem ç¼©å°åˆ°ä¸€å®šå€¼å°±ä¸ä¼šå†ç¼©å°äº†ï¼Œè¿™ä¸ªè·Ÿæµè§ˆå™¨å¯¹å­—ä½“å¤§å°é™åˆ¶ä¸ºæœ€å° 12px ä¸€æ ·ï¼Œçœ‹ä¸ªä¾‹å­ã€‚ æ ¹å­—ä½“å°äº 12px ä»¥åï¼Œrem å¯¹åº”çš„å€¼åˆ™éƒ½æ˜¯è®¾ç½®çš„å€æ•°ä¹˜ä»¥ 12ï¼›è®¾ç½®æ ¹å­—ä½“ä¸º vh, vw å•ä½åŒç†ï¼Œrem ä¼šåœ¨ vh, vw æ¢ç®—è¾¾åˆ° 12 ä»¥åå°±ä¸å†æ”¹å˜ã€‚ PPPS: æ˜¯ä¸æ˜¯æœ‰ç‚¹å‘ï¼Œåº”è¯¥å­—ä½“çš„å±æ€§æœ€å°å€¼ä¸º 12ï¼Œè€Œå…¶ä»–å±æ€§çš„å€¼æ²¡æœ‰æ§åˆ¶æ‰å¯¹ æ‰€ä»¥ï¼Œå¦‚æœä½¿ç”¨ rem + vh æ–¹æ¡ˆï¼Œåœ¨ç•Œé¢ç¼©å°åˆ°ä¸€å®šå°ºå¯¸åç»§ç»­ç¼©å°ï¼Œæœ‰äº›å€¼è¾¾åˆ°æœ€å°å€¼å›ºå®šä¸å˜ï¼Œè€Œæœ‰äº›å€¼ä»åœ¨å˜å°ï¼ŒUI çš„å±•ç¤ºå°±å˜å¾—æ··ä¹±ã€‚ 8.2ã€è½åœ°æ–¹æ¡ˆï¼Œvh + vw + JavaScript è®¡ç®—è€Œç›´æ¥åœ¨å…ƒç´ çš„å±æ€§å€¼ä¸Šè®¾ç½®ä¸º vh æˆ– vwï¼Œæ‰€æœ‰çš„å€¼éƒ½ä¼šå®æ—¶å˜åŠ¨ï¼Œæ²¡æœ‰æœ€å°å€¼ï¼ˆé™¤äº†å±æ€§ä¸ºå­—ä½“æœ‰æœ€å°å€¼ï¼‰ï¼Œè¿™æ ·å°±æœ€å¤§ç¨‹åº¦å‡å°‘ UI å˜ä¹±çš„æƒ…å†µäº†ï¼Œé™¤éç¼©åˆ°å¾ˆå°å¾ˆå°ï¼Œé‚£å°±â€¦ï¼ˆæ­¤å¤„çœç•¥ 1000 ä¸ªå­—ï¼‰ã€‚ äºæ˜¯ä¹ï¼Œç°åœ¨çš„æƒ³æ³•æ˜¯ åœ¨åŸæ¥ä»¥ vh ä¸ºåŸºç¡€çš„æƒ…å†µä¸‹ï¼Œæ‹·è´æ‰€æœ‰å¸¦ vh å•ä½çš„ä»£ç ï¼ŒæŠŠ vh æ¢æˆ vwï¼Œå½“ç„¶è¿™äº›æ”¹åŠ¨éƒ½åœ¨ä¸€ä¸ªæ¯”å¦‚å« .vw-mode çš„ç±»ä¸‹é¢ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ— ç¼è¿ç§»ï¼Œåªéœ€æ›¿æ¢ vh å‡½æ•°åå³å¯ã€‚ æŠŠ .vw-mode ä¸‹çš„å†…å®¹è®¾ç½®ä¸ºä¸Šä¸‹å±…ä¸­ã€‚ é€šè¿‡ JS è®¡ç®—ï¼Œå½“å¯è§†åŒºæ¯”ä¾‹ä¸ºç«–å‘æ¯”ä¾‹æ—¶ï¼Œåˆ™åœ¨é¡¶å±‚å…ƒç´ åŠ ä¸Š .vw-mode ç±»åï¼Œå½“æ¯”ä¾‹ä¸ºæ¨ªå‘æ¯”ä¾‹æ—¶ï¼Œåˆ™å»æ‰ .vw-mode ç±»åã€‚ å¤§è‡´çš„ä»£ç å¦‚ä¸‹ CSS1234567891011.homepage.vw-mode &#123; font-size: vw(14); .com-width &#123; width: vw(1190); &#125; .hp-header &#123; padding-top: vw(30); // ...æ›´å¤šä»£ç  &#125; // ...æ›´å¤šä»£ç &#125; JS12345678910this.resizeHandler = () =&gt; &#123; const clientWidth = document.documentElement.clientWidth const clientHeight = document.documentElement.clientHeight // å½“é•¿å®½æ¯”ä¸ºç«–å‘æ¯”ä¾‹æ—¶ const isVerticalRatio = clientWidth / clientHeight &lt; 1370 / 890 $homepageElem.classList[isVerticalRatio ? 'add' : 'remove']('vw-mode')&#125;this.resizeHandler()window.addEventListener('resize', this.resizeHandler) æœ€åçš„ç»“æœå°±æ˜¯ä¸Šé¢é‚£ä¸ª GIF æ•ˆæœå›¾äº†ã€‚ 9ã€ç§»åŠ¨ç«¯ç§»åŠ¨ç«¯ç”¨æˆ·æ˜¯æ²¡æ³•æ“ä½œæµè§ˆå™¨çš„ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šéƒ½æ˜¯æ ‡å‡†çš„é•¿å®½æ¯”ï¼Œç”¨ vh æœ€åˆé€‚ä¸è¿‡äº†ï¼Œæˆ– vwã€‚ 10ã€æœ€åä½“éªŒï¼ˆå®˜ç½‘ï¼‰ï¼šhttps://ling.jd.com ä½“éªŒæµè§ˆå™¨ï¼šChromeã€Safari æ–°ç‰ˆï¼Œå…¶ä»–æµè§ˆå™¨æš‚ä¸æ”¯æŒ","pubDate":"Mon, 22 Oct 2018 11:30:00 GMT","guid":"https://aotu.io/notes/2018/10/22/Responsive-single-screen-design/","category":"é¡¹ç›®æ€»ç»“"},{"title":"ååˆ†é’Ÿæ‰“é€  3D ç‰©ç†ä¸–ç•Œ","link":"https://aotu.io/notes/2018/10/18/cannonjs/","description":"å‰è¨€åœ¨ç¹å¿™çš„ä¸šåŠ¡ä¸­ï¼Œä¸ºäº†ç¼©çŸ­è®¾è®¡å’Œå¼€å‘çš„å‘¨æœŸï¼Œæˆ‘ä»¬çš„ H5 å°æ¸¸æˆæ›´å¤šçš„ä¼šé‡‡ç”¨ 2D çš„è§†è§‰é£æ ¼ï¼Œä½†æ€»æ˜¯ä¸€ä¸ªé£æ ¼æ˜¯å¾ˆæ— è¶£çš„ï¼Œæ‰€ä»¥æœ€è¿‘æäº†ä¸€ä¸ª 3D ç‰©ç†æ¸¸æˆçš„éœ€æ±‚ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œå¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« å°†å…³äº Three.jsã€Cannon.jsã€æ¨¡å‹ã€å·¥å…·ç­‰åŸºç¡€çŸ¥è¯†ã€é—®é¢˜æ€»ç»“åˆ†äº«ç»™å¤§å®¶ã€‚ å¼€å§‹ 3D é¡¹ç›®ä¹‹å‰ï¼Œé¦–å…ˆä»é€‰æ‹© 3D æ¡†æ¶å¼€å§‹ï¼Œè€ç‰Œå¼•æ“ Three.js å’Œå¾®è½¯çš„ Babylon.js éƒ½ä¸é”™ï¼Œé’ˆå¯¹è‡ªå·±çš„é¡¹ç›®éœ€æ±‚é€‰æ‹©ä¸€æ¬¾å³å¯ï¼Œè¿™æ¬¡æˆ‘ä¸»è¦é’ˆå¯¹æ›´ç†Ÿæ‚‰çš„ Three.js æ¥è®²ã€‚ Three.js åŸºç¡€æ¦‚å¿µä½¿ç”¨ Three.js å‰ï¼Œé¦–å…ˆè¦ç†è§£ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š Sence åœºæ™¯åœ¨ Three.js ä¸­é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªä¸‰ç»´ç©ºé—´ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåœºæ™¯ã€‚ åœºæ™¯å¯ä»¥æƒ³è±¡æˆæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢å­˜æ”¾ç€æ‰€æœ‰æ¸²æŸ“çš„ç‰©ä½“å’Œä½¿ç”¨çš„å…‰æºã€‚ 1let scene = new THREE.Scene() Axes åæ ‡è½´Three.js é‡‡ç”¨çš„æ˜¯å³æ‰‹åæ ‡ç³»ï¼Œæ‹‡æŒ‡ã€é£ŸæŒ‡ã€ä¸­æŒ‡åˆ†åˆ«è¡¨ç¤º Xã€Yã€Z è½´çš„æ–¹å‘ã€‚ Camera æ‘„åƒæœºæ‘„åƒæœºå°±ç›¸å½“äºæˆ‘ä»¬çš„åŒçœ¼ï¼Œå†³å®šäº†èƒ½å¤Ÿåœ¨åœºæ™¯ä¸­çš„æ‰€è§æ‰€å¾—ã€‚ Three.js ä¸­æä¾›ä»¥ä¸‹å‡ ç§æ‘„åƒæœºç±»å‹ï¼Œæœ€ä¸ºå¸¸ç”¨çš„æ˜¯ PerspectiveCamera é€è§†æ‘„åƒæœºï¼Œå…¶ä»–äº†è§£ä¸‹å³å¯ã€‚ ArrayCamera é˜µåˆ—æ‘„åƒæœº ä¸€ä¸ª ArrayCamera ä¼šåŒ…å«å¤šä¸ªå­æ‘„åƒæœºï¼Œé€šè¿‡è¿™ä¸€ç»„å­æ‘„åƒæœºæ¸²æŸ“å‡ºå®é™…æ•ˆæœï¼Œé€‚ç”¨äº VR åœºæ™¯ã€‚ CubeCamera ç«‹æ–¹æ‘„åƒæœº åˆ›å»ºå…­ä¸ª PerspectiveCameraï¼ˆé€è§†æ‘„åƒæœºï¼‰ï¼Œé€‚ç”¨äºé•œé¢åœºæ™¯ã€‚ StereoCamera ç«‹ä½“ç›¸æœº åŒé€è§†æ‘„åƒæœºé€‚ç”¨äº 3D å½±ç‰‡ã€è§†å·®æ•ˆæœã€‚ OrthographicCamera æ­£äº¤æ‘„åƒæœºOrthographicCameraï¼ˆæ­£äº¤æ‘„åƒæœºï¼‰å®šä¹‰äº†ä¸€ä¸ªçŸ©å½¢å¯è§†åŒºåŸŸï¼Œç‰©ä½“åªæœ‰åœ¨è¿™ä¸ªåŒºåŸŸå†…æ‰æ˜¯å¯è§çš„ï¼Œå¦å¤–ç‰©ä½“æ— è®ºè·ç¦»æ‘„åƒæœºæ˜¯è¿œæˆ–äº‹è¿‘ï¼Œç‰©ä½“éƒ½ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ªå¤§å°ï¼Œæ‰€ä»¥è¿™ç§æ‘„åƒæœºç±»å‹é€‚ç”¨äº 2.5D åœºæ™¯ï¼ˆä¾‹å¦‚æ–œ 45 åº¦æ¸¸æˆï¼‰ã€‚ PerspectiveCamera é€è§†æ‘„åƒæœºæœ€ä¸ºå¸¸ç”¨çš„æ‘„åƒæœºç±»å‹ï¼Œæ¨¡æ‹Ÿäººçœ¼çš„è§†è§‰ï¼Œæ ¹æ®ç‰©ä½“è·ç¦»æ‘„åƒæœºçš„è·ç¦»ï¼Œè¿‘å¤§è¿œå°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‘„åƒæœºçš„åˆå§‹ä½ç½® Xã€Yã€Z éƒ½ä¸º 0ï¼Œæ‘„åƒæœºæ–¹å‘æ˜¯ä»æ­£ Z è½´å‘è´Ÿ Z è½´çœ‹å»ã€‚é€šè¿‡ Near å’Œ Far å®šä¹‰æœ€è¿‘å’Œæœ€è¿œçš„å¯è§†è·ç¦»ï¼ŒFov å®šä¹‰å¯è§†çš„è§’åº¦ã€‚ Mesh ç½‘æ ¼æœ‰äº†åœºæ™¯å’Œæ‘„åƒå¤´å°±å¯ä»¥çœ‹åˆ° 3D åœºæ™¯ä¸­çš„ç‰©ä½“ï¼Œåœºæ™¯ä¸­çš„æˆ‘ä»¬æœ€ä¸ºå¸¸ç”¨çš„ç‰©ä½“ç§°ä¸ºç½‘æ ¼ã€‚ ç½‘æ ¼ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå‡ ä½•ä½“å’Œæè´¨ Geometry å‡ ä½•ä½“è®°å½•äº†æ¸²æŸ“ä¸€ä¸ª 3D ç‰©ä½“æ‰€éœ€è¦çš„åŸºæœ¬æ•°æ®ï¼šFace é¢ã€Vertex é¡¶ç‚¹ç­‰ä¿¡æ¯ã€‚ ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç½‘æ ¼æ˜¯ç”±ä¸‰è§’å½¢ç»„æˆï¼Œç»„æˆä¸‰è§’å½¢çš„ç‚¹ç§°ä¸ºé¡¶ç‚¹ï¼Œç»„æˆçš„ä¸‰è§’å½¢ç§°ä¸ºé¢ã€‚ Material æè´¨æè´¨å°±åƒæ˜¯ç‰©ä½“çš„çš®è‚¤ï¼Œå†³å®šäº†å‡ ä½•ä½“çš„å¤–è¡¨ã€‚å¤–è¡¨çš„å®šä¹‰å¯ä»¥è®©ä¸€ä¸ªç‰©ä½“çœ‹èµ·æ¥æ˜¯å¦æœ‰é•œé¢é‡‘å±æ„Ÿã€æš—æ·¡ã€çº¯è‰²ã€æˆ–æ˜¯é€æ˜ä¸å¦ç­‰æ•ˆæœã€‚ Light å…‰æºå…‰æºç›¸å½“äºåœ¨å¯†é—­ç©ºé—´é‡Œçš„ä¸€ç›ç¯ï¼Œå¯¹äºåœºæ™¯æ˜¯å¿…ä¸å¯å°‘çš„ åœ¨ Three.js å¸¸ç”¨çš„æœ‰è¿™å‡ ç§å…‰æºï¼š AmbientLight ç¯å¢ƒå…‰æºå±äºåŸºç¡€å…‰æºï¼Œä¸ºåœºæ™¯ä¸­çš„æ‰€æœ‰ç‰©ä½“æä¾›ä¸€ä¸ªåŸºç¡€äº®åº¦ã€‚ DirectionalLight å¹³è¡Œå…‰æºæ•ˆæœç±»ä¼¼å¤ªé˜³å…‰ï¼Œå‘å‡ºçš„å…‰æºéƒ½æ˜¯å¹³è¡Œçš„ã€‚ HemisphereLight åŠçƒå…‰æºåªæœ‰åœ†çƒçš„åŠè¾¹ä¼šå‘å‡ºå…‰æºã€‚ PointLight ç‚¹å…‰æºä¸€ä¸ªç‚¹å‘å››å‘¨å‘å‡ºå…‰æºï¼Œä¸€èˆ¬ç”¨äºç¯æ³¡ã€‚ SpotLight èšå…‰ç¯å…‰æºä¸€ä¸ªåœ†é”¥ä½“çš„ç¯å…‰ã€‚ Shadow é˜´å½±å¦å¤–è¦æ³¨æ„å¹¶ä¸æ˜¯æ¯ä¸€ç§å…‰æºéƒ½èƒ½äº§ç”Ÿé˜´å½±ï¼Œç›®å‰åªæœ‰ä¸‰ç§å…‰æºå¯ä»¥ï¼š DirectionalLight å¹³è¡Œå…‰æº PointLight ç‚¹å…‰æº SpotLight èšå…‰ç¯å…‰æº å¦å¤–å¦‚æœè¦å¼€å¯æ¨¡å‹çš„é˜´å½±çš„è¯ï¼Œæ¨¡å‹æ˜¯ç”±å¤šä¸ª Mesh ç»„æˆçš„ï¼Œåªå¼€å¯çˆ¶çš„ Mesh çš„é˜´å½±æ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦éå†çˆ¶ Mesh ä¸‹æ‰€æœ‰çš„å­ Mesh ä¸ºå…¶å¼€å¯æŠ•å°„é˜´å½± castShadow å’Œæ¥æ”¶æŠ•å°„é˜´å½± receiveShadowã€‚ 1234567// éå†å­ Mesh å¼€å¯é˜´å½±object.traverse(function(child) &#123; if (child instanceof THREE.Mesh) &#123; child.castShadow = true child.receiveShadow = true &#125;&#125;) glTF æ¨¡å‹æ ¼å¼å‰é¢æåˆ° Three.js å¼•æ“æ”¯æŒçš„æ ¼å¼éå¸¸çš„å¤šï¼Œæˆ‘ä»¬æœ€ä¸ºå¸¸è§çš„æ ¼å¼æœ‰ .obj + .mtl + .jpg/.pngï¼Œä½†ä½¿ç”¨è¿™ç§æ¨¡å‹æ ¼å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ.obj æ˜¯é™æ€æ¨¡å‹ï¼Œä¸æ”¯æŒåŠ¨ç”»æ•°æ®å­˜å‚¨ï¼Œæ— æ³•ä½¿ç”¨æ¨¡å‹çš„åŠ¨ç”»ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ä½¿ç”¨ glTF è¿™ç§æ¨¡å‹æ ¼å¼ã€‚ glTF æ¨¡å‹æ ¼å¼ä»‹ç»ä¼ ç»Ÿçš„ 3D æ¨¡å‹æ ¼å¼çš„è®¾è®¡ç†å¿µæ›´å¤šæ˜¯é’ˆå¯¹æœ¬åœ°ç¦»çº¿ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™ç±» 3D æ¨¡å‹æ ¼å¼æ²¡æœ‰é’ˆå¯¹ä¸‹è½½é€Ÿåº¦æˆ–åŠ è½½é€Ÿåº¦è¿›è¡Œä¼˜åŒ–ï¼Œæ–‡ä»¶å¤§å°å¾€å¾€ä¼šéå¸¸çš„å¤§ï¼Œéšç€ Web ç«¯çš„å…´èµ·ï¼Œå¯¹æ–‡ä»¶å¤§å°æ›´ä¸ºæ•æ„Ÿçš„ä»Šå¤©ï¼Œæˆ‘ä»¬è¯¥å°è¯•åˆ«çš„æ¨¡å‹æ ¼å¼äº†ã€‚ glTF æ˜¯ç”± Khronos Group å¼€å‘çš„ 3D æ¨¡å‹æ–‡ä»¶æ ¼å¼ï¼Œè¯¥æ ¼å¼çš„ç‰¹ç‚¹æ˜¯æœ€å¤§ç¨‹åº¦çš„å‡å°‘äº† 3D æ¨¡å‹æ–‡ä»¶çš„å¤§å°ï¼Œæé«˜äº†ä¼ è¾“ã€åŠ è½½ä»¥åŠè§£æ 3D æ¨¡å‹æ–‡ä»¶çš„æ•ˆç‡ï¼Œå¹¶ä¸”å®ƒå¯æ‰©å±•ï¼Œå¯äº’æ“ä½œã€‚ ç¬¬ä¸€ç‰ˆ glTF 1.0 äº 2015 å¹´ 10 æœˆ 19 æ—¥å‘å¸ƒï¼Œ2017 å¹´ 6 æœˆ 5 æ—¥çš„ Web 3D 2017 å¤§ä¼šå‘å¸ƒäº†æœ€ç»ˆç‰ˆæœ¬ glTF 2.0ã€‚ glTF æ¨¡å‹æ ¼å¼æ–‡ä»¶ç»„æˆ æ¨¡å‹æ–‡ä»¶ .gltfåŒ…å«åœºæ™¯ä¸­èŠ‚ç‚¹å±‚æ¬¡ç»“æ„ã€æ‘„åƒæœºã€ç½‘æ ¼ã€æè´¨ä»¥åŠåŠ¨ç”»ç­‰æè¿°ä¿¡æ¯ã€‚ äºŒè¿›åˆ¶æ–‡ä»¶ .binåŒ…å«å‡ ä½•ã€åŠ¨ç”»çš„æ•°æ®ä»¥åŠå…¶ä»–åŸºäºç¼“å†²åŒºçš„æ•°æ®ï¼Œ.bin æ–‡ä»¶å¯ä»¥ç›´æ¥åŠ è½½åˆ° GPU çš„ç¼“å†²åŒºä¸­ä»è€Œä¸éœ€è¦é¢å¤–çš„è§£æï¼Œå› æ­¤èƒ½å¤Ÿé«˜æ•ˆä¼ è¾“å’Œå¿«é€ŸåŠ è½½ã€‚ æè´¨è´´å›¾æ–‡ä»¶ .png/.jpg3D æ¨¡å‹åšå‡¹å‡¸è´´å›¾æˆ–æ™®é€šè´´å›¾ä¸Šæ‰€ä½¿ç”¨åˆ°æ–‡ä»¶ã€‚ glTF æ¨¡å‹æ ¼å¼å¯¼å‡ºå®˜æ–¹åœ¨ .gltf æ ¼å¼å¯¼å‡ºä¸Šæä¾›äº†å¤šç§å»ºæ¨¡è½¯ä»¶çš„å¯¼å‡ºæ’ä»¶ï¼Œæ¯”å¦‚æœ‰ï¼š 3DS Max Exporter Maya Exporter Blender glTF 2.0 Exporter â€¦ æ­£å·§æˆ‘ä»¬å¸¸ç”¨çš„ C4D å»ºæ¨¡è½¯ä»¶å®˜æ–¹æ²¡æœ‰æä¾› C4D çš„å¯¼å‡ºæ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ C4D å¯¼å‡ºåå†å¯¼å…¥ Blenderï¼Œé€šè¿‡ Blender ä½œä¸ºä¸­è½¬ç«™å¯¼å‡º glTF æ ¼å¼æ–‡ä»¶ã€‚ ä½†ç”±äºä¸¤ä¸ªå»ºæ¨¡è½¯ä»¶ä¹‹é—´çš„æè´¨å¹¶ä¸èƒ½ç›¸é€šï¼Œå¯¼å‡ºåçš„æ¨¡å‹æ–‡ä»¶æè´¨æ•ˆæœè¡¨ç°ä¸ä½³ï¼Œè¿™æ˜¯å› ä¸º Blender æœ‰è‡ªå·±çš„ä¸€å¥—æè´¨æµç¨‹ç³»ç»Ÿï¼Œä¾‹å¦‚æœ‰ glTF Metallic Roughness å’Œ glTF Specular Glossinessï¼Œéœ€åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šé‡æ–°è´´æè´¨åå¯¼å‡ºè§£å†³ã€‚ å¦å¤–æ³¨æ„çš„ä¸€ç‚¹ Blender çš„åæ ‡ç³»ä¸ Three.js æ˜¯ä¸åŒçš„ï¼ŒBlender ä¼šå°† Z å’Œ Y å¯¹è°ƒä½ç½®ï¼Œåœ¨å¯¼å‡ºæ—¶è¦é€‰æ‹© Convert Z up to Y up è¿›è¡Œå¯¹è°ƒã€‚ Three.js ä½¿ç”¨ glTF æ¨¡å‹Three.js ä¸­ä½¿ç”¨ glTF æ ¼å¼éœ€é¢å¤–å¼•å…¥ GLTFLoader.js åŠ è½½å™¨ã€‚ 123456var gltfLoader = new THREE.gltfLoader()gltfLoader.load('./assets/box.gltf', function(sence) &#123; var object = scene.gltf // æ¨¡å‹å¯¹è±¡ scene.add(object) // å°†æ¨¡å‹æ·»åŠ åˆ°åœºæ™¯ä¸­&#125;) glTF æ¨¡å‹åŠ¨ç”»Animation Clip åŠ¨ç”»ç‰‡æ®µå‰é¢æåˆ° glTF æ¨¡å‹æ ¼å¼æ”¯æŒåŠ¨ç”»ï¼Œæ¨¡å‹åŠ¨ç”»å¯ä»¥ä½¿ç”¨ Blender å»ºæ¨¡è½¯ä»¶åˆ¶ä½œï¼Œé€šè¿‡ Blender æä¾›çš„æ—¶é—´è½´ç¼–è¾‘å˜å½¢åŠ¨ç”»æˆ–è€…éª¨éª¼åŠ¨ç”»ï¼Œæ¯ä¸ªåŠ¨ç”»å¯ä»¥ç¼–è¾‘ä¸ºä¸€ä¸ª Action åŠ¨ä½œï¼Œå¯¼å‡ºåä½¿ç”¨ GLTFLoader åŠ è½½åˆ° Three.js ä¸­ï¼Œå¯ä»¥æ‹¿åˆ°ä¸€ä¸ª animations æ•°ç»„ï¼Œanimations é‡ŒåŒ…å«äº†æ¨¡å‹çš„æ¯ä¸ªåŠ¨ç”» Action åŠ¨ä½œã€‚ 123456789101112131415161718192021let gltfLoader = new THREE.gltfLoader()let mixer = nullgltfLoader.load('./assets/box.gltf', function(sence) &#123; let object = scene.gltf let animations = sence.animations // åŠ¨ç”»æ•°æ® if (animations &amp;&amp; animations.length) &#123; mixer = new THREE.AnimationMixer(object) // å¯¹åŠ¨ç”»è¿›è¡Œæ§åˆ¶ for (let i = 0; i &lt; animations.length; i++) &#123; mixer.clipAction(animations[i]).play() // æ’­æ”¾æ‰€æœ‰åŠ¨ç”» &#125; &#125; scene.add(object)&#125;)function update() &#123; let delta = clock.getDelta(mixer) mixer.update(delta) // æ›´æ–°åŠ¨ç”»ç‰‡æ®µ&#125; Tween åŠ¨ç”»å¯¹æ¨¡å‹å®ç°æ·¡å…¥æ·¡å‡ºã€ç¼©æ”¾ã€ä½ç§»ã€æ—‹è½¬ç­‰åŠ¨ç”»æ¨èä½¿ç”¨ GSAP æ¥å®ç°æ›´ä¸ºç®€ä¾¿ã€‚ 1234567891011121314151617181920212223let tween = new TimelineMax()tween .to(box.scale, 1, &#123; // ä» 1 ç¼©æ”¾è‡³ 2ï¼ŒèŠ±è´¹ 1 ç§’ x: 2, y: 2, z: 2, ease: Power0.easeInOut, // é€Ÿåº¦æ›²çº¿ onStart: function() &#123; // ç›‘å¬åŠ¨ç”»å¼€å§‹ &#125;, onUpdate: function() &#123; // ç›‘å¬åŠ¨ç”»è¿‡ç¨‹ &#125;, onComplete: function() &#123; // ç›‘å¬åŠ¨ç”»ç»“æŸ &#125; &#125;) .to(box.position, 1, &#123; // ç¼©æ”¾ç»“æŸåï¼Œä½ç§» x è‡³ 10ï¼ŒèŠ±è´¹ 1 ç§’ x: 10, y: 0, z: 0 &#125;) Draco 3D æ¨¡å‹å‹ç¼©å·¥å…·Draco æ˜¯ä¸€ä¸ªç”¨äºå‹ç¼©ã€è§£å‹ç¼© 3D å‡ ä½•ç½‘æ ¼å’Œç‚¹äº‘çš„å¼€æºåº“ï¼Œä¸ºæ”¹å–„ 3D å›¾å½¢å­˜å‚¨å’Œä¼ è¾“è€Œè®¾è®¡ã€‚ ä½¿ç”¨è¯¥å·¥å…·å¯ä»¥å¯¹ glTF æ ¼å¼è¿›ä¸€æ­¥çš„å‹ç¼©ï¼Œä¼šå°† glTF æ ¼å¼è½¬ä¸º .glb æ ¼å¼ï¼Œå¹¶ä¸” .bin å‹ç¼©æ•ˆæœæ‹”ç¾¤ï¼Œä½†æ˜¯åœ¨ Three.js ä¸­ä½¿ç”¨ .glb æ ¼å¼éœ€è¦å¼•å…¥é¢å¤–çš„è§£æåº“ï¼Œè§£æåº“æ–‡ä»¶åŒ…æ‹¬ draco_decoder.jsï¼ˆ791KBï¼‰ã€draco_decoder.wasmï¼ˆ323 KBï¼‰ã€draco_wasm_wrapper.jsï¼ˆ64.3 KBï¼‰ã€‚æ‰€ä»¥æ›´æ¨èå½“æ¨¡å‹æ–‡ä»¶æ•°é‡å¤šï¼Œä¸”æ–‡ä»¶è¾ƒå¤§æ—¶ä½¿ç”¨ï¼Œå¦åˆ™å¾—ä¸å¿å¤±ã€‚ å‹ç¼©ä½¿ç”¨ glTF Pipeline å·¥å…·ï¼Œéœ€è¦å°†ä¸‰ä¸ªç§ç±»çš„æ–‡ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œæ‰§è¡Œå‘½ä»¤è¡Œè¿›è¡Œè½¬æ¢ã€‚ 12$ npm install -g gltf-pipeline // å®‰è£… gltf-pipeline å·¥å…·$ gltf-pipeline -i model.gltf -o model.glb // æŒ‡å®šæŸä¸ª .gltf æ–‡ä»¶è½¬ä¸º .glb æ ¼å¼ Three.js ä½¿ç”¨ .glb æ ¼å¼å¼•å…¥ Draco è§£ç åº“ 1234567891011// å®ä¾‹åŒ– loaderlet loader = new THREE.GLTFLoader()// Draco è§£ç åº“THREE.DRACOLoader.setDecoderPath('/examples/js/libs/draco')loader.setDRACOLoader(new THREE.DRACOLoader())// åŠ è½½ glTF æ¨¡å‹loader.load('models/gltf/box.gltf', function(gltf) &#123; scene.add(gltf.scene)&#125;) Cannon.js 3D ç‰©ç†å¼•æ“ç›®å‰åœ¨ Github ä¸Šæœç´¢åˆ°çš„ 3D ç‰©ç†å¼•æ“åº“æœ‰ Cannon.jsã€Oimo.jsã€Ammo.jsã€Energy.jsã€Physijs ç­‰ç­‰ï¼Œå¤§éƒ¨åˆ†éƒ½å·²è®¸ä¹…æ²¡æœ‰æ›´æ–°è¿­ä»£äº†ï¼ˆé•¿è¾¾å¥½å‡ å¹´ï¼‰ï¼Œé¡¹ç›®çš„ Star æ•°é‡å’Œ Issues æ•°é‡ä¹Ÿä¸å¤šï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ Cannon.jsã€Oimo.js å’Œ Energy.js ä½œä¸º Babylon.js çš„å†…ç½®ç‰©ç†å¼•æ“ï¼Œæˆ‘ä»¬è¯•ç€ä»è¿™ä¸‰ä¸ªä¸‹æ‰‹ã€‚ Energy.jsï¼šä½¿ç”¨ C++ ç¼–å†™è½¬ JavaScript çš„ 3D ç‰©ç†å¼•æ“ï¼Œæºç ä¸å¯è¯»ï¼Œç›®å‰ Github æ¯”è¾ƒå†·æ¸…ã€‚ Oimo.jsï¼šä¸€æ¬¾è½»é‡çº§çš„ 3D ç‰©ç†å¼•æ“ï¼Œæ–‡ä»¶å¤§å° 153 KBã€‚ Cannon.jsï¼šå®Œå…¨ä½¿ç”¨ JavaScript ç¼–å†™çš„ä¼˜ç§€ 3D ç‰©ç†å¼•æ“ï¼ŒåŒ…å«ç®€å•çš„ç¢°æ’æ£€æµ‹ã€å„ç§å½¢çŠ¶çš„æ‘©æ“¦åŠ›ã€å¼¹åŠ›ã€çº¦æŸç­‰åŠŸèƒ½ã€‚ ä»ç»¼åˆæ€§æ¥çœ‹ï¼Œæˆ‘æ›´åå‘äº Cannon.js ï¼Œæ‰€ä»¥ä¸‹é¢ä¸»è¦è®²è®² Cannon.jsã€‚ Cannon.js çš„ç‰¹æ€§ä»¥ä¸‹æ˜¯ Cannon.js çš„ç‰¹æ€§ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„ 3D ç‰©ç†å¼€å‘åœºæ™¯ã€‚ ä½¿ç”¨ Cannon.jsæˆ‘ä»¬ä»¥å®˜æ–¹çš„ä¸€ä¸ªå¹³é¢åŠ çƒåˆšä½“çš„ä¾‹å­æ¥å¿«é€Ÿä¸Šæ‰‹ Cannon.jsã€‚åœ¨çº¿ä¾‹å­ 1ã€åˆå§‹åŒ–ç‰©ç†ä¸–ç•Œä½¿ç”¨ Cannon.js å‰éœ€è¦åˆ›å»º CANNON.World å¯¹è±¡ï¼ŒCANNON.World å¯¹è±¡æ˜¯è´Ÿè´£ç®¡ç†å¯¹è±¡å’Œæ¨¡æ‹Ÿç‰©ç†çš„ä¸­å¿ƒã€‚ åˆ›å»ºå®Œ CANNON.World å¯¹è±¡åï¼Œæ¥ç€è®¾ç½®ç‰©ç†ä¸–ç•Œçš„é‡åŠ›ï¼Œè¿™é‡Œè®¾ç½®äº†è´Ÿ Y è½´ä¸º 10 m/sÂ²ã€‚ 12let world = new CANNON.World()world.gravity.set(0, -10, 0) Cannon.js æä¾›äº† Broadphaseã€NaiveBroadphase ä¸¤ç§ç¢°æ’æ£€æµ‹é˜¶æ®µï¼Œé»˜è®¤æ˜¯ NaiveBroadphaseã€‚ 1world.broadphase = new CANNON.NaiveBroadphase() 2ã€åˆ›å»ºåŠ¨æ€çƒä½“åˆ›å»º Body åˆ†ä¸‰ä¸ªæ­¥éª¤ï¼š åˆ›å»ºå½¢çŠ¶ ä¸ºå½¢çŠ¶æ·»åŠ åˆšä½“ å°†åˆšä½“æ·»åŠ åˆ°ä¸–ç•Œ 12345678let sphereShape = new CANNON.Sphere(1) // Step 1 let sphereBody = new CANNON.Body(&#123; // Step 2 mass: 5, position: new CANNON.Vec3(0, 10, 0), shape: sphereShape&#125;)world.add(sphereBody) // Step 3 ç¬¬ä¸€æ­¥åˆ›å»ºäº†åŠå¾„ä¸º 1 çš„çƒå½¢ï¼Œç¬¬äºŒæ­¥åˆ›å»ºçƒçš„åˆšä½“ï¼Œå¦‚æœåˆšä½“çš„ mass å±æ€§è®¾ç½®ä¸º 0ï¼Œåˆšä½“åˆ™ä¼šå¤„äºé™æ­¢çŠ¶æ€ï¼Œé™æ­¢çš„ç‰©ä½“ä¸ä¼šå’Œå…¶ä»–é™æ­¢çš„ç‰©ä½“å‘ç”Ÿç¢°æ’ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ºçƒçš„åˆšä½“è®¾ç½®äº† 5kgï¼Œçƒä¼šå¤„äºåŠ¨æ€çš„çŠ¶æ€ï¼Œä¼šå—çš„é‡åŠ›çš„å½±å“è€Œç§»åŠ¨ï¼Œä¼šä¸å…¶ä»–ç‰©ä½“å‘ç”Ÿç¢°æ’ã€‚ 3ã€åˆ›å»ºé™æ€å¹³é¢å’ŒåŠ¨æ€çƒä½“1234567891011// å¹³é¢ Bodylet groundShape = new CANNON.Plane()let groundBody = new CANNON.Body(&#123; mass: 0, shape: groundShape&#125;)// setFromAxisAngle æ—‹è½¬ X è½´ -90 åº¦groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -1.5707963267948966)world.add(groundBody) åˆ›å»ºå¹³é¢å½¢çŠ¶ï¼Œæ¥ç€æ˜¯åˆšä½“ï¼Œè¿™é‡Œè®¾ç½®äº†å¹³é¢åˆšä½“çš„ mass ä¸º 0ï¼Œä¿è¯åˆšä½“å¤„äºé™æ­¢çŠ¶æ€ã€‚é»˜è®¤æƒ…å†µä¸‹å¹³é¢çš„æ–¹å‘æ˜¯æœå‘ Z æ–¹å‘çš„ï¼ˆç«–ç«‹ç€ï¼‰ï¼Œå¯ä»¥é€šè¿‡ Body.quaternion.setFromAxisAngle å¯¹å¹³é¢è¿›è¡Œæ—‹è½¬ã€‚ 4ã€åˆ›å»ºå¹³é¢å’Œçƒçš„ç½‘æ ¼å‰é¢åˆ›å»ºçš„åˆšä½“åœ¨åœºæ™¯ä¸­å¹¶æ²¡æœ‰å®é™…çš„è§†è§‰æ•ˆæœï¼Œè¿™ä¸€æ­¥åˆ›å»ºå¹³é¢ã€çƒçš„ç½‘æ ¼ã€‚ 1234567891011121314// å¹³é¢ç½‘æ ¼let groundGeometry = new THREE.PlaneGeometry(20, 20, 32)let groundMaterial = new THREE.MeshStandardMaterial(&#123; color: 0x7f7f7f, side: THREE.DoubleSide&#125;)let ground = new THREE.Mesh(groundGeometry, groundMaterial)scene.add(ground)// çƒç½‘æ ¼let sphereGeometry = new THREE.SphereGeometry(1, 32, 32)let sphereMaterial = new THREE.MeshStandardMaterial(&#123; color: 0xffff00 &#125;)let sphere = new THREE.Mesh(sphereGeometry, sphereMaterial)scene.add(sphere) 5ã€æ¨¡æ‹Ÿä¸–ç•Œæ¥ç€æˆ‘ä»¬ä¸ºç‰©ç†ä¸–ç•Œå¼€å¯æŒç»­æ›´æ–°ï¼Œå¹¶ä¸”å°†åˆ›å»ºçš„çƒåˆšä½“ä¸çƒç½‘æ ¼å…³è”èµ·æ¥ã€‚ 123456789function update() &#123; requestAnimationFrame(update) world.step(1 / 60) if (sphere) &#123; sphere.position.copy(sphereBody.position) sphere.quaternion.copy(sphereBody.quaternion) &#125;&#125; é€šè¿‡è¿™å‡ æ­¥ï¼Œä¸€ä¸ªç®€å•çš„ç‰©ç†åœºæ™¯å°±å®Œæˆäº†ï¼Œå¦å¤–æ›´å¤šå®˜æ–¹ä¾‹å­å¯ä»¥ç‚¹å‡»è¿™é‡Œï¼Œå¯ä»¥æŸ¥çœ‹åˆ° Cannon.js å„ä¸ªçº¦æŸã€æ‘©æ“¦åŠ›ã€æ¨¡æ‹Ÿæ±½è½¦ç­‰ç‰¹æ€§çš„ä¾‹å­ã€‚ å…¶ä»–ï¼š1ã€è‡ªå®šä¹‰ç‰©ç†æè´¨éœ€å…³è”è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œç°åœ¨åœºæ™¯ä¸­åˆšä½“çš„ç‰©ç†ç‰¹æ€§éƒ½ä¸ºé»˜è®¤çš„ï¼Œæˆ‘å¸Œæœ›çƒçš„æ¢å¤ç³»æ•°é«˜ä¸€ç‚¹ï¼Œå³æ‰è½æ—¶å¼¹è·³çš„æ›´é«˜ã€‚é¦–å…ˆéœ€è¦é€šè¿‡ CANNON.Material å®ä¾‹ç‰©ç†æè´¨ï¼Œåˆšä½“ä½¿ç”¨è¯¥ç‰©ç†æè´¨ï¼Œæœ€åé€šè¿‡ CANNON.ContactMaterial æ¥å®šä¹‰ä¸¤ä¸ªåˆšä½“ç›¸é‡åä¼šå‘ç”Ÿä»€ä¹ˆã€‚ 123456789101112131415161718192021// å¹³é¢let ground_cm = new CANNON.Material() // Step 1 : å®ä¾‹ CANNON.Materiallet groundBody = new CANNON.Body(&#123; ... material: groundMaterial // Step 2 : ä½¿ç”¨è¯¥ç‰©ç†æè´¨ ...&#125;)// çƒlet sphere_cm = new CANNON.Material()let sphereBody = new CANNON.Body(&#123; ... material: sphere_cm ...&#125;)let sphere_ground = new CANNON.ContactMaterial(ground_cm, sphere_cm, &#123; // Step 3 : å®šä¹‰ä¸¤ä¸ªåˆšä½“ç›¸é‡åä¼šå‘ç”Ÿä»€ä¹ˆ friction: 1, restitution: 0.4&#125;)world.addContactMaterial(sphere_ground) // Step 4 : æ·»åŠ åˆ°ä¸–ç•Œä¸­ 2ã€åˆšä½“æ·»åŠ ä½ç§»åŠ¨ç”»æ—¶éœ€å–æ¶ˆé€Ÿåº¦å€¼æ¯”å¦‚æˆ‘ä½¿ç”¨ GSAP åº“å¯¹æŸä¸ªåˆšä½“è¿›è¡Œ Y è½´å‘ä¸Šç§»åŠ¨ï¼Œåœ¨ update é˜¶æ®µéœ€è¦å°†åˆšä½“çš„é‡åŠ›åŠ é€Ÿåº¦è®¾ç½®ä¸º 0ï¼Œå¦åˆ™åŠ¨ç”»ç»“æŸååˆšä½“ä¼šå‡ºç°å‘ä¸‹ç ¸çš„æ•ˆæœã€‚ 12345678910111213let tween = new TimelineMax()tween.to(boxBody.position, 2, &#123; x: 0, y: 10, z: 0, update: function() &#123; // å½’ 0 è®¾ç½® boxBody.velocity.setZero() boxBody.initVelocity.setZero() boxBody.angularVelocity.setZero() boxBody.initAngularVelocity.setZero() &#125;&#125;) 3ã€åªæ£€æµ‹ç¢°æ’ï¼Œä¸å‘ç”Ÿç‰©ç†æ•ˆæœå…è®¸åªæ£€æµ‹æ˜¯å¦ç¢°æ’ï¼Œå®é™…ä¸å‘ç”Ÿç‰©ç†æ•ˆæœï¼Œéœ€è¦ä¸ºåˆšä½“æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š 1boxBody.collisionResponse = false 4ã€ç¼©æ”¾åˆšä½“å¦‚æœåˆšä½“éœ€è¦ç¼©æ”¾ï¼Œåˆ™éœ€è¦ä¸ºåˆšä½“æ·»åŠ æ­¤å±æ€§ï¼Œæ¥æ›´æ–°åˆšä½“å¤§å°ã€‚ 123456boxBody.updateMassProperties()let tween = new TimelineMax()tween.to(sphereBody.shapes[0], 2, &#123; radius: 0.2 // ç¼©æ”¾è‡³ 0.2&#125;) ç‚¹å‡»äº¤äº’åœ¨ 3D çš„ä¸–ç•Œä¸­ä¸èƒ½åƒæˆ‘ä»¬åœ¨ DOM ä¸­ä¸ºä¸€ä¸ªèŠ‚ç‚¹ç»‘å®šç‚¹å‡»äº‹ä»¶é‚£ä¹ˆå®¹æ˜“ï¼Œåœ¨ Three.js ä¸­æä¾›äº† THREE.Raycaster æ–¹æ³•å¤„ç†ç‚¹å‡»äº¤äº’ï¼Œä½¿ç”¨é¼ æ ‡æˆ–è€…æ‰‹æŒ‡ç‚¹å‡»å±å¹•æ—¶ï¼Œä¼šå°†äºŒç»´åæ ‡è¿›è¡Œè½¬æ¢ï¼Œå‘å°„ä¸€æ¡å°„çº¿åˆ¤æ–­ä¸å“ªä¸ªç‰©ä½“å‘ç”Ÿäº†ç¢°æ’ï¼Œç”±æ­¤å¾—çŸ¥ç‚¹å‡»äº†å“ªä¸ªç‰©ä½“ã€‚ç‚¹å‡»è¿™é‡Œå®˜æ–¹ä¾‹å­ 12345678910111213141516let raycaster = new THREE.Raycaster()let mouse = new THREE.Vector2()function onTouchEnd(ev) &#123; // ç‚¹å‡»è·å–å±å¹•åæ ‡ var event = ev.changedTouches[0] mouse.x = (event.clientX / window.innerWidth) * 2 - 1 mouse.y = -(event.clientY / window.innerHeight) * 2 + 1 raycaster.setFromCamera(mouse, camera) let intersects = raycaster.intersectObjects(scene, true) for (let i = 0; i &lt; intersects.length; i++) &#123; console.log(intersects[i]) // ä¸å°„çº¿å‘ç”Ÿç¢°æ’çš„ç‰©ä½“ &#125;&#125; æ€§èƒ½æ–¹é¢æ¨¡å‹ç²¾ç»†ç¨‹åº¦åœ¨ Web ç«¯ç”±äºæ€§èƒ½çš„é™åˆ¶ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­è¦å°½é‡é¿å…åšä¸€äº›æŸè€—æ€§èƒ½è¾ƒå¤§çš„äº‹æƒ…ã€‚ é¦–å…ˆæ˜¯æ¨¡å‹çš„ç²¾ç»†ç¨‹åº¦ï¼Œåœ¨ä¿è¯æ•ˆæœçš„å‰æä¸‹ï¼Œå°½é‡é™ä½æ¨¡å‹é¢çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯è¯´é‡‡ç”¨ä½æ¨¡æ¨¡å‹ï¼Œä¸€äº›æ¨¡å‹çš„å‡¹å‡¸è¤¶çš±æ„Ÿä¹Ÿå¯ä»¥é€šè¿‡å‡¹å‡¸è´´å›¾çš„æ–¹å¼å»å®ç°ï¼Œè¶Šæ˜¯å¤æ‚çš„æ¨¡å‹åœ¨å®æ—¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­å°±è¶Šå ç”¨æ‰‹æœºæ€§èƒ½ã€‚ å…‰æºä¸é˜´å½±å¦å¤–ä¸€æ–¹é¢å…‰æºã€é˜´å½±ä¹Ÿæ˜¯å æ€§èƒ½ï¼Œå°¤å…¶æ˜¯é˜´å½±ã€‚å…‰æºä¸€èˆ¬ä¼šä½¿ç”¨å¹³è¡Œå…‰æˆ–è€…èšå…‰ç¯ï¼Œè¿™ç§å…‰æºç…§å°„åœ¨ç‰©ä½“ä¸Šæ›´ä¸ºçœŸå®ï¼Œä½¿ç”¨åŠçƒå…‰ä¼šç¨å¾®æå‡å¸§æ•°ï¼Œä½†æ•ˆæœç•¥å·®äº›ï¼Œé˜´å½±æ•ˆæœå‰é¢æåˆ°è¿‡è¦éå†æ¯ä¸€ä¸ªå­ Mesh æ¥æ”¶äº§ç”Ÿé˜´å½± castShadow å’Œæ¥æ”¶é˜´å½± receiveShadowï¼Œè¿™ç›¸å½“è€—è´¹æ€§èƒ½ï¼Œå¼€å¯åå¯¹é˜´å½±çš„ç²¾ç»†ç¨‹åº¦ä»¥åŠé˜´å½±ç±»å‹è¿›è¡Œå‚æ•°ä¼˜åŒ–ï¼Œåœ¨ Android ç³»ç»Ÿæ€§èƒ½ä¸å¤ªå¥½ï¼ŒiOS ç³»ç»ŸåŸºæœ¬èƒ½ä¿è¯æµç•…è¿è¡Œï¼Œæ‰€ä»¥å»ºè®®æ ¹æ®è®¾å¤‡ç³»ç»Ÿä¼˜åŒ–ã€‚ 12var n = navigator.userAgentif (/iPad|iPhone|iPod/.test(n) &amp;&amp; !window.MSStream) &#123; &#125; // é’ˆå¯¹ iOS ç³»ç»Ÿä½¿ç”¨é˜´å½± æŠ—é”¯é½¿ä¸åƒç´ æ¯”æŠ—é”¯é½¿æ˜¯è®©æ¨¡å‹çš„è¾¹ç¼˜æ•ˆæœæ›´åŠ åœ†æ»‘ä¸ç²—ç³™ï¼Œä¹Ÿä¼šå ç”¨ä¸€äº›æ€§èƒ½ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ï¼Œè§†æƒ…å†µå¼€å¯ã€‚ 1renderer.antialias = true // å¼€å¯æŠ—é”¯é½¿ å¦å¤–åƒç´ æ¯” setPixelRatioï¼Œç§»åŠ¨ç«¯ç”±äº Retina å±çš„ç¼˜æ•…ï¼Œä¸€èˆ¬ä¼šè®¾ç½®ä¸º 2ï¼Œæ‰€ä»¥ä½¿ç”¨ window.devicePixelRatio è·å–å®é™…è®¾å¤‡åƒç´ æ¯”åŠ¨æ€è®¾ç½®çš„è¯ï¼Œéƒ¨åˆ†å¤§å±æ‰‹æœºçš„åƒç´ æ¯”æœ‰ 3 çš„æƒ…å†µï¼Œæ‰€æœ‰ä¼šå› ä¸ºåƒç´ æ¯”è¿‡é«˜é€ æˆæ€§èƒ½é—®é¢˜ã€‚ 12renderer.setPixelRatio(2) // æ¨èrenderer.setPixelRatio(window.devicePixelRatio) // ä¸æ¨è å·¥å…·æ¨èæœ€åæ¨èä¸€äº›åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¸¸ç”¨çš„å·¥å…·ï¼š OrbitControls è½¨é“æ§åˆ¶å™¨OrbitControls æ˜¯ç”¨äºè°ƒè¯• Camera çš„æ–¹æ³•ï¼Œå®ä¾‹åŒ–åå¯ä»¥é€šè¿‡é¼ æ ‡æ‹–æ‹½æ¥æ—‹è½¬ Camera é•œå¤´çš„è§’åº¦ï¼Œé¼ æ ‡æ»šè½®å¯ä»¥æ§åˆ¶ Camera é•œå¤´çš„è¿œè¿‘è·ç¦»ï¼Œæ—‹è½¬å’Œè¿œè¿‘éƒ½ä¼šåŸºäºåœºæ™¯çš„ä¸­å¿ƒç‚¹ï¼Œåœ¨è°ƒè¯•é¢„è§ˆåˆ™ä¼šè½»æ¾è®¸å¤šã€‚ 1new THREE.OrbitControls(camera, renderer.domElement) glTF Viewer æ¨¡å‹å¿«é€Ÿé¢„è§ˆå·¥å…·åœ¨è®¾è®¡å¸ˆå»ºæ¨¡å®Œæˆå¯¼å‡ºåï¼Œè®¾è®¡å¸ˆå¹¶ä¸çŸ¥é“åœ¨ Three.js æœ€ç»ˆä¼šå‘ˆç°ä¸€ä¸ªä»€ä¹ˆæ•ˆæœæˆ–è€…å¼€å‘è€…ä¹Ÿæƒ³å¿«é€Ÿçš„æŸ¥çœ‹æ¨¡å‹æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼ŒglTF å®˜æ–¹è´´å¿ƒçš„æä¾›äº†ä¸€æ¬¾å¿«é€Ÿé¢„è§ˆçš„å·¥å…·ï¼Œæä¾›äº†ä¸¤ä¸ªç‰ˆæœ¬ï¼šWeb ç‰ˆæœ¬å’Œ Desktop ç‰ˆæœ¬ã€‚ å°† .gltfã€.binã€.jpg/.png æ–‡ä»¶æ‹–æ‹½åˆ°å·¥å…·ä¸­ï¼Œå¯ä»¥è°ƒè¯•é¢„è§ˆåˆ°æ¨¡å‹çš„åŠ¨ç”»ã€å˜å½¢ç›®æ ‡ã€èƒŒæ™¯ã€çº¿æ¡†æ¨¡å¼ã€è‡ªåŠ¨æ—‹è½¬ã€å…‰æºç­‰åŠŸèƒ½ã€‚ Helper ç›¸å…³è°ƒè¯•æ¨¡å¼Camera Helper æ‘„åƒæœºè°ƒè¯•æ¨¡å¼å¼€å¯ Camera Helper è°ƒè¯•æ¨¡å¼åï¼Œå¯ä»¥ç›´è§‚çš„çœ‹åˆ° Camera çš„ Fovã€ Neraã€Far çš„å‚æ•°æ•ˆæœã€‚ 1234let camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000)let helper = new THREE.CameraHelper(camera)scene.add(helper) Light Helper å…‰æºè°ƒè¯•æ¨¡å¼èšå…‰ç¯å¼€å¯ Light Helper è°ƒè¯•æ¨¡å¼åï¼Œå¯ä»¥ç›´è§‚çš„çœ‹åˆ° distanceã€angle çš„å‚æ•°æ•ˆæœã€‚ 1234let light = new THREE.DirectionalLight(0xffffff)let helper = new THREE.DirectionalLightHelper(0xffffff)scene.add(helper) AxesHelper åæ ‡è½´è°ƒè¯•æ¨¡å¼AxesHelper æ˜¯åœ¨åœºæ™¯çš„ä¸­å¿ƒç‚¹ï¼Œæ·»åŠ ä¸€ä¸ªåæ ‡è½´ï¼ˆçº¢è‰²ï¼šX è½´ã€ç»¿è‰²ï¼šY è½´ã€è“è‰²ï¼šZ è½´ï¼‰ï¼Œæ–¹ä¾¿è¾¨åˆ«æ–¹å‘ã€‚ 12let axesHelper = new THREE.AxesHelper(10)scene.add(axesHelper) Cannon.js 3D ç‰©ç†å¼•æ“è°ƒè¯•æ¨¡å¼Cannon.js 3D ç‰©ç†å¼•æ“æä¾›çš„è°ƒè¯•æ¨¡å¼éœ€å¼•å…¥ Debug renderer for Three.jsï¼Œå¯ä»¥å°†åˆ›å»ºçš„ç‰©ç†ç›’å­ã€çƒã€å¹³é¢ç­‰æ˜¾ç¤ºçº¿æ¡†ï¼Œä¾¿äºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å®æ—¶æŸ¥çœ‹æ•ˆæœã€‚ 123456let cannonDebugRenderer = new THREE.CannonDebugRenderer(scene, world)function render() &#123; requestAnimationFrame(render) cannonDebugRenderer.update() // Update the debug renderer&#125; dat.GUI å›¾å½¢ç”¨æˆ·ç•Œé¢è°ƒè¯•å·¥å…·åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦å¯¹å‚æ•°å˜é‡è¿›è¡Œå¾®è°ƒï¼Œé’ˆå¯¹è¿™ä¸ª Three.js æä¾›äº† dat.GUIï¼Œdat.GUI æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å›¾å½¢ç”¨æˆ·ç•Œé¢è°ƒè¯•å·¥å…·ï¼Œä½¿ç”¨ååœ¨å³ä¸Šè§’ä¼šå‡ºç°ä¸€ä¸ª GUI å¯è§†åŒ–å‚æ•°é…ç½®åŒºåŸŸï¼Œé€šè¿‡ä¿®æ”¹æ•°å€¼æ¥å®æ—¶æŸ¥çœ‹ç»“æœã€‚ 123456789101112131415161718let opts = &#123; x: 0, y: 0, scale: 1&#125;let gui = new dat.GUI()gui.add(opts, 'x', -3, 3)gui.add(opts, 'y', -3, 3)gui.add(opts, 'scale', 1, 3)function loop() &#123; cube.position.x = opt.x cube.position.y = opt.y cube.scale.set(opts.scale, opts.scale, opts.scale) requestAnimationFrame()&#125; Stats è°ƒè¯•å·¥å…·Stats å·¥å…·å¯ä»¥å®æ—¶æŸ¥çœ‹ï¼š FPSï¼šæœ€åä¸€ç§’çš„å¸§æ•°ï¼Œè¶Šå¤§è¶Šæµç•… MSï¼šæ¸²æŸ“ä¸€å¸§éœ€è¦çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œè¶Šä½è¶Šå¥½ MBï¼šå ç”¨çš„å†…å­˜ä¿¡æ¯ CUSTOMï¼šè‡ªå®šä¹‰é¢æ¿ 123456789var stats = new Stats()stats.showPanel(1)document.body.appendChild(stats.dom)function animate() &#123; requestAnimationFrame(animate)&#125;requestAnimationFrame(animate) å°¾å·´æœ€åï¼Œå¸Œæœ›æœ¬ç¯‡æ–‡ç« æ‰€è®²åˆ°çš„å†…å®¹èƒ½å¸®åŠ©ä½ æ›´å¥½çš„å¼€å‘ 3D é¡¹ç›®ã€‚å¦å¤–ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ€è·¯ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™è¨€ï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚ å‚è€ƒ ã€ŠLearning Three.jsã€‹ threejs babylonjs glTF 2.0 README Cannon.js Debug renderer for Three.js three-gltf-viewer stats.js","pubDate":"Thu, 18 Oct 2018 01:20:00 GMT","guid":"https://aotu.io/notes/2018/10/18/cannonjs/","category":"H5æ¸¸æˆå¼€å‘"},{"title":"å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ Taro 1.0 æ­£å¼å‘å¸ƒ","link":"https://aotu.io/notes/2018/09/18/taro-1-0-0/","description":"åœ¨ 2018.6.7 æˆ‘ä»¬å¯¹å¤–å¼€æºäº† å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶â€”â€”Taroã€‚ Taro æ˜¯ä¸€ä¸ªå¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œå®ƒæ”¯æŒä½¿ç”¨ React çš„å¼€å‘æ–¹å¼æ¥ç¼–å†™å¯ä»¥åŒæ—¶åœ¨å¾®ä¿¡å°ç¨‹åºã€Web ã€React Native ç­‰å¤šä¸ªå¹³å°ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å¼€å‘æ•ˆç‡ï¼Œæ”¹å–„å¼€å‘ä½“éªŒï¼Œé™ä½å¤šç«¯ç ”å‘æˆæœ¬ã€‚ è‡ªå¼€æºä»¥æ¥ï¼ŒTaro ä¸€ç›´å¹¿å—ä¸šç•Œå…³æ³¨ï¼Œå…¶åŸç†ä¸æ€æƒ³ä¹Ÿå¾—åˆ°äº†å¹¿æ³›å¼€å‘è€…çš„è®¤å¯ï¼Œè¿™å¯¹äºæˆ‘ä»¬æ¥è¯´æ— ç–‘æ˜¯ä¸€ä»¶ä»¤äººæŒ¯å¥‹çš„äº‹ã€‚ä½†æ˜¯ç”±äºåˆæœŸ Taro æµ‹è¯•ä¸å®ç°æ–¹å¼çš„ä¸è¶³ï¼Œå¯¼è‡´åœ¨å¼€æºæœŸé—´ Bug è¾ƒå¤šï¼Œå—åˆ°äº†ä¸€äº›è´¨ç–‘ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç—›å®šæ€ç—›ï¼Œç§¯ææ¥å—äº†å¼€æºç¤¾åŒºçš„æ„è§ä¸å¸®åŠ©ï¼Œå¹¶åŠªåŠ›æ¢ç´¢æå‡ Taro ç¨³å®šæ€§ä¸æ€§èƒ½çš„æ–¹å¼ã€‚ç»è¿‡ä¸æ–­åœ°è¿­ä»£å®Œå–„ï¼Œå·²ç»è®© Taro æµ´ç«é‡ç”Ÿã€‚ 1.0.0 çœŸçš„æ¥äº†Taro å¼€æºåˆ°ç°åœ¨ 3 ä¸ªæœˆæ—¶é—´ï¼Œç´¯è®¡å‘å¸ƒ 70 ä½™æ—¥å¸¸ç‰ˆæœ¬åŠ 20 ä½™ Taro 1.0.0 çš„ beta ç‰ˆæœ¬ï¼Œç»è¿‡è¿‘ç™¾ä¸ªç‰ˆæœ¬çš„è¿­ä»£ä¼˜åŒ–ï¼Œæˆ‘ä»¬äº²èº«ä½“ä¼šåˆ° Taro çš„ BUG åé¦ˆè¶Šæ¥è¶Šå°‘ï¼ŒTaro è¶Šæ¥è¶Šå¥å£®ä¸”å®Œå–„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¿¡å¿ƒæ¨å‡º 1.0.0 æ­£å¼ç‰ˆã€‚ Taro 1.0.0 æ­£å¼ç‰ˆåœ¨å»¶ç»­äº†ä¹‹å‰ç‰ˆæœ¬ä¼˜ç§€ç‰¹æ€§çš„åŒæ—¶ï¼Œå¢åŠ äº†æ›´åŠ ä¸°å¯Œçš„ç‰¹æ€§ä¸åŠŸèƒ½ï¼Œå¹¶è¿›è¡Œäº†å¤šé¡¹å°ç¨‹åºç«¯/H5ç«¯çš„è½¬æ¢ä¼˜åŒ–ï¼ŒåŒæ—¶å¸¦æ¥äº†å¯¹ React Native çš„è½¬æ¢æ”¯æŒã€‚ å…¨æ–°çš„å°ç¨‹åºç»„ä»¶åŒ–å¼€æºä¹‹åˆï¼Œç”±äºç§ç§åŸå› ï¼ŒTaro çš„å¾®ä¿¡å°ç¨‹åºç«¯ç»„ä»¶åŒ–é‡‡ç”¨çš„æ˜¯å°ç¨‹åº &lt;template /&gt; æ ‡ç­¾æ¥å®ç°çš„ï¼Œåˆ©ç”¨å°ç¨‹åº &lt;template /&gt; æ ‡ç­¾çš„ç‰¹æ€§ï¼Œå°†ç»„ä»¶ JS æ–‡ä»¶ç¼–è¯‘æˆ JS + WXML æ¨¡æ¿ï¼Œåœ¨çˆ¶ç»„ä»¶ï¼ˆé¡µé¢ï¼‰çš„æ¨¡æ¿ä¸­é€šè¿‡ &lt;template /&gt; æ ‡ç­¾å¼•ç”¨å­ç»„ä»¶çš„ WXML æ¨¡æ¿æ¥è¿›è¡Œæ‹¼æ¥ï¼Œä»è€Œè¾¾åˆ°ç»„ä»¶åŒ–çš„ç›®çš„ã€‚ å®è·µè¯æ˜ï¼ŒTemplate æ¨¡æ¿æ–¹æ¡ˆæ˜¯ä¸€ä¸ªå¤±è´¥çš„ç»„ä»¶åŒ–æ–¹æ¡ˆï¼ŒTaro å¼€æºåˆæœŸçš„ Bug ä¸»è¦æ¥æºäºæ­¤ã€‚å› ä¸ºè¿™ä¸€æ–¹æ¡ˆå°† JS é€»è¾‘ä¸æ¨¡æ¿æ‹†åˆ†å¼€äº†ï¼Œéœ€è¦æ‰‹å·¥æ¥ä¿è¯ JS ä¸æ¨¡æ¿ä¸­æ•°æ®ä¸€è‡´ï¼Œè¿™æ ·åœ¨å¾ªç¯ç»„ä»¶æ¸²æŸ“ã€ç»„ä»¶å¤šé‡åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œè¦ä¿è¯ç»„ä»¶æ­£ç¡®æ¸²æŸ“ä¸ props æ­£ç¡®ä¼ é€’çš„éš¾åº¦éå¸¸å¤§ï¼Œå®ç°çš„æˆæœ¬ä¹Ÿéå¸¸é«˜ã€‚è€Œä¸”ï¼Œå›¿äºå°ç¨‹åº &lt;template /&gt; æ ‡ç­¾çš„ç¼ºé™·ï¼Œä¸€äº›åŠŸèƒ½ï¼ˆä¾‹å¦‚è‡ªå®šä¹‰ç»„ä»¶åŒ…å«å­å…ƒç´ ï¼Œç­‰ï¼‰æ— æ³•å®ç°ã€‚ æ‰€ä»¥ï¼Œåœ¨ç»è¿‡è‰°è¾›çš„æ¢ç´¢ä¸å®è·µä¹‹åï¼Œæˆ‘ä»¬é‡‡ç”¨äº†å°ç¨‹åºåŸç”Ÿç»„ä»¶åŒ–æ¥ä½œä¸º Taro çš„å°ç¨‹åºç«¯ç»„ä»¶åŒ–æ–¹æ¡ˆï¼Œå¹¶ä¸”é€šè¿‡ä¸€äº›å¤„ç†ï¼Œç»•å¼€äº†å°ç¨‹åºç»„ä»¶åŒ–çš„è¯¸å¤šé™åˆ¶ï¼Œä¸º Taro çš„ç¨³å®šæ€§æ‰“ä¸‹äº†åšå®åŸºç¡€ï¼Œå¹¶å¸¦æ¥äº†ä»¥ä¸‹å¥½å¤„ï¼š å°ç¨‹åºç«¯ç»„ä»¶åŒ–æ›´åŠ å¥å£® å°½å¯èƒ½å‡å°‘ç”±äºæ¡†æ¶å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ ä¾æ‰˜å®˜æ–¹ç»„ä»¶åŒ–ï¼Œæ–¹ä¾¿ä»¥åè§£é”æ›´å¤šå¯èƒ½ å…¨é¢æ”¯æŒå°ç¨‹åºç”Ÿæ€ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©å¼€å‘è€…ä½¿ç”¨ Taro å¼€å‘å°ç¨‹åºï¼Œåœ¨ 1.0.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åŠ å¼ºäº†å¯¹å°ç¨‹åºç”Ÿæ€çš„æ”¯æŒï¼Œä¸»è¦æç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚ æ”¯æŒå¼•ç”¨å°ç¨‹åºç«¯ç¬¬ä¸‰æ–¹ç»„ä»¶åº“å—ç›Šäºå°ç¨‹åºç»„ä»¶åŒ–é‡æ„ï¼Œæˆ‘ä»¬åœ¨ Taro ä¸­æ”¯æŒäº†ç›´æ¥å¼•ç”¨å°ç¨‹åºç«¯ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œè®© Taro å¯ä»¥èå…¥åˆ°å°ç¨‹åºç”Ÿæ€ä¸­ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´å¤šä¾¿åˆ©ã€‚ ç›®å‰å®æµ‹å·²ç»æ”¯æŒäº†å¦‚ä¸‹çŸ¥åç¬¬ä¸‰æ–¹ç»„ä»¶åº“ echarts-for-weixinï¼ŒECharts çš„å¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬ iview-weappï¼Œiview çš„å¾®ä¿¡å°ç¨‹åºç‰ˆæœ¬ vant-weappï¼Œè½»é‡ã€å¯é çš„å°ç¨‹åº UI ç»„ä»¶åº“ wxParseï¼Œå¾®ä¿¡å°ç¨‹åºå¯Œæ–‡æœ¬è§£æè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ”¯æŒHTMLåŠmarkdownè§£æ å½“ç„¶ï¼ŒTaro ä¸ä»…ä»…åªæ”¯æŒä¸Šè¿°ç»„ä»¶åº“ï¼Œåªè¦æ˜¯æŒ‰åŸç”Ÿå°ç¨‹åºè§„èŒƒç¼–å†™çš„ç»„ä»¶åº“éƒ½èƒ½åœ¨ Taro ä¸­æ­£å¸¸ä½¿ç”¨ã€‚ æ”¯æŒ Taro ä»£ç ä¸åŸç”Ÿå°ç¨‹åºä»£ç æ··å†™ä¸æ­¤åŒæ—¶ï¼ŒTaro æ”¯æŒåŸç”Ÿå°ç¨‹åºä»£ç ä¸ Taro ä»£ç æ··å†™ï¼Œå› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ Taro æ„‰å¿«åœ°å°†æ—§çš„å°ç¨‹åºé¡¹ç›®æ…¢æ…¢åœ°æ”¹é€ æˆ Taro é¡¹ç›®äº†ã€‚ æ”¯æŒå°ç¨‹åºç«¯åˆ†åŒ…åŠ è½½ä»¥åŠæ’ä»¶å¼•ç”¨æˆ‘ä»¬åœ¨ Taro ä¸­ä¹ŸåŠ å…¥å¯¹åŸç”Ÿå°ç¨‹åºåˆ†åŒ…åŠ è½½åŠŸèƒ½çš„æ”¯æŒï¼Œé…ç½®çš„æ–¹å¼ä¸åŸç”Ÿå°ç¨‹åºåŸºæœ¬ä¸€è‡´ï¼Œåªéœ€è¦åœ¨ app.js å…¥å£æ–‡ä»¶ä¸­åŠ å…¥ subPackage å­—æ®µå³å¯ã€‚ 123456789101112131415161718import Taro, &#123; Component &#125; from '@tarojs/taro'class App extends Component &#123; config = &#123; pages: [ 'pages/index', 'pages/logs' ], subPackages: [ &#123; root: 'moduleA', pages: [ 'pages/rabbit', 'pages/squirrel' ] &#125; ] &#125;&#125; åŒæ—¶ï¼ŒTaro ä¹Ÿæ”¯æŒäº†ä½¿ç”¨å°ç¨‹åºçš„æ’ä»¶åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ Taro ä¸­ç›´æ¥å¼•ç”¨ç¬¬ä¸‰æ–¹çš„æ’ä»¶ 1234567891011121314151617import Taro, &#123; Component &#125; from '@tarojs/taro'import &#123; View &#125; from '@tarojs/Components'class PageA extends Component &#123; config = &#123; usingComponents: &#123; 'hello-component': 'plugin://myPlugin/hello-component' &#125; &#125; render () &#123; return ( &lt;View&gt; &lt;hello-component&gt;&lt;/hello-component&gt; &lt;/View&gt; ) &#125;&#125; å°ç¨‹åº setState æ€§èƒ½ä¼˜åŒ–åœ¨æœ€åˆçš„å¼€æºç‰ˆæœ¬ä¸­ï¼Œå°ç¨‹åºç«¯ setState ä»…ä»…æ˜¯å¯¹å°ç¨‹åº setData åšäº†ä¸€æ¬¡å¼‚æ­¥å°è£…ï¼Œæœ€ç»ˆè°ƒç”¨ setData æ›´æ–°çš„æ—¶å€™è¿˜æ˜¯ä¼ å…¥äº†å®Œæ•´æ•°æ®ã€‚ ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œå°ç¨‹åºçš„è§†å›¾å±‚ç›®å‰ä½¿ç”¨ WebView ä½œä¸ºæ¸²æŸ“è½½ä½“ï¼Œè€Œé€»è¾‘å±‚æ˜¯ç”±ç‹¬ç«‹çš„ JavascriptCore ä½œä¸ºè¿è¡Œç¯å¢ƒï¼Œåœ¨æ¶æ„ä¸Šï¼ŒWebView å’Œ JavascriptCore éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œå¹¶ä¸å…·å¤‡æ•°æ®ç›´æ¥å…±äº«çš„é€šé“ã€‚åœ¨è°ƒç”¨ setData ä¹‹åï¼Œä¼šå°†æ•°æ®ä½¿ç”¨ JSON.stringify è¿›è¡Œåºåˆ—åŒ–ï¼Œå†æ‹¼æ¥æˆè„šæœ¬ï¼Œç„¶åå†ä¼ ç»™è§†å›¾å±‚æ¸²æŸ“ï¼Œè¿™æ ·çš„è¯ï¼Œå½“æ•°æ®é‡éå¸¸å¤§çš„æ—¶å€™ï¼Œå°ç¨‹åºå°±ä¼šå˜å¾—å¼‚å¸¸å¡é¡¿ï¼Œæ€§èƒ½å¾ˆå·®ã€‚ Taro åœ¨æ¡†æ¶çº§åˆ«å¸®åŠ©å¼€å‘è€…è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåœ¨ setData ä¹‹å‰è¿›è¡Œäº†ä¸€æ¬¡æ•°æ® Diffï¼Œæ‰¾åˆ°æ•°æ®çš„æœ€å°æ›´æ–°è·¯å¾„ï¼Œç„¶åå†ä½¿ç”¨æ­¤è·¯å¾„æ¥è¿›è¡Œæ›´æ–°ã€‚ä¾‹å¦‚ 1234567891011121314151617181920// åˆå§‹ statethis.state = &#123; a: [0], b: &#123; x: &#123; y: 1 &#125; &#125;&#125;// è°ƒç”¨ this.setStatethis.setState(&#123; a: [1, 2], b: &#123; x: &#123; y: 10 &#125; &#125;&#125;) åœ¨ä¼˜åŒ–ä¹‹å‰ï¼Œä¼šç›´æ¥å°† this.setState çš„æ•°æ®ä¼ ç»™ setDataï¼Œå³ 12345678this.$scope.setData(&#123; a: [1, 2], b: &#123; x: &#123; y: 10 &#125; &#125;&#125;) è€Œåœ¨ä¼˜åŒ–ä¹‹åçš„æ•°æ®æ›´æ–°åˆ™å˜æˆäº† 12345this.$scope.setData(&#123; 'a[0]': 1, 'a[1]': 2, 'b.x.y': 10&#125;) è¿™æ ·çš„ä¼˜åŒ–å¯¹äºå°ç¨‹åºæ¥è¯´æ„ä¹‰éå¸¸é‡å¤§ï¼Œå¯ä»¥é¿å…å› ä¸ºæ•°æ®æ›´æ–°å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚ æ›´åŠ ä¸°å¯Œçš„ JSX è¯­æ³•æ”¯æŒå‰é¢å·²ç»æåˆ° Taro ä½¿ç”¨ React è¯­æ³•è§„èŒƒæ¥å¼€å‘å¤šç«¯åº”ç”¨ï¼Œè¿™æ ·å°±å¿…ç„¶æ˜¯é‡‡ç”¨ JSX æ¥ä½œä¸ºæ¨¡æ¿ï¼Œæ‰€ä»¥ Taro éœ€è¦å°† JSX ç¼–è¯‘æˆå„ä¸ªç«¯æ”¯æŒçš„æ¨¡æ¿ï¼Œå…¶ä¸­ä»¥å°ç¨‹åºç«¯æœ€ä¸ºå¤æ‚ï¼ŒTaro éœ€è¦å°† JSX ç¼–è¯‘æˆå°ç¨‹åºçš„ WXML æ¨¡æ¿ã€‚ åœ¨å¼€æºçš„è¿‡ç¨‹ä¸­ï¼ŒTaro æ”¯æŒçš„ JSX å†™æ³•ä¸€ç›´åœ¨ä¸æ–­å®Œå–„ï¼ŒåŠ›æ±‚è®©å¼€å‘ä½“éªŒæ›´åŠ æ¥è¿‘äº Reactï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹è¯­æ³•æ”¯æŒï¼š æ”¯æŒ Refï¼Œæä¾›äº†æ›´åŠ æ–¹ä¾¿çš„ç»„ä»¶å’Œå…ƒç´ å®šä½æ–¹å¼ æ”¯æŒ this.props.children å†™æ³•ï¼Œæ–¹ä¾¿è¿›è¡Œè‡ªå®šä¹‰ç»„ä»¶ä¼ å…¥å­å…ƒç´  åœ¨å¾ªç¯ä½“å†…æ‰§è¡Œå‡½æ•°å’Œè¡¨è¾¾å¼ å®šä¹‰ JSX ä½œä¸ºå˜é‡ä½¿ç”¨ æ”¯æŒå¤æ‚çš„ if-else è¯­å¥ åœ¨ JSX å±æ€§ä¸­ä½¿ç”¨å¤æ‚è¡¨è¾¾å¼ åœ¨ style å±æ€§ä¸­ä½¿ç”¨å¯¹è±¡ åªæœ‰ä½¿ç”¨åˆ°çš„å˜é‡æ‰ä¼šä½œä¸º state åŠ å…¥åˆ°å°ç¨‹åº dataï¼Œä»è€Œç²¾ç®€å°ç¨‹åºæ•°æ® ç›®å‰ï¼Œé™¤äº† Taro å®˜æ–¹ ESLint æ’ä»¶ eslint-plugin-taro ä¸­é™åˆ¶çš„è¯­æ³•ä¹‹å¤–ï¼Œå…¶ä»– JSX è¯­æ³•åŸºæœ¬éƒ½æ”¯æŒï¼Œè€Œåœ¨åŸç”Ÿç»„ä»¶åŒ–çš„å¸®åŠ©ä¸‹ï¼Œæœªæ¥å°†ä¼šæŠŠ ESLint çš„é™åˆ¶ä¹Ÿé€æ¡å–æ¶ˆã€‚ React Native ç«¯è½¬æ¢æ”¯æŒåœ¨ Taro 1.0.0 ä¸­ï¼Œæˆ‘ä»¬å°†æ­£å¼æ¨å‡º React Native ç«¯çš„è½¬æ¢æ”¯æŒï¼Œå¯ä»¥å°†ç°æœ‰ Taro é¡¹ç›®è½¬æ¢æˆ RN ç‰ˆæœ¬ï¼Œä½†éœ€è¦æ³¨æ„å¯¹æ ·å¼çš„å¤„ç†ï¼Œå› ä¸º RN æ”¯æŒçš„æ ·å¼éå¸¸æœ‰é™ï¼Œå®ƒæ˜¯å±äº CSS çš„å­é›†ï¼Œå…·ä½“è¯·ç§»æ­¥ RN ç«¯è½¬æ¢æ³¨æ„äº‹é¡¹ã€‚ Taro çš„ RN ç«¯åŸºäº Expo æ¥è¿›è¡Œç¼–è¯‘æ„å»º RN ç¨‹åºï¼Œå¼€å‘æ–¹å¼å’Œç¼–è¯‘å‘½ä»¤ä¸å…¶ä»–ç«¯ç±»ä¼¼ï¼Œä»£ç ç›®å½•ç»“æ„ä¸ç°æœ‰ Taro é¡¹ç›®ä¹ŸåŸºæœ¬ä¸€è‡´ RN ç¼–è¯‘é¢„è§ˆæ¨¡å¼ 123456# npm script$ npm run dev:rn# ä»…é™å…¨å±€å®‰è£…$ taro build --type rn --watch# npxç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type rn --watch æ‰§è¡Œå®Œå‘½ä»¤ä¹‹åï¼ŒTaro å°†ä¼šå¼€å§‹ç¼–è¯‘æ–‡ä»¶ï¼Œæœ€ç»ˆè·å¾— RN ç«¯çš„ç¼–è¯‘æŒ‡å¼•ï¼Œå¹¶ä¸”å¯åŠ¨ä½ çš„åº”ç”¨äº† React Native ç«¯å®Œæ•´å¼€å‘æµç¨‹è¯·ç§»æ­¥ React Native å¼€å‘æµç¨‹ä»‹ç»ã€‚ æ›´åŠ å¥å…¨çš„ TypeScript æ”¯æŒ éšç€å‰ç«¯é¡¹ç›®çš„å¤æ‚åº¦å’Œè§„æ¨¡çš„å¢åŠ ï¼Œè¿‘å¹´æ¥è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®å¼€å§‹ä½¿ç”¨ TypeScript è¿›è¡Œå¼€å‘ã€‚Taro ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸€è¶‹åŠ¿ï¼Œåœ¨å¼€æºä¹‹åˆå°±æä¾›äº†å¯¹ TypeScript çš„æ”¯æŒã€‚åœ¨ç¤¾åŒºçš„å¸®åŠ©ä¸‹ï¼ŒTaro å¯¹ TypeScript çš„æ”¯æŒä¹Ÿæ›´åŠ å¥å…¨å’Œå®Œå–„ï¼š @tarojs/cli å¯ä»¥ç›´æ¥åˆ›å»º TypeScript é¡¹ç›® @tarojs/components åŒ…å«äº†æ‰€æœ‰ç»„ä»¶çš„ç±»å‹å®šä¹‰ @tarojs/taro çš„æ‰€æœ‰ API ä¹Ÿéƒ½åŒ…å«äº†ç±»å‹å®šä¹‰ @tarojs/redux å’Œ taro-ui ä¹Ÿéƒ½å…¨éƒ¨å†…ç½®äº†ç±»å‹å®šä¹‰ æ„å»ºç³»ç»Ÿçš„ç¼–è¯‘å™¨ä» Babel åˆ‡æ¢åˆ°åŸç”Ÿ TypeScript ç¼–è¯‘å™¨ï¼Œæ”¯æŒæ‰€æœ‰ TypeScript è¯­æ³• H5 ç«¯è½¬æ¢ä¼˜åŒ–åŒæ—¶ï¼ŒTaro åœ¨ H5 ç«¯çš„è½¬æ¢ä¸­ï¼Œä¹Ÿè¿›è¡Œè¯¸å¤šè½¬æ¢ä¼˜åŒ–ï¼Œä¿®å¤äº†ä¹‹å‰ç‰ˆæœ¬ H5 ä¸‹è¯¸å¤š Bugï¼Œè®© H5 ç«¯è·¯ç”±ç³»ç»Ÿæ›´åŠ å¥å£®ï¼ŒåŒæ—¶å¼€æ”¾äº† Webpack é…ç½®ï¼Œå¯ä»¥è®©å¼€å‘è€…è‡ªç”±åœ°è¿›è¡Œç›¸å…³é…ç½®ã€‚ æœ€åï¼Œé™„ä¸Š Taro å®Œæ•´çš„ è¿­ä»£å†ç¨‹ã€‚ é‡ç”Ÿä¹‹è·¯æ­£å¦‚ä¸Šæ–‡æåˆ°ï¼ŒTaro 1.0.0 å¸¦æ¥è®¸å¤šæ–°çš„ä¼˜ç§€ç‰¹æ€§ï¼Œè€ŒåŒæ—¶ï¼Œåœ¨ç¤¾åŒºå†…çš„ Bug åé¦ˆå·²ç»æ„ˆæ¥æ„ˆå°‘ï¼Œè¿™ä¹Ÿæ˜¯å¼€æºæœŸé—´ä¸æ–­åŠªåŠ›æ‰“ç£¨çš„ç»“æœã€‚ ä» 6.7 åˆ°è¡Œæ–‡æˆªæ­¢ï¼ŒTaro ä¸€å…±ç»å†äº† 1800 ä½™æ¬¡æäº¤ï¼Œå¹³å‡æ¯å¤©è¿‘ 20 æ¬¡ï¼Œæœ€å¤šçš„ä¸€å¤©è¾¾ 30 æ¬¡ã€‚æ¯ä¸€æ¬¡æäº¤éƒ½æ˜¯è¿›æ­¥ï¼Œæ¯ä¸€æ¬¡æäº¤éƒ½è®© Taro æ›´åŠ å¼ºå¤§ã€‚ç»è¿‡è¿™ä¹ˆå¤šæ¬¡è¿­ä»£ä¹‹åï¼Œå·²ç»è®© Taro è·å¾—é‡ç”Ÿï¼Œå°¤å…¶æ˜¯å°ç¨‹åºç»„ä»¶åŒ–é‡æ„å®Œæˆä¹‹åï¼ŒTaro ä»æ—§ç‰ˆæ¶æ„çš„æ³¥æ½­ä¸­ä¸€è·ƒè€Œå‡ºï¼Œæˆä¸ºæ›´åŠ å¥å£®çš„å¼€å‘æ¡†æ¶ã€‚ åœ¨æˆ‘ä»¬è‡ªå·±ä¸æ–­åæ€ã€ä¼˜åŒ–çš„åŒæ—¶ï¼Œä¹Ÿç§¯æèå…¥å¼€æºç¤¾åŒºï¼Œä¾æ‰˜ç¤¾åŒºçš„åŠ›é‡å»å»ºè®¾ Taroã€‚ GitHub ISSUES æ˜¯æ£€éªŒä¸€ä¸ªå¼€æºé¡¹ç›®é è°±ç¨‹åº¦çš„æ ‡å‡†ä¹‹ä¸€ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€å…±æ”¶åˆ°äº† 500 ä½™ä¸ª ISSUESï¼Œå·²å…³é—­è¿‘ 400 ä¸ªï¼Œå…³é—­ç‡åœ¨ 80% å·¦å³ï¼Œæœªå…³é—­çš„ä¹Ÿå¤§éƒ¨åˆ†æ˜¯ä¸€äº›åŠŸèƒ½çš„è¿­ä»£éœ€æ±‚ã€‚åœ¨ Taro å¼€å‘å›¢é˜Ÿå†…éƒ¨æ›´æ˜¯è¦æ±‚æ¯ä¸€ä¸ª ISSUE çš„å“åº”æ—¶é—´ä¸èƒ½è¶…è¿‡ 24 å°æ—¶ã€‚æ­£æ˜¯å› ä¸ºè¿™äº› ISSUES ï¼Œè®©æˆ‘ä»¬ä¸æ–­æ„è¯†åˆ° Taro çš„ä¸è¶³ï¼Œè®©æˆ‘ä»¬çŸ¥é“å¦‚ä½•å»è¿›è¡Œè¿­ä»£ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸€ç›´é¼“åŠ±ç¤¾åŒºçš„å¼€å‘è€…ç§¯ææ PRï¼Œä¸€ä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®éœ€è¦ä¾é æ•´ä¸ªç¤¾åŒºçš„åŠ›é‡æ‰èƒ½å®Œå–„èµ·æ¥ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€å…±æ”¶åˆ°äº† 120 ä½™ä¸ª PRï¼Œå·²å‡ è¿‘å…¨éƒ¨åˆå…¥ï¼Œè¿™äº› PR ä¸º Taro æ³¨å…¥äº†è®¸å¤šæ–°é²œè¡€æ¶²ï¼Œè®© Taro æ›´åŠ å¥å£®ï¼Œæˆ‘ä»¬ä¹ŸæœŸæœ›èƒ½æœ‰æ›´å¤šçš„å¼€å‘è€…å¯ä»¥åŠ å…¥è¿›æ¥ï¼Œä¸€èµ·æ¥è®© Taro æ›´åŠ ç¾å¥½ã€‚ åœ¨ GitHub ä¸Šäº¤æµä¹‹ä½™ï¼Œæˆ‘ä»¬ä¹Ÿä¸ºå¼€å‘è€…ä»¬å¼€é€šäº†å®˜æ–¹å¾®ä¿¡ç¾¤ä¾›å¤§å®¶ä¸€èµ·è®¨è®º Taro ä¸æŠ€æœ¯ï¼Œç›®å‰å·²æœ‰è¶…è¿‡ 1700 ä½å¼€å‘è€…åœ¨å…³æ³¨ã€ä½¿ç”¨ Taro ï¼ŒæœŸå¾…æ›´å¤šå¼€å‘è€…çš„åŠ å…¥ã€‚ å¼€å‘è€…ç”Ÿæ€å®Œå–„åœ¨å¼€æºä¹‹åˆï¼ŒTaro ä¸€ç›´å¤„äºå°é—­çš„çŠ¶æ€ï¼Œæ²¡æœ‰é€‚é…çš„ UI åº“ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œè€Œè¿™äº›å¯¹å¼€å‘æ•ˆç‡çš„æ¡æ¢éå¸¸ä¸¥é‡ï¼Œç¤¾åŒºå†…å¯¹æ­¤åé¦ˆè¾ƒå¤šã€‚ æ‰€ä»¥ï¼Œåœ¨ 1.0.0-beta ç‰ˆæœ¬å¼€å‘æœŸé—´ï¼ŒTaro å›¢é˜Ÿå¼€å‘äº†å¤šç«¯ UI åº“æ‰“åŒ…åŠŸèƒ½ï¼Œæä¾›äº† taro build --ui å‘½ä»¤æ¥å°†æŒ‰ç…§ä¸€å®šè§„åˆ™ç»„ç»‡çš„ä»£ç æ‰“åŒ…æˆå¯ä»¥åœ¨ Taro ä¸­ä½¿ç”¨çš„å¤šç«¯ UI åº“ã€‚ å¹¶ä¸”ï¼ŒåŸºäºè¿™ä¸€åŠŸèƒ½ï¼Œæˆ‘ä»¬æ¨å‡ºäº†é¦–ä¸ªå¯ä»¥è·¨å¤šç«¯ä½¿ç”¨çš„å¤šç«¯ UI åº“ Taro UIï¼Œç›®å‰å·²ç»æ”¯æŒäº†å¾®ä¿¡å°ç¨‹åºä¸ H5 ç«¯ï¼Œä¸ä¹…ä¹‹åå°†å®Œæˆ React Native ç«¯çš„é€‚é…ï¼Œå¯ä»¥åŒæ­¥æä¾›ç»™ React Native ç«¯ä½¿ç”¨ã€‚ ç›®å‰ï¼Œå¤šç«¯ UI åº“æ‰“åŒ…åŠŸèƒ½è¿˜å¤„äºå†…æµ‹é˜¶æ®µï¼Œåœ¨ Taro 1.0.0 å‘å¸ƒä¹‹åï¼Œè¿™ä¸€åŠŸèƒ½å°†åŒæ­¥å‘å¸ƒï¼Œè¿™æ ·æ›´å¤šå¼€å‘è€…å°±å¯ä»¥ä¸º Taro å¼€å‘æ›´ä¸°å¯Œçš„å¤šç«¯ç»„ä»¶åº“å’Œ UI åº“äº†ã€‚ æœªæ¥è§„åˆ’Taro å°†ä¼šç»§ç»­ä¿æŒè¿­ä»£ï¼Œç›®å‰å·²ç»è§„åˆ’äº†å¦‚ä¸‹é‡è¦åŠŸèƒ½ã€‚ ä¾¿æ·æµ‹è¯•åœ¨ç¼–è¯‘æ—¶ä¸è¿è¡Œæ—¶æä¾›ä»£ç è¯Šæ–­çš„åŠŸèƒ½ï¼Œåˆ†æä»£ç ä¼˜åŠ£ï¼Œåˆ¤å®šä»£ç å†™æ³•æ˜¯å¦è§„èŒƒï¼Œä»¥ä¾¿å¸®åŠ©å¼€å‘è€…è§„é¿ä¸€äº›ç”±äºå†™æ³•å¸¦æ¥çš„é—®é¢˜ã€‚ åŒæ—¶å°†æä¾›ä¸€å¥—æµ‹è¯•æ–¹æ¡ˆï¼Œæ–¹ä¾¿å¼€å‘è€…ä¹¦å†™å¹¶è¿è¡Œç»„ä»¶æµ‹è¯•ç”¨ä¾‹ï¼Œæå‡ä»£ç è´¨é‡ã€‚ å¤šç«¯åŒæ­¥è°ƒè¯•ç›®å‰ Taro åªèƒ½ä¸€æ¬¡è°ƒè¯•ä¸€ä¸ªç«¯ï¼Œè¿™å¯¹äºå¼€å‘å¤šç«¯åº”ç”¨æ¥è¯´æ•ˆç‡ç•¥ä½ï¼Œæ‰€ä»¥ï¼Œè®¡åˆ’æä¾›å¾®ä¿¡å°ç¨‹åº/ H5 / React Native ç«¯åŒæ—¶è°ƒè¯•çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®å¯åŠ¨å¤šç«¯åŒæ—¶ç¼–è¯‘ï¼Œä»è€Œè·å¾—å¤šç«¯åŒæ­¥é¢„è§ˆã€‚ å¾®ä¿¡å°ç¨‹åº/H5 ä»£ç è½¬ Taro ä»£ç ç›®å‰å·²æ”¯æŒ Taro ä»£ç åˆ°å°ç¨‹åºä»£ç ã€ H5 ä»£ç çš„è½¬æ¢ï¼Œåœ¨æœªæ¥ï¼Œå°†æä¾›é€†å‘è½¬æ¢åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…å°†åŸæœ¬å°±å­˜åœ¨çš„å°ç¨‹åº/H5 é¡¹ç›®ç›´æ¥è½¬æ¢æˆ Taro é¡¹ç›®ï¼Œä»è€Œè®©åŸæœ¬åªèƒ½è¿è¡Œåœ¨ä¸€ç«¯çš„é¡¹ç›®è·å¾—å¤šç«¯è¿è¡Œçš„èƒ½åŠ›ï¼Œé™ä½å¼€å‘è€…çš„é‡æ„æˆæœ¬ã€‚ ä¸ React æ–°ç‰¹æ€§ä¿æŒåŒæ­¥Taro æ˜¯éµå¾ª React è¯­æ³•è§„èŒƒçš„ï¼Œä½†æ˜¯ React ä¸€ç›´åœ¨è¿­ä»£åœ¨å˜åŒ–ï¼ŒTaro ä½œä¸º React çš„è¿½éšè€…ä¹Ÿå°†ä¼šä¿æŒä¸ React æ–°ç‰¹æ€§åŒæ­¥ï¼Œè®© Taro æœ€å¤§ç¨‹åº¦æ¥è¿‘ React å¼€å‘ä½“éªŒã€‚ å¿«åº”ç”¨ç«¯æ”¯æŒç›®å‰ Taro å·²ç»å®Œæˆäº†å¿«åº”ç”¨ç«¯ç»„ä»¶åº“ä¸ API çš„é€‚é…ï¼Œå¿«åº”ç”¨ç«¯çš„æ–‡ä»¶è½¬æ¢ä¸æ¨¡æ¿è½¬æ¢ä¹Ÿæ­£åœ¨å¼€å‘ä¸­ï¼Œä¸ä¹…çš„å°†æ¥å°±ä¼šå‘å¸ƒæ”¯æŒå¿«åº”ç”¨ç«¯è½¬æ¢çš„ç‰ˆæœ¬ã€‚ æ”¯ä»˜å®å°ç¨‹åºä¸ç™¾åº¦æ™ºèƒ½å°ç¨‹åºæ”¯æŒå·²é¢„ç ”æ”¯ä»˜å®å°ç¨‹åºä¸ç™¾åº¦æ™ºèƒ½å°ç¨‹åºè½¬æ¢çš„å¯è¡Œæ€§ï¼Œå³å°†è¿›å…¥å¼€å‘ã€‚ å¤šç«¯å¯è§†åŒ–æ‹–æ‹½æ­å»ºç›®å‰ Taro æ˜¯ä¾é å¼€å‘è€…æ‰‹å·¥ç¼–å†™ä»£ç æ¥è·å¾—å¤šç«¯åº”ç”¨çš„ï¼ŒTaro æœªæ¥è®¡åˆ’æä¾›ä¸€ä¸ªå¤šç«¯å¯è§†åŒ–æ‹–æ‹½æ­å»ºçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡æ‹–æ‹½ç»„ä»¶çš„æ–¹å¼æ¥ç”Ÿæˆå¤šç«¯åº”ç”¨ã€‚ åŒæ—¶ï¼ŒTaro å°†è”åˆå„å¤§å…¬å¸å°ç¨‹åºå¼€å‘å›¢é˜Ÿï¼Œæ¨å‡ºä¸°å¯Œçš„è¡Œä¸šæ¨¡æ¿ï¼Œä¸ºå„è¡Œä¸šåº”ç”¨å¯è§†åŒ–æ­å»ºæä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚ ä½¿ç”¨æ¡ˆä¾‹åœ¨å¼€æºæœŸé—´ï¼Œéšç€ Taro çš„é€æ­¥å®Œå–„ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…åŠ å…¥åˆ° Taro çš„ä½¿ç”¨ã€å¼€å‘ä¸­ï¼Œäº§ç”Ÿäº†æ›´å¤šæ›´ä¼˜ç§€çš„ä½¿ç”¨æ¡ˆä¾‹ã€‚ ç‰¹åˆ«é¸£è°¢Taro çš„å‘å±•ç¦»ä¸å¼€å¹¿å¤§å¼€æºçˆ±å¥½è€…çš„å¸®åŠ©ï¼Œåœ¨æ­¤ç‰¹åˆ«é¸£è°¢å¹¿å¤§ Taro çš„ä½¿ç”¨è€…ä»¥åŠ Taro ä¸»è¦è´¡çŒ®è€…ï¼ˆæ’åä¸åˆ†å…ˆåï¼‰ã€‚ aijiacy AlexStacker AsukaSong atzcl Boshen Bless-L beidan Chen-jj cuitianze dogbutcat finian frontlich guotie icodytan JerrySir js-newbee jas0ncn jinjinjin0731 kdong007 kenberkeley Lizhooh Littly lolipop99 lijinke666 looch ladjzero limichange leeenx luckyadam ly525 Manjiz mclockw Mr-Prune missmimia mushan0x0 Pines-Cheng rojer95 ronffy Songkeys Simbachen smoothdvd soulhat thewei wowlusitong xunge0613 YikaJ yuche zaaack zacksleo ZodiacSyndicate zuoge85 zuorichongxian","pubDate":"Tue, 18 Sep 2018 08:00:00 GMT","guid":"https://aotu.io/notes/2018/09/18/taro-1-0-0/","category":"å°ç¨‹åº"},{"title":"Taro åœ¨äº¬ä¸œè´­ç‰©å°ç¨‹åºä¸Šçš„å®è·µ","link":"https://aotu.io/notes/2018/09/11/taro-in-jd/","description":"Taro ç®€ä»‹Taro æ˜¯ä¸€ä¸ªåŸºäº React è¯­æ³•è§„èŒƒçš„å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡ taro.aotu.io è¿›ä¸€æ­¥äº†è§£ã€‚è€Œå‰æ®µæ—¶é—´ Taro å‘å¸ƒåï¼Œäº¬ä¸œè´­ç‰©å°ç¨‹åºå°±å¼€å§‹äº†éƒ¨åˆ†é¡µé¢åŸºäº Taro çš„é‡æ„å·¥ä½œï¼Œæœ¬æ–‡ä¾¿æ˜¯å¯¹å•†å“åˆ†ç±»é¡µä½¿ç”¨ Taro è¿›è¡Œä»£ç é‡æ„çš„ä¸€äº›å®è·µåˆ†äº«ã€‚ æ··åˆå¼€å‘æ¨¡å¼è¿‡å»çš„äº¬ä¸œè´­ç‰©å°ç¨‹åºæœªä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œè€Œæ˜¯åœ¨åŸç”Ÿå°ç¨‹åºæ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†é¡µé¢/ç»„ä»¶åŸºç±»ã€ç½‘ç»œè¯·æ±‚ã€æœ¬åœ°å­˜å‚¨ã€é¡µé¢è·³è½¬ç­‰æ¨¡å—çš„å°è£…ã€‚ç”±äºé¡¹ç›®åºå¤§ï¼ˆæ¶‰åŠ 100 å¤šä¸ªé¡µé¢ï¼‰ï¼ŒæŠŠæ•´ä¸ªé¡¹ç›®ç›´æ¥æ”¹é€ æˆ Taro çš„å¼€å‘æ–¹å¼è‚¯å®šæ˜¯ä¸å¯è¡Œçš„ï¼Œäºæ˜¯é‡‡ç”¨è¿™ä¹ˆä¸€ç§åŸç”Ÿå°ç¨‹åºä¸ Taro ç›¸æ··åˆçš„å¼€å‘æ¨¡å¼ï¼Œå°†éƒ¨åˆ†æ—§é¡µé¢ä½¿ç”¨ Taro é‡æ„ï¼Œéƒ¨åˆ†æ–°çš„é¡µé¢åˆ™ç›´æ¥ä½¿ç”¨ Taro è¿›è¡Œå¼€å‘ã€‚è¿™é‡Œä»¥å•†å“åˆ†ç±»é¡µä¸ºä¾‹ï¼Œå…ˆæ¥çœ‹ä¸‹åŸäº¬ä¸œè´­ç‰©å°ç¨‹åºé¡¹ç›®çš„ç›®å½•ç»“æ„ï¼š 1234567891011121314151617181920â”œâ”€â”€ distâ”‚ â”œâ”€â”€ app.jsâ”‚ â”œâ”€â”€ app.jsonâ”‚ â”œâ”€â”€ app.wxssâ”‚ â”œâ”€â”€ assets/â”‚ â”œâ”€â”€ common/â”‚ â”œâ”€â”€ libs/â”‚ â””â”€â”€ pagesâ”‚ â”œâ”€â”€ cateâ”‚ â”‚ â”œâ”€â”€ components/â”‚ â”‚ â”œâ”€â”€ index.jsâ”‚ â”‚ â”œâ”€â”€ index.jsonâ”‚ â”‚ â”œâ”€â”€ index.wxmlâ”‚ â”‚ â””â”€â”€ index.wxssâ”‚ â””â”€â”€ index/â”œâ”€â”€ src/â”œâ”€â”€ README.mdâ”œâ”€â”€ gulpfile.jsâ”œâ”€â”€ package.jsonâ””â”€â”€ node_modules/ 1. åˆå§‹åŒ– Taroåœ¨é¡¹ç›®æ ¹ç›®å½•å¤„è¿è¡Œå‘½ä»¤ taro init jdwxa-taro è¿›è¡Œåˆå§‹åŒ–ï¼Œå®Œæˆåä¼šæ–°å¢ä¸€ä¸ªåä¸º jdwxa-taro çš„ç›®å½•ï¼ŒTaro ç›¸å…³çš„æºä»£ç å°±å†™åœ¨è¯¥ç›®å½•ä¸­ï¼š 123456789101112131415161718â”œâ”€â”€ dist/â”œâ”€â”€ src/â””â”€â”€ jdwxa-taro â”œâ”€â”€ config â”‚ â”œâ”€â”€ dev.js â”‚ â”œâ”€â”€ index.js â”‚ â””â”€â”€ prod.js â”œâ”€â”€ node_modules/ â”œâ”€â”€ package.json â”œâ”€â”€ project.config.json â””â”€â”€ src â”œâ”€â”€ app.js â”œâ”€â”€ app.scss â”œâ”€â”€ index.html â””â”€â”€ pages â””â”€â”€ cate â”œâ”€â”€ index.js â””â”€â”€ index.scss 2. Taro é…ç½®ç‹¬ç«‹çš„ Taro é¡¹ç›®ä¼šå°†åŒ…æ‹¬ app.jsã€app.jsonã€app.wxss åŠé¡µé¢æ–‡ä»¶å‡ç”Ÿæˆåœ¨ dist/ ç›®å½•ä¸­ï¼Œè€Œæ··åˆå¼€å‘æ¨¡å¼ä¸‹åªéœ€è¦ç”Ÿæˆå•ä¸ªé¡µé¢ï¼Œè¿™é‡Œéœ€è¦å¯¹ Taro è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ‰“å¼€å¹¶ç¼–è¾‘ config/index.js æ–‡ä»¶ï¼š 1234567891011const config = &#123; outputRoot: '../dist', weapp: &#123; appOutput: false, npm: &#123; dir: '../../dist/common', name: 'taro' &#125; &#125;, // ...&#125; å¦‚ä»£ç æ‰€ç¤ºï¼ŒoutputRoot å­—æ®µä¸ºç”Ÿæˆç›®æ ‡é¡µé¢çš„å­˜æ”¾è·¯å¾„ï¼Œè¿™é‡ŒæŠŠå®ƒæŒ‡å‘é¡¶å±‚ï¼ˆå³åŸé¡¹ç›®ï¼‰çš„ dist/ ç›®å½•ï¼›weapp éƒ¨åˆ†ï¼Œæˆ‘ä»¬æŠŠ appOutput è®¾ç½®æˆ false, è¿™æ ·å°±ä¸ä¼šç”Ÿæˆ app.jsã€app.jsonã€app.wxss ä¸‰ä¸ªæ–‡ä»¶äº†ï¼Œnpm å­—æ®µåˆ™è¡¨ç¤º Taro è¿è¡Œæ—¶æ¡†æ¶æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ï¼Œè¿™é‡Œéµå¾ªåŸé¡¹ç›®çš„è§„èŒƒï¼ŒæŠŠå®ƒæŒ‡å®šä¸º common/ ç›®å½•ã€‚è¿™æ · Taro ç¼–è¯‘ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶å°±å®Œç¾åœ°èå…¥è¿›äº†åŸå°ç¨‹åºé¡¹ç›®ã€‚ 3. é¡µé¢å¼€å‘é¡µé¢å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè·ŸåŸç”Ÿå°ç¨‹åºæœ€å¤§çš„ä¸åŒå°±æ˜¯ React + JSX çš„ç¼–ç æ–¹å¼äº†ï¼Œä¹ æƒ¯äº†åŸç”Ÿå°ç¨‹åºçš„åŒå­¦å¯èƒ½è¦ä¸€äº›é€‚åº”è¿‡ç¨‹ï¼Œå…·ä½“çš„ç¼–ç å°±ä¸ç»†è¯´äº†ï¼Œè¿™é‡Œæå‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼š ä¸å°ç¨‹åºçš„ setData æ–¹æ³•ä¸åŒï¼ŒTaro ç”¨äºæ›´æ–°é¡µé¢æ•°æ®çš„ setState æ˜¯å¼‚æ­¥çš„ï¼Œç›¸å…³ä»£ç çš„æ‰§è¡Œæ—¶åºéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼› ä¸ºäº†æ–¹ä¾¿ JSX æ¨¡æ¿çš„ä¹¦å†™ï¼ŒåŸå…ˆå¾ˆé•¿çš„ WXML å†…å®¹å»ºè®®æ‹†åˆ†æˆä¸€äº›å°çš„ç»„ä»¶ï¼› å…³äºæ—§ç»„ä»¶çš„å¤ç”¨ï¼Œæ— è®ºæ˜¯å°ç¨‹åºåŸç”Ÿç»„ä»¶ã€æ™®é€š JS æ¨¡å—ã€æ ·å¼æ–‡ä»¶æˆ–æ˜¯ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼Œéƒ½èƒ½å¾ˆå¥½çš„è¿›è¡Œå¼•å…¥è°ƒç”¨ï¼Œè¿™ç‚¹æ— éœ€æ‹…å¿ƒï¼› ç›®å‰å¯¹äº Taro ç¼–è¯‘ç”Ÿæˆçš„ç›®æ ‡ä»£ç ï¼Œè°ƒè¯•èµ·æ¥ä¼šæœ‰äº›å›°éš¾ï¼Œä½†å¯¹ SourceMap çš„æ”¯æŒæ­£åœ¨ç§¯æå¼€å‘ä¸­ã€‚ 4. æœ€ç»ˆæ•ˆæœå¦‚ä»Šé‡æ„åçš„å•†å“åˆ†ç±»é¡µå·²ç»åœ¨çº¿ä¸Šç¨³å®šè¿è¡Œæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¯ä»¥æ‰«æä¸‹é¢çš„å°ç¨‹åºç è¿›è¡Œä½“éªŒï¼š Taro å¸¦æ¥çš„æ”¶ç›Šå¤šç«¯è¿è¡Œæœ€å¤§çš„æ”¶ç›Šä¾¿æ˜¯å¯ä»¥ç”Ÿæˆå¤šç«¯ç‰ˆæœ¬ï¼Œé¿å…é‡å¤å·¥ä½œã€èŠ‚çœå¼€å‘æˆæœ¬ã€‚ä»¥åˆ†ç±»é¡µä¸ºä¾‹ï¼Œåªéœ€è¿è¡Œ npm run build:h5 ä¾¿å¯ç”Ÿæˆ H5 ç‰ˆæœ¬çš„åˆ†ç±»é¡µï¼Œè¿è¡Œæ•ˆæœå’Œå°ç¨‹åºä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥æ‰«æä¸‹é¢çš„äºŒç»´ç è¿›è¡Œä½“éªŒï¼š æ³¨ï¼šä»¥ä¸Šä»…ä¸º Taro ç”Ÿæˆçš„ç¤ºä¾‹é¡µé¢ï¼Œç”±äºä¸€äº›ä¸šåŠ¡ç»„ä»¶å°šæœªå®Œå…¨é€‚é…ä¸¤ç«¯ï¼Œæ‰€ä»¥ H5 ç‰ˆæœ¬æš‚æ—¶æ²¡æœ‰æ­£å¼æŠ•å…¥ä½¿ç”¨ã€‚ æ€§èƒ½æå‡å°ç¨‹åºé¡¹ç›®ä¸­é‡åˆ°çš„æ€§èƒ½é—®é¢˜ï¼Œå¤§å¤šæ˜¯é¢‘ç¹åœ°è°ƒç”¨ setData é€ æˆçš„ï¼Œè¿™æ˜¯ç”±äºæ¯è°ƒç”¨ä¸€æ¬¡ setDataï¼Œå°ç¨‹åºå†…éƒ¨éƒ½ä¼šå°†è¯¥éƒ¨åˆ†æ•°æ®åœ¨é€»è¾‘å±‚ï¼ˆè¿è¡Œç¯å¢ƒ JSCoreï¼‰è¿›è¡Œç±»ä¼¼åºåˆ—åŒ–çš„æ“ä½œï¼Œå°†æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ä¼ é€’ç»™è§†å›¾å±‚ï¼ˆè¿è¡Œç¯å¢ƒ WebViewï¼‰ï¼Œè§†å›¾å±‚é€šè¿‡ååºåˆ—åŒ–æ‹¿åˆ°æ•°æ®åå†è¿›è¡Œé¡µé¢æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸‹æ¥æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ã€‚ æ‰€ä»¥å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å»ºè®®å°½é‡å¯¹ setData è¿›è¡Œåˆå¹¶ï¼Œå‡å°‘è°ƒç”¨æ¬¡æ•°ï¼Œä¾‹å¦‚ï¼š 123this.setData(&#123; foo: 'Strawberry' &#125;)this.setData(&#123; foo: 'Strawberry', bar: 'Fields' &#125;)this.setData(&#123; baz: 'Forever' &#125;) ä»¥ä¸Šä»£ç è°ƒç”¨äº† 3 æ¬¡ setDataï¼Œé€ æˆä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œåº”å¯¹å…¶è¿›è¡Œåˆå¹¶ï¼š 12345this.setData(&#123; foo: 'Strawberry', bar: 'Fields', baz: 'Forever',&#125;) è€Œä½¿ç”¨ Taro ä¹‹åï¼Œæ›´æ–°æ•°æ®æ—¶è°ƒç”¨çš„ setState ä¸ºå¼‚æ­¥æ–¹æ³•ï¼Œå®ƒä¼šè‡ªåŠ¨åœ°å¯¹åŒä¸€äº‹ä»¶å¾ªç¯é‡Œçš„å¤šæ¬¡ setState è°ƒç”¨è¿›è¡Œåˆå¹¶å¤„ç†ï¼Œæ­¤å¤–è¿˜ä¼šè¿›è¡Œæ•°æ® diff ä¼˜åŒ–ï¼Œè‡ªåŠ¨å‰”é™¤é‚£äº›æœªå˜æ›´çš„æ•°æ®ï¼Œä»è€Œæœ‰æ•ˆé¿å…äº†æ­¤ç±»æ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚ï¼š 12345678910111213141516171819202122232425262728// åˆå§‹æ—¶this.state = &#123; foo: '1967', bar: &#123; foo: 'Strawberry', bar: 'Fields', baz: 'Forever', &#125;&#125;// ç¬¬ä¸€æ¬¡æ›´æ–°this.setState(&#123; bar: &#123; foo: 'Norwegian', bar: 'Fields', baz: 'Forever', &#125;&#125;)// ç´§æ¥ç€è¿›è¡Œç¬¬äºŒæ¬¡æ›´æ–°this.setState(&#123; foo: '1967', bar: &#123; foo: 'Norwegian', bar: 'Wood', baz: 'Forever', &#125;&#125;) ä»¥ä¸Šä»£ç è™½ç„¶ç»è¿‡ä¸¤æ¬¡ setStateï¼Œä½†åªæœ‰ bar.foo å’Œ bar.bar çš„æ•°æ®æ›´æ–°äº†ï¼Œæ­¤æ—¶ Taro å†…éƒ¨ä¼šè‡ªåŠ¨å¯¹æ•°æ®è¿›è¡Œåˆå¹¶ã€å¹¶å‰”é™¤é‡å¤æ•°æ®ï¼Œæœ€ç»ˆæ‰§è¡Œä»£ç ä¸ºï¼š 12345// this.$scope åœ¨å°ç¨‹åºç¯å¢ƒä¸­ä¸º page å®ä¾‹this.$scope.setData(&#123; 'bar.foo': 'Norwegian', 'bar.bar': 'Wood',&#125;) å…¶ä»–æ”¶ç›Šæ¯”èµ·åŸç”Ÿå°ç¨‹åºå¼€å‘ï¼ŒTaro å¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„ç‰¹æ€§ï¼ˆå¦‚æ”¯æŒ TypeScriptã€NPMã€ä¸°å¯Œçš„ JSX è¯­æ³•ã€æ›´é«˜çº§çš„ ES ç‰¹æ€§ç­‰ç­‰ï¼‰ï¼Œä¸ä»…æå‡äº†å¼€å‘ä½“éªŒï¼Œå¯¹è‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­æ„å»ºç­‰ä¹Ÿä¼šæœ‰ä¸å°çš„å¸®åŠ©ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œäº¬ä¸œè´­ç‰©å°ç¨‹åºé‡Œå°è£…äº†ä¸€ä¸ª getImg æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå›¾ç‰‡ url åŠå¯é€‰çš„å®½é«˜ä½œä¸ºå‚æ•°ï¼Œç„¶åæ ¹æ®è®¾å¤‡ç±»å‹å†³å®šæ˜¯å¦ä½¿ç”¨ webp æ ¼å¼ã€æ ¹æ®å½“å‰ç½‘ç»œç¯å¢ƒåº”ç”¨é€‚å½“çš„å›¾ç‰‡å‹ç¼©ç‡ã€è‡ªåŠ¨å¤„ç†åè®®å¤´å’ŒåŸŸåè½¬æ¢ï¼Œæœ€åç”Ÿæˆç¬¦åˆç›®æ ‡å¤§å°çš„å›¾ç‰‡ urlã€‚æˆ‘ä»¬è¦æ±‚æ‰€æœ‰çš„å›¾ç‰‡éƒ½å¿…é¡»ç»è¿‡ getImg æ–¹æ³•å¤„ç†åæ‰èƒ½è¿›è¡Œå±•ç¤ºï¼Œä½†ç”±äº JS æ–¹æ³•åªèƒ½åœ¨é€»è¾‘å±‚è¿›è¡Œè°ƒç”¨ï¼Œå¤„ç†å¥½åå†ä¼ é€’ç»™ WXML è¿›è¡Œå±•ç¤ºï¼Œä½¿å¾—å¾ˆéš¾åœ¨è‡ªåŠ¨åŒ–å·¥å…·ä¸­è¿›è¡Œæ£€æµ‹ï¼ŒåŠæ—¶å‘ç°æœªè°ƒç”¨ getImg è¾“å‡ºå›¾ç‰‡çš„æƒ…å†µã€‚ è€Œä½¿ç”¨ Taro ä¹‹åï¼Œå¯ä»¥ç›´æ¥åœ¨ JSX æ¨¡æ¿çš„ Image æ ‡ç­¾è¾“å‡ºæ—¶å¯¹ src è°ƒç”¨ getImg æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œå°†æ­¤ç§å†™æ³•ä½œä¸ºè§„èŒƒæ˜ç¡®åï¼Œå°±å¾ˆå®¹æ˜“é€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œæ£€æµ‹äº†ï¼š 123render () &#123; return &lt;Image src=&#123;getImg(url, 750)&#125; /&gt;&#125; So å¯¹äºç°æœ‰é¡¹ç›®æ¥è¯´ï¼Œä¸éœ€è¦è¿›è¡Œæ•´ä½“é‡æ„ï¼Œä¹Ÿèƒ½å¾ˆå¥½çš„å°† Taro é›†æˆè¿›å»ã€‚è¿˜ç­‰ä»€ä¹ˆï¼Œèµ¶ç´§è¯•è¯•å§~","pubDate":"Tue, 11 Sep 2018 09:00:00 GMT","guid":"https://aotu.io/notes/2018/09/11/taro-in-jd/","category":"å°ç¨‹åº"},{"title":"é¦–ä¸ªå¤šç«¯ UI ç»„ä»¶åº“ - Taro UI å‘å¸ƒ","link":"https://aotu.io/notes/2018/08/27/the-birth-of-taro-ui/","description":"å‰è¨€Taro æ˜¯ç”±å‡¹å‡¸å®éªŒå®¤å€¾åŠ›æ‰“é€ çš„å¤šç«¯å¼€å‘è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨è®©ä¸€å¥—ä»£ç åœ¨å¤šç«¯è¿è¡Œã€‚Taro 1.0 ç‰ˆæœ¬å‘å¸ƒåï¼Œä¹Ÿå¼€å§‹æ”¯æŒå¼•ç”¨ç¬¬ä¸‰æ–¹çš„å°ç¨‹åºç»„ä»¶åº“ï¼Œå¦‚ iViewã€vant-weappã€echarts-for-weixinï¼Œç„¶è€Œç›®å‰å¸‚åœºä»ç„¶ç¼ºå°‘ä¸€å¥—ç”± Taro ç¼–å†™è€Œæˆçš„å¤šç«¯ UI ç»„ä»¶åº“ã€‚ä¸ºäº†è¿›ä¸€æ­¥ä¸°å¯Œ Taro çš„å¼€å‘ç”Ÿæ€ï¼Œè®©å¼€å‘è€…æœ‰æ›´å¥½çš„å¼€å‘ä½“éªŒå’Œæ›´å¿«çš„å¼€å‘é€Ÿåº¦ï¼Œå‡¹å‡¸å®éªŒå®¤è‡ªä¸»è®¾è®¡äº†ä¸€å¥— UI ç»„ä»¶åº“ï¼Œç»è¿‡ä¸¤ä¸ªå¤šæœˆçš„ç²¾é›•ç»†ç¢ï¼Œç»ˆäºè·Ÿéš Taro 1.0 ç‰ˆæœ¬æ­£å¼å‘å¸ƒã€‚ Taro UITaro UI æ˜¯ä¸€æ¬¾ç”±å‡¹å‡¸å®éªŒå®¤æ‰“é€ ã€åŸºäº Taro ç¼–å†™çš„å¤šç«¯ UI ç»„ä»¶åº“ã€‚é™¤äº†é«˜é¢œå€¼ï¼ŒTaro UI æœ€å¤§çš„äº®ç‚¹å°±æ˜¯æ”¯æŒå¤šç«¯è¿è¡Œã€‚Taro UI å€ŸåŠ© Taro æ”¯æŒå¤šç«¯è¿è¡Œçš„ç‰¹ç‚¹ï¼Œåªéœ€è§£å†³ä¸åŒå¹³å° CSS çš„è¡¨ç°å·®å¼‚é—®é¢˜ï¼Œå°±å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åº/ H5 / ReactNative ç­‰å¤šç«¯é€‚é…è¿è¡Œã€‚ Githubï¼šhttps://github.com/NervJS/taro-ui æ–‡æ¡£ï¼šhttps://taro-ui.aotu.io/ H5 ç‰ˆæœ¬é¢„è§ˆï¼š å¾®ä¿¡å°ç¨‹åºé¢„è§ˆï¼š ç¬¬ä¸€ç‰ˆç»„ä»¶å…±æœ‰å…­ä¸ªæ¨¡å—ã€ä¸‰åä¸‰ä¸ªç»„ä»¶ï¼Œæœªæ¥è¿˜å°†ç»§ç»­ä¸°å¯Œç»„ä»¶ï¼Œå¢åŠ ä¸€äº›å¸¸ç”¨ä¸šåŠ¡ç»„ä»¶ã€‚ ç‰¹æ€§ ç®€å•æ˜“ç”¨ï¼šæ”¯æŒ npm å®‰è£…ï¼Œè‡ªåŠ¨å¤„ç† npm èµ„æºä¹‹é—´çš„ä¾èµ–å…³ç³» æ¡†æ¶æ”¯æŒï¼šåŸºäº Taro å¼€å‘ç»„ä»¶ï¼Œä¸ Taro æ— ç¼è¡”æ¥ å¤šç«¯é€‚é…ï¼šä¸€å¥—ç»„ä»¶å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åº/ H5 / ReactNative ç­‰å¤šç«¯é€‚é…è¿è¡Œ æ ·å¼ç¾è§‚ï¼šå°æ˜å“¥(AT-UI è®¾è®¡è€…ã€ä¸»ç¨‹)äº²è‡ªè®¾è®¡ï¼Œç»†èŠ‚æŠŠå…³ï¼Œç¬¦åˆç°ä»£æ‰å¹³åŒ–è®¾è®¡å®¡ç¾ ç»„ä»¶ä¸°å¯Œï¼šæä¾›ä¸°å¯Œçš„åŸºç¡€ç»„ä»¶ï¼Œè¦†ç›–å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼Œæ»¡è¶³å„ç§åŠŸèƒ½éœ€æ±‚ æŒ‰éœ€å¼•ç”¨ï¼šå¯æŒ‰éœ€ä½¿ç”¨ç‹¬ç«‹çš„ç»„ä»¶ï¼Œä¸å¿…å¼•å…¥æ‰€æœ‰æ–‡ä»¶ï¼Œå¯æœ€å°åŒ–æ³¨å…¥åˆ°é¡¹ç›®ä¸­ å¤šå¥—ä¸»é¢˜ï¼šå†…ç½®å¤šå¥—ä¸»é¢˜é¢œè‰²ï¼Œä»»å›é€‰æ‹©ï¼ˆå°†åœ¨ 1.1 ç‰ˆæœ¬å¼€æ”¾æ­¤ç‰¹æ€§ï¼‰ å¿«é€Ÿå¼€å§‹å®‰è£… Taroå®‰è£… Taro å¼€å‘å·¥å…· @tarojs/cli ä½¿ç”¨ npm æˆ–è€… yarn å…¨å±€å®‰è£…ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ npx 12$ npm install -g @tarojs/cli$ yarn global add @tarojs/cli åˆå§‹åŒ–é¡¹ç›®ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ¨¡æ¿é¡¹ç›®1$ taro init myApp å®‰è£… Taro UI12$ cd myApp$ npm i taro-ui ä½¿ç”¨åœ¨ä»£ç ä¸­ import ç»„ä»¶å¹¶æŒ‰ç…§æ–‡æ¡£è¯´æ˜è¿›è¡Œä½¿ç”¨ import { AtButton } from &#39;taro-ui&#39; ç¤ºä¾‹åœ¨ /myApp/src/pages/index/index.jsx æ–‡ä»¶æ·»åŠ ä»¥ä¸‹ä»£ç 1234567891011121314151617import Taro, &#123; Component, Config &#125; from '@tarojs/taro'import &#123; View &#125; from '@tarojs/components'import &#123; AtButton &#125; from 'taro-ui'import './index.scss'export default class Index extends Component &#123; config: Config = &#123; navigationBarTitleText: 'é¦–é¡µ' &#125; render () &#123; return ( &lt;View className='index'&gt; &lt;AtButton type='primary'&gt;æŒ‰é’®æ–‡æ¡ˆ&lt;/AtButton&gt; &lt;/View&gt; ) &#125;&#125; ç¼–è¯‘å¹¶é¢„è§ˆè¿›å…¥é¡¹ç›®ç›®å½•å¼€å§‹å¼€å‘ï¼Œå¯ä»¥é€‰æ‹©å°ç¨‹åºé¢„è§ˆæ¨¡å¼ï¼Œæˆ–è€… H5 é¢„è§ˆæ¨¡å¼ï¼Œè‹¥ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºé¢„è§ˆæ¨¡å¼ï¼Œåˆ™éœ€è¦è‡ªè¡Œä¸‹è½½å¹¶æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹©é¢„è§ˆé¡¹ç›®æ ¹ç›®å½•ã€‚ å¾®ä¿¡å°ç¨‹åºç¼–è¯‘é¢„è§ˆæ¨¡å¼ 123456# npm script$ npm run dev:weapp# ä»…é™å…¨å±€å®‰è£…$ taro build --type weapp --watch# npxç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type weapp --watch H5ç¼–è¯‘é¢„è§ˆæ¨¡å¼ 123456# npm script$ npm run dev:h5# ä»…é™å…¨å±€å®‰è£…$ taro build --type h5 --watch# npxç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨$ npx taro build --type h5 --watch æ„è§åé¦ˆå¦‚æœæœ‰ä»»ä½•çš„æ„è§æˆ–è€…å»ºè®®ï¼Œæ¬¢è¿åœ¨ Github åˆ›å»º issueï¼Œæ„Ÿè°¢ä½ çš„æ”¯æŒå’Œè´¡çŒ®ã€‚","pubDate":"Mon, 27 Aug 2018 13:53:41 GMT","guid":"https://aotu.io/notes/2018/08/27/the-birth-of-taro-ui/","category":"å°ç¨‹åº"},{"title":"ä¸ºä½•æˆ‘ä»¬è¦ç”¨ React æ¥å†™å°ç¨‹åº - Taro è¯ç”Ÿè®°","link":"https://aotu.io/notes/2018/06/25/the-birth-of-taro/","description":"åœ¨äº’è”ç½‘ä¸æ–­å‘å±•çš„ä»Šå¤©ï¼Œå‰ç«¯ç¨‹åºå‘˜ä»¬ä¹Ÿä¸æ–­é¢ä¸´ç€æ–°çš„æŒ‘æˆ˜ï¼Œåœ¨è¿™ä¸ªå˜åŒ–å¤šç«¯ã€ä¸æ–­é©æ–°è‡ªå·±çš„é¢†åŸŸï¼Œæ¯ä¸€å¹´éƒ½æœ‰æ–°çš„ç¾å¥½äº‹ç‰©åœ¨å‘ç”Ÿã€‚ä»å»å¹´å¾®ä¿¡å°ç¨‹åºçš„è¯ç”Ÿï¼Œåˆ°ä»Šå¹´çš„é€æ¸ç«çƒ­ï¼Œä»¥åŠå¼‚å†›çªèµ·çš„è½»åº”ç”¨ã€ç™¾åº¦å°ç¨‹åºç­‰çš„å‡ºç°ï¼Œå‰ç«¯å¯ä»¥å»¶ä¼¸çš„é¢†åŸŸå·²ç»è¶Šæ¥è¶Šå¹¿ï¼Œå½“ç„¶ä¹Ÿæ„å‘³ç€ä¸šåŠ¡åœ¨ä¸æ–­æ‰©å¤§ã€‚è¿™æ—¶å€™ï¼Œå¦‚ä½•é€šè¿‡æŠ€æœ¯æ‰‹æ®µæ¥æå‡å¼€å‘æ•ˆç‡ï¼Œåº”å¯¹ä¸æ–­å¢é•¿çš„ä¸šåŠ¡ï¼Œå°±æ˜¯ä¸€ä¸ªå€¼å¾—æ¢ç´¢çš„è¯é¢˜ã€‚æœ¬æ–‡å°†å¯¹ Taro è¯ç”Ÿçš„æ•…äº‹ï¼Œè¿›è¡Œæ·±å…¥æµ…å‡ºåœ°ä»‹ç»ï¼Œè®°å½•ä¸‹è¿™ä¸ªå¿™ç¢Œçš„æ˜¥å¤ä¹‹äº¤å‘ç”Ÿçš„æ•…äº‹ã€‚ è®©äººåˆçˆ±åˆæ¨çš„å¾®ä¿¡å°ç¨‹åºè‡ª 2017-1-9 å¾®ä¿¡å°ç¨‹åºï¼ˆä»¥ä¸‹ç®€ç§°å°ç¨‹åºï¼‰è¯ç”Ÿä»¥æ¥ï¼Œå°±ä¼´éšç€èµèª‰ä¸äº‰è®®ä¸æ–­ã€‚ä»å‘å¸ƒä¸Šçº¿æ—¶çš„ä¸è¢«å¤§å¤šæ•°äººçœ‹å¥½ï¼Œåˆ°å¦‚ä»Šçš„é€æ¸ç«çƒ­ï¼Œç”šè‡³è¯´æ˜¯å¦‚æ—¥ä¸­å¤©ä¹Ÿä¸ä¸ºè¿‡ï¼Œå°ç¨‹åºç”¨æ—¶é—´ä¸å®è·µè¯æ˜äº†è‡ªå·±çš„ä»·å€¼ã€‚åŒæ—¶äºå¼€å‘è€…æ¥è¯´ï¼Œå°ç¨‹åºçš„ç”Ÿæ€ä¸æ–­åœ¨å®Œå–„ï¼Œè®¸å¤šçš„å‘å·²è¢«è¸©å¹³ï¼Œè™½ç„¶è¿˜æ˜¯å­˜åœ¨ä¸€äº›ä»¤äººè¯Ÿç—…çš„é—®é¢˜ï¼Œä½†å·²ç»è¶³è§å¾®ä¿¡çš„è¯šæ„äº†ã€‚è¿™ä¸ªæ—¶å€™è¦æ˜¯è¿˜æ²¡æœ‰ä¸Šæ‰‹æŠŠç©è¿‡å°ç¨‹åºï¼Œå°±æ˜¾å¾—éå¸¸OUTäº†ã€‚ å°ç¨‹åºå¯¹äºå‰ç«¯ç¨‹åºå‘˜æ¥è¯´åº”è¯¥ç®—å¾—ä¸Šæ˜¯ç¦éŸ³äº†ï¼Œç”¨å‰ç«¯ç›¸å…³çš„æŠ€æœ¯ï¼Œè·å¾—ä¸èˆ¬é¡ºæ»‘çš„ Native ä½“éªŒï¼Œå‰ç«¯ä»¬åˆå¯ä»¥åœ¨äº§å“å°å§å§é¢å‰ç¡¬æ°”ä¸€æŠŠäº†ã€‚å¯ä»¥è¯´å°ç¨‹åºç»™å‰ç«¯ç¨‹åºå‘˜æ‰“å¼€äº†ä¸€æ‰‡æ–°çš„å¤§é—¨ï¼Œå¤§å®¶éƒ½åº”è¯¥æ„Ÿè°¢å¾®ä¿¡ï¼Œä½†æ˜¯ä»å¼€å‘çš„è§’åº¦æ¥è¯´ï¼Œå°ç¨‹åºçš„å¼€å‘ä½“éªŒå°±éå¸¸å€¼å¾—å•†æ¦·äº†ï¼Œä¸ä»…è¯­æ³•ä¸Šæ˜¾å¾—æœ‰äº›ä¸ä¼¦ä¸ç±»ï¼Œè€Œä¸”æœ‰äº›è«åå…¶å¦™çš„å‘ä¹Ÿç»å¸¸è®©äººä¸ç»æ„é—´æ„Ÿå¹ä¸€ä¸‹å’Œè°ç¤¾ä¼šï¼Œä»å¸‚é¢ä¸Šå±‚å‡ºä¸ç©·çš„å°ç¨‹åºå¼€å‘æ¡†æ¶å°±å¯è§ä¸€æ–‘ã€‚ä»¥ä¸‹å°±ç›˜ç‚¹éƒ¨åˆ†å°ç¨‹åºå¼€å‘çš„ç—›ç‚¹ã€‚ ä»£ç ç»„ç»‡ä¸è¯­æ³•åœ¨å°ç¨‹åºä¸­ï¼Œä¸€ä¸ªé¡µé¢ page å¯èƒ½æ‹¥æœ‰ page.jsã€page.wxssã€page.wxml ã€page.json å››ä¸ªæ–‡ä»¶ è¿™æ ·åœ¨å¼€å‘çš„æ—¶å€™å°±éœ€è¦æ¥å›è¿›è¡Œæ–‡ä»¶åˆ‡æ¢ï¼Œå°¤å…¶æ˜¯åœ¨åŒæ—¶å¼€å‘æ¨¡æ¿å’Œé€»è¾‘çš„æ—¶å€™ï¼Œåˆ‡æ¥åˆ‡å»ä¼šæ˜¾å¾—å°¤å…¶éº»çƒ¦ï¼Œå½±å“å¼€å‘æ•ˆç‡ï¼Œä½†å°ç¨‹åºåŸç”Ÿåªæ”¯æŒè¿™ä¹ˆå†™ï¼Œå°±æ˜¾å¾—æ¯”è¾ƒå°´å°¬äº†ã€‚ è€Œåœ¨è¯­æ³•ä¸Šï¼Œå°ç¨‹åºçš„è¯­æ³•å¯ä»¥è¯´æ—¢åƒ React ï¼Œåˆåƒ Vueï¼Œä¸èƒ½è¯´æ˜¾å¾—æœ‰ç‚¹ä¸ä¼¦ä¸ç±»å§ï¼Œä½†åœ¨ä½¿ç”¨ä¸Šæ€»æ˜¯æ„Ÿè§‰æœ‰äº›åˆ«æ‰­ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œç­‰äºåˆè¦å­¦ä¹ ä¸€å¥—æ–°çš„è¯­æ³•ï¼Œæå‡äº†å­¦ä¹ æˆæœ¬ã€‚è€Œä¸”ï¼Œå°ç¨‹åºçš„æ¨¡æ¿ç”±äºæ²¡æœ‰ç¼–è¾‘å™¨æ’ä»¶çš„æ”¯æŒï¼Œä¹¦å†™çš„æ—¶å€™ä¹Ÿæ²¡æœ‰æ™ºèƒ½æç¤ºä¸ lint æ£€æŸ¥ï¼Œä¹¦å†™èµ·æ¥æ˜¾å¾—æœ‰äº›éº»çƒ¦ã€‚ å‘½åè§„èŒƒåœ¨å°ç¨‹åºä¸­åˆ°å¤„å¯è§è§„èŒƒä¸ç»Ÿä¸€çš„æƒ…å†µ ä¾‹å¦‚ç»„ä»¶çš„å±æ€§ï¼Œä»¥æœ€ç®€å•çš„ &lt;button /&gt; ç»„ä»¶ä¸ºä¾‹ï¼Œåœ¨å°ç¨‹åºå®˜æ–¹æ–‡æ¡£ä¸­ï¼Œè¯¥ç»„ä»¶çš„å±æ€§éƒ¨åˆ†æˆªå›¾å¦‚ä¸‹ï¼Œå¤§å®¶å¯ä»¥æ„Ÿå—ä¸‹ &lt;button /&gt; ç»„ä»¶å±æ€§åæ—¢æœ‰ä»¥ä¸­åˆ’çº¿åˆ†å‰²å¤šä¸ªå•è¯çš„æƒ…å†µ session-formï¼Œä¹Ÿæœ‰å¤šä¸ªå•è¯è¿å†™çš„æƒ…å†µ bindgetphonenumberã€‚å½“ç„¶è¿™ä¹Ÿä¸æ˜¯æœ€ä¸¥é‡çš„ï¼Œä½ å¯ä»¥è¯´äº‹ä»¶ç»‘å®šçš„è§„èŒƒå°±æ˜¯ bind + äº‹ä»¶å ï¼Œè€Œå…¶ä»–å±æ€§çš„è§„èŒƒå°±æ˜¯ä¸­åˆ’çº¿åˆ†å‰²å•è¯ï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºå°ç¨‹åºå°±æ˜¯è¿™ä¸ªä½œä¸ºæ ‡å‡†ï¼Œç›´åˆ°æˆ‘çœ‹åˆ°äº† &lt;progress /&gt; ç»„ä»¶ è¿™å’Œè¯´å¥½çš„ä¸ä¸€æ ·å•Šå–‚ï¼ åŒæ ·çš„æƒ…å†µä¹Ÿå‡ºç°åœ¨ é¡µé¢ ä¸ ç»„ä»¶ çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œé¡µé¢ çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰ onLoadã€onReadyã€onUnload ç­‰ï¼Œä½†åˆ°äº† ç»„ä»¶ ä¸­åˆ™æ˜¯ createdã€attached ã€ready ç­‰ï¼Œè¿™æ ·è§„èŒƒåˆä¸ç»Ÿä¸€äº†ï¼Œä¸ºå•¥ é¡µé¢ çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ˜¯ on+Xxx çš„æ ¼å¼ï¼Œä½†åˆ°äº† ç»„ä»¶ é‡Œç¼ºä¸ä¸€æ ·äº†å‘¢ï¼Œæœ‰ç‚¹è´¹è§£ã€‚ å¼€å‘æ–¹å¼å°ç¨‹åºå®˜æ–¹æä¾›äº† å¾®ä¿¡å¼€å‘å·¥å…· ä½œä¸ºå¼€å‘ç¼–è¯‘å·¥å…·ï¼Œè€Œå¯¹äºä»£ç æœ¬èº«æ²¡æœ‰æä¾›ä¸€ä¸ªç±»ä¼¼ webpack çš„å·¥ç¨‹åŒ–å¼€å‘å·¥å…·ï¼Œæ¥è§£å†³å¼€å‘ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥å°ç¨‹åºåŸç”Ÿçš„å¼€å‘æ–¹å¼æ˜¾å¾—ä¸é‚£ä¹ˆç°ä»£åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šå°ç¨‹åºå¼€å‘æ¡†æ¶è‡´åŠ›äºè§£å†³çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œåœ¨å°ç¨‹åºå¼€å‘ä¸­ ä¸èƒ½ä½¿ç”¨ npm ç®¡ç†ä¾èµ–ï¼Œåœ¨å°ç¨‹åºä¸­éœ€è¦æ‰‹åŠ¨æŠŠç¬¬ä¸‰æ–¹ä»£ç æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åå† reuqire è¿›è¡Œä½¿ç”¨ï¼Œæ˜¾å¾—ä¸é‚£ä¹ˆä¼˜é›… ä¸èƒ½ä½¿ç”¨ Sass ç­‰ CSS é¢„å¤„ç†å™¨ï¼Œç”±äºæ²¡æœ‰é¢„ç¼–è¯‘çš„æ¦‚å¿µï¼Œå°ç¨‹åºå¼€å‘ä¸­æ— æ³•ä½¿ç”¨å¸‚é¢ä¸Šæµè¡Œçš„ CSS é¢„å¤„ç†å™¨ï¼Œè¿™æ ·ä¼šä½¿å¾—æ ·å¼ä»£ç éš¾ä»¥ç®¡ç† ä¸å®Œæ•´çš„ ES Next è¯­æ³•æ”¯æŒï¼Œå°ç¨‹åºé»˜è®¤åªèƒ½æ”¯æŒæå°‘ä¸€éƒ¨åˆ† ES6 è§„èŒƒçš„è¯­æ³•ï¼Œè€Œ ES æ˜¯ä¸æ–­å¾€å‰å‘å±•çš„ï¼Œä¸€äº›éå¸¸ä¼˜ç§€çš„æ–°è¯­æ³•ç‰¹æ€§å°±ä¸èƒ½ä½¿ç”¨äº† æ‰‹åŠ¨çš„æ–‡ä»¶å¤„ç†ï¼Œåƒå›¾ç‰‡å‹ç¼©ã€ä»£ç å‹ç¼©ç­‰ç­‰çš„ä¸€äº›æ–‡ä»¶æ“ä½œï¼Œå¿…é¡»æ‰‹å·¥æ¥å¤„ç†ï¼Œæ˜¾å¾—æœ‰äº›ç¹ç ä»¥ä¸Šå°±æ˜¯ä»å¼€å‘è€…çš„è§’åº¦çœ‹åˆ°çš„ä¸€äº›å°ç¨‹åºçš„å¼€å‘é—®é¢˜ï¼Œä¸è¿‡çºµç„¶æœ‰åƒèˆ¬å›°éš¾ï¼Œæˆ‘ä»¬æ€»è¦é¢å¯¹ï¼Œä½œä¸ºæ–°æ—¶ä»£çš„å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬ä¸èƒ½ä¸€å‘³å¿å—é—®é¢˜ï¼Œè¦ä¿æŒæŠ€æœ¯çš„å¤´è„‘ï¼Œä»¥æŠ€æœ¯ä½œä¸ºæ­¦å™¨ï¼Œç”¨æŠ€æœ¯æ‰‹æ®µå»æå‡çš„æˆ‘ä»¬å¼€å‘ä½“éªŒã€‚ çªå‘å¥‡æƒ³ï¼šæˆ‘èƒ½ä¸èƒ½ç”¨Reactæ¥å†™å°ç¨‹åºç›®å‰å‰ç«¯ç•Œè¨€åŠå‰ç«¯æ¡†æ¶ï¼Œå¿…ç¦»ä¸å¼€ä¾ç„¶ä¿æŒç€ç»Ÿæ²»åœ°ä½çš„ React ä¸ Vueï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯éå¸¸ä¼˜ç§€çš„å‰ç«¯ UI æ¡†æ¶ï¼Œè€Œä¸”åœ¨ç½‘ä¸Šä¹Ÿç»å¸¸èƒ½çœ‹åˆ°ä¸¤ä¸ªæ¡†æ¶çš„ç²‰ä¸ä¹‹é—´çƒ­æƒ…äº¤æµï¼Œç¢°æ’å‡ºä¸€äº›æ€æƒ³ç«èŠ±ï¼Œæ˜¾å¾—ç¤¾åŒºå¼‚å¸¸æ´»è·ƒã€‚ è€Œæˆ‘ä»¬å›¢é˜Ÿä¹Ÿåœ¨å»å¹´å‹‡æ•¢åœ°æŠ›å¼ƒäº†å†å²åŒ…è¢±ï¼Œéå¸¸è£å¹¸åœ°å¼•å…¥äº† React å¼€å‘æ–¹å¼ï¼Œè®©æˆ‘ä»¬å›¢é˜Ÿä¸¢æ‰äº†ç…¤æ²¹ç¯ï¼Œå¼€å§‹é€šä¸Šäº†ç”µã€‚è€Œä¸”ä¹Ÿç ”å‘å‡ºäº†ä¸€æ¬¾ä¼˜ç§€çš„ç±» React æ¡†æ¶ Nerv ï¼Œè®©æˆ‘ä»¬å’Œ React å¼€å‘æ€æƒ³ç»“åˆå¾—æ›´æ·±ã€‚ ä¸å°ç¨‹åºçš„å¼€å‘æ–¹å¼ç›¸æ¯”ï¼ŒReact æ˜æ˜¾æ˜¾å¾—æ›´åŠ ç°ä»£åŒ–ã€è§„èŒƒåŒ–ï¼Œè€Œä¸” React å¤©ç”Ÿç»„ä»¶åŒ–æ›´é€‚åˆæˆ‘ä»¬çš„ä¸šåŠ¡å¼€å‘ï¼ŒJSX ä¹Ÿæ¯”å­—ç¬¦ä¸²æ¨¡æ¿æœ‰æ›´å¼ºçš„è¡¨ç°åŠ›ã€‚é‚£ä¹ˆè¿™æ—¶å€™æˆ‘ä»¬å°±åœ¨æ€è€ƒï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ç”¨ React æ¥å†™å°ç¨‹åºï¼Ÿ ç†æ€§åœ°æ¢ç´¢ç±»æ¯”é€šè¿‡å¯¹æ¯”ä½“éªŒ å°ç¨‹åºå’Œ React ï¼Œæˆ‘ä»¬è¿˜æ˜¯èƒ½å‘ç°ä¸¤è€…ä¹‹é—´ç›¸ä¼¼çš„åœ°æ–¹ ç”Ÿå‘½å‘¨æœŸå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå’Œ React çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç”šè‡³èƒ½æ‰¾åˆ°ä»–ä»¬ä¹‹é—´çš„å¯¹åº”å…³ç³» app åŠé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ å°ç¨‹åº React onLaunch componentWillMount onLoad componentWillMount onReady componentDidMount onShow ä¸æ”¯æŒï¼Œéœ€è¦ç‰¹æ®Šå¤„ç† onHide ä¸æ”¯æŒï¼Œéœ€è¦ç‰¹æ®Šå¤„ç† onUnload componentWillUnmount å¯ä»¥çœ‹å‡ºï¼Œå¯¹äº app åŠ é¡µé¢ æ¥è¯´ï¼Œé™¤äº† onShow ä¸ onHide ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•éƒ½èƒ½åœ¨ React ä¸­æ‰¾åˆ°å¯¹åº”ã€‚ æ•°æ®æ›´æ–°æ–¹å¼åœ¨ React ä¸­ï¼Œç»„ä»¶çš„å†…éƒ¨æ•°æ®æ˜¯ç”¨ state æ¥è¿›è¡Œç®¡ç†çš„ï¼Œè€Œåœ¨å°ç¨‹åºä¸­ç»„ä»¶çš„å†…éƒ¨æ•°æ®éƒ½æ˜¯ç”¨ data æ¥è¿›è¡Œç®¡ç†ï¼Œä¸¤è€…å…·æœ‰ä¸€å®šç›¸ä¼¼æ€§ã€‚è€ŒåŒæ—¶åœ¨ React ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°æ•°æ®ä½¿ç”¨çš„æ˜¯ setState æ–¹æ³•ï¼Œä¼ å…¥æ–°çš„æ•°æ®æˆ–è€…ç”Ÿæˆæ–°æ•°æ®çš„å‡½æ•°ï¼Œä»è€Œæ›´æ–°ç›¸åº”è§†å›¾ã€‚åœ¨å°ç¨‹åºä¸­ï¼Œåˆ™å¯¹åº”çš„æœ‰ setData æ–¹æ³•ï¼Œä¼ å…¥æ–°çš„æ•°æ®ï¼Œä»è€Œæ›´æ–°è§†å›¾ã€‚ ä¸¤è€…éƒ½æ˜¯ä»¥æ•°æ®é©±åŠ¨è§†å›¾çš„æ–¹å¼è¿›è¡Œæ›´æ–°ï¼Œè€Œä¸” api ç¥ä¼¼ã€‚ äº‹ä»¶ç»‘å®šå°ç¨‹åºä¸­ç»‘å®šäº‹ä»¶ä½¿ç”¨çš„æ˜¯ bind + äº‹ä»¶å çš„æ–¹å¼ï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ï¼Œå°ç¨‹åºä¸­æ˜¯ bindtap 1&lt;view bindtap=\"handlClick\"&gt;1&lt;/view&gt; è€Œåœ¨ React é‡Œï¼Œåˆ™æ˜¯ on + äº‹ä»¶å çš„æ–¹å¼ï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ï¼Œ React web ä¸­æ˜¯ onClick 1&lt;View onClick=&#123;this.handlClick&#125;&gt;1&lt;/View&gt; è™½ç„¶çœ‹ä¸Šå»ä¸ä¸€æ ·ï¼Œä½†å…¶å®æ˜¯å¯ä»¥ç±»æ¯”çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¼–è¯‘æ—¶å°† on + äº‹ä»¶å çš„å½¢å¼ç¼–è¯‘æˆ bind + äº‹ä»¶å çš„å½¢å¼å°±å¯ä»¥äº†ã€‚ å¦‚æ­¤çœ‹æ¥ï¼Œä¸¤è€…ä¹‹é—´æœ‰äº›ç›¸ä¼¼ï¼Œç”¨ React æ¥å†™å°ç¨‹åºè²Œä¼¼æ˜¯å¯è¡Œçš„ï¼Œä½†æ¥ä¸‹æ¥æˆ‘ä»¬å°±å‘ç°äº†å·¨å¤§çš„å·®å¼‚ã€‚ å·¨å¤§çš„å·®å¼‚React ä¸å°ç¨‹åºä¹‹é—´æœ€å¤§çš„å·®å¼‚å°±æ˜¯ä»–ä»¬çš„æ¨¡æ¿äº†ï¼Œåœ¨ React ä¸­ï¼Œæ˜¯ä½¿ç”¨ JSX æ¥ä½œä¸ºç»„ä»¶çš„æ¨¡æ¿çš„ï¼Œè€Œå°ç¨‹åºåˆ™ä¸ Vue ä¸€æ ·ï¼Œæ˜¯ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿çš„ã€‚è¿™æ ·ä¸¤è€…ä¹‹é—´å°±æœ‰ç€å·¨å¤§çš„å·®å¼‚äº†ã€‚ JSX 12345678910render () &#123; return ( &lt;View className='index'&gt; &#123;this.state.list.map((item, idx) =&gt; ( &lt;View key=&#123;idx&#125;&gt;&#123;item&#125;&lt;/View&gt; ))&#125; &lt;Button onClick=&#123;this.goto&#125;&gt;èµ°ä½ &lt;/Button&gt; &lt;/View&gt; )&#125; å°ç¨‹åºæ¨¡æ¿ 1234&lt;view class=\"index\"&gt; &lt;view wx:key=&#123;idx&#125; wx:for=\"&#123;&#123;list&#125;&#125;\" wx:for-item=\"item\" wx:for-index=\"idx\"&gt;&#123;&#123;item&#125;&#125;&lt;/view&gt; &lt;view bindtap=\"goto\"&gt;èµ°ä½ &lt;/view&gt;&lt;/view&gt; ä¼—æ‰€å‘¨çŸ¥ï¼ŒJSX å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ JSï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢å†™ä»»æ„çš„é€»è¾‘ä»£ç ï¼Œè¿™æ ·ä¸€æ¥å°±æ¯”å­—ç¬¦ä¸²æ¨¡æ¿çš„è¡¨ç°åŠ›ä¸æ“ä½œæ€§è¦å¼ºå¤šäº†ï¼Œå†µä¸”ï¼Œå°ç¨‹åºçš„å­—ç¬¦ä¸²æ¨¡æ¿åŠŸèƒ½æ¯”è¾ƒç¾¸å¼±ï¼Œåªæœ‰ä¸€äº›æ¯”è¾ƒåŸºæœ¬çš„åŠŸèƒ½ã€‚é‚£è¿™æ ·çš„è¯ï¼Œè¦å¦‚ä½•æ¥å®ç°ç”¨ JSX æ¥å†™å°ç¨‹åºæ¨¡æ¿å‘¢ã€‚ ç¼–è¯‘åŸç†çš„åŠ›é‡æˆ‘ä»¬å¯ä»¥ä»”ç»†æ¥åˆ†ææˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬æœŸæœ›ä½¿ç”¨ JSX æ¥ä¹¦å†™å°ç¨‹åºæ¨¡æ¿ï¼Œä½†å°ç¨‹åºæ˜¾ç„¶æ˜¯ä¸æ”¯æŒæ‰§è¡Œ JSX ä»£ç çš„ï¼ˆè¦æ˜¯æ”¯æŒçš„è¯ï¼ŒTaro åº”è¯¥ä¹Ÿå°±ä¸å­˜åœ¨äº†å§ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½æœŸæœ›å¾®ä¿¡èƒ½ç»™æˆ‘ä»¬å¼€ä¸ªåé—¨æ¥è·‘ JSXã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³ï¼Œæˆ‘ä»¬è¦æ˜¯èƒ½å¤Ÿå°† JSX ç¼–è¯‘æˆå°ç¨‹åºæ¨¡æ¿å°±å¥½äº†ã€‚ äº‹å®ä¸Šåœ¨æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œè¿™ç§ç¼–è¯‘çš„æ“ä½œåˆ°å¤„å¯è§ï¼Œbabel å°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ JS ä»£ç ç¼–è¯‘å™¨ï¼Œä¸€èˆ¬æµè§ˆå™¨æ˜¯ä¸èƒ½æ”¯æŒä¸€äº›éå¸¸æ–°çš„è¯­æ³•ç‰¹æ€§çš„ï¼Œä½†æˆ‘ä»¬åˆæƒ³ä½¿ç”¨å®ƒä»¬ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å€ŸåŠ© babel æ¥å°†æˆ‘ä»¬çš„é«˜ç‰ˆæœ¬çš„ ES ä»£ç ï¼Œç¼–è¯‘æˆæµè§ˆå™¨å¯ä»¥è¿è¡Œçš„ ES ä»£ç ã€‚è€Œæˆ‘ä»¬åƒè¦å°† JSXç¼–è¯‘æˆå°ç¨‹åºæ¨¡æ¿ï¼Œä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚æˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹ Babel çš„è¿è¡Œæœºåˆ¶ã€‚ Babel ä½œä¸ºä¸€ä¸ª ä»£ç ç¼–è¯‘å™¨ ï¼Œèƒ½å¤Ÿå°† ES6/7/8 çš„ä»£ç ç¼–è¯‘æˆ ES5 çš„ä»£ç ï¼Œå…¶æ ¸å¿ƒåˆ©ç”¨çš„å°±æ˜¯è®¡ç®—ä¸­éå¸¸åŸºç¡€çš„ç¼–è¯‘åŸç†çŸ¥è¯†ï¼Œå°†è¾“å…¥è¯­è¨€ä»£ç ï¼Œé€šè¿‡ç¼–è¯‘å™¨æ‰§è¡Œï¼Œè¾“å‡ºç›®æ ‡è¯­è¨€çš„ä»£ç ã€‚ç¼–è¯‘åŸç†çš„ä¸€èˆ¬è¿‡ç¨‹å°±æ˜¯ï¼Œè¾“å…¥æºç¨‹åºï¼Œç»è¿‡è¯æ³•åˆ†æã€è¯­æ³•åˆ†æï¼Œæ„é€ å‡ºè¯­æ³•æ ‘ï¼Œå†ç»è¿‡è¯­ä¹‰åˆ†æï¼Œç†è§£ç¨‹åºæ­£ç¡®ä¸å¦ï¼Œå†å¯¹è¯­æ³•æ ‘åšå‡ºéœ€è¦çš„æ“ä½œä¸ä¼˜åŒ–ï¼Œæœ€ç»ˆç”Ÿæˆç›®æ ‡ä»£ç ã€‚ Babel çš„ç¼–è¯‘è¿‡ç¨‹äº¦æ˜¯å¦‚æ­¤ï¼Œä¸»è¦åŒ…å«ä¸‰ä¸ªé˜¶æ®µ è§£æè¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿›è¡Œè¯æ³•ã€è¯­æ³•åˆ†æï¼Œä»¥åŠè¯­ä¹‰åˆ†æï¼Œç”Ÿæˆç¬¦åˆ ESTree æ ‡å‡† è™šæ‹Ÿè¯­æ³•æ ‘(AST) è½¬æ¢è¿‡ç¨‹ï¼Œé’ˆå¯¹ AST åšå‡ºå·²å®šä¹‰å¥½çš„æ“ä½œï¼Œbabel çš„é…ç½®æ–‡ä»¶ .babelrc ä¸­å®šä¹‰çš„ preset ã€ plugin å°±æ˜¯åœ¨è¿™ä¸€æ­¥ä¸­æ‰§è¡Œå¹¶æ”¹å˜ AST çš„ ç”Ÿæˆè¿‡ç¨‹ï¼Œå°†å‰ä¸€æ­¥è½¬æ¢å¥½çš„ AST ç”Ÿæˆç›®æ ‡ä»£ç çš„å­—ç¬¦ä¸² ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™äº›è¿‡ç¨‹ï¼Œå¤§å®¶å¯ä»¥åˆ©ç”¨ Ast Explorer è¿™ä¸ªç½‘ç«™æ¥ä¸€ä¸‹è‡ªå·±çš„ä»£ç ï¼Œæ„Ÿå—ä¸€ä¸‹æ¯ä¸€éƒ¨åˆ†ä»£ç æ‰€å¯¹åº”çš„ AST ç»“æ„ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä»½æºç ç»è¿‡ç¼–è¯‘å™¨è§£æåï¼Œä¼šå˜æˆç±»ä¼¼å¦‚ä¸‹çš„ç»“æ„ 1234567891011121314&#123; type: \"Program\", start: 0, end: 78, loc: &#123; start, end &#125; sourceType: \"module\", body: [ &#123; type: \"VariableDeclaration\", ... &#125;, &#123; type: \"VariableDeclaration\", ... &#125;, &#123; type: \"FunctionDeclaration\", ... &#125;, &#123; type: \"ExpressionStatement\", ... &#125; ] ...&#125; å…¶ä¸­ï¼Œbody é‡ŒåŒ…å«çš„å°±æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä»£ç çš„è¯­æ³•æ ‘ç»“æ„ï¼Œç¬¬ä¸€ä¸ª VariableDeclaration å¯¹åº”çš„æ˜¯ const a = 1ï¼Œç¬¬ä¸‰ä¸ª FunctionDeclaration å¯¹åº”çš„åˆ™æ˜¯ function sum (a, b) { }ï¼Œåˆ†åˆ«å°±æ˜¯ JS ä¸­çš„å˜é‡å®šä¹‰ä¸å‡½æ•°å®šä¹‰ï¼Œæ¯ä¸€ä¸ªæ ‘èŠ‚ç‚¹é‡Œéƒ½ä¼šåŒ…å«è®¸å¤šå­èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œæ›´å¤šçš„èŠ‚ç‚¹ç±»å‹ï¼Œè¯·å‚è€ƒ babel typesã€‚ å½“ç„¶æˆ‘ä»¬åœ¨è¿™å„¿åªæ˜¯ç®€å•ä»‹ç»ä¸‹ç¼–è¯‘åŸç†ä¸ babelï¼Œç¼–è¯‘åŸç†æ˜¯ä¸€é—¨éå¸¸æ·±å¥¥çš„è¯¾ç¨‹ï¼Œ babel ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å·¥å…·ï¼Œå¸Œæœ›åœ¨åç»­çš„æ–‡ç« ä¸­èƒ½å’Œå¤§å®¶å†è¯¦ç»†æ¢è®¨è¿™ä¸€éƒ¨åˆ†å†…å®¹ã€‚ å†æ¬¡å›åˆ°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå°† JSX ç¼–è¯‘æˆå°ç¨‹åºæ¨¡æ¿ï¼Œéå¸¸å¹¸è¿çš„æ˜¯ babel çš„æ ¸å¿ƒç¼–è¯‘å™¨ babylon æ˜¯æ”¯æŒå¯¹ JSX è¯­æ³•çš„è§£æçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨å®ƒæ¥å¸®æˆ‘ä»¬æ„é€  ASTï¼Œè€Œæˆ‘ä»¬éœ€è¦ä¸“æ³¨çš„æ ¸å¿ƒå°±æ˜¯å¦‚ä½•å¯¹ AST è¿›è¡Œè½¬æ¢æ“ä½œï¼Œå¾—å‡ºæˆ‘ä»¬éœ€è¦çš„æ–° ASTï¼Œå†å°†æ–° AST è¿›è¡Œé€’å½’éå†ï¼Œç”Ÿæˆå°ç¨‹åºçš„æ¨¡æ¿ã€‚ JSX ä»£ç  123456789&lt;View className='index'&gt; &lt;Button className='add_btn' onClick=&#123;this.props.add&#125;&gt;+&lt;/Button&gt; &lt;Button className='dec_btn' onClick=&#123;this.props.dec&#125;&gt;-&lt;/Button&gt; &lt;Button className='dec_btn' onClick=&#123;this.props.asyncAdd&#125;&gt;async&lt;/Button&gt; &lt;View&gt;&#123;this.props.counter.num&#125;&lt;/View&gt; &lt;A /&gt; &lt;Button onClick=&#123;this.goto&#125;&gt;èµ°ä½ &lt;/Button&gt; &lt;Image src=&#123;sd&#125; /&gt;&lt;/View&gt; ç¼–è¯‘ç”Ÿæˆå°ç¨‹åºæ¨¡æ¿ 123456789101112&lt;import src=\"../../components/A/A.wxml\" /&gt;&lt;block&gt; &lt;view class=\"index\"&gt; &lt;button class=\"add_btn\" bindtap=\"add\"&gt;+&lt;/button&gt; &lt;button class=\"dec_btn\" bindtap=\"dec\"&gt;-&lt;/button&gt; &lt;button class=\"dec_btn\" bindtap=\"asyncAdd\"&gt;async&lt;/button&gt; &lt;view&gt;&#123;&#123;counter.num&#125;&#125;&lt;/view&gt; &lt;template is=\"A\" data=\"&#123;&#123;...$$A&#125;&#125;\"&gt;&lt;/template&gt; &lt;button bindtap=\"goto\"&gt;èµ°ä½ &lt;/button&gt; &lt;image src=\"&#123;&#123;sd&#125;&#125;\" /&gt; &lt;/view&gt;&lt;/block&gt; è¿™æ—¶å€™ï¼Œèªæ˜çš„ä½ åº”è¯¥å°±èƒ½å‘ç°é—®é¢˜çš„éš¾ç‚¹æ‰€åœ¨äº†ï¼Œè¦çŸ¥é“å°ç¨‹åºçš„æ¨¡æ¿åªæ˜¯å­—ç¬¦ä¸²ï¼Œè€Œ JSX åˆ™æ˜¯çœŸæ­£çš„ JS ä»£ç æ‰©å±•ï¼Œå…¶è¯­æ³•ä¹‹ä¸°å¯Œï¼Œæ˜¾ç„¶ä¸æ˜¯å­—ç¬¦ä¸²æ¨¡æ¿æ‰€èƒ½æ¯”ï¼Œåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬è¦åšçš„æ“ä½œï¼ŒåŒ…æ‹¬ä½†ä¸ä»…é™äºå¦‚ä¸‹ ç†è§£ä¸‰ç›®è¿ç®—ç¬¦ä¸é€»è¾‘è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ä¸‰ç›®è¿ç®—ç¬¦ abc ? : &lt;View&gt;1&lt;/View&gt; : &lt;View&gt;2&lt;/View&gt; éœ€è¦ç¼–è¯‘æˆ &lt;view wx:if=&quot;&quot;&gt;1&lt;/view&gt;&lt;view wx:else&gt;2&lt;/view&gt; ç†è§£æ•°ç»„ map è¯­æ³•ï¼Œä¾‹å¦‚ map çš„ä½¿ç”¨ abc.map(item =&gt; &lt;View&gt;item&lt;/View&gt;) éœ€è¦ç¼–è¯‘æˆ &lt;view wx:for=&quot;&quot; wx:for-item=&quot;item&quot;&gt;item&lt;/view&gt; ç­‰ç­‰ ä»¥ä¸Šä»…ä»…æ˜¯æˆ‘ä»¬è½¬æ¢è§„åˆ™çš„å†°å±±ä¸€è§’ï¼ŒJSX çš„å†™æ³•æå…¶çµæ´»å¤šå˜ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ç©·ä¸¾çš„æ–¹å¼ï¼Œå°†å¸¸ç”¨çš„ã€React å®˜æ–¹æ¨èçš„å†™æ³•ä½œä¸ºè½¬æ¢è§„åˆ™åŠ ä»¥æ”¯æŒï¼Œè€Œä¸€äº›æ¯”è¾ƒç”Ÿåƒ»çš„ï¼Œæˆ–è€…æ˜¯ä¸é‚£ä¹ˆæ¨èçš„å†™çš„å†™æ³•åˆ™ä¸åšæ”¯æŒï¼Œè½¬è€Œä»¥ eslint æ’ä»¶çš„æ–¹å¼ï¼Œæç¤ºç”¨æˆ·è¿›è¡Œä¿®æ”¹ã€‚ç›®å‰æˆ‘ä»¬æ”¯æŒçš„ JSX è½¬æ¢è§„åˆ™ï¼Œå¤§è‡´èƒ½è¦†ç›–åˆ° JSX 80% çš„å†™æ³•æ“ä½œã€‚ å…³äº JSX è½¬å°ç¨‹åºæ¨¡æ¿è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†åœ¨åç»­çš„æŠ€æœ¯åŸç†åˆ†æç³»åˆ—æ–‡ç« ä¸­ï¼Œè¯¦ç»†ä¸ºå¤§å®¶ä»‹ç»ã€‚ è¿˜èƒ½ä¸èƒ½å¹²ç‚¹åˆ«çš„ç»è¿‡æˆ‘ä»¬ä¸€æ¬¡æ¬¡çš„æ¢ç´¢ï¼Œä»¥åŠä¸€æ³¢æ³¢çŒ›å¦‚è™çš„æ“ä½œï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å°†ç±» React ä»£ç è½¬æˆå°ç¨‹åºå¯ä»¥è·‘çš„ä»£ç äº†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å·²ç»å¯ä»¥æ­£å¼ä»¥ React çš„æ–¹å¼æ¥å†™å°ç¨‹åºçš„ä»£ç äº†ã€‚å–œå¤§æ™®å¥”ï¼ä½†æ˜¯æˆ‘ä»¬æ¿€åŠ¨ä¹‹ä½™ï¼Œå†·é™ä¸‹æ¥ç»§ç»­æ€è€ƒï¼Œæˆ‘ä»¬è¿˜èƒ½ä¸èƒ½å¹²ç‚¹åˆ«çš„æœ‰æ„æ€çš„äº‹æƒ…å‘¢ã€‚ åˆ†æä¸€ä¸‹éœ€æ±‚æˆ‘ä»¬å‘ç°ï¼Œåœ¨å¹³å¸¸çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸šåŠ¡é€šå¸¸æœ‰ä¸€äº›å¤šç«¯çš„éœ€æ±‚ï¼Œå°±æ˜¯è¦æ±‚å°ç¨‹åºè¦æœ‰ï¼ŒH5 è¦æœ‰ï¼Œç”šè‡³ RN ä¹Ÿèƒ½æœ‰å°±æœ€å¥½äº†ï¼Œæˆ‘çŒœäº§å“ç»ç†è¿˜çœ‹ä¸ä¸Šå¿«åº”ç”¨ï¼Œä¸ç„¶è‚¯å®šè¦æ±‚æˆ‘ä»¬å¿«åº”ç”¨ä¹Ÿä¸Šä¸€å¥—å§ï¼Œåæ­£ä½ ä»¬ä¸æ˜¯ç»å¸¸å·ç§°ä»£ç ä¼˜ç§€ã€é«˜åº¦å¯å¤ç”¨ä¹ˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±ä¼šå‘ç°ï¼Œå·®ä¸å¤šçš„ç•Œé¢å’Œé€»è¾‘ï¼Œä½ å¯èƒ½éœ€è¦é‡å¤å†™ä¸Šå¥½å‡ è½®ï¼Œè¿™æ—¶å€™è¦æ˜¯æœ‰ä¸ªå¤šç«¯ä»£ç ç”Ÿæˆå·¥å…·å°±å¥½äº†ï¼Œåªå†™ä¸€ä»½ä»£ç ï¼Œå¯ä»¥å¤šç«¯è¿è¡Œã€‚Write once, run anywhereï¼Œç›¸ä¿¡æ˜¯æ‰€æœ‰å·¥ç¨‹å¸ˆçš„æ¢¦æƒ³ã€‚ ä¾ç„¶ç¼–è¯‘åŸç†çš„åŠ›é‡è¿™æ—¶å€™æˆ‘ä»¬å›å¿†ä¸€ä¸‹å‰æ–‡çš„å†…å®¹ï¼Œå°†ä¸€ä»½ä»£ç ç¼–è¯‘æˆå¤šç«¯ä»£ç ï¼Œè¿™ä¸æ­£æ˜¯ç¼–è¯‘åŸç†å¹²çš„äº‹ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä¸€ä»½æºä»£ç ï¼Œé’ˆå¯¹ä¸åŒçš„ç«¯è®¾å®šå¥½å¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œå†ä¸€é”®è½¬æ¢å‡ºå¯¹åº”ç«¯çš„ä»£ç ã€‚è€Œä¸”ç”±äºæˆ‘ä»¬å·²ç»éµå¾ª React è¯­æ³•äº†ï¼Œé‚£æˆ‘ä»¬å†è½¬æˆ H5 ç«¯ï¼ˆä½¿ç”¨ Nervï¼‰ä¸ RN ç«¯ï¼ˆä½¿ç”¨ Reactï¼‰ä¹Ÿå°±æœ‰äº†å¤©ç„¶çš„ä¼˜åŠ¿ã€‚ è®¾è®¡æ€è·¯è¡¥å®Œä½†æ˜¯ä»”ç»†æ€è€ƒæˆ‘ä»¬åˆä¼šå‘ç°ï¼Œä»…ä»…å°†ä»£ç æŒ‰ç…§å¯¹åº”è¯­æ³•è§„åˆ™è½¬æ¢è¿‡å»åï¼Œè¿˜è¿œè¿œä¸å¤Ÿï¼Œå› ä¸ºä¸åŒç«¯ä¼šæœ‰è‡ªå·±çš„åŸç”Ÿç»„ä»¶ï¼Œç«¯èƒ½åŠ› API ç­‰ç­‰ï¼Œä»£ç ç›´æ¥è½¬æ¢è¿‡å»åï¼Œå¯èƒ½ä¸èƒ½ç›´æ¥æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œå°ç¨‹åºä¸­æ™®é€šçš„å®¹å™¨ç»„ä»¶ç”¨çš„æ˜¯ &lt;view /&gt;ï¼Œè€Œåœ¨ H5 ä¸­åˆ™æ˜¯ &lt;div /&gt;ï¼›å°ç¨‹åºä¸­æä¾›äº†ä¸°å¯Œçš„ç«¯èƒ½åŠ› APIï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶ä¸‹è½½ã€æ•°æ®ç¼“å­˜ç­‰ï¼Œè€Œåœ¨ H5 ä¸­å¯¹åº”åŠŸèƒ½çš„ API åˆ™ä¸ä¸€è‡´ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†å¼¥è¡¥ä¸åŒç«¯çš„å·®å¼‚ï¼Œæˆ‘ä»¬éœ€è¦è®¢åˆ¶å¥½ä¸€ä¸ªç»Ÿä¸€çš„ç»„ä»¶åº“æ ‡å‡†ï¼Œä»¥åŠç»Ÿä¸€çš„ API æ ‡å‡†ï¼Œåœ¨ä¸åŒçš„ç«¯ä¾é å®ƒä»¬çš„è¯­æ³•ä¸èƒ½åŠ›å»å®ç°è¿™ä¸ªç»„ä»¶åº“ä¸ APIï¼ŒåŒæ—¶è¿˜è¦ä¸ºä¸åŒçš„ç«¯ç¼–å†™ç›¸åº”çš„è¿è¡Œæ—¶æ¡†æ¶ï¼Œè´Ÿè´£åˆå§‹åŒ–ç­‰ç­‰æ“ä½œã€‚é€šè¿‡ä»¥ä¸Šè¿™äº›æ“ä½œï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä»½ä¸€é”®ç”Ÿæˆå¤šç«¯çš„éœ€æ±‚äº†ã€‚åœ¨ Taro æœ€åˆçš„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç»„ä»¶åº“ä¸ API çš„æ ‡å‡†å°±æ˜¯æºè‡ªå°ç¨‹åºçš„ï¼Œå› ä¸ºæˆ‘ä»¬è§‰å¾—æ—¢ç„¶å·²ç»æœ‰å®šä¹‰å¥½çš„ç»„ä»¶åº“ä¸ API æ ‡å‡†ï¼Œé‚£ä¸ºå•¥ä¸ç›´æ¥æ‹¿æ¥ä½¿ç”¨å‘¢ï¼Œè¿™æ ·ä¸ä»…çœå»äº†å®šåˆ¶æ ‡å‡†çš„å†¥æ€è‹¦æƒ³ï¼ŒåŒæ—¶ä¹Ÿçœå»äº†ä¸ºå°ç¨‹åºå¼€å‘ç»„ä»¶åº“ä¸ API çš„éº»çƒ¦ï¼Œåªéœ€è¦è®©å…¶ä»–ç«¯æ¥å‘å°ç¨‹åºé é½å°±å¥½ã€‚ å¯èƒ½æœ‰äº›äººä¼šæœ‰ç–‘é—®ï¼Œæ—¢ç„¶æ˜¯ä¸ºä¸åŒçš„ç«¯å®ç°äº†å¯¹åº”çš„ç»„ä»¶åº“ä¸ç«¯èƒ½åŠ› API ï¼ˆå°ç¨‹åºé™¤å¤–ï¼Œå› ä¸ºç»„ä»¶åº“å’Œ API çš„æ ‡å‡†éƒ½æ˜¯æºè‡ªå°ç¨‹åºï¼‰ï¼Œé‚£ä¹ˆæ˜¯æ€ä¹ˆèƒ½å¤Ÿåªå†™ä¸€ä»½ä»£ç å°±å¤Ÿäº†å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æœ‰ç¼–è¯‘çš„æ“ä½œï¼Œåœ¨ä¹¦å†™ä»£ç çš„æ—¶å€™ï¼Œåªéœ€è¦å¼•å…¥æ ‡å‡†ç»„ä»¶åº“ @tarojs/components ä¸è¿è¡Œæ—¶æ¡†æ¶ @tarojs/taro ï¼Œä»£ç ç»è¿‡ç¼–è¯‘ä¹‹åï¼Œä¼šå˜æˆå¯¹åº”ç«¯æ‰€éœ€è¦çš„åº“ã€‚ æ—¢ç„¶ç»„ä»¶åº“ä»¥åŠç«¯èƒ½åŠ›éƒ½æ˜¯ä¾é ä¸åŒçš„ç«¯åšä¸åŒå®ç°æ¥æŠ¹å¹³å·®å¼‚ï¼Œé‚£ä¹ˆåŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¸º Taro å¼•å…¥æ›´å¤šçš„åŠŸèƒ½æ”¯æŒçš„è¯ï¼Œæœ‰æ—¶å€™ä¹Ÿéœ€è¦æŒ‰ç…§è¿™ä¸ªå¥—è·¯æ¥ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†æå‡å¼€å‘ä¾¿åˆ©æ€§ï¼Œæˆ‘ä»¬ä¸º Taro åŠ å…¥äº† Redux æ”¯æŒï¼Œæˆ‘ä»¬çš„åšæ³•å°±æ˜¯ï¼Œåœ¨å°ç¨‹åºç«¯ï¼Œæˆ‘ä»¬å®ç°äº† @tarojs/redux è¿™ä¸ªåº“æ¥ä½œä¸ºå°ç¨‹åºçš„ Redux è¾…åŠ©åº“ï¼Œå¹¶ä¸”ä»¥ä»–ä½œä¸ºåŸºå‡†åº“ï¼Œå®ƒå…·æœ‰å’Œ react-redux ä¸€è‡´çš„ APIï¼Œåœ¨ä¹¦å†™ä»£ç çš„æ—¶å€™ï¼Œå¼•ç”¨çš„éƒ½æ˜¯ @tarojs/redux ï¼Œç»è¿‡ç¼–è¯‘åï¼Œåœ¨ H5 ç«¯ä¼šæ›¿æ¢æˆ nerv-reduxï¼ˆNervçš„ Redux è¾…åŠ©åº“ï¼‰ï¼Œåœ¨ RN ç«¯ä¼šæ›¿æ¢æˆ react-reduxã€‚è¿™æ ·å°±å®ç°äº† Redux åœ¨ Taro ä¸­çš„å¤šç«¯æ”¯æŒã€‚ ä»¥ä¸Šå°±æ˜¯ Taro çš„æ•´ä½“è®¾è®¡æ€è·¯ï¼Œé‡Œé¢è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰å±•å¼€å»é˜è¿°ï¼Œå¯èƒ½å¤§å®¶ä¼šè§‰å¾—æœ‰äº›æ„çŠ¹æœªå°½ï¼Œåç»­æˆ‘ä»¬å°†ä¼šäº§å‡ºä¸€ç³»åˆ—çš„æ–‡ç« æ¥é˜è¿° Taro çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä¾‹å¦‚ ã€ŠTaro å¼€å‘å·¥å…·åŸç†åˆ†æã€‹ã€ã€ŠTaro ä»£ç ç¼–è¯‘çš„èƒŒåã€‹ã€ã€Šæ·±å…¥æµ…å‡º JSX è½¬å°ç¨‹åºæ¨¡æ¿ã€‹ç­‰ç­‰ã€‚ æœ€åçš„æœ€åTaro ä»ç«‹é¡¹ä¹‹åˆåˆ°ç°åœ¨å·²ç»å·®ä¸å¤šæœ‰äº†ä¸‰ä¸ªæœˆå·¦å³çš„æ—¶é—´ï¼Œä»æœ€åˆçš„æ¿€çƒˆè®¨è®ºæ–¹æ¡ˆï¼Œå„ç§æ€æƒ³çš„ç¢°æ’ï¼Œåˆ°æ–¹æ¡ˆé€æ¸æˆå‹ï¼Œè¿›å…¥ç«çƒ­çš„å¼€å‘è¿­ä»£ï¼Œå†åˆ°ç°åœ¨çš„å°ç¨‹åºç«¯å’Œ H5 ç«¯é¡ºåˆ©æ”¯æŒï¼Œä»è€Œå†³å®šèµ°å‘å¼€æºã€‚è¿™ä¸€è·¯èµ°æ¥ï¼Œæ”¶è·é¢‡ä¸°ï¼Œæ—¢æœ‰è·Ÿå›¢é˜Ÿå°ä¼™ä¼´ä¸€èµ·åˆ›é€ çš„æ¿€åŠ¨ï¼Œä¹Ÿæœ‰æ— æ•°ä¸ªæ—¥å¤œåŠ ç­çš„è‹¦æ€ã€‚Taro æ˜¯å‡¹å‡¸å®éªŒå®¤çš„è¯šæ„ä¹‹ä½œï¼Œæˆ‘ä»¬ä¹Ÿå°†ä¼šä¸€ç›´ç»´æŠ¤ä¸‹å»ï¼Œå¸Œæœ› Taro èƒ½è¶Šæ¥è¶Šå¥½ï¼Œå¸®åŠ©æ›´å¤šäººåˆ›é€ æ›´å¤šä»·å€¼ã€‚ é¡¹ç›®å®˜ç½‘ï¼šhttps://taro.aotu.io/ é¡¹ç›® GitHubï¼šhttps://github.com/NervJS/taro åŒæ—¶ï¼Œæœ‰ä»»ä½•å…³äº Taro å¸Œæœ›æ²Ÿé€šäº¤æµçš„ï¼Œæ¬¢è¿~","pubDate":"Mon, 25 Jun 2018 04:53:41 GMT","guid":"https://aotu.io/notes/2018/06/25/the-birth-of-taro/","category":"å°ç¨‹åº"},{"title":"å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ - Taro","link":"https://aotu.io/notes/2018/06/07/Taro/","description":"Taro - å¤šç«¯å¼€å‘æ¡†æ¶Taro æ˜¯ä»€ä¹ˆï¼ŸTaro æ˜¯ç”±å‡¹å‡¸å®éªŒå®¤æ‰“é€ çš„ä¸€å¥—éµå¾ª React è¯­æ³•è§„èŒƒçš„å¤šç«¯ç»Ÿä¸€å¼€å‘æ¡†æ¶ã€‚ ç°å¦‚ä»Šå¸‚é¢ä¸Šç«¯çš„å½¢æ€å¤šç§å¤šæ ·ï¼ŒWebã€App ç«¯(React Native)ã€å¾®ä¿¡å°ç¨‹åºç­‰å„ç§ç«¯å¤§è¡Œå…¶é“ï¼Œå½“ä¸šåŠ¡è¦æ±‚åŒæ—¶åœ¨ä¸åŒçš„ç«¯éƒ½è¦æ±‚æœ‰æ‰€è¡¨ç°çš„æ—¶å€™ï¼Œé’ˆå¯¹ä¸åŒçš„ç«¯å»ç¼–å†™å¤šå¥—ä»£ç çš„æˆæœ¬æ˜¾ç„¶éå¸¸é«˜ï¼Œè¿™æ—¶å€™åªç¼–å†™ä¸€å¥—ä»£ç å°±èƒ½å¤Ÿé€‚é…åˆ°å¤šç«¯çš„èƒ½åŠ›å°±æ˜¾å¾—æä¸ºéœ€è¦ã€‚ ä½¿ç”¨ Taroï¼Œæˆ‘ä»¬å¯ä»¥åªä¹¦å†™ä¸€å¥—ä»£ç ï¼Œå†é€šè¿‡ Taro çš„ç¼–è¯‘å·¥å…·ï¼Œå°†æºä»£ç åˆ†åˆ«ç¼–è¯‘å‡ºå¯ä»¥åœ¨ä¸åŒç«¯ï¼ˆå¾®ä¿¡å°ç¨‹åºã€H5ã€App ç«¯ç­‰ï¼‰è¿è¡Œçš„ä»£ç ã€‚åŒæ—¶ Taro è¿˜æä¾›å¼€ç®±å³ç”¨çš„è¯­æ³•æ£€æµ‹å’Œè‡ªåŠ¨è¡¥å…¨ç­‰åŠŸèƒ½ï¼Œæœ‰æ•ˆåœ°æå‡äº†å¼€å‘ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚ Taro èƒ½æä¾›ä»€ä¹ˆï¼Ÿä¸€æ¬¡ç¼–å†™ï¼Œå¤šç«¯è¿è¡Œæ—¢ç„¶æ˜¯ä¸€ä¸ªå¤šç«¯è§£å†³æ–¹æ¡ˆï¼ŒTaro æœ€é‡è¦çš„èƒ½åŠ›å½“ç„¶æ˜¯å†™ä¸€å¥—ä»£ç è¾“å‡ºå¤šç«¯çš†å¯è¿è¡Œçš„ä»£ç ã€‚ç›®å‰ Taro å·²ç»æ”¯æŒä¸€å¥—ä»£ç åŒæ—¶ç”Ÿæˆ H5 å’Œå°ç¨‹åºï¼ŒAppç«¯(React Native)ç«¯ä¹Ÿå³å°†æ”¯æŒï¼ŒåŒæ—¶è¯¸å¦‚å¿«åº”ç”¨ç­‰ç«¯ä¹Ÿå°†å¾—åˆ°æ”¯æŒã€‚ åŒæ—¶ Taro ä¹Ÿå·²ç»æŠ•å…¥åˆ°äº†ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œç›®å‰å·²ç»æ”¯æ’‘äº†ä¸€ä¸ª 3 ä¸‡è¡Œä»£ç å°ç¨‹åº TOPLIFE çš„å¼€å‘å¹¶ä¸Šçº¿ã€‚äº¬ä¸œè´­ç‰© å°ç¨‹åºå’Œ ä¸€èµ·æœ‰å±€ å°ç¨‹åºä¹Ÿåœ¨ä½¿ç”¨ Taro éƒ¨åˆ†é‡æ„ä¸­ï¼Œå³å°†ä¸Šçº¿ã€‚æœªæ¥ä¹Ÿå°†æ¥å…¥æ›´å¤šä¸šåŠ¡ã€‚ ç°ä»£å‰ç«¯å¼€å‘æµç¨‹å’Œå¾®ä¿¡è‡ªå¸¦çš„å°ç¨‹åºæ¡†æ¶ä¸ä¸€æ ·ï¼ŒTaro ç§¯ææ‹¥æŠ±ç¤¾åŒºç°æœ‰çš„ç°ä»£å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š NPM åŒ…ç®¡ç†ç³»ç»Ÿ ES6+ è¯­æ³• è‡ªç”±çš„èµ„æºå¼•ç”¨ CSS é¢„å¤„ç†å™¨å’Œåå¤„ç†å™¨ï¼ˆSCSSã€Lessã€PostCSSï¼‰ å¯¹äºå¾®ä¿¡å°ç¨‹åºçš„ç¼–è¯‘æµç¨‹ï¼Œæˆ‘ä»¬ä» Parcel å¾—åˆ°çµæ„Ÿï¼Œè‡ªç ”äº†ä¸€å¥—æ‰“åŒ…æœºåˆ¶å°† AST ä¸æ–­ä¼ é€’ï¼Œå› æ­¤ä»£ç åˆ†æçš„é€Ÿåº¦å¾—åˆ°äº†å¾ˆå¤§çš„æé«˜ã€‚ä¸€å° 2015 å¹´ çš„ 15å¯¸ RMBP åœ¨ç¼–è¯‘ä¸Šç™¾ä¸ªç»„ä»¶æ—¶ä»…éœ€è¦å¤§çº¦ 15 ç§’å·¦å³ã€‚ å’Œ React å®Œå…¨ä¸€è‡´çš„ API å’Œç»„ä»¶åŒ–ç³»ç»Ÿåœ¨ Taro ä¸­ï¼Œä½ ä¸ç”¨åƒå°ç¨‹åºä¸€æ ·åŒºåˆ†ä»€ä¹ˆæ˜¯ App ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯ Page ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯ Component ç»„ä»¶ï¼ŒTaro å…¨éƒ½æ˜¯ Component ç»„ä»¶ï¼Œå¹¶ä¸”å’Œ React çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ä¸€è‡´ã€‚å¯ä»¥è¯´ï¼Œä¸€æ—¦ä½ æŒæ¡äº† Reactï¼Œé‚£å°±å‡ ä¹æŒæ¡äº† Taroã€‚è€Œå­¦ä¹  React çš„èµ„æºä¹Ÿå‡ ä¹æ˜¯æ±—ç‰›å……æ ‹ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒå­¦ä¸ä¼šã€‚ Taro å’Œ React ä¸€æ ·ï¼ŒåŒæ ·ä½¿ç”¨å£°æ˜å¼çš„ JSX è¯­æ³•ã€‚ç›¸æ¯”èµ·å­—ç¬¦ä¸²çš„æ¨¡æ¿è¯­æ³•ï¼ŒJSX åœ¨å¤„ç†ç²¾ç»†å¤æ‚éœ€æ±‚çš„æ—¶å€™ä¼šæ›´å¾—å¿ƒåº”æ‰‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// ä¸€ä¸ªå…¸å‹çš„ Taro ç»„ä»¶import Taro, &#123; Component &#125; from '@tarojs/taro'import &#123; View, Button &#125; from '@tarojs/components'export default class Home extends Component &#123; constructor (props) &#123; super(props) this.state = &#123; title: 'é¦–é¡µ', list: [1, 2, 3] &#125; &#125; componentWillMount () &#123;&#125; componentDidMount () &#123;&#125; componentWillUpdate (nextProps, nextState) &#123;&#125; componentDidUpdate (prevProps, prevState) &#123;&#125; shouldComponentUpdate (nextProps, nextState) &#123; return true &#125; add = (e) =&gt; &#123; // dosth &#125; render () &#123; const &#123; list, title &#125; = this.state return ( &lt;View className='index'&gt; &lt;View className='title'&gt;&#123;title&#125;&lt;/View&gt; &lt;View className='content'&gt; &#123;list.map(item =&gt; &#123; return ( &lt;View className='item'&gt;&#123;item&#125;&lt;/View&gt; ) &#125;)&#125; &lt;Button className='add' onClick=&#123;this.add&#125;&gt;æ·»åŠ &lt;/Button&gt; &lt;/View&gt; &lt;/View&gt; ) &#125;&#125; è‰¯å¥½çš„å¼€å‘æ•ˆç‡å’Œä½“éªŒé‰´äº Taro çš„è¯­æ³•å’Œ React å®Œå…¨ä¸€æ ·ï¼Œå› æ­¤ç¼–è¾‘å™¨/IDE èƒ½å¤Ÿå¯¹ Taro çš„æ”¯æŒå’Œ React æ˜¯å‡ ä¹ä¸€æ ·çš„ã€‚ç°ä»£çš„ç¼–è¾‘å™¨é»˜è®¤éƒ½å¯¹ JSX è¿›è¡Œäº†æ”¯æŒï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰¾ä¸€ä¸ªæ’ä»¶ä¹Ÿæ˜¯éå¸¸å®¹æ˜“çš„äº‹æƒ…ã€‚ä½†æ¯•ç«Ÿæˆ‘ä»¬åš Taro å°±æ˜¯ä¸ºäº†æå‡å¼€å‘æ•ˆç‡å’Œå¼€å‘ä½“éªŒï¼Œè€ŒçœŸæ­£ä½¿ç”¨ Taro çš„äººå°±æ˜¯æˆ‘ä»¬è‡ªå·±æˆ–æ­£ååœ¨æˆ‘ä»¬æ—è¾¹çš„åŒäº‹ã€‚å› æ­¤åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åˆå¯¹ Taro å¼€å‘ä½“éªŒè¿›è¡Œäº†è¿›ä¸€æ­¥åŠ å¼ºã€‚ è‡ªå®šä¹‰ ESLint è§„åˆ™æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ï¼Œå½“å­¦ä¼šäº† Reactï¼Œå…¶å®ä¹Ÿå·®ä¸å¤šä¼š Taro äº†ã€‚å…¶ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªåŸå› å°±æ˜¯æˆ‘ä»¬å¯¹ Taro ä¸æ”¯æŒçš„è¯­æ³•å’Œç‰¹æ€§å•ç‹¬å†™äº† ESLint è§„åˆ™ï¼šå¼€å‘è€…åªç®¡å†™ä»£ç ï¼Œå†™åˆ°ä¸æ”¯æŒçš„è¯­æ³•/ç‰¹æ€§ç¼–è¾‘å™¨ä¼šæŠ¥é”™ï¼Œå¹¶ç»™å‡ºæŠ¥é”™ä¿¡æ¯å’Œä¸€ä¸ªæ–‡æ¡£åœ°å€æè¿°ã€‚ ç±»å‹å®‰å…¨å’Œè¿è¡Œæ—¶æ£€æµ‹JSX çš„æœ¬è´¨å°±æ˜¯ JavaScript çš„è¯­æ³•å¢å¼ºï¼Œæ‰€ä»¥ä¾‹å¦‚æ²¡æœ‰ import ç»„ä»¶ç­‰è¯­æ³•é”™è¯¯åœ¨ç¼–è¯‘æœŸå°±èƒ½å‘ç°ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ TypeScript æˆ– Flow æ¥å¯¹ä»£ç çš„å¯é æ€§è¿›ä¸€æ­¥å¢å¼ºï¼Œæˆ–ä½¿ç”¨ PropsType åœ¨è¿è¡Œæ—¶è¿›ä¸€æ­¥ä¿éšœä»£ç çš„é²æ£’æ€§ã€‚ é«˜æ•ˆçš„è‡ªåŠ¨è¡¥å…¨å’Œ ES6+ è¯­æ³•Taro çš„æ‰€æœ‰ APIï¼ˆåŒ…æ‹¬å¾®ä¿¡å°ç¨‹åºç­‰ç«¯èƒ½åŠ›æ¥å£ï¼‰éƒ½æœ‰æ™ºèƒ½çš„æé†’å’Œè‡ªåŠ¨è¡¥å…¨ï¼ŒåŒ…æ‹¬æ¥å£çš„å‚æ•°å’Œè¿”å›å€¼ã€‚ Taro çš„è®¾è®¡æ€è·¯æˆ‘ä»¬çš„åˆå¿ƒå°±æ˜¯åšä¸€æ¬¾èƒ½å¤Ÿé€‚é…å¤šç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œç»“åˆä¸šåŠ¡åœºæ™¯ã€æŠ€æœ¯é€‰å‹å’Œå‰ç«¯å†å²å‘å±•è¿›ç¨‹ï¼Œæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³ä¸‹è¿°è¦æ±‚ï¼š ä»£ç å¤šç«¯å¤ç”¨ï¼Œä¸ä»…èƒ½è¿è¡Œåœ¨æ—¶ä¸‹æœ€çƒ­é—¨çš„ H5ã€å¾®ä¿¡å°ç¨‹åºã€React Nativeï¼Œå¯¹å…¶ä»–å¯èƒ½ä¼šæµè¡Œçš„ç«¯ä¹Ÿç•™æœ‰ä½™åœ°å’Œå¯èƒ½æ€§ã€‚ å®Œå–„å’Œå¼ºå¤§çš„ç»„ä»¶åŒ–æœºåˆ¶ï¼Œè¿™æ˜¯å¼€å‘å¤æ‚åº”ç”¨çš„åŸºçŸ³ã€‚ ä¸ç›®å‰å›¢é˜ŸæŠ€æœ¯æ ˆæœ‰æœºç»“åˆï¼Œæœ‰æ•ˆæé«˜æ•ˆç‡ã€‚ å­¦ä¹ æˆæœ¬è¶³å¤Ÿä½ èƒŒåçš„ç”Ÿæ€å¼ºå¤§ åŒæ—¶æ»¡è¶³è¿™å‡ ä¸ªéœ€æ±‚å¹¶ä¸å®¹æ˜“ï¼Œåœ¨æˆ‘ä»¬ç»è¿‡å……åˆ†åœ°è°ƒç ”å’Œæ€è€ƒä¹‹åå‘ç°åªæœ‰ React ä½“ç³»èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚è€Œå¯¹äºå¾®ä¿¡å°ç¨‹åºè€Œè¨€ï¼Œä½¿ç”¨ React å®Œå…¨æ²¡æœ‰åŠæ³•è¿›è¡Œå¼€å‘â€”â€”ç›´åˆ°æˆ‘ä»¬ä» codemod å¾—åˆ°çµæ„Ÿï¼š åœ¨ä¸€ä¸ªä¼˜ç§€ä¸”ä¸¥æ ¼çš„è§„èŒƒé™åˆ¶ä¸‹ï¼Œä»æ›´é«˜æŠ½è±¡çš„è§†è§’ï¼ˆè¯­æ³•æ ‘ï¼‰æ¥çœ‹ï¼Œæ¯ä¸ªäººå†™çš„ä»£ç éƒ½å·®ä¸å¤šã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºå¾®ä¿¡å°ç¨‹åºè¿™æ ·ä¸å¼€æ”¾ä¸å¼€æºçš„ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠ React ä»£ç åˆ†ææˆä¸€é¢—æŠ½è±¡è¯­æ³•æ ‘ï¼Œæ ¹æ®è¿™é¢—æ ‘ç”Ÿæˆå°ç¨‹åºæ”¯æŒçš„æ¨¡æ¿ä»£ç ï¼Œå†åšä¸€ä¸ªå°ç¨‹åºè¿è¡Œæ—¶æ¡†æ¶å¤„ç†äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸä¸å°ç¨‹åºæ¡†æ¶å…¼å®¹ï¼Œç„¶åæŠŠä¸šåŠ¡ä»£ç è·‘åœ¨è¿è¡Œæ—¶æ¡†æ¶å°±å®Œæˆäº†å°ç¨‹åºç«¯çš„é€‚é…ã€‚ å¯¹äº React å·²ç»æ”¯æŒçš„ç«¯ï¼Œä¾‹å¦‚ Webã€React Native ç”šè‡³æœªæ¥çš„ React VRï¼Œæˆ‘ä»¬åªè¦åŒ…ä¸€å±‚ç»„ä»¶åº“å†åšäº›è®¸æ ·å¼æ”¯æŒå³å¯ã€‚é‰´äºæ—¶ä¸‹å°ç¨‹åºçš„çƒ­åº¦å’Œæˆ‘ä»¬å›¢é˜Ÿæœ¬èº«çš„ä¸šåŠ¡ä¾§é‡ç¨‹åº¦ï¼Œç»„ä»¶åº“çš„ API æ˜¯ä»¥å°ç¨‹åºä¸ºæ ‡å‡†ï¼Œå…¶ä»–ç«¯çš„ç»„ä»¶åº“çš„ API éƒ½ä¼šå’Œå°ç¨‹åºç«¯çš„ç»„ä»¶ä¿æŒä¸€è‡´ã€‚ æŠ€æœ¯é€‰å‹ä¸æƒè¡¡åœ¨æˆ‘ä»¬å‰é¢ç¤¾åŒºå·²ç»æœ‰å¤šä¸ªä¼˜ç§€çš„æ¡†æ¶ä»¥å°ç¨‹åºä¸ºæ ¸å¿ƒå¯¹å¤šç«¯é€‚é…è¿›è¡Œäº†æ¢ç´¢ï¼Œæˆ‘ä»¬å°†å„ä¸ªå¼€å‘æ¡†æ¶çš„ä¸»è¦ç‰¹ç‚¹å’Œç‰¹æ€§è¿›è¡Œäº†å¯¹æ¯”å¹¶åˆ¶æˆå›¾è¡¨ã€‚å¤§å®¶å¯ä»¥ç»“åˆå›¢é˜ŸæŠ€æœ¯æ ˆã€æŠ€æœ¯éœ€æ±‚ä»¥åŠæ¡†æ¶ç‰¹ç‚¹ã€ç‰¹æ€§è¿›è¡Œé€‰å‹å’Œæƒè¡¡ã€‚ ç»“è¯­ç»è¿‡æ•°ä¸ªæœˆçš„å¼€å‘ï¼ŒTaro ä»ç¬¬ä¸€æ¬¡ commit åˆ°å‘å±•æˆåŒ…æ‹¬ 16 ä¸ªåŒ…ï¼Œåå¤šä½åŒå­¦å…±åŒå‚ä¸çš„å¤§å‹é¡¹ç›®ã€‚ä¸æ­¤åŒæ—¶ï¼ŒTaro ä¹Ÿåœ¨ç”Ÿäº§ç¯å¢ƒæ”¯æ’‘äº†æ•°ä¸ªå¤æ‚ä¸šåŠ¡çº¿ä¸Šé¡¹ç›®çš„å¼€å‘ï¼Œå°†æ¥ä¹Ÿä¼šæ”¯æ’‘æ›´å¤šä¸šåŠ¡ã€‚ Taro çš„æŠ€æœ¯æ–¹æ¡ˆå’Œå®ç°ä¹Ÿæ ¹æ¤äºç¤¾åŒºï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›ä¸ºæŠ€æœ¯ç¤¾åŒºçš„å‘å±•å£®å¤§è´¡çŒ®ä¸€ä»½è‡ªå·±çš„åŠ›é‡ã€‚ç§‰æŒç€å‡¹å‡¸å®éªŒå®¤é•¿ä¹…ä»¥æ¥å¼€æºã€å¼€æ”¾ã€å…±äº«çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œæˆ‘ä»¬ä»Šå¤©å°† Taro å…¨éƒ¨ä»£ç å¼€æºï¼Œä¸ºå¹¿å¤§å¼€å‘è€…å¿«é€Ÿå¼€å‘å¤šç«¯é¡¹ç›®æä¾›ä¸€æ•´å¥—æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚æœªæ¥ï¼Œæˆ‘ä»¬ä¹Ÿå°†ç»§ç»­æ‹“å±• Taro ç°æœ‰èƒ½åŠ›ï¼Œæ”¯æŒæ›´å¤šç«¯èƒ½åŠ›ï¼Œç»§ç»­å®Œå–„å¼€å‘è€…ä½“éªŒï¼Œæé«˜å¼€å‘è€…æ•ˆç‡ï¼Œå¸®åŠ©æ›´å¤šå¼€å‘è€…ï¼ŒåŒæ—¶ä¹Ÿä»ç¤¾åŒºä¸­æ±²å–å…»åˆ†ï¼Œè®© Taro å˜å¾—æ›´åŠ å¼ºå¤§ã€‚ å®˜ç½‘ï¼šhttp://taro.aotu.io/ GitHub: http://github.com/nervjs/taro å¦‚æœä½ è¿˜æ²¡å¬è¿‡ Nervï¼Œå¯ä»¥æ¥è¿™é‡Œçœ‹çœ‹ï¼šhttps://nerv.aotu.io/","pubDate":"Thu, 07 Jun 2018 03:04:27 GMT","guid":"https://aotu.io/notes/2018/06/07/Taro/","category":"å°ç¨‹åº"},{"title":"å›¾åƒå¤„ç† - ImageMagick ç®€å•ä»‹ç»ä¸æ¡ˆä¾‹","link":"https://aotu.io/notes/2018/06/06/ImageMagick_intro/","description":"åœ¨å®¢æˆ·ç«¯æˆ‘ä»¬å¯ä»¥ç”¨ PhotoShop ç­‰ GUI å·¥å…·å¤„ç†é™æ€å›¾ç‰‡æˆ–è€…åŠ¨æ€ GIF å›¾ç‰‡ï¼Œä¸è¿‡åœ¨æœåŠ¡å™¨ç«¯å¯¹äº WEB åº”ç”¨ç¨‹åºè¦å¤„ç†å›¾ç‰‡æ ¼å¼è½¬æ¢ï¼Œç¼©æ”¾è£å‰ªï¼Œç¿»è½¬æ‰­æ›²ï¼ŒPDFè§£æç­‰æ“ä½œï¼Œ GUI è½¯ä»¶å°±å¾ˆéš¾ä¸‹æ‰‹äº†ï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦å¬å”¤å‘½ä»¤è¡Œå·¥å…·æ¥å¸®æˆ‘ä»¬å®Œæˆè¿™äº›äº‹ã€‚ ImageMagick: æ˜¯ä¸€æ¬¾åˆ›å»ºã€ç¼–è¾‘ã€åˆæˆï¼Œè½¬æ¢å›¾åƒçš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ”¯æŒæ ¼å¼è¶…è¿‡ 200 ç§ï¼ŒåŒ…æ‹¬å¸¸è§çš„ PNG, JPEG, GIF, HEIC, TIFF, DPX, EXR, WebP, Postscript, PDF, SVG ç­‰ã€‚åŠŸèƒ½åŒ…æ‹¬è°ƒæ•´ï¼Œç¿»è½¬ï¼Œé•œåƒ(mirror)ï¼Œæ—‹è½¬ï¼Œæ‰­æ›²ï¼Œä¿®å‰ªå’Œå˜æ¢å›¾åƒï¼Œè°ƒæ•´å›¾åƒé¢œè‰²ï¼Œåº”ç”¨å„ç§ç‰¹æ®Šæ•ˆæœï¼Œæˆ–ç»˜åˆ¶æ–‡æœ¬ï¼Œçº¿æ¡ï¼Œå¤šè¾¹å½¢ï¼Œæ¤­åœ†å’Œè´å¡å°”æ›²çº¿ç­‰ã€‚ å®˜ç½‘ï¼šhttps://www.imagemagick.org ä¸‹é¢æ”¾ä¸ªå°æ ‡è¯†ã€‚ å®‰è£… ImageMagick æ”¯æŒ Linux, Windows, Mac OS X, iOS, Android OS ç­‰å¹³å°https://www.imagemagick.org/script/download.php å› ä¸ºæˆ‘æ˜¯ MAC æœºå™¨ï¼Œæ¼”ç¤ºä¸€ä¸‹ brew çš„å®‰è£…æ–¹å¼å’¯1brew install imagemagick åŸºæœ¬å‘½ä»¤ä¸æ ¼å¼1ã€åŸºæœ¬å‘½ä»¤ ImageMagick åŒ…æ‹¬ä¸€ç»„å‘½ä»¤è¡Œå·¥å…·æ¥æ“ä½œå›¾ç‰‡ï¼Œå®‰è£…å¥½ ImageMagick åï¼Œç»ˆç«¯å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤äº†ã€‚ magick: åˆ›å»ºã€ç¼–è¾‘å›¾åƒï¼Œè½¬æ¢å›¾åƒæ ¼å¼ï¼Œä»¥åŠè°ƒæ•´å›¾åƒå¤§å°ã€æ¨¡ç³Šã€è£åˆ‡ã€é™¤å»æ‚ç‚¹ã€æŠ–åŠ¨ ( dither )ã€ç»˜å›¾ã€ç¿»è½¬ã€åˆå¹¶ã€é‡æ–°é‡‡æ ·ç­‰ã€‚convert: ç­‰åŒäº magick å‘½ä»¤ã€‚identify: è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå›¾åƒæ–‡ä»¶çš„æ ¼å¼å’Œç‰¹å¾ä¿¡æ¯ï¼Œå¦‚åˆ†è¾¨ç‡ã€å¤§å°ã€å°ºå¯¸ã€è‰²å½©ç©ºé—´ç­‰ã€‚mogrify: ä¸ magick åŠŸèƒ½ä¸€æ ·ï¼Œä¸è¿‡ä¸éœ€è¦æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œè‡ªåŠ¨è¦†ç›–åŸå§‹å›¾åƒæ–‡ä»¶ã€‚composite: å°†ä¸€ä¸ªå›¾ç‰‡æˆ–å¤šä¸ªå›¾ç‰‡ç»„åˆæˆæ–°å›¾ç‰‡ã€‚montage: ç»„åˆå¤šä¸ªç‹¬ç«‹çš„å›¾åƒæ¥åˆ›å»ºåˆæˆå›¾åƒã€‚æ¯ä¸ªå›¾åƒéƒ½å¯ä»¥ç”¨è¾¹æ¡†ï¼Œé€æ˜åº¦ç­‰ç‰¹æ€§è¿›è¡Œè£…é¥°ã€‚ compare: ä»æ•°å­¦å’Œè§†è§‰è§’åº¦æ¯”è¾ƒæºå›¾åƒä¸é‡å»ºå›¾åƒä¹‹é—´çš„å·®å¼‚ã€‚display: åœ¨ä»»ä½• X server ä¸Šæ˜¾ç¤ºä¸€ä¸ªå›¾åƒæˆ–å›¾åƒåºåˆ—ã€‚animate: åœ¨ä»»ä½• X server ä¸Šæ˜¾ç¤ºå›¾åƒåºåˆ—ã€‚import: ä¿å­˜ X server ä¸Šçš„ä»»ä½•å¯è§çª—å£å¹¶æŠŠå®ƒä½œä¸ºå›¾åƒæ–‡ä»¶è¾“å‡ºã€‚å¯ä»¥æ•æ‰å•ä¸ªçª—å£ï¼Œæ•´ä¸ªå±å¹•æˆ–å±å¹•çš„ä»»æ„çŸ©å½¢éƒ¨åˆ†ã€‚conjure: è§£é‡Šå¹¶æ‰§è¡Œ MSL ( Magick Scripting Language ) å†™çš„è„šæœ¬ã€‚stream: ä¸€ä¸ªè½»é‡çº§å·¥å…·ï¼Œç”¨äºå°†å›¾åƒæˆ–éƒ¨åˆ†å›¾åƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªåƒç´ ç»„ä»¶æµå¼ä¼ è¾“åˆ°å­˜å‚¨è®¾å¤‡ã€‚åœ¨å¤„ç†å¤§å›¾åƒæˆ–åŸå§‹åƒç´ ç»„ä»¶æ—¶å¾ˆæœ‰ç”¨ã€‚ 2ã€å‘½ä»¤æ ¼å¼åŸºæœ¬å‘½ä»¤çš„ä½¿ç”¨ï¼Œéµå¾ª Unix é£æ ¼çš„æ ‡å‡†æ ¼å¼ï¼š1command [options] input_image output_image æ¯”å¦‚æˆ‘ä»¬å°†ä¸€å¼ å®½é«˜ 300x300 çš„å›¾ç‰‡ goods.png è½¬æ¢æˆ 200x200 çš„goods.jpgï¼Œå¯ä»¥è¿™æ ·ç”¨1convert -resize 200x200 goods.png goods.jpg -resize å®šä¹‰å›¾ç‰‡å°ºå¯¸ï¼ŒImageMagick æ‰€æœ‰çš„é€‰é¡¹å‚æ•°éƒ½åœ¨è¿™ä¸ªã€å‘½ä»¤è¡Œé€‰é¡¹æ‰‹å†Œã€‘ã€‚ ä½†æ˜¯éšç€åŠŸèƒ½çš„å¤æ‚ï¼Œå‘½ä»¤ç¼“æ…¢æ‰©å¤§æˆäº†è¿™æ ·çš„æ ¼å¼ï¼š1command [options] image1 [options] image2 [options] output_image äºæ˜¯ä¸Šé¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·1convert goods.png -resize 200x200 goods.jpg ç¬”è®°ï¼šä¸ªäººå»ºè®®ï¼Œå¦‚æœè½¬æ¢çš„æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œé‚£ä¹ˆç”¨ç¬¬ä¸€ç§æ ¼å¼ï¼Œå› ä¸ºåƒ -density ç­‰ä¸€äº›é€‰é¡¹å¿…é¡»æ”¾åœ¨ command ä¸ input_image ä¹‹é—´ï¼Œæ‰€ä»¥ä¸ºäº†çœè®°éƒ½ä¸å†™é”™ï¼Œéƒ½å†™åœ¨ command ä¸ input_image ä¹‹é—´å²‚ä¸å¾ˆå¥½ã€‚ä½†æ˜¯å¦‚æœæ˜¯å¤šå¼ å›¾ç‰‡è½¬æ¢ï¼Œå°±éœ€è¦æŒ‰ç¬¬äºŒç§æ ¼å¼ï¼Œæ­£ç¡®è¾“å‡ºå‘½ä»¤é€‰é¡¹äº†ã€‚ æç¤ºï¼šå¦‚æœä¸Šé¢çš„å·¥å…·å‘½ä»¤åœ¨è®¡ç®—æœºä¸Šä¸å¯ä»¥ä½¿ç”¨ï¼Œåˆ™å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ magick å‘½ä»¤çš„å­å‘½ä»¤ä½¿ç”¨ï¼Œä¾‹å¦‚1magick identify goods.png 3ã€æŒ‡å®šæ–‡ä»¶æ ¼å¼é»˜è®¤æƒ…å†µä¸‹ ImageMagick ä¼šè¯»å–å›¾åƒä¸­å”¯ä¸€æ ‡è¯†æ ¼å¼çš„ç­¾åæ¥ç¡®å®šæ–‡ä»¶æ ¼å¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æ ¹æ®æ–‡ä»¶çš„æ‰©å±•åæ¥ç¡®å®šæ ¼å¼ï¼Œå¦‚ image.jpg è¢«è®¤ä¸º jpeg æ ¼å¼æ–‡ä»¶ï¼Œå¦‚æœéƒ½è·å–ä¸åˆ°ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶çš„æ ¼å¼ã€‚å‘½ä»¤æ ¼å¼ä¸º format:input_or_output_imageã€‚ è¾“å…¥æ–‡ä»¶ä¸€èˆ¬æƒ…å†µåº”è¯¥ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶æ ¼å¼ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ—¶å€™ï¼Œpng æ ¼å¼åˆ† png8ã€png24 ç­‰æ ¼å¼ï¼Œå¦‚æœ png8 æ ¼å¼çš„æ–‡ä»¶èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼ŒæŒ‡å®šåˆç†çš„æ ¼å¼å¯ä»¥ç¼©å°æ–‡ä»¶çš„å¤§å°ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚12convert goods.png png8:goods_8.pngconvert goods.png png24:goods_24.png å®é™…æ¡ˆä¾‹ æ–‡ä¸­æ¡ˆä¾‹åŸºäº ImageMagick 7.0.7 1ã€ç”Ÿæˆç¼©ç•¥å›¾éœ€æ±‚ï¼šå°†ä¸€å¼ å®½é«˜ä¸º 900x600 çš„å›¾ç‰‡ goods.jpg ç”Ÿæˆå®½é«˜ä¸º 150x100 çš„ç¼©ç•¥å›¾ thumbnail.jpg 1convert -resize 150x100 -quality 70 -strip goods.jpg thumbnail.jpg è§£é‡Šï¼š -resize 150x100ï¼šå®šä¹‰è¾“å‡ºçš„ç¼©ç•¥å›¾å°ºå¯¸ä¸º 150x100ã€‚ -quality 70ï¼šé™ä½ç¼©ç•¥å›¾çš„è´¨é‡ä¸º 70ï¼Œå–å€¼èŒƒå›´ 1 ( æœ€ä½å›¾åƒè´¨é‡å’Œæœ€é«˜å‹ç¼©ç‡ ) åˆ° 100 ( æœ€é«˜å›¾åƒè´¨é‡å’Œæœ€ä½å‹ç¼©ç‡ )ï¼Œé»˜è®¤å€¼æ ¹æ®è¾“å‡ºæ ¼å¼æœ‰ 75ã€92ã€100ï¼Œé€‰é¡¹é€‚ç”¨äº JPEG / MIFF / PNGã€‚ -stripï¼šè®©ç¼©ç•¥å›¾ç§»é™¤å›¾ç‰‡å†…åµŒçš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œæ³¨é‡Šç­‰ä¿¡æ¯ï¼Œä»¥å‡å°æ–‡ä»¶å¤§å°ã€‚ -resize å»¶ä¼¸è§£è¯»ï¼Œå¦‚ä¸‹ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¾“å…¥çš„å›¾ç‰‡å’Œè¾“å‡ºçš„å›¾ç‰‡æ¯”ä¾‹æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ç‰¹æ®Šæƒ…å†µå‡ºç°ï¼Œä½†æ˜¯é‡åˆ°æ¯”ä¾‹ä¸åŒçš„æ—¶å€™ï¼Œä¸Šé¢çš„å†™æ³•å¹¶ä¸ä¼šå¾—åˆ° 150x100 çš„å›¾åƒï¼Œè€Œæ˜¯ä¼šæ ¹æ®å›¾åƒçš„å®½é«˜æ¯”ä¾‹ï¼Œå–æœ€å¤§å€¼ï¼Œå¾—å‡ºæ¥çš„ç»“æœå¯èƒ½æ˜¯ 150 å®½å’Œæ›´å°çš„é«˜ï¼Œæˆ–è€… 100 é«˜å’Œæ›´å°çš„å®½ï¼›æ‰€ä»¥ IamgeMagick æä¾›äº†å‡ ç§ç¬¦å·æ¥å®šä¹‰ç¼©æ”¾ã€‚123convert -resize '150x100!' goods.jpg thumbnail.jpgconvert -resize '150x100&gt;' goods.jpg thumbnail.jpgconvert -resize '150x100&lt;' goods.jpg thumbnail.jpg !ï¼šä¸ç®¡å›¾ç‰‡å®½é«˜å¦‚ä½•ï¼Œéƒ½ç¼©æ”¾æˆ 150x100 è¿™æ ·çš„å°ºå¯¸ã€‚&gt;ï¼šåªæœ‰å®½é«˜å‡å¤§äº 150x100 çš„å›¾ç‰‡æ‰ç¼©æ”¾æˆè¯¥å°ºå¯¸ ( æŒ‰æ¯”ä¾‹å–æœ€å¤§å€¼ )ï¼Œå°äºçš„å›¾ç‰‡ä¸åšå¤„ç†ã€‚&lt;ï¼šä¸ &gt; åŠŸèƒ½ç›¸åã€‚ æç¤ºï¼šå› ä¸ºæœ‰äº›å­—ç¬¦æ˜¯ Linux shell æˆ–å…¶ä»–ç³»ç»Ÿçš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰€ä»¥éœ€è¦ç”¨å¼•å·åŒ…è£¹èµ·æ¥æˆ–è€…ç”¨åæ–œçº¿ \\ è½¬ä¹‰ï¼Œå¦å¤–ï¼Œä¸åŒå¹³å°å¯èƒ½å¼•å·éƒ½æ˜¯æœ‰å·®å¼‚çš„ã€‚ 2ã€æ·»åŠ æ°´å°éœ€æ±‚ â‘  ï¼šç»™å›¾ç‰‡å±…ä¸­åŠ ä¸Šé€æ˜æ–‡æœ¬æ°´å°ã€‚ 12convert -draw 'text 0,0 \"JD.COM\"' -fill 'rgba(221, 34, 17, 0.25)' -pointsize 36 \\-font 'cochin.ttc' -gravity center joy.jpg watermark.jpg è§£é‡Šï¼š -drawï¼šç»˜å›¾é€‰é¡¹ï¼Œtext å£°æ˜ç»˜åˆ¶æ–‡æœ¬ï¼Œ 0,0 å£°æ˜æ–‡æœ¬è·ç¦»å›¾ç‰‡å·¦ä¸Šè§’çš„åç§»å€¼ï¼Œ JD.COM å£°æ˜ç»˜åˆ¶çš„æ–‡æœ¬ï¼Œæœ€å¥½ç”¨å¼•å·åŒ…è£¹èµ·æ¥ï¼Œé¿å…è¾“å…¥ç‰¹æ®Šå­—ç¬¦å¼•èµ·é”™è¯¯ã€‚ç»˜åˆ¶æ–‡æœ¬çš„æ ¼å¼ä¸º text x,y stringï¼Œå½“ç„¶è¿˜å¯ä»¥ç»˜åˆ¶å…¶ä»–ç±»å‹ï¼Œè¯¸å¦‚åœ† ( circle )ã€æŠ˜çº¿ ( polyline )ã€‚ -fillï¼šå¯¹æ–‡æœ¬å¡«å……é¢œè‰²ï¼Œè²Œä¼¼ ImageMagick å‘½ä»¤ä¸­å‰é¢çš„é€‰é¡¹æ˜¯ç”¨æ¥æ§åˆ¶åé¢çš„é€‰é¡¹çš„ï¼Œæ‰€ä»¥åº”è¯¥æŠŠè¿™æ ·çš„ä¿®é¥°é€‰é¡¹æ”¾åˆ° -draw å‰é¢æ¯”è¾ƒå¥½ï¼Œå¾ˆé‡è¦ï¼Œåé¢çš„æ¡ˆä¾‹å°±æ˜¯è¿™æ ·çš„ã€‚ -pointsizeï¼šæŒ‡å®šæ–‡æœ¬çš„å­—ä½“å¤§å°ã€‚ -fontï¼šæŒ‡å®šå­—ä½“ã€‚ -gravityï¼šè®¾ç½®æ–‡æœ¬åœ¨å›¾ç‰‡é‡Œçš„æ’åˆ—æ–¹å¼ ( ç±»ä¼¼ CSS é‡Œçš„ align-items + justify-content )ï¼Œcenter è¡¨ç¤ºæ°´å¹³å‚ç›´éƒ½å±…ä¸­ï¼Œå…¶ä»–å€¼è¿˜å¯ä»¥æ˜¯ï¼šNorthWest, North, NorthEast, West, East, SouthWest, South, SouthEastï¼Œä¸è®°å¤§å°å†™ã€‚ \\ï¼šåæ–œçº¿ä¹Ÿæ˜¯ç±» Unix ç³»ç»Ÿçš„ç»­è¡Œå­—ç¬¦ï¼Œå½“ä¸€ä¸ªå‘½ä»¤å¾ˆé•¿æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå†™æˆå¤šè¡Œï¼Œä»¥ä¾¿è§†è§‰ä¸Šçš„ç¾è§‚å’Œç›´è§‚ã€‚ éœ€æ±‚ â‘¡ ï¼šç»™å›¾ç‰‡åŠ ä¸Šå€¾æ–œå¹³é“ºé€æ˜æ–‡æœ¬æ°´å°ã€‚ 1234convert -size 100x100 xc:none \\-fill '#d90f02' -pointsize 18 -font 'cochin.ttc' \\-gravity center -draw 'rotate -45 text 0,0 \"JD.COM\"' \\-resize 60% miff:- | composite -tile -dissolve 25 - joy.jpg watermark.jpg è§£é‡Šï¼šæ–‡æœ¬å¹³é“ºæ°´å°å…¶å®æ˜¯å°†æ–‡æœ¬ç”»æˆä¸€å¼  png å›¾ç‰‡ï¼Œç„¶åç”¨è¿™å¼ é€æ˜å›¾ç‰‡åœ¨ç›®æ ‡å›¾ç‰‡ä¸Šè¿›è¡Œå¹³é“ºã€‚ -sizeï¼šè®¾ç½®ç”»å¸ƒçš„å¤§å°ã€‚ xc:ï¼šå…¨ç§° X Constant Imageï¼Œæ˜¯ canvas: çš„åˆ«åï¼Œå®šä¹‰ä¸€å¼ ç”»å¸ƒï¼Œç”¨æ¥ç»˜å›¾ï¼Œå¸¸ç”¨æ ¼å¼ä¸º xc:colorï¼Œnone æˆ–è€… transparent è®¾ç½®ç”»å¸ƒä¸ºé€æ˜åº•ï¼Œé»˜è®¤ä¸ºç™½è‰²ã€‚ -resizeï¼šè¯¥é€‰é¡¹è¿˜å¯ä»¥æŒ‡å®šç™¾åˆ†æ¯”ï¼Œæ„ä¸ºç¼©æ”¾è‡³åŸå›¾åƒçš„ç™¾åˆ†ä¹‹å‡ ã€‚è²Œä¼¼ -pointsize å°äº 14 åï¼Œ-draw é‡Œçš„ rotate ä¼šä¸ç”Ÿæ•ˆï¼Œæ‰€ä»¥ç”¨ -resize æ¥æŠŠå¹³é“ºå›¾æ¡ˆå˜å¾—æ›´å°ã€‚ miff:-ï¼š miff: å£°æ˜è¾“å‡º ImageMagick ( IM ) è‡ªå·±çš„å›¾åƒæ–‡ä»¶æ ¼å¼ï¼šMIFFï¼Œä¸»è¦ç”¨é€”æ˜¯ä»¥å¤æ‚çš„æ–¹å¼å¤„ç†å›¾åƒæ—¶å½“åšä¸­é—´ä¿å­˜æ ¼å¼ï¼Œé€‚ç”¨äºä»ä¸€ä¸ª IM å‘½ä»¤å‘å¦ä¸€ä¸ª IM å‘½ä»¤ä¼ é€’å›¾åƒå…ƒæ•°æ®å’Œå…¶ä»–å…³è”å±æ€§ã€‚ - åœ¨ç®¡é“ç¬¦å‰é¢æ„ä¸ºå°† IM å‘½ä»¤æ‰§è¡Œçš„ç»“æœä½œä¸ºæ ‡å‡†è¾“å‡ºï¼Œåœ¨ç®¡é“ç¬¦åé¢åˆ™è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–è¿™ä¸ªæ•°æ®ï¼Œå¦‚åœ¨ç®¡é“ç¬¦åé¢çš„ composite ä¸­ä½¿ç”¨ - è¯»å–åˆšåˆšç”Ÿæˆçš„é€æ˜å›¾åƒã€‚ |ï¼šLinux shell ç®¡é“ç¬¦ï¼Œç”¨äºå°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºä¼ é€’åˆ°ä¸‹ä¸€ä¸ªå‘½ä»¤ä½œä¸ºæ ‡å‡†è¾“å…¥ã€‚è¿™é‡Œå°†ç”Ÿæˆçš„æ°´å°å›¾æ¡ˆä¼ é€’ç»™ composite å‘½ä»¤ã€‚ -tileï¼šé¡¾åæ€ä¹‰ï¼Œè®©å›¾æ¡ˆå¹³é“ºã€‚ -dissolveï¼šè®¾ç½®å¹³é“ºå›¾æ¡ˆçš„é€æ˜åº¦ã€‚ å›¾é‡Šï¼š 3ã€ç»˜åˆ¶éªŒè¯ç å¤§æ¦‚é€»è¾‘å¦‚ä¸‹ï¼š éšæœºç”Ÿæˆ 4 ä¸ªè‹±æ–‡å­—æ¯æˆ–æ•°å­—ã€‚ åˆ›å»ºä¸€ä¸ªå®½é«˜ 100x40 çš„ç”»å¸ƒã€‚ è®¾ç½®å­—ä½“å¤§å°ä¸º 16ï¼Œæ¯ä¸ªå­—ç¬¦çš„å®½é«˜ä¹Ÿå°±æ˜¯ 16 å·¦å³äº†ï¼Œä¾æ¬¡è®¡ç®—å‡ºæ¯ä¸ªå­—ç¬¦çš„ x, y åæ ‡ï¼Œå†å¢åŠ ä¸€ä¸ç‚¹æ—‹è½¬ã€‚ éšæœºåˆ›å»ºä¸€æ¡é€æ˜æ›²çº¿ï¼ŒåŠ ä¸Šå™ªç‚¹ï¼Œå¢åŠ å›¾ç‰‡è¢«ç ´è§£çš„éš¾åº¦ï¼ˆåœ¨ä¿è¯è‚‰çœ¼èƒ½çœ‹å¾—æ¸…æ¥šçš„ç”¨æˆ·ä½“éªŒä¸‹ï¼‰ã€‚ å¦‚æœéœ€è¦å®‰å…¨æ€§æ›´é«˜çš„éªŒè¯ç ï¼Œè¯·äº†è§£éªŒè¯ç ç ´è§£åŸç†å¹¶åšåˆç†è°ƒæ•´ã€‚ å¦‚æœåŠ ä¸Šéšæœºè®¡ç®—ï¼Œå¯èƒ½ä»£ç ä¼šæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™é‡Œå†™æˆå›ºå®šå€¼ï¼Œæ–¹ä¾¿ç†è§£ã€‚ 1234567891011convert 'xc:[100x40!]' -pointsize 20 -font 'cochin.ttc' \\-gravity NorthWest -strokewidth 1 \\-fill '#b72b36' -stroke '#b72b36' -draw 'translate 13,19 rotate 10 text -5,-8 \"5\"' \\-fill '#821d70' -stroke '#821d70' -draw 'translate 36,13 rotate -8 text -8,-8 \"C\"' \\-fill '#c7960a' -stroke '#c7960a' -draw 'translate 60,23 rotate 5 text -5,-8 \"2\"' \\-fill '#03610a' -stroke '#03610a' -draw 'translate 85,25 rotate 13 text -8,-8 \"E\"' \\-strokewidth 2 -stroke 'rgba(248, 100, 30, 0.5)' -fill 'rgba(0, 0, 0, 0)' \\-draw 'bezier -20,30 -16,10 20,2 50,20' \\-draw 'bezier 50,20 78,42 138,36 140,16' \\+noise Impulse \\captcha.jpg ç»“æœï¼š é‰´äºå­—ä½“æ¯”è¾ƒç»†ï¼Œå¯ä»¥ç”¨ strokewidth åŠ è¾¹æ¡†æ¥åŠ ç²—ï¼Œæˆ–è€…ä½¿ç”¨å­—ä½“çš„ç²—ä½“ç‰ˆæœ¬ï¼Œè¿™é‡Œä½¿ç”¨äº†ç¬¬ä¸€ç§æ–¹å¼ã€‚ è§£é‡Šï¼š xc:[100x40!]ï¼šè®¾ç½®ç”»å¸ƒå¤§å°çš„ä¸€ç§ç®€å†™æ–¹å¼ï¼Œæ–¹æ‹¬å·é‡Œå†™å…¥ç”»å¸ƒå®½é«˜ï¼Œæ³¨æ„è¦åŠ  !ï¼Œå¦åˆ™ä¼šå‡ºä¹æ„æ–™å“Ÿã€‚ æ–‡æœ¬å®šä½ä¸æ—‹è½¬ ç”»å¸ƒå®½ 100pxï¼Œå¹³å‡åˆ†æˆ 4 åˆ†ï¼Œæ¯ä»½ 25px, æ–‡å­—å®½ 16px, å¾—æ–‡å­— x çš„åæ ‡å·¦å³æ‘†åŠ¨èŒƒå›´ä¸º +0px, +9pxï¼Œy åæ ‡åŒç†ï¼Œç”¨äºè®¾ç½® translate å€¼ã€‚ å®é™…ä¸Šå­—ä½“æœ¬èº«å¹¶æ²¡æœ‰å¡«å……æ»¡æ•´ä¸ª 16x16 çš„åŒºåŸŸï¼Œæ ¹æ®å­—ä½“çš„ä¸åŒï¼Œå¡«æ»¡çš„åŒºåŸŸå¯èƒ½å„æœ‰ä¸åŒï¼Œæ‰€ä»¥æ ¹æ®cochin å­—ä½“çš„ç‰¹æ€§ï¼Œä¸Šé¢ç¨å¾®å°†å­—ä½“å¤§å°è°ƒæ•´ä¸º 20ï¼Œå®é™…æ¸²æŸ“å‡ºæ¥çš„å­—æ¯æ‰æ˜¯ 16x16 å·¦å³å¤§å°ï¼Œæ•°å­—å¤§æ¦‚æ˜¯ 10x16ï¼Œæ‰€ä»¥è®¾ç½®æ•°å­—çš„ x,y ä¸º -5,-8ï¼Œç»“åˆä¸‹é¢ä¸¤ä¸ªå±æ€§è§£é‡Š x,y çš„è®¡ç®—æ–¹å¼ã€‚ translate: è®¾ç½®æ–‡æœ¬çš„æ¨ªçºµå‘åç§»å€¼ã€‚ rotateï¼šè®¾ç½®æ–‡æœ¬æ—‹è½¬ï¼Œå•ä½ degreesã€‚æ ¹æ® gravity çš„è®¾ç½®åæ ‡ç³»ç»Ÿæœ‰ä¸€ä¸ç‚¹å˜åŒ–ï¼Œæ‰€ä»¥è¯·è®¾ç½®ä¸º è¥¿åŒ—(NorthWest) ï¼Œè¡¨ç¤ºä»¥ç”»å¸ƒ 0,0 åæ ‡æ—‹è½¬ï¼Œè·Ÿ HTML 5 Canvas åæ ‡ç³»ç»Ÿä¸€è‡´ã€‚ æ ¹æ®è¿™æ ·çš„åæ ‡ç³»ç»Ÿï¼Œå¦‚æœè¦æ–‡å­—æŒ‰è‡ªèº«çš„ä¸­å¿ƒæ—‹è½¬ï¼Œå¾—é…åˆ translate å’Œ text çš„ x,y ä¸€èµ·ä½¿ç”¨ï¼ŒåŸç†å¯å‚è€ƒè¿™ç¯‡æ–‡ç« [å›¾åƒæ—‹è½¬çš„å®ç°]ï¼Œæ³¨æ„ translate ä¸ rotate çš„é¡ºåºã€‚ strokewidthï¼šè®¾ç½®æ–‡æœ¬çš„è¾¹æ¡†å®½åº¦æˆ–çº¿æ¡å®½åº¦ã€‚ strokeï¼šè®¾ç½®æ–‡æœ¬çš„è¾¹æ¡†é¢œè‰²æˆ–çº¿æ¡é¢œè‰²ã€‚ -fill &#39;rgba(0, 0, 0, 0)&#39;ï¼šä¸Šé¢è®¾ç½®äº†æ–‡æœ¬çš„å¡«å……é¢œè‰²ï¼Œä¼šå½±å“ä¸‹é¢çš„è´å¡å°”æ›²çº¿ï¼Œæ‰€ä»¥è¿™é‡ŒæŒ‡å®šä¸€ä¸ªé€æ˜çš„å¡«å……è‰²ä»¥è¦†ç›–ä¸Šé¢çš„è®¾å®šï¼Œä½¿æ›²çº¿æ²¡æœ‰å¡«å……ã€‚ bezierï¼šç»˜åˆ¶è´å¡å°”æ›²çº¿ï¼Œä¸€ä¸¤å¥è¯æˆ‘æ€•è§£é‡Šä¸æ¸…æ¥šï¼Œæ‰€ä»¥è¯·å¤§å®¶å‚è€ƒä¸€ä¸‹ç»´åŸºç™¾ç§‘çš„è§£é‡Šæˆ–è€…è¿™ç¯‡ä¸­æ–‡æ–‡ç« çš„è§£é‡Šï¼Œæœ€åå†å‚è€ƒä¸€ä¸‹ IM å®˜æ–¹ç¤ºä¾‹çš„æè¿°ã€‚ä¸Šé¢ä¸¤æ¡ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„åæ ‡åˆ†åˆ«è¡¨ç¤º èµ·å§‹ç‚¹ï¼Œèµ·å§‹ç‚¹çš„æ§åˆ¶ç‚¹ï¼Œç»“æŸç‚¹çš„æ§åˆ¶ç‚¹ï¼Œç»“æŸç‚¹ã€‚ +noiseï¼šå¢åŠ å™ªç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ convert -list noise æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ”¯æŒå“ªäº›ç®—æ³•çš„å™ªç‚¹ï¼Œå¤§æ¦‚æœ‰ Gaussian, Impulse, Laplacian, Multiplicative, Poisson, Random, Uniformã€‚ 4ã€å…‹éš†åŠæ‹¼åˆå›¾åƒ è¿™ä¸ªæ¡ˆä¾‹ä¸»è¦äº†è§£å‡ ä¸ªåŸºæœ¬æ“ä½œçš„ APIã€‚ 12345convert \\\\( -crop 300x300+10+25 joy.jpg \\) \\\\( -resize 400x400 -crop 300x300+50+0 logo: \\) -swap 0,1 +append \\\\( -clone 0 -flop -flip \\) -append \\-resize 200x200 combined.jpg ç»“æœå¦‚ä¸‹ï¼š è§£é‡Šï¼š åœ†æ‹¬å· \\( ... \\)ï¼šå›¾åƒå †æ ˆ ( image stack )ï¼Œç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹ä½œç”¨åŸŸå¤„ç†å›¾åƒï¼Œè¿™ä¸ªå¯ä»¥ä½¿å›¾åƒä¹‹å‰çš„å¤„ç†äº’ä¸å¹²æ‰°ã€‚åœ†æ‹¬å·éœ€ç”¨åæ–œæ è½¬ä¹‰ï¼Œæ‰èƒ½ä¸è¢« Shell å½“åšç‰¹æ®Šå­—ç¬¦å¤„ç†ï¼Œå¹¶ä¸”æ¯ä¸ªåœ†æ‹¬å·ä¸¤è¾¹éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ã€‚ä¸å¿…è¦çš„åœ†æ‹¬å·ä¼šä½¿ IM å¢åŠ å°‘è®¸é¢å¤–çš„å·¥ä½œï¼Œä½†æ˜¯å´è®©å‘½ä»¤æ›´æ¸…æ™°ä¸å®¹æ˜“å‡ºé”™ã€‚ -cropï¼šè£å‰ªå‡ºå›¾åƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªçŸ©å½¢åŒºåŸŸï¼Œæ ¼å¼ä¸º {size}{+-}x{+-}yï¼Œå¦‚æœä¸æŒ‡å®šåç§»å€¼ x,yï¼Œåˆ™ä¼šè¢«è§£é‡Šä¸ºæŒ‰æŒ‡å®šå®½é«˜åˆ‡å‰²å›¾åƒæˆå¤šå°‘ä»½ï¼ˆå¤šå›¾åƒï¼‰ã€‚ logo:ï¼šIM å†…ç½®å›¾åƒï¼Œè¿™ä¸ªå°±æ˜¯ä¸Šå›¾ä¸­æ‹¿ç€é­”æ³•æ£’çš„ä¸»äººå…¬äº†ï¼Œæœ¬èº«å®½é«˜ 640x480ï¼Œå…¶ä»–å†…ç½®å›¾åƒè¿˜æœ‰ï¼šrose:ï¼Œgranite:ç­‰ï¼Œçœ‹è¿™é‡Œã€‚ -swapï¼š äº¤æ¢å›¾åƒçš„ä½ç½®ï¼Œæ ¼å¼ -swap index,indexã€‚ IM åœ¨å›¾åƒå¤„ç†æ“ä½œæ—¶ï¼Œå®é™…ä¸Šå¾ˆå¯èƒ½æ˜¯åœ¨å¤„ç†ä¸€ä¸ªå›¾åƒåˆ—è¡¨ï¼Œå½“æ–°å›¾åƒè¢«è¯»å…¥æˆ–è€…åˆ›å»ºæ—¶ï¼ŒIM ä¼šå°†è¯¥æ–°å›¾åƒæ·»åŠ åˆ°å½“å‰å›¾åƒåˆ—è¡¨çš„æœ«å°¾ã€‚ å¦‚ä¸Šï¼Œæœ¬æ¥æˆ‘ä»¬çš„å›¾åƒåˆ—è¡¨é‡Œæœ‰ 2 å¼ å›¾ï¼Œç¬¬ä¸€å¼ æ˜¯ joyï¼Œä½†æ˜¯ -swap 0,1 çš„æ„æ€æ˜¯äº¤æ¢ç¬¬ä¸€å¼ å›¾ä¸ç¬¬äºŒå¼ å›¾çš„ä½ç½®ï¼Œæ‰€ä»¥ joy å˜æˆè·‘åˆ°åé¢äº†ã€‚ +appendï¼šæ°´å¹³è¿æ¥å½“å‰å›¾åƒåˆ—è¡¨çš„å›¾åƒæ¥åˆ›å»ºå•ä¸ªè¾ƒé•¿çš„å›¾åƒã€‚ -appendï¼šå‚ç›´è¿æ¥å½“å‰å›¾åƒåˆ—è¡¨çš„å›¾åƒæ¥åˆ›å»ºå•ä¸ªè¾ƒé•¿çš„å›¾åƒã€‚ -cloneï¼šå…‹éš†å›¾åƒï¼Œæ ¼å¼ä¸º -clone {index_range_list}ã€‚ -clone 0ï¼šè¡¨ç¤ºå…‹éš†å›¾åƒåˆ—è¡¨é‡Œçš„ç¬¬ä¸€å¼ å›¾åƒã€‚ -clone 1-2ï¼šè¡¨ç¤ºå…‹éš†å›¾åƒåˆ—è¡¨é‡Œçš„ç¬¬äºŒå¼ åˆ°ç¬¬ä¸‰å¼ å›¾åƒã€‚ -clone 0--1ï¼š0 è¡¨ç¤ºç¬¬ä¸€å¼ å›¾åƒï¼Œ-1 è¡¨ç¤ºæœ€åä¸€å¼ å›¾åƒï¼Œæ‰€ä»¥æ•´å¥å‘½ä»¤åˆ™è¡¨ç¤ºå…‹éš†æ•´ä¸ªå›¾åƒåˆ—è¡¨ã€‚ -clone 2,0,1ï¼šè¡¨ç¤ºå…‹éš†ç¬¬ä¸‰å¼ ï¼Œç¬¬ä¸€å¼ ï¼Œç¬¬äºŒå¼ å›¾åƒï¼Œé¡ºåºæ ¹æ®æŒ‡å®šçš„ç´¢å¼•å†³å®šï¼Œç”¨é€—å·åˆ†éš”ã€‚ -flopï¼šå°†å›¾åƒæ°´å¹³ç¿»è½¬ã€‚ -flipï¼šå°†å›¾åƒå‚ç›´ç¿»è½¬ã€‚ ç¬”è®°ï¼š é€‰é¡¹ä¹‹é—´çš„é¡ºåºå¾ˆé‡è¦ã€‚ ä¸ -clone é›·åŒçš„é€‰é¡¹è¿˜æœ‰è¯¸å¦‚ï¼š-delete, -insert, -reverse, -duplicateï¼Œç”¨äºæ“ä½œå›¾åƒåˆ—è¡¨ï¼ŒåŠŸèƒ½ä¸å•è¯æ„æ€ç›¸åŒã€‚ 5ã€GIF ä¸å›¾ç‰‡äº’è½¬5.1ã€GIF è½¬å›¾ç‰‡1convert -coalesce rain.gif frame.jpg -coalesceï¼šæ ¹æ®å›¾åƒ -dispose å…ƒæ•°æ®çš„è®¾ç½®è¦†ç›–å›¾åƒåºåˆ—ä¸­çš„æ¯ä¸ªå›¾åƒï¼Œä»¥é‡ç°åŠ¨ç”»åºåˆ—ä¸­æ¯ä¸ªç‚¹çš„åŠ¨ç”»æ•ˆæœã€‚ä¸‹é¢ç”¨ä¸€å¼ ç»“æœå¯¹æ¯”å›¾æ¥è§£é‡Šè¿™å¥è¯ã€‚ åŸå§‹å›¾ ( rain.gif ) ï¼š ç»“æœå¯¹æ¯”ï¼š 5.2ã€å®šä¹‰è¾“å‡ºæ–‡ä»¶åä¸Šé¢é»˜è®¤è¾“å‡ºçš„æ–‡ä»¶åä¸ºï¼šframe-0.jpg, frame-1.jpg, frame-2.jpg ...ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºç¬¦å·ï¼Œè¾“å‡ºä¸º frame_0.jpg, frame_1.jpg, frame_2.jpg ...ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹è®¾ç½®ã€‚ 1convert -coalesce rain.gif frame_%d.jpg æˆ–è€… 1convert -coalesce -set filename:n '%p' rain.gif 'frame_%[filename:n].jpg' è§£é‡Šï¼š ç¬¬ä¸€ç§æ–¹å¼ %d æ˜¯ C è¯­è¨€ printf() ä¸­è¡¨ç¤ºè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œå‚è€ƒ -adjoin é€‰é¡¹ã€‚ ç¬¬äºŒç§ä¸ºå¸¸è§„æ–¹å¼ã€‚ -setï¼šè®¾ç½®å›¾åƒå±æ€§ï¼Œæ ¼å¼ä¸º -set key value filename:n &#39;%p&#39;ï¼šä»¥ filename: å¼€å¤´çš„ key ç”¨äºè®¾ç½®è¾“å‡ºæ–‡ä»¶åçš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚è¿™é‡Œä½¿ç”¨ filename:nï¼Œåœ¨è¾“å‡ºæ–‡ä»¶åæ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ %[filename:n] æ‹¿åˆ°åˆšåˆšçš„è®¾ç½®ï¼Œè€Œè®¾ç½®çš„å†…å®¹åˆ™æ˜¯ &#39;%p&#39;ã€‚&#39;%p&#39; è¡¨ç¤ºå›¾åƒåœ¨å›¾åƒåˆ—è¡¨ä¸­çš„ç´¢å¼•å€¼ï¼Œæ›´å¤šç™¾åˆ†æ¯”é€‰é¡¹ ( Percent Escapes ) å‚è€ƒã€‚ 5.3ã€è§£æç‰¹å®šå¸§å¦‚æœåªæƒ³æ‹¿åˆ° GIF çš„ç¬¬ä¸€å¸§ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ã€‚ 1convert -coalesce 'rain.gif[0]' first_frame.jpg æ‹¿åˆ°æŸäº›å¸§ï¼Œå¦‚åŒ -clone çš„å†™æ³•ã€‚ 1convert -coalesce 'rain.gif[0-2]' some_frames_%d.jpg 5.4ã€è·å–é¡µæ•°é€šè¿‡ identify å‘½ä»¤æˆ‘ä»¬å¯ä»¥ç®€è¦å¾—åˆ°æ–‡ä»¶çš„ä¿¡æ¯ï¼Œå¦‚ä¸‹ã€‚1identify rain.gif é€šè¿‡æ¢è¡Œç¬¦åˆ†å‰²ï¼Œç®€å•å°è£…ä¸€ä¸ª Node.js å‡½æ•°è·å–é¡µæ•°ã€‚ 123456789101112// parser.jsconst util = require('util')const exec = util.promisify(require('child_process').exec)exports.numberOfPages = async (filePath) =&gt; &#123; try &#123; const &#123; stdout &#125; = await exec(`identify '$&#123;filePath&#125;'`) return stdout.trim().split('\\n').length &#125; catch (err) &#123; throw new Error(err) &#125;&#125; 1234567// main.jsconst &#123; numberOfPages &#125; = require('./parser');(async function start () &#123; const pages = await numberOfPages('rain.gif') console.log('pages:', pages)&#125;()) 5.5ã€å›¾ç‰‡è½¬ GIF1convert -loop 0 'frame-*.jpg' rain_animation.gif å°†æ‰€æœ‰ä¸ frame-*.jpg æ¨¡å¼åŒ¹é…çš„å›¾åƒè½¬æ¢æˆä¸€å¼  GIF å›¾åƒï¼Œå¦‚ frame-0.jpgï¼Œframe-1.jpgç­‰ã€‚-loop è®¾ç½®åŠ¨ç”»å¾ªç¯æ¬¡æ•°ï¼Œ0 è¡¨ç¤ºæ— é™å¾ªç¯ã€‚è®¾ç½®æ¯å¼ å›¾åƒçš„æ’­æ”¾é€Ÿåº¦å¯ä»¥ä½¿ç”¨ -delay é€‰é¡¹ã€‚ ç¬”è®°ï¼š åœ¨ IM è¯»å–ç³»åˆ—æ–‡ä»¶æ—¶ï¼Œframe-10.jpg ä¼šæ’åœ¨ frame-2.jpg å‰é¢ï¼Œä¸ºè·å¾—å›¾åƒæ­£ç¡®çš„è¯»å–é¡ºåºï¼Œå¯ä»¥ä¸ºæ–‡ä»¶åè®¾ç½®å‰å¯¼é›¶ ( leading zeros )ã€‚å¦‚ï¼šframe-000.jpg, frame-001.jpg, frame-002.jpg ... frame-010.jpgã€‚ æ‰€ä»¥åœ¨ç”Ÿæˆå›¾åƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ %03d è·å¾—ä¸‰ä½å‰å¯¼é›¶ã€‚1convert -coalesce rain.gif frame-%03d.jpg 6ã€PDF ä¸å›¾ç‰‡äº’è½¬PDF ä¸å›¾ç‰‡äº’è½¬è·Ÿ GIF å¾ˆç›¸ä¼¼ï¼Œç¨å¾®æœ‰äº›æ ¼å¼è‡ªèº«éœ€è¦æ³¨æ„çš„åŒºåˆ«ã€‚IM æœ¬èº«æ˜¯ä¸å…·å¤‡è§£æ PDF çš„åŠŸèƒ½çš„ï¼Œéœ€è¦ä¾èµ–ä¸“é—¨è§£æè¿™ç§æ ¼å¼çš„å¤–éƒ¨ç¨‹åºï¼Œå¦‚å®˜æ–¹æŒ‡æ˜çš„ ghostscript è§£æç¨‹åºã€‚é¦–å…ˆå®‰è£… gsï¼Œè¿˜æ˜¯æ¼”ç¤º Mac OS å®‰è£…ï¼šbrew install ghostscriptã€‚ ä»¥ è¿™ä¸ªPDF ä¸ºä¾‹ï¼ŒæŠŠå®ƒè½¬æ¢æˆå›¾ç‰‡ï¼Œæœ‰ä¸¤ç§æ–¹å¼è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœ:1â‘  convert -density 150 -flatten 'download.pdf[0]' first_page.jpg 1â‘¡ convert -density 150 -background white -alpha remove download.pdf download.jpg è§£é‡Šï¼š å½“è½¬æ¢ PDF æˆ JPG æ ¼å¼å›¾åƒæ—¶ï¼ŒæŸäº›æƒ…å†µå¾—åˆ°çš„ JPG å›¾ç‰‡ä¼šå‡ºç°é»‘è‰²èƒŒæ™¯ï¼ˆè½¬æ¢æˆ PNG ä¸ä¼šï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ -flatten é€‰é¡¹è®©å…¶ä¿æŒç™½è‰²èƒŒæ™¯ï¼Œä½†åŠ ä¸Šè¿™ä¸ªé€‰é¡¹ï¼Œå¤šé¡µ PDF ä¸ä¼šåˆ†æˆå¤šä¸ª JPG å›¾åƒï¼Œç¬¬äºŒç§æ–¹å¼ -background white -alpha remove åˆ™å¯ä»¥ä¸€æ¬¡å‘½ä»¤è½¬æ¢å¤šé¡µ PDF æˆå¤šä¸ªå›¾åƒå¹¶ä¿æŒç™½è‰²èƒŒæ™¯ã€‚ ç¬¬äºŒç§æ–¹å¼ IM å†…éƒ¨åº”è¯¥æ˜¯ä¸€é¡µä¸€é¡µçš„è½¬æ¢ï¼Œæ‰€ä»¥ä¸€ä¸ª 10 é¡µçš„ PDF è€—æ—¶ä¼šæ¯”è¾ƒä¹…ï¼Œé‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼è®© Node.js å¤šè¿›ç¨‹åŒæ—¶è½¬æ¢è¯¥ PDF å¯ä»¥æå‡é€Ÿç‡ã€‚ -densityï¼šæŒ‡å®šè¾“å‡ºå›¾åƒçš„åˆ†è¾¨ç‡ ( DPI )ï¼Œåœ¨ Mac OS ä¸Šï¼Œé»˜è®¤çš„åˆ†è¾¨ç‡ ( 72 ) è¾“å‡ºçš„å›¾åƒå­—è¿¹ä¸æ¸…ï¼Œéœ€è¦æ›´é«˜åˆ†è¾¨ç‡è·å¾—æ¸…æ™°çš„å›¾åƒã€‚ åœ¨ Node.js ä¸­åº”ç”¨ ç›´æ¥é€šè¿‡ child_process æ¨¡å—æ‰§è¡Œç›¸åº”çš„å‘½ä»¤å³å¯ï¼Œå¦‚ä¸‹ã€‚ åªéœ€è¦ç»“æœå¯ä»¥ä½¿ç”¨ execï¼Œ1234567891011const util = require('util')const exec = util.promisify(require('child_process').exec);(async function start () &#123; try &#123; await exec(`convert -resize '150x100!' -strip goods.jpg thumbnail.jpg`) console.log('convert completed.') &#125; catch (err) &#123; console.log('convert failed.', err) &#125;&#125;()) æµå¼è¾“å…¥è¾“å‡ºå¯ä»¥ä½¿ç”¨ spawnï¼Œ1234567891011121314const cp = require('child_process')const fs = require('fs')const args = [ '-', // ä½¿ç”¨æ ‡å‡†è¾“å…¥ '-resize', '150x100!', '-strip', 'jpg:-', // è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º]const streamIn = fs.createReadStream('/path/to/goods.jpg')const proc = cp.spawn('convert', args)streamIn.pipe(proc.stdin)proc.stdout.pipe(HttpResponse)","pubDate":"Wed, 06 Jun 2018 12:30:35 GMT","guid":"https://aotu.io/notes/2018/06/06/ImageMagick_intro/","category":"Webå¼€å‘"},{"title":"Nervå®æˆ˜ - äº¬ä¸œé¦–é¡µæ”¹ç‰ˆå°ç»“","link":"https://aotu.io/notes/2018/04/24/jdindex_2017/","description":".post strong { font-weight: bold; }","pubDate":"Tue, 24 Apr 2018 12:10:00 GMT","guid":"https://aotu.io/notes/2018/04/24/jdindex_2017/","category":"é¡¹ç›®æ€»ç»“"}]}